!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=150)}([function(t,e,n){"use strict";function i(t){return isNaN(t=+t)?0:(t>0?g:d)(t)}function r(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function s(t,e,n){return t[e]=n,t}function a(t){return y?function(e,n,i){return x.setDesc(e,n,r(t,i))}:s}function o(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function c(t){return"function"==typeof t}function u(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}var h="undefined"!=typeof self?self:Function("return this")(),l={},p=Object.defineProperty,f={}.hasOwnProperty,d=Math.ceil,g=Math.floor,m=Math.max,v=Math.min,y=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(t){}}(),_=a(1),x=t.exports=n(55)({g:h,core:l,html:h.document&&document.documentElement,isObject:o,isFunction:c,that:function(){return this},toInteger:i,toLength:function(t){return t>0?v(i(t),9007199254740991):0},toIndex:function(t,e){return t=i(t),t<0?m(t+e,0):v(t,e)},has:function(t,e){return f.call(t,e)},create:Object.create,getProto:Object.getPrototypeOf,DESC:y,desc:r,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:u,ES5Object:Object,toObject:function(t){return x.ES5Object(u(t))},hide:_,def:a(0),set:h.Symbol?s:_,each:[].forEach});"undefined"!=typeof __e&&(__e=l),"undefined"!=typeof __g&&(__g=h)},function(t,e,n){function i(t,e){return function(){return t.apply(e,arguments)}}function r(t,e,n){var h,l,p,f,d=t&r.G,g=t&r.P,m=d?a:t&r.S?a[e]:(a[e]||{}).prototype,v=d?o:o[e]||(o[e]={});d&&(n=e);for(h in n)l=!(t&r.F)&&m&&h in m,p=(l?m:n)[h],f=t&r.B&&l?i(p,a):g&&c(p)?i(Function.call,p):p,m&&!l&&u(m,h,p),v[h]!=p&&s.hide(v,h,f),g&&((v.prototype||(v.prototype={}))[h]=p)}var s=n(0),a=s.g,o=s.core,c=s.isFunction,u=n(8);a.core=o,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},function(t,e,n){function i(t,e,n){if(!t)throw TypeError(n?e+n:e)}var r=n(0);i.def=r.assertDefined,i.fn=function(t){if(!r.isFunction(t))throw TypeError(t+" is not a function!");return t},i.obj=function(t){if(!r.isObject(t))throw TypeError(t+" is not an object!");return t},i.inst=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t},t.exports=i},function(t,e,n){function i(t){return a.call(t).slice(8,-1)}var r=n(0),s=n(6)("toStringTag"),a={}.toString;i.classof=function(t){var e,n;return void 0==t?void 0===t?"Undefined":"Null":"string"==typeof(n=(e=Object(t))[s])?n:i(e)},i.set=function(t,e,n){t&&!r.has(t=n?t:t.prototype,s)&&r.hide(t,s,e)},t.exports=i},function(t,e,n){function i(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+Math.random()).toString(36))}var r=0;i.safe=n(0).g.Symbol||i,t.exports=i},function(t,e,n){"use strict";function i(t,e){r.hide(t,u,e),h in[]&&r.hide(t,h,e)}var r=n(0),s=n(3),a=s.classof,o=n(2),c=o.obj,u=n(6)("iterator"),h="@@iterator",l=n(26)("iterators"),p={};i(p,r.that),t.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:l,step:function(t,e){return{value:e,done:!!t}},is:function(t){var e=Object(t),n=r.g.Symbol;return(n&&n.iterator||h)in e||u in e||r.has(l,a(e))},get:function(t){var e,n=r.g.Symbol;return void 0!=t&&(e=t[n&&n.iterator||h]||t[u]||l[a(t)]),o(r.isFunction(e),t," is not iterable!"),c(e.call(t))},set:i,create:function(t,e,n,i){t.prototype=r.create(i||p,{next:r.desc(1,n)}),s.set(t,e+" Iterator")}}},function(t,e,n){var i=n(0).g,r=n(26)("wks");t.exports=function(t){return r[t]||(r[t]=i.Symbol&&i.Symbol[t]||n(4).safe("Symbol."+t))}},function(t,e,n){var i=n(2).fn;t.exports=function(t,e,n){if(i(t),~n&&void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){function i(t,e,n,i){if(r.isFunction(n)){var o=t[e];r.hide(n,a,o?String(o):s.replace(/hasOwnProperty/,String(e))),"name"in n||(n.name=e)}t===r.g?t[e]=n:(i||delete t[e],r.hide(t,e,n))}var r=n(0),s=String({}.hasOwnProperty),a=n(4).safe("src"),o=Function.toString;i(Function.prototype,"toString",function(){return r.has(this,a)?this[a]:o.call(this)}),r.core.inspectSource=function(t){return o.call(t)},t.exports=i},function(t,e,n){var i=n(7),r=n(5).get,s=n(21);t.exports=function(t,e,n,a){for(var o,c=r(t),u=i(n,a,e?2:1);!(o=c.next()).done;)if(!1===s(c,u,o.value,e))return s.close(c)}},function(t,e,n){var i=n(6)("unscopables");i in[]||n(0).hide(Array.prototype,i,{}),t.exports=function(t){[][i][t]=!0}},function(t,e,n){n(116),n(60),n(63),n(56),n(59),n(61),n(67),n(57),n(65),n(66),n(68),n(58),n(62),n(64),t.exports=n(0).core},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3]);case 5:return i?t(e[0],e[1],e[2],e[3],e[4]):t.call(n,e[0],e[1],e[2],e[3],e[4])}return t.apply(n,e)}},function(t,e,n){var i=n(8);t.exports=function(t,e){for(var n in e)i(t,n,e[n]);return t}},function(t,e,n){var i=n(0),r=n(7);t.exports=function(t){var e=1==t,n=2==t,s=3==t,a=4==t,o=6==t,c=5==t||o;return function(u,h,l){for(var p,f,d=Object(i.assertDefined(u)),g=i.ES5Object(d),m=r(h,l,3),v=i.toLength(g.length),y=0,_=e?Array(v):n?[]:void 0;v>y;y++)if((c||y in g)&&(p=g[y],f=m(p,y,d),t))if(e)_[y]=f;else if(f)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:_.push(p)}else if(a)return!1;return o?-1:s||a?a:_}}},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(5).BUGGY,a=n(9),o=n(18),c=n(2).inst;t.exports=function(t,e,u,h,l,p){function f(t){var e=v[t];n(8)(v,t,"delete"==t?function(t){return e.call(this,0===t?0:t)}:"has"==t?function(t){return e.call(this,0===t?0:t)}:"get"==t?function(t){return e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})}var d=i.g[t],g=d,m=l?"set":"add",v=g&&g.prototype,y={};if(i.isFunction(g)&&(p||!s&&v.forEach&&v.entries)){var _,x=new g,b=x[m](p?{}:-0,1);n(22)(function(t){new g(t)})||(g=e(function(e,n){c(e,g,t);var i=new d;return void 0!=n&&a(n,l,i[m],i),i}),g.prototype=v,v.constructor=g),p||x.forEach(function(t,e){_=1/e==-1/0}),_&&(f("delete"),f("has"),l&&f("get")),(_||b!==x)&&f(m)}else g=h.getConstructor(e,t,l,m),n(13)(g.prototype,u);return n(3).set(g,t),y[t]=g,r(r.G+r.W+r.F*(g!=d),y),o(g),o(i.core[t]),p||h.setIter(g,t,l),g}},function(t,e,n){var i=n(1),r=n(8),s=n(0),a=n(3),o=n(5),c=n(6)("iterator"),u="keys",h="values",l=o.Iterators;t.exports=function(t,e,n,p,f,d,g){function m(t){function e(e){return new n(e,t)}switch(t){case u:case h:return function(){return e(this)}}return function(){return e(this)}}o.create(n,e,p);var v,y,_=e+" Iterator",x=t.prototype,b=x[c]||x["@@iterator"]||f&&x[f],w=b||m(f);if(b){var E=s.getProto(w.call(new t));a.set(E,_,!0),s.FW&&s.has(x,"@@iterator")&&o.set(E,s.that)}if((s.FW||g)&&o.set(x,w),l[e]=w,l[_]=s.that,f)if(v={keys:d?w:m(u),values:f==h?w:m(h),entries:f!=h?w:m("entries")},g)for(y in v)y in x||r(x,y,v[y]);else i(i.P+i.F*o.BUGGY,e,v)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(n?e:this).replace(t,i)}}},function(t,e,n){var i=n(0),r=n(6)("species");t.exports=function(t){!i.DESC||r in t||i.setDesc(t,r,{configurable:!0,get:i.that})}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(53);e.Origin=i.Origin;var r=n(31);e.Metadata=r.Metadata;var s=n(52);e.Decorators=s.Decorators},function(t,e,n){var i=n(0),r=n(37);t.exports=Object.assign||function(t,e){for(var n=Object(i.assertDefined(t)),s=arguments.length,a=1;s>a;)for(var o,c=i.ES5Object(arguments[a++]),u=r(c),h=u.length,l=0;h>l;)n[o=u[l++]]=c[o];return n}},function(t,e,n){function i(t){var e=t.return;void 0!==e&&s(e.call(t))}function r(t,e,n,r){try{return r?e(s(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}var s=n(2).obj;r.close=i,t.exports=r},function(t,e,n){var i=n(6)("iterator"),r=!1;try{var s=[7][i]();s.return=function(){r=!0},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t){if(!r)return!1;var e=!1;try{var n=[7],s=n[i]();s.next=function(){e=!0},n[i]=function(){return s},t(n)}catch(t){}return e}},function(t,e,n){var i=n(0),r=n(2).obj;t.exports=function(t){r(t);var e=i.getNames(t),n=i.getSymbols;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var i=n(0),r=n(12),s=n(2).fn;t.exports=function(){for(var t=s(this),e=arguments.length,n=Array(e),a=0,o=i.path._,c=!1;e>a;)(n[a]=arguments[a++])===o&&(c=!0);return function(){var i,s=this,a=arguments.length,u=0,h=0;if(!c&&!a)return r(t,n,s);if(i=n.slice(),c)for(;e>u;u++)i[u]===o&&(i[u]=arguments[h++]);for(;a>h;)i.push(arguments[h++]);return r(t,i,s)}}},function(t,e,n){function i(t,e){s.obj(t),s(null===e||r.isObject(e),e,": can't set as prototype!")}var r=n(0),s=n(2);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e){try{e=n(7)(Function.call,r.getDesc(Object.prototype,"__proto__").set,2),e({},[])}catch(e){t=!0}return function(n,r){return i(n,r),t?n.__proto__=r:e(n,r),n}}():void 0),check:i}},function(t,e,n){var i=n(0),r=i.g["__core-js_shared__"]||(i.g["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,n){var i=n(0);t.exports=function(t){return function(e,n){var r,s,a=String(i.assertDefined(e)),o=i.toInteger(n),c=a.length;return o<0||o>=c?t?"":void 0:(r=a.charCodeAt(o),r<55296||r>56319||o+1===c||(s=a.charCodeAt(o+1))<56320||s>57343?t?a.charAt(o):r:t?a.slice(o,o+2):s-56320+(r-55296<<10)+65536)}}},function(t,e){t.exports=function(t){try{return t(),!1}catch(t){return!0}}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.__esModule=!0;var a=n(11),o=(function(t){t&&t.__esModule}(a),function(){function t(e){s(this,t),this.key=e}return t.prototype.register=function(t,e,n){t.registerTransient(this.key||e,n)},t}());e.TransientRegistration=o;var c=function(){function t(e){var n=void 0!==arguments[1]&&arguments[1];s(this,t),"boolean"==typeof e?this.registerInChild=e:(this.key=e,this.registerInChild=n)}return t.prototype.register=function(t,e,n){(this.registerInChild?t:t.root).registerSingleton(this.key||e,n)},t}();e.SingletonRegistration=c;var u=function(){function t(){s(this,t)}return t.prototype.get=function(t){throw new Error("A custom Resolver must implement get(container) and return the resolved instance(s).")},t}();e.Resolver=u;var h=function(t){function e(n){s(this,e),t.call(this),this.key=n}return r(e,t),e.prototype.get=function(t){var e=this;return function(){return t.get(e.key)}},e.of=function(t){return new e(t)},e}(u);e.Lazy=h;var l=function(t){function e(n){s(this,e),t.call(this),this.key=n}return r(e,t),e.prototype.get=function(t){return t.getAll(this.key)},e.of=function(t){return new e(t)},e}(u);e.All=l;var p=function(t){function e(n){var i=void 0!==arguments[1]&&arguments[1];s(this,e),t.call(this),this.key=n,this.checkParent=i}return r(e,t),e.prototype.get=function(t){return t.hasHandler(this.key,this.checkParent)?t.get(this.key):null},e.of=function(t){return new e(t,void 0!==arguments[1]&&arguments[1])},e}(u);e.Optional=p;var f=function(t){function e(n){s(this,e),t.call(this),this.key=n}return r(e,t),e.prototype.get=function(t){return t.parent?t.parent.get(this.key):null},e.of=function(t){return new e(t)},e}(u);e.Parent=f;var d=function(){function t(){s(this,t)}return t.prototype.invoke=function(t,e){return Reflect.construct(t,e)},i(t,null,[{key:"instance",value:new t,enumerable:!0}]),t}();e.ClassActivator=d;var g=function(){function t(){s(this,t)}return t.prototype.invoke=function(t,e){return t.apply(void 0,e)},i(t,null,[{key:"instance",value:new t,enumerable:!0}]),t}();e.FactoryActivator=g},function(t,e,n){"use strict";function i(t){var e;if(e="function"==typeof t.decorators?t.decorators():t.decorators,"function"!=typeof e._decorate)throw new Error("The return value of your decorator's method was not valid.");delete t.decorators,e._decorate(t)}e.__esModule=!0;var r=n(54),s=(function(t){t&&t.__esModule}(r),{resource:"aurelia:resource",paramTypes:"design:paramtypes",properties:"design:properties",get:function(t,e,n){if(e){var i=s.getOwn(t,e,n);return void 0===i?s.get(t,Object.getPrototypeOf(e),n):i}},getOwn:function(t,e,n){if(e)return e.hasOwnProperty("decorators")&&i(e),Reflect.getOwnMetadata(t,e,n)},getOrCreateOwn:function(t,e,n,i){var r=s.getOwn(t,n,i);return void 0===r&&(r=new e,Reflect.defineMetadata(t,r,n,i)),r}});e.Metadata=s},function(t,e,n){var i=n(0);t.exports=function(t){return function(e,n,r){var s,a=i.toObject(e),o=i.toLength(a.length),c=i.toIndex(r,o);if(t&&n!=n){for(;o>c;)if((s=a[c++])!=s)return!0}else for(;o>c;c++)if((t||c in a)&&a[c]===n)return t||c;return!t&&-1}}},function(t,e,n){"use strict";function i(t,e){if(!f(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,m)){if(!g(t))return"F";if(!e)return"E";d(t,m,++w)}return"O"+t[m]}function r(t,e){var n,r=i(e);if("F"!==r)return t[v][r];for(n=t[_];n;n=n.n)if(n.k==e)return n}var s=n(0),a=n(7),o=n(4).safe,c=n(2),u=n(9),h=n(5).step,l=s.has,p=s.set,f=s.isObject,d=s.hide,g=Object.isExtensible||f,m=o("id"),v=o("O1"),y=o("last"),_=o("first"),x=o("iter"),b=s.DESC?o("size"):"size",w=0;t.exports={getConstructor:function(t,e,i,o){var h=t(function(t,n){c.inst(t,h,e),p(t,v,s.create(null)),p(t,b,0),p(t,y,void 0),p(t,_,void 0),void 0!=n&&u(n,i,t[o],t)});return n(13)(h.prototype,{clear:function(){for(var t=this,e=t[v],n=t[_];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t[_]=t[y]=void 0,t[b]=0},delete:function(t){var e=this,n=r(e,t);if(n){var i=n.n,s=n.p;delete e[v][n.i],n.r=!0,s&&(s.n=i),i&&(i.p=s),e[_]==n&&(e[_]=i),e[y]==n&&(e[y]=s),e[b]--}return!!n},forEach:function(t){for(var e,n=a(t,arguments[1],3);e=e?e.n:this[_];)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!r(this,t)}}),s.DESC&&s.setDesc(h.prototype,"size",{get:function(){return c.def(this[b])}}),h},def:function(t,e,n){var s,a,o=r(t,e);return o?o.v=n:(t[y]=o={i:a=i(e,!0),k:e,v:n,p:s=t[y],n:void 0,r:!1},t[_]||(t[_]=o),s&&(s.n=o),t[b]++,"F"!==a&&(t[v][a]=o)),t},getEntry:r,setIter:function(t,e,i){n(16)(t,e,function(t,e){p(this,x,{o:t,k:e})},function(){for(var t=this[x],e=t.k,n=t.l;n&&n.r;)n=n.p;return t.o&&(t.l=n=n?n.n:t.o[_])?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t.o=void 0,h(1))},i?"entries":"values",!i,!0)}}},function(t,e,n){var i=n(1),r=n(9);t.exports=function(t){i(i.P,t,{toJSON:function(){var t=[];return r(this,!1,t.push,t),t}})}},function(t,e,n){"use strict";function i(t,e){return y(t.array,function(t){return t[0]===e})}function r(t){return t[m]||l(t,m,{array:[],get:function(t){var e=i(this,t);if(e)return e[1]},has:function(t){return!!i(this,t)},set:function(t,e){var n=i(this,t);n?n[1]=e:this.array.push([t,e])},delete:function(t){var e=_(this.array,function(e){return e[0]===t});return~e&&this.array.splice(e,1),!!~e}})[m]}var s=n(0),a=n(4).safe,o=n(2),c=n(9),u=s.has,h=s.isObject,l=s.hide,p=Object.isExtensible||h,f=0,d=a("id"),g=a("weak"),m=a("leak"),v=n(14),y=v(5),_=v(6);t.exports={getConstructor:function(t,e,i,a){var l=t(function(t,n){s.set(o.inst(t,l,e),d,f++),void 0!=n&&c(n,i,t[a],t)});return n(13)(l.prototype,{delete:function(t){return!!h(t)&&(p(t)?u(t,g)&&u(t[g],this[d])&&delete t[g][this[d]]:r(this).delete(t))},has:function(t){return!!h(t)&&(p(t)?u(t,g)&&u(t[g],this[d]):r(this).has(t))}}),l},def:function(t,e,n){return p(o.obj(e))?(u(e,g)||l(e,g,{}),e[g][t[d]]=n):r(t).set(e,n),t},leakStore:r,WEAK:g,ID:d}},function(t,e,n){var i=n(0),r=i.g.document,s=i.isObject,a=s(r)&&s(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,n){var i=n(0);t.exports=function(t){var e=i.getKeys(t),n=i.getDesc,r=i.getSymbols;return r&&i.each.call(r(t),function(i){n(t,i).enumerable&&e.push(i)}),e}},function(t,e,n){function i(t){try{return a(t)}catch(t){return o.slice()}}var r=n(0),s={}.toString,a=r.getNames,o="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(t){return o&&"[object Window]"==s.call(t)?i(t):a(r.toObject(t))}},function(t,e,n){var i=n(0);t.exports=function(t,e){for(var n,r=i.toObject(t),s=i.getKeys(r),a=s.length,o=0;a>o;)if(r[n=s[o++]]===e)return n}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(0),r=n(42);t.exports=function(t,e,n,s){var a=String(i.assertDefined(t));if(void 0===e)return a;var o=i.toInteger(e),c=o-a.length;if(c<0||c===1/0)throw new RangeError("Cannot satisfy string length "+e+" for string: "+a);var u=void 0===n?" ":String(n),h=r.call(u,Math.ceil(c/u.length));return h.length>c&&(h=s?h.slice(h.length-c):h.slice(0,c)),s?h.concat(a):a.concat(h)}},function(t,e,n){"use strict";var i=n(0);t.exports=function(t){var e=String(i.assertDefined(this)),n="",r=i.toInteger(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e,n){"use strict";function i(){var t=+this;if(c.has(b,t)){var e=b[t];delete b[t],e()}}function r(t){i.call(t.data)}var s,a,o,c=n(0),u=n(7),h=n(3),l=n(12),p=n(36),f=c.g,d=c.isFunction,g=c.html,m=f.process,v=f.setImmediate,y=f.clearImmediate,_=f.MessageChannel,x=0,b={};d(v)&&d(y)||(v=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return b[++x]=function(){l(d(t)?t:Function(t),e)},s(x),x},y=function(t){delete b[t]},"process"==h(m)?s=function(t){m.nextTick(u(i,t,1))}:f.addEventListener&&d(f.postMessage)&&!f.importScripts?(s=function(t){f.postMessage(t,"*")},f.addEventListener("message",r,!1)):d(_)?(a=new _,o=a.port2,a.port1.onmessage=r,s=u(o.postMessage,o,1)):s="onreadystatechange"in p("script")?function(t){g.appendChild(p("script")).onreadystatechange=function(){g.removeChild(this),i.call(t)}}:function(t){setTimeout(u(i,t,1),0)}),t.exports={set:v,clear:y}},function(t,e,n){var i=n(0),r=n(10),s=n(4).safe("iter"),a=n(5),o=a.step,c=a.Iterators;n(16)(Array,"Array",function(t,e){i.set(this,s,{o:i.toObject(t),i:0,k:e})},function(){var t=this[s],e=t.o,n=t.k,i=t.i++;return!e||i>=e.length?(t.o=void 0,o(1)):"keys"==n?o(0,i):"values"==n?o(0,e[i]):o(0,[i,e[i]])},"values"),c.Arguments=c.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var i,r;/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(s,a){function o(t){var e=!!t&&"length"in t&&t.length,n=ht.type(t);return"function"!==n&&!ht.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function c(t,e,n){if(ht.isFunction(e))return ht.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return ht.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(xt.test(e))return ht.filter(e,t,n);e=ht.filter(e,t)}return ht.grep(t,function(t){return rt.call(e,t)>-1!==n})}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t){var e={};return ht.each(t.match(Tt)||[],function(t,n){e[n]=!0}),e}function l(){tt.removeEventListener("DOMContentLoaded",l),s.removeEventListener("load",l),ht.ready()}function p(){this.expando=ht.expando+p.uid++}function f(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(It,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Rt.test(n)?ht.parseJSON(n):n)}catch(t){}Pt.set(t,e,n)}else n=void 0;return n}function d(t,e,n,i){var r,s=1,a=20,o=i?function(){return i.cur()}:function(){return ht.css(t,e,"")},c=o(),u=n&&n[3]||(ht.cssNumber[e]?"":"px"),h=(ht.cssNumber[e]||"px"!==u&&+c)&&Ot.exec(ht.css(t,e));if(h&&h[3]!==u){u=u||h[3],n=n||[],h=+c||1;do{s=s||".5",h/=s,ht.style(t,e,h+u)}while(s!==(s=o()/c)&&1!==s&&--a)}return n&&(h=+h||+c||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=h,i.end=r)),r}function g(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&ht.nodeName(t,e)?ht.merge([t],n):n}function m(t,e){for(var n=0,i=t.length;i>n;n++)Lt.set(t[n],"globalEval",!e||Lt.get(e[n],"globalEval"))}function v(t,e,n,i,r){for(var s,a,o,c,u,h,l=e.createDocumentFragment(),p=[],f=0,d=t.length;d>f;f++)if((s=t[f])||0===s)if("object"===ht.type(s))ht.merge(p,s.nodeType?[s]:s);else if(jt.test(s)){for(a=a||l.appendChild(e.createElement("div")),o=(Ut.exec(s)||["",""])[1].toLowerCase(),c=zt[o]||zt._default,a.innerHTML=c[1]+ht.htmlPrefilter(s)+c[2],h=c[0];h--;)a=a.lastChild;ht.merge(p,a.childNodes),a=l.firstChild,a.textContent=""}else p.push(e.createTextNode(s));for(l.textContent="",f=0;s=p[f++];)if(i&&ht.inArray(s,i)>-1)r&&r.push(s);else if(u=ht.contains(s.ownerDocument,s),a=g(l.appendChild(s),"script"),u&&m(a),n)for(h=0;s=a[h++];)Bt.test(s.type||"")&&n.push(s);return l}function y(){return!0}function _(){return!1}function x(){try{return tt.activeElement}catch(t){}}function b(t,e,n,i,r,s){var a,o;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(o in e)b(t,o,n,i,e[o],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=_;else if(!r)return t;return 1===s&&(a=r,r=function(t){return ht().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ht.guid++)),t.each(function(){ht.event.add(this,e,r,i,n)})}function w(t,e){return ht.nodeName(t,"table")&&ht.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function E(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function S(t){var e=Yt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function T(t,e){var n,i,r,s,a,o,c,u;if(1===e.nodeType){if(Lt.hasData(t)&&(s=Lt.access(t),a=Lt.set(e,s),u=s.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)ht.event.add(e,r,u[r][n])}Pt.hasData(t)&&(o=Pt.access(t),c=ht.extend({},o),Pt.set(e,c))}}function M(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ft.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function A(t,e,n,i){e=nt.apply([],e);var r,s,a,o,c,u,h=0,l=t.length,p=l-1,f=e[0],d=ht.isFunction(f);if(d||l>1&&"string"==typeof f&&!ct.checkClone&&Xt.test(f))return t.each(function(r){var s=t.eq(r);d&&(e[0]=f.call(this,r,s.html())),A(s,e,n,i)});if(l&&(r=v(e,t[0].ownerDocument,!1,t,i),s=r.firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=ht.map(g(r,"script"),E),o=a.length;l>h;h++)c=r,h!==p&&(c=ht.clone(c,!0,!0),o&&ht.merge(a,g(c,"script"))),n.call(t[h],c,h);if(o)for(u=a[a.length-1].ownerDocument,ht.map(a,S),h=0;o>h;h++)c=a[h],Bt.test(c.type||"")&&!Lt.access(c,"globalEval")&&ht.contains(u,c)&&(c.src?ht._evalUrl&&ht._evalUrl(c.src):ht.globalEval(c.textContent.replace(Zt,"")))}return t}function C(t,e,n){for(var i,r=e?ht.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||ht.cleanData(g(i)),i.parentNode&&(n&&ht.contains(i.ownerDocument,i)&&m(g(i,"script")),i.parentNode.removeChild(i));return t}function L(t,e){var n=ht(e.createElement(t)).appendTo(e.body),i=ht.css(n[0],"display");return n.detach(),i}function P(t){var e=tt,n=Jt[t];return n||(n=L(t,e),"none"!==n&&n||($t=($t||ht("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=$t[0].contentDocument,e.write(),e.close(),n=L(t,e),$t.detach()),Jt[t]=n),n}function R(t,e,n){var i,r,s,a,o=t.style;return n=n||te(t),a=n?n.getPropertyValue(e)||n[e]:void 0,""!==a&&void 0!==a||ht.contains(t.ownerDocument,t)||(a=ht.style(t,e)),n&&!ct.pixelMarginRight()&&Qt.test(a)&&Kt.test(e)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s),void 0!==a?a+"":a}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t){if(t in oe)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ae.length;n--;)if((t=ae[n]+e)in oe)return t}function O(t,e,n){var i=Ot.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function N(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=ht.css(t,n+Nt[s],!0,r)),i?("content"===n&&(a-=ht.css(t,"padding"+Nt[s],!0,r)),"margin"!==n&&(a-=ht.css(t,"border"+Nt[s]+"Width",!0,r))):(a+=ht.css(t,"padding"+Nt[s],!0,r),"padding"!==n&&(a+=ht.css(t,"border"+Nt[s]+"Width",!0,r)));return a}function D(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=te(t),a="border-box"===ht.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=R(t,e,s),(0>r||null==r)&&(r=t.style[e]),Qt.test(r))return r;i=a&&(ct.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+N(t,e,n||(a?"border":"content"),i,s)+"px"}function F(t,e){for(var n,i,r,s=[],a=0,o=t.length;o>a;a++)i=t[a],i.style&&(s[a]=Lt.get(i,"olddisplay"),n=i.style.display,e?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Dt(i)&&(s[a]=Lt.access(i,"olddisplay",P(i.nodeName)))):(r=Dt(i),"none"===n&&r||Lt.set(i,"olddisplay",r?n:ht.css(i,"display"))));for(a=0;o>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[a]||"":"none"));return t}function U(t,e,n,i,r){return new U.prototype.init(t,e,n,i,r)}function B(){return s.setTimeout(function(){ce=void 0}),ce=ht.now()}function z(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=Nt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function j(t,e,n){for(var i,r=(G.tweeners[e]||[]).concat(G.tweeners["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,e,t))return i}function H(t,e,n){var i,r,s,a,o,c,u,h=this,l={},p=t.style,f=t.nodeType&&Dt(t),d=Lt.get(t,"fxshow");n.queue||(o=ht._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,c=o.empty.fire,o.empty.fire=function(){o.unqueued||c()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,ht.queue(t,"fx").length||o.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=ht.css(t,"display"),"inline"===("none"===u?Lt.get(t,"olddisplay")||P(t.nodeName):u)&&"none"===ht.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],he.exec(r)){if(delete e[i],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!d||void 0===d[i])continue;f=!0}l[i]=d&&d[i]||ht.style(t,i)}else u=void 0;if(ht.isEmptyObject(l))"inline"===("none"===u?P(t.nodeName):u)&&(p.display=u);else{d?"hidden"in d&&(f=d.hidden):d=Lt.access(t,"fxshow",{}),s&&(d.hidden=!f),f?ht(t).show():h.done(function(){ht(t).hide()}),h.done(function(){var e;Lt.remove(t,"fxshow");for(e in l)ht.style(t,e,l[e])});for(i in l)a=j(f?d[i]:0,i,h),i in d||(d[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function V(t,e){var n,i,r,s,a;for(n in t)if(i=ht.camelCase(n),r=e[i],s=t[n],ht.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(a=ht.cssHooks[i])&&"expand"in a){s=a.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function G(t,e,n){var i,r,s=0,a=G.prefilters.length,o=ht.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var e=ce||B(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,s=1-i,a=0,c=u.tweens.length;c>a;a++)u.tweens[a].run(s);return o.notifyWith(t,[u,s,n]),1>s&&c?n:(o.resolveWith(t,[u]),!1)},u=o.promise({elem:t,props:ht.extend({},e),opts:ht.extend(!0,{specialEasing:{},easing:ht.easing._default},n),originalProperties:e,originalOptions:n,startTime:ce||B(),duration:n.duration,tweens:[],createTween:function(e,n){var i=ht.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?(o.notifyWith(t,[u,1,0]),o.resolveWith(t,[u,e])):o.rejectWith(t,[u,e]),this}}),h=u.props;for(V(h,u.opts.specialEasing);a>s;s++)if(i=G.prefilters[s].call(u,t,h,u.opts))return ht.isFunction(i.stop)&&(ht._queueHooks(u.elem,u.opts.queue).stop=ht.proxy(i.stop,i)),i;return ht.map(h,j,u),ht.isFunction(u.opts.start)&&u.opts.start.call(t,u),ht.fx.timer(ht.extend(c,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function W(t){return t.getAttribute&&t.getAttribute("class")||""}function q(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(Tt)||[];if(ht.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function X(t,e,n,i){function r(o){var c;return s[o]=!0,ht.each(t[o]||[],function(t,o){var u=o(e,n,i);return"string"!=typeof u||a||s[u]?a?!(c=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),c}var s={},a=t===Pe;return r(e.dataTypes[0])||!s["*"]&&r("*")}function Y(t,e){var n,i,r=ht.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&ht.extend(!0,t,i),t}function Z(t,e,n){for(var i,r,s,a,o=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function $(t,e,n,i){var r,s,a,o,c,u={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(s=h.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=h.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(a=u[c+" "+s]||u["* "+s]))for(r in u)if(o=r.split(" "),o[1]===s&&(a=u[c+" "+o[0]]||u["* "+o[0]])){!0===a?a=u[r]:!0!==u[r]&&(s=o[0],h.unshift(o[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}function J(t,e,n,i){var r;if(ht.isArray(e))ht.each(e,function(e,r){n||Oe.test(t)?i(t,r):J(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==ht.type(e))i(t,e);else for(r in e)J(t+"["+r+"]",e[r],n,i)}function K(t){return ht.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Q=[],tt=s.document,et=Q.slice,nt=Q.concat,it=Q.push,rt=Q.indexOf,st={},at=st.toString,ot=st.hasOwnProperty,ct={},ut="2.2.4",ht=function(t,e){return new ht.fn.init(t,e)},lt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^-ms-/,ft=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()};ht.fn=ht.prototype={jquery:ut,constructor:ht,selector:"",length:0,toArray:function(){return et.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:et.call(this)},pushStack:function(t){var e=ht.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ht.each(this,t)},map:function(t){return this.pushStack(ht.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:Q.sort,splice:Q.splice},ht.extend=ht.fn.extend=function(){var t,e,n,i,r,s,a=arguments[0]||{},o=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[o]||{},o++),"object"==typeof a||ht.isFunction(a)||(a={}),o===c&&(a=this,o--);c>o;o++)if(null!=(t=arguments[o]))for(e in t)n=a[e],i=t[e],a!==i&&(u&&i&&(ht.isPlainObject(i)||(r=ht.isArray(i)))?(r?(r=!1,s=n&&ht.isArray(n)?n:[]):s=n&&ht.isPlainObject(n)?n:{},a[e]=ht.extend(u,s,i)):void 0!==i&&(a[e]=i));return a},ht.extend({expando:"jQuery"+(ut+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ht.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!ht.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==ht.type(t)||t.nodeType||ht.isWindow(t))return!1;if(t.constructor&&!ot.call(t,"constructor")&&!ot.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||ot.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?st[at.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=ht.trim(t))&&(1===t.indexOf("use strict")?(e=tt.createElement("script"),e.text=t,tt.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(pt,"ms-").replace(ft,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(o(t))for(n=t.length;n>i&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(lt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(o(Object(t))?ht.merge(n,"string"==typeof t?[t]:t):it.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:rt.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,a=!n;s>r;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,a=[];if(o(t))for(i=t.length;i>s;s++)null!=(r=e(t[s],s,n))&&a.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&a.push(r);return nt.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),ht.isFunction(t)?(i=et.call(arguments,2),r=function(){return t.apply(e||this,i.concat(et.call(arguments)))},r.guid=t.guid=t.guid||ht.guid++,r):void 0},now:Date.now,support:ct}),"function"==typeof Symbol&&(ht.fn[Symbol.iterator]=Q[Symbol.iterator]),ht.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){st["[object "+e+"]"]=e.toLowerCase()});var gt=function(t){function e(t,e,n,i){var r,s,a,o,u,l,p,f,d=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!i&&((e?e.ownerDocument||e:U)!==P&&L(e),e=e||P,I)){if(11!==g&&(l=gt.exec(t)))if(r=l[1]){if(9===g){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(d&&(a=d.getElementById(r))&&D(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return $.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&_.getElementsByClassName&&e.getElementsByClassName)return $.apply(n,e.getElementsByClassName(r)),n}if(_.qsa&&!V[t+" "]&&(!k||!k.test(t))){if(1!==g)d=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((o=e.getAttribute("id"))?o=o.replace(vt,"\\$&"):e.setAttribute("id",o=F),p=E(t),s=p.length,u=ht.test(o)?"#"+o:"[id='"+o+"']";s--;)p[s]=u+" "+h(p[s]);f=p.join(","),d=mt.test(t)&&c(e.parentNode)||e}if(f)try{return $.apply(n,d.querySelectorAll(f)),n}catch(t){}finally{o===F&&e.removeAttribute("id")}}}return T(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[F]=!0,t}function r(t){var e=P.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function o(t){return i(function(e){return e=+e,i(function(n,i){for(var r,s=t([],n.length,e),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function l(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=z++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,a){var o,c,u,h=[B,s];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(u=e[F]||(e[F]={}),c=u[e.uniqueID]||(u[e.uniqueID]={}),(o=c[i])&&o[0]===B&&o[1]===s)return h[2]=o[2];if(c[i]=h,h[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function f(t,n,i){for(var r=0,s=n.length;s>r;r++)e(t,n[r],i);return i}function d(t,e,n,i,r){for(var s,a=[],o=0,c=t.length,u=null!=e;c>o;o++)(s=t[o])&&(n&&!n(s,i,r)||(a.push(s),u&&e.push(o)));return a}function g(t,e,n,r,s,a){return r&&!r[F]&&(r=g(r)),s&&!s[F]&&(s=g(s,a)),i(function(i,a,o,c){var u,h,l,p=[],g=[],m=a.length,v=i||f(e||"*",o.nodeType?[o]:o,[]),y=!t||!i&&e?v:d(v,p,t,o,c),_=n?s||(i?t:m||r)?[]:a:y;if(n&&n(y,_,o,c),r)for(u=d(_,g),r(u,[],o,c),h=u.length;h--;)(l=u[h])&&(_[g[h]]=!(y[g[h]]=l));if(i){if(s||t){if(s){for(u=[],h=_.length;h--;)(l=_[h])&&u.push(y[h]=l);s(null,_=[],u,c)}for(h=_.length;h--;)(l=_[h])&&(u=s?K(i,l):p[h])>-1&&(i[u]=!(a[u]=l))}}else _=d(_===a?_.splice(m,_.length):_),s?s(null,a,_,c):$.apply(a,_)})}function m(t){for(var e,n,i,r=t.length,s=x.relative[t[0].type],a=s||x.relative[" "],o=s?1:0,c=l(function(t){return t===e},a,!0),u=l(function(t){return K(e,t)>-1},a,!0),f=[function(t,n,i){var r=!s&&(i||n!==M)||((e=n).nodeType?c(t,n,i):u(t,n,i));return e=null,r}];r>o;o++)if(n=x.relative[t[o].type])f=[l(p(f),n)];else{if(n=x.filter[t[o].type].apply(null,t[o].matches),n[F]){for(i=++o;r>i&&!x.relative[t[i].type];i++);return g(o>1&&p(f),o>1&&h(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(st,"$1"),n,i>o&&m(t.slice(o,i)),r>i&&m(t=t.slice(i)),r>i&&h(t))}f.push(n)}return p(f)}function v(t,n){var r=n.length>0,s=t.length>0,a=function(i,a,o,c,u){var h,l,p,f=0,g="0",m=i&&[],v=[],y=M,_=i||s&&x.find.TAG("*",u),b=B+=null==y?1:Math.random()||.1,w=_.length;for(u&&(M=a===P||a||u);g!==w&&null!=(h=_[g]);g++){if(s&&h){for(l=0,a||h.ownerDocument===P||(L(h),o=!I);p=t[l++];)if(p(h,a||P,o)){c.push(h);break}u&&(B=b)}r&&((h=!p&&h)&&f--,i&&m.push(h))}if(f+=g,r&&g!==f){for(l=0;p=n[l++];)p(m,v,a,o);if(i){if(f>0)for(;g--;)m[g]||v[g]||(v[g]=Y.call(c));v=d(v)}$.apply(c,v),u&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(c)}return u&&(B=b,M=y),m};return r?i(a):a}var y,_,x,b,w,E,S,T,M,A,C,L,P,R,I,k,O,N,D,F="sizzle"+1*new Date,U=t.document,B=0,z=0,j=n(),H=n(),V=n(),G=function(t,e){return t===e&&(C=!0),0},W=1<<31,q={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,J=X.slice,K=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),st=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),at=new RegExp("^"+tt+"*,"+tt+"*"),ot=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ct=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ut=new RegExp(it),ht=new RegExp("^"+et+"$"),lt={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,dt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){L()};try{$.apply(X=J.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch(t){$={apply:X.length?function(t,e){Z.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}_=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},L=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:U;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,R=P.documentElement,I=!w(P),(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=dt.test(P.getElementsByClassName),_.getById=r(function(t){return R.appendChild(t).id=F,!P.getElementsByName||!P.getElementsByName(F).length}),_.getById?(x.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n=e.getElementById(t);return n?[n]:[]}},x.filter.ID=function(t){var e=t.replace(yt,_t);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(yt,_t);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},x.find.CLASS=_.getElementsByClassName&&function(t,e){return void 0!==e.getElementsByClassName&&I?e.getElementsByClassName(t):void 0},O=[],k=[],(_.qsa=dt.test(P.querySelectorAll))&&(r(function(t){R.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||k.push("\\["+tt+"*(?:value|"+Q+")"),t.querySelectorAll("[id~="+F+"-]").length||k.push("~="),t.querySelectorAll(":checked").length||k.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||k.push(".#.+[+~]")}),r(function(t){var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&k.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||k.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),k.push(",.*:")})),(_.matchesSelector=dt.test(N=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(t){_.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),O.push("!=",it)}),k=k.length&&new RegExp(k.join("|")),O=O.length&&new RegExp(O.join("|")),e=dt.test(R.compareDocumentPosition),D=e||dt.test(R.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return C=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===U&&D(U,t)?-1:e===P||e.ownerDocument===U&&D(U,e)?1:A?K(A,t)-K(A,e):0:4&n?-1:1)}:function(t,e){if(t===e)return C=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],c=[e];if(!r||!s)return t===P?-1:e===P?1:r?-1:s?1:A?K(A,t)-K(A,e):0;if(r===s)return a(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;o[i]===c[i];)i++;return i?a(o[i],c[i]):o[i]===U?-1:c[i]===U?1:0},P):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&L(t),n=n.replace(ct,"='$1']"),_.matchesSelector&&I&&!V[n+" "]&&(!O||!O.test(n))&&(!k||!k.test(n)))try{var i=N.call(t,n);if(i||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&L(t),D(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&L(t);var n=x.attrHandle[e.toLowerCase()],i=n&&q.call(x.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:_.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(C=!_.detectDuplicates,A=!_.sortStable&&t.slice(0),t.sort(G),C){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return A=null,t},b=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=b(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=b(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:lt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return lt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ut.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=j[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&j(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var s=e.attr(r,t);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(rt," ")+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var u,h,l,p,f,d,g=s!==a?"nextSibling":"previousSibling",m=e.parentNode,v=o&&e.nodeName.toLowerCase(),y=!c&&!o,_=!1;if(m){if(s){for(;g;){for(p=e;p=p[g];)if(o?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(p=m,l=p[F]||(p[F]={}),h=l[p.uniqueID]||(l[p.uniqueID]={}),u=h[t]||[],f=u[0]===B&&u[1],_=f&&u[2],p=f&&m.childNodes[f];p=++f&&p&&p[g]||(_=f=0)||d.pop();)if(1===p.nodeType&&++_&&p===e){h[t]=[B,f,_];break}}else if(y&&(p=e,l=p[F]||(p[F]={}),h=l[p.uniqueID]||(l[p.uniqueID]={}),u=h[t]||[],f=u[0]===B&&u[1],_=f),!1===_)for(;(p=++f&&p&&p[g]||(_=f=0)||d.pop())&&((o?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++_||(y&&(l=p[F]||(p[F]={}),h=l[p.uniqueID]||(l[p.uniqueID]={}),h[t]=[B,_]),p!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,n){var r,s=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[F]?s(n):s.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=s(t,n),a=r.length;a--;)i=K(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return s(t,0,r)}):s}},pseudos:{not:i(function(t){var e=[],n=[],r=S(t.replace(st,"$1"));return r[F]?i(function(t,e,n,i){for(var s,a=r(t,null,i,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,i,s){return e[0]=t,r(e,null,s,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(yt,_t),function(e){return(e.textContent||e.innerText||b(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,_t).toLowerCase(),function(e){var n;do{if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:o(function(){return[0]}),last:o(function(t,e){return[e-1]}),eq:o(function(t,e,n){return[0>n?n+e:n]}),even:o(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:o(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:o(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:o(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(y);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,E=e.tokenize=function(t,n){var i,r,s,a,o,c,u,h=H[t+" "];if(h)return n?0:h.slice(0);for(o=t,c=[],u=x.preFilter;o;){i&&!(r=at.exec(o))||(r&&(o=o.slice(r[0].length)||o),c.push(s=[])),i=!1,(r=ot.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(st," ")}),o=o.slice(i.length));for(a in x.filter)!(r=lt[a].exec(o))||u[a]&&!(r=u[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?e.error(t):H(t,c).slice(0)},S=e.compile=function(t,e){var n,i=[],r=[],s=V[t+" "];if(!s){for(e||(e=E(t)),n=e.length;n--;)s=m(e[n]),s[F]?i.push(s):r.push(s);s=V(t,v(r,i)),s.selector=t}return s},T=e.select=function(t,e,n,i){var r,s,a,o,u,l="function"==typeof t&&t,p=!i&&E(t=l.selector||t);if(n=n||[],1===p.length){if(s=p[0]=p[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&_.getById&&9===e.nodeType&&I&&x.relative[s[1].type]){if(!(e=(x.find.ID(a.matches[0].replace(yt,_t),e)||[])[0]))return n;l&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=lt.needsContext.test(t)?0:s.length;r--&&(a=s[r],!x.relative[o=a.type]);)if((u=x.find[o])&&(i=u(a.matches[0].replace(yt,_t),mt.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(r,1),!(t=i.length&&h(s)))return $.apply(n,i),n;break}}return(l||S(t,p))(i,e,!I,n,!e||mt.test(t)&&c(e.parentNode)||e),n},_.sortStable=F.split("").sort(G).join("")===F,_.detectDuplicates=!!C,L(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(Q,function(t,e,n){var i;return n?void 0:!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(s);ht.find=gt,ht.expr=gt.selectors,ht.expr[":"]=ht.expr.pseudos,ht.uniqueSort=ht.unique=gt.uniqueSort,ht.text=gt.getText,ht.isXMLDoc=gt.isXML,ht.contains=gt.contains;var mt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ht(t).is(n))break;i.push(t)}return i},vt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},yt=ht.expr.match.needsContext,_t=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,xt=/^.[^:#\[\.,]*$/;ht.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ht.find.matchesSelector(i,t)?[i]:[]:ht.find.matches(t,ht.grep(e,function(t){return 1===t.nodeType}))},ht.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(ht(t).filter(function(){for(e=0;n>e;e++)if(ht.contains(r[e],this))return!0}));for(e=0;n>e;e++)ht.find(t,r[e],i);return i=this.pushStack(n>1?ht.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(c(this,t||[],!1))},not:function(t){return this.pushStack(c(this,t||[],!0))},is:function(t){return!!c(this,"string"==typeof t&&yt.test(t)?ht(t):t||[],!1).length}});var bt,wt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ht.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||bt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:wt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ht?e[0]:e,ht.merge(this,ht.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:tt,!0)),_t.test(i[1])&&ht.isPlainObject(e))for(i in e)ht.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=tt.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=tt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ht.isFunction(t)?void 0!==n.ready?n.ready(t):t(ht):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ht.makeArray(t,this))}).prototype=ht.fn,bt=ht(tt);var Et=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};ht.fn.extend({has:function(t){var e=ht(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(ht.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,s=[],a=yt.test(t)||"string"!=typeof t?ht(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ht.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?ht.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?rt.call(ht(t),this[0]):rt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ht.uniqueSort(ht.merge(this.get(),ht(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ht.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return mt(t,"parentNode")},parentsUntil:function(t,e,n){return mt(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return mt(t,"nextSibling")},prevAll:function(t){return mt(t,"previousSibling")},nextUntil:function(t,e,n){return mt(t,"nextSibling",n)},prevUntil:function(t,e,n){return mt(t,"previousSibling",n)},siblings:function(t){return vt((t.parentNode||{}).firstChild,t)},children:function(t){return vt(t.firstChild)},contents:function(t){return t.contentDocument||ht.merge([],t.childNodes)}},function(t,e){ht.fn[t]=function(n,i){var r=ht.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ht.filter(i,r)),this.length>1&&(St[t]||ht.uniqueSort(r),Et.test(t)&&r.reverse()),this.pushStack(r)}});var Tt=/\S+/g;ht.Callbacks=function(t){t="string"==typeof t?h(t):ht.extend({},t);var e,n,i,r,s=[],a=[],o=-1,c=function(){for(r=t.once,i=e=!0;a.length;o=-1)for(n=a.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&t.stopOnFalse&&(o=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},u={add:function(){return s&&(n&&!e&&(o=s.length-1,a.push(n)),function e(n){ht.each(n,function(n,i){ht.isFunction(i)?t.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==ht.type(i)&&e(i)})}(arguments),n&&!e&&c()),this},remove:function(){return ht.each(arguments,function(t,e){for(var n;(n=ht.inArray(e,s,n))>-1;)s.splice(n,1),o>=n&&o--}),this},has:function(t){return t?ht.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},ht.extend({Deferred:function(t){var e=[["resolve","done",ht.Callbacks("once memory"),"resolved"],["reject","fail",ht.Callbacks("once memory"),"rejected"],["notify","progress",ht.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ht.Deferred(function(n){ht.each(e,function(e,s){var a=ht.isFunction(t[e])&&t[e];r[s[1]](function(){var t=a&&a.apply(this,arguments);t&&ht.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ht.extend(t,i):i}},r={};return i.pipe=i.then,ht.each(e,function(t,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=et.call(arguments),a=s.length,o=1!==a||t&&ht.isFunction(t.promise)?a:0,c=1===o?t:ht.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?et.call(arguments):r,i===e?c.notifyWith(n,i):--o||c.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)s[r]&&ht.isFunction(s[r].promise)?s[r].promise().progress(u(r,n,e)).done(u(r,i,s)).fail(c.reject):--o;return o||c.resolveWith(i,s),c.promise()}});var Mt;ht.fn.ready=function(t){return ht.ready.promise().done(t),this},ht.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ht.readyWait++:ht.ready(!0)},ready:function(t){(!0===t?--ht.readyWait:ht.isReady)||(ht.isReady=!0,!0!==t&&--ht.readyWait>0||(Mt.resolveWith(tt,[ht]),ht.fn.triggerHandler&&(ht(tt).triggerHandler("ready"),ht(tt).off("ready"))))}}),ht.ready.promise=function(t){return Mt||(Mt=ht.Deferred(),"complete"===tt.readyState||"loading"!==tt.readyState&&!tt.documentElement.doScroll?s.setTimeout(ht.ready):(tt.addEventListener("DOMContentLoaded",l),s.addEventListener("load",l))),Mt.promise(t)},ht.ready.promise();var At=function(t,e,n,i,r,s,a){var o=0,c=t.length,u=null==n;if("object"===ht.type(n)){r=!0;for(o in n)At(t,e,o,n[o],!0,s,a)}else if(void 0!==i&&(r=!0,ht.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(ht(t),n)})),e))for(;c>o;o++)e(t[o],n,a?i:i.call(t[o],o,e(t[o],n)));return r?t:u?e.call(t):c?e(t[0],n):s},Ct=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};p.uid=1,p.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Ct(t))return{};var e=t[this.expando];return e||(e={},Ct(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[e]=n;else for(i in e)r[i]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,ht.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,s=t[this.expando];if(void 0!==s){if(void 0===e)this.register(t);else{ht.isArray(e)?i=e.concat(e.map(ht.camelCase)):(r=ht.camelCase(e),e in s?i=[e,r]:(i=r,i=i in s?[i]:i.match(Tt)||[])),n=i.length;for(;n--;)delete s[i[n]]}(void 0===e||ht.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ht.isEmptyObject(e)}};var Lt=new p,Pt=new p,Rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,It=/[A-Z]/g;ht.extend({hasData:function(t){return Pt.hasData(t)||Lt.hasData(t)},data:function(t,e,n){return Pt.access(t,e,n)},removeData:function(t,e){Pt.remove(t,e)},_data:function(t,e,n){return Lt.access(t,e,n)},_removeData:function(t,e){Lt.remove(t,e)}}),ht.fn.extend({data:function(t,e){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(r=Pt.get(s),1===s.nodeType&&!Lt.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=ht.camelCase(i.slice(5)),f(s,i,r[i])));Lt.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Pt.set(this,t)}):At(this,function(e){var n,i;if(s&&void 0===e){if(void 0!==(n=Pt.get(s,t)||Pt.get(s,t.replace(It,"-$&").toLowerCase())))return n;if(i=ht.camelCase(t),void 0!==(n=Pt.get(s,i)))return n;if(void 0!==(n=f(s,i,void 0)))return n}else i=ht.camelCase(t),this.each(function(){var n=Pt.get(this,i);Pt.set(this,i,e),t.indexOf("-")>-1&&void 0!==n&&Pt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Pt.remove(this,t)})}}),ht.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=Lt.get(t,e),n&&(!i||ht.isArray(n)?i=Lt.access(t,e,ht.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ht.queue(t,e),i=n.length,r=n.shift(),s=ht._queueHooks(t,e),a=function(){ht.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Lt.get(t,n)||Lt.access(t,n,{empty:ht.Callbacks("once memory").add(function(){Lt.remove(t,[e+"queue",n])})})}}),ht.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?ht.queue(this[0],t):void 0===e?this:this.each(function(){var n=ht.queue(this,t,e);ht._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&ht.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ht.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=ht.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Lt.get(s[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ot=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),Nt=["Top","Right","Bottom","Left"],Dt=function(t,e){return t=e||t,"none"===ht.css(t,"display")||!ht.contains(t.ownerDocument,t)},Ft=/^(?:checkbox|radio)$/i,Ut=/<([\w:-]+)/,Bt=/^$|\/(?:java|ecma)script/i,zt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};zt.optgroup=zt.option,zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td;var jt=/<|&#?\w+;/;!function(){var t=tt.createDocumentFragment(),e=t.appendChild(tt.createElement("div")),n=tt.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ct.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ct.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ht=/^key/,Vt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gt=/^([^.]*)(?:\.(.+)|)/;ht.event={global:{},add:function(t,e,n,i,r){var s,a,o,c,u,h,l,p,f,d,g,m=Lt.get(t);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=ht.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==ht&&ht.event.triggered!==e.type?ht.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Tt)||[""],u=e.length;u--;)o=Gt.exec(e[u])||[],f=g=o[1],d=(o[2]||"").split(".").sort(),f&&(l=ht.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=ht.event.special[f]||{},h=ht.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ht.expr.match.needsContext.test(r),namespace:d.join(".")},s),(p=c[f])||(p=c[f]=[],p.delegateCount=0,l.setup&&!1!==l.setup.call(t,i,d,a)||t.addEventListener&&t.addEventListener(f,a)),l.add&&(l.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),ht.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,a,o,c,u,h,l,p,f,d,g,m=Lt.hasData(t)&&Lt.get(t);if(m&&(c=m.events)){for(e=(e||"").match(Tt)||[""],u=e.length;u--;)if(o=Gt.exec(e[u])||[],f=g=o[1],d=(o[2]||"").split(".").sort(),f){for(l=ht.event.special[f]||{},f=(i?l.delegateType:l.bindType)||f,p=c[f]||[],o=o[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;s--;)h=p[s],!r&&g!==h.origType||n&&n.guid!==h.guid||o&&!o.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(p.splice(s,1),h.selector&&p.delegateCount--,l.remove&&l.remove.call(t,h));a&&!p.length&&(l.teardown&&!1!==l.teardown.call(t,d,m.handle)||ht.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)ht.event.remove(t,f+e[u],n,i,!0);ht.isEmptyObject(c)&&Lt.remove(t,"handle events")}},dispatch:function(t){t=ht.event.fix(t);var e,n,i,r,s,a=[],o=et.call(arguments),c=(Lt.get(this,"events")||{})[t.type]||[],u=ht.event.special[t.type]||{};if(o[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=ht.event.handlers.call(this,t,c),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(s.namespace)||(t.handleObj=s,t.data=s.data,void 0!==(i=((ht.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,s,a=[],o=e.delegateCount,c=t.target;if(o&&c.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==t.type)){for(i=[],n=0;o>n;n++)s=e[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?ht(r,this).index(c)>-1:ht.find(r,this,null,[c]).length),i[r]&&i.push(s);i.length&&a.push({elem:c,handlers:i})}return o<e.length&&a.push({elem:this,handlers:e.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||tt,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[ht.expando])return t;var e,n,i,r=t.type,s=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Vt.test(r)?this.mouseHooks:Ht.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new ht.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=tt),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==x()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===x()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ht.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return ht.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ht.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},ht.Event=function(t,e){return this instanceof ht.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?y:_):this.type=t,e&&ht.extend(this,e),this.timeStamp=t&&t.timeStamp||ht.now(),void(this[ht.expando]=!0)):new ht.Event(t,e)},ht.Event.prototype={constructor:ht.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=y,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=y,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=y,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ht.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ht.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===i||ht.contains(i,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),ht.fn.extend({on:function(t,e,n,i){return b(this,t,e,n,i)},one:function(t,e,n,i){return b(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ht(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=_),this.each(function(){ht.event.remove(this,t,n,e)})}});var Wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qt=/<script|<style|<link/i,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Yt=/^true\/(.*)/,Zt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ht.extend({htmlPrefilter:function(t){return t.replace(Wt,"<$1></$2>")},clone:function(t,e,n){var i,r,s,a,o=t.cloneNode(!0),c=ht.contains(t.ownerDocument,t);if(!(ct.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ht.isXMLDoc(t)))for(a=g(o),s=g(t),i=0,r=s.length;r>i;i++)M(s[i],a[i]);if(e)if(n)for(s=s||g(t),a=a||g(o),i=0,r=s.length;r>i;i++)T(s[i],a[i]);else T(t,o);return a=g(o,"script"),a.length>0&&m(a,!c&&g(t,"script")),o},cleanData:function(t){for(var e,n,i,r=ht.event.special,s=0;void 0!==(n=t[s]);s++)if(Ct(n)){if(e=n[Lt.expando]){if(e.events)for(i in e.events)r[i]?ht.event.remove(n,i):ht.removeEvent(n,i,e.handle);n[Lt.expando]=void 0}n[Pt.expando]&&(n[Pt.expando]=void 0)}}}),ht.fn.extend({domManip:A,detach:function(t){return C(this,t,!0)},remove:function(t){return C(this,t)},text:function(t){return At(this,function(t){return void 0===t?ht.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){w(this,t).appendChild(t)}})},prepend:function(){return A(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=w(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ht.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ht.clone(this,t,e)})},html:function(t){return At(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!qt.test(t)&&!zt[(Ut.exec(t)||["",""])[1].toLowerCase()]){t=ht.htmlPrefilter(t);try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(ht.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return A(this,arguments,function(e){var n=this.parentNode;ht.inArray(this,t)<0&&(ht.cleanData(g(this)),n&&n.replaceChild(e,this))},t)}}),ht.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ht.fn[t]=function(t){for(var n,i=[],r=ht(t),s=r.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),ht(r[a])[e](n),it.apply(i,n.get());return this.pushStack(i)}});var $t,Jt={HTML:"block",BODY:"block"},Kt=/^margin/,Qt=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),te=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=s),e.getComputedStyle(t)},ee=function(t,e,n,i){var r,s,a={};for(s in e)a[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=a[s];return r},ne=tt.documentElement;!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",o.innerHTML="",ne.appendChild(a);var t=s.getComputedStyle(o);e="1%"!==t.top,r="2px"===t.marginLeft,n="4px"===t.width,o.style.marginRight="50%",i="4px"===t.marginRight,ne.removeChild(a)}var e,n,i,r,a=tt.createElement("div"),o=tt.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",ct.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(o),ht.extend(ct,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),i},reliableMarginLeft:function(){return null==n&&t(),r},reliableMarginRight:function(){var t,e=o.appendChild(tt.createElement("div"));return e.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",o.style.width="1px",ne.appendChild(a),t=!parseFloat(s.getComputedStyle(e).marginRight),ne.removeChild(a),o.removeChild(e),t}}))}();var ie=/^(none|table(?!-c[ea]).+)/,re={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"},ae=["Webkit","O","Moz","ms"],oe=tt.createElement("div").style;ht.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=R(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,o=ht.camelCase(e),c=t.style;return e=ht.cssProps[o]||(ht.cssProps[o]=k(o)||o),a=ht.cssHooks[e]||ht.cssHooks[o],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:c[e]:(s=typeof n,"string"===s&&(r=Ot.exec(n))&&r[1]&&(n=d(t,e,r),s="number"),void(null!=n&&n===n&&("number"===s&&(n+=r&&r[3]||(ht.cssNumber[o]?"":"px")),ct.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(c[e]=n))))}},css:function(t,e,n,i){var r,s,a,o=ht.camelCase(e);return e=ht.cssProps[o]||(ht.cssProps[o]=k(o)||o),a=ht.cssHooks[e]||ht.cssHooks[o],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=R(t,e,i)),"normal"===r&&e in se&&(r=se[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),ht.each(["height","width"],function(t,e){ht.cssHooks[e]={get:function(t,n,i){return n?ie.test(ht.css(t,"display"))&&0===t.offsetWidth?ee(t,re,function(){return D(t,e,i)}):D(t,e,i):void 0},set:function(t,n,i){var r,s=i&&te(t),a=i&&N(t,e,i,"border-box"===ht.css(t,"boxSizing",!1,s),s);return a&&(r=Ot.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=ht.css(t,e)),O(t,n,a)}}}),ht.cssHooks.marginLeft=I(ct.reliableMarginLeft,function(t,e){return e?(parseFloat(R(t,"marginLeft"))||t.getBoundingClientRect().left-ee(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),ht.cssHooks.marginRight=I(ct.reliableMarginRight,function(t,e){return e?ee(t,{display:"inline-block"},R,[t,"marginRight"]):void 0}),ht.each({margin:"",padding:"",border:"Width"},function(t,e){ht.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Nt[i]+e]=s[i]||s[i-2]||s[0];return r}},Kt.test(t)||(ht.cssHooks[t+e].set=O)}),ht.fn.extend({css:function(t,e){return At(this,function(t,e,n){var i,r,s={},a=0;if(ht.isArray(e)){for(i=te(t),r=e.length;r>a;a++)s[e[a]]=ht.css(t,e[a],!1,i);return s}return void 0!==n?ht.style(t,e,n):ht.css(t,e)},t,e,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Dt(this)?ht(this).show():ht(this).hide()})}}),ht.Tween=U,U.prototype={constructor:U,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||ht.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(ht.cssNumber[n]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,n=U.propHooks[this.prop];return this.options.duration?this.pos=e=ht.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ht.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ht.fx.step[t.prop]?ht.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ht.cssProps[t.prop]]&&!ht.cssHooks[t.prop]?t.elem[t.prop]=t.now:ht.style(t.elem,t.prop,t.now+t.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ht.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ht.fx=U.prototype.init,ht.fx.step={};var ce,ue,he=/^(?:toggle|show|hide)$/,le=/queueHooks$/;ht.Animation=ht.extend(G,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return d(n.elem,t,Ot.exec(e),n),n}]},tweener:function(t,e){ht.isFunction(t)?(e=t,t=["*"]):t=t.match(Tt);for(var n,i=0,r=t.length;r>i;i++)n=t[i],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(e)},prefilters:[H],prefilter:function(t,e){e?G.prefilters.unshift(t):G.prefilters.push(t)}}),ht.speed=function(t,e,n){var i=t&&"object"==typeof t?ht.extend({},t):{complete:n||!n&&e||ht.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ht.isFunction(e)&&e};return i.duration=ht.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ht.fx.speeds?ht.fx.speeds[i.duration]:ht.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ht.isFunction(i.old)&&i.old.call(this),i.queue&&ht.dequeue(this,i.queue)},i},ht.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=ht.isEmptyObject(t),s=ht.speed(e,n,i),a=function(){var e=G(this,ht.extend({},t),s);(r||Lt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=ht.timers,a=Lt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&le.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||ht.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Lt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=ht.timers,a=i?i.length:0;for(n.finish=!0,ht.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),ht.each(["toggle","show","hide"],function(t,e){var n=ht.fn[e];ht.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(z(e,!0),t,i,r)}}),ht.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ht.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),ht.timers=[],ht.fx.tick=function(){var t,e=0,n=ht.timers;for(ce=ht.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||ht.fx.stop(),ce=void 0},ht.fx.timer=function(t){ht.timers.push(t),t()?ht.fx.start():ht.timers.pop()},ht.fx.interval=13,ht.fx.start=function(){ue||(ue=s.setInterval(ht.fx.tick,ht.fx.interval))},ht.fx.stop=function(){s.clearInterval(ue),ue=null},ht.fx.speeds={slow:600,fast:200,_default:400},ht.fn.delay=function(t,e){return t=ht.fx?ht.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=s.setTimeout(e,t);n.stop=function(){s.clearTimeout(i)}})},function(){var t=tt.createElement("input"),e=tt.createElement("select"),n=e.appendChild(tt.createElement("option"));t.type="checkbox",ct.checkOn=""!==t.value,ct.optSelected=n.selected,e.disabled=!0,ct.optDisabled=!n.disabled,t=tt.createElement("input"),t.value="t",t.type="radio",ct.radioValue="t"===t.value}();var pe,fe=ht.expr.attrHandle;ht.fn.extend({attr:function(t,e){return At(this,ht.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ht.removeAttr(this,t)})}}),ht.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?ht.prop(t,e,n):(1===s&&ht.isXMLDoc(t)||(e=e.toLowerCase(),r=ht.attrHooks[e]||(ht.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void ht.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=ht.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!ct.radioValue&&"radio"===e&&ht.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(Tt);if(s&&1===t.nodeType)for(;n=s[r++];)i=ht.propFix[n]||n,ht.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?ht.removeAttr(t,n):t.setAttribute(n,n),n}},ht.each(ht.expr.match.bool.source.match(/\w+/g),function(t,e){var n=fe[e]||ht.find.attr;fe[e]=function(t,e,i){var r,s;return i||(s=fe[e],fe[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,fe[e]=s),r}});var de=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;ht.fn.extend({prop:function(t,e){return At(this,ht.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ht.propFix[t]||t]})}}),ht.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&ht.isXMLDoc(t)||(e=ht.propFix[e]||e,r=ht.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=ht.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ct.optSelected||(ht.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ht.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ht.propFix[this.toLowerCase()]=this});var me=/[\t\r\n\f]/g;ht.fn.extend({addClass:function(t){var e,n,i,r,s,a,o,c=0;if(ht.isFunction(t))return this.each(function(e){ht(this).addClass(t.call(this,e,W(this)))});if("string"==typeof t&&t)for(e=t.match(Tt)||[];n=this[c++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(me," ")){for(a=0;s=e[a++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");o=ht.trim(i),r!==o&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,r,s,a,o,c=0;if(ht.isFunction(t))return this.each(function(e){ht(this).removeClass(t.call(this,e,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Tt)||[];n=this[c++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(me," ")){for(a=0;s=e[a++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");o=ht.trim(i),r!==o&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):ht.isFunction(t)?this.each(function(n){ht(this).toggleClass(t.call(this,n,W(this),e),e)}):this.each(function(){var e,i,r,s;if("string"===n)for(i=0,r=ht(this),s=t.match(Tt)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=W(this),e&&Lt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Lt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(me," ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g,ye=/[\x20\t\r\n\f]+/g;ht.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=ht.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,ht(this).val()):t,null==r?r="":"number"==typeof r?r+="":ht.isArray(r)&&(r=ht.map(r,function(t){return null==t?"":t+""})),(e=ht.valHooks[this.type]||ht.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=ht.valHooks[r.type]||ht.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ve,""):null==n?"":n)):void 0}}),ht.extend({valHooks:{option:{get:function(t){var e=ht.find.attr(t,"value");return null!=e?e:ht.trim(ht.text(t)).replace(ye," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,a=s?null:[],o=s?r+1:i.length,c=0>r?o:s?r:0;o>c;c++)if(n=i[c],(n.selected||c===r)&&(ct.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ht.nodeName(n.parentNode,"optgroup"))){if(e=ht(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=ht.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=ht.inArray(ht.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),ht.each(["radio","checkbox"],function(){ht.valHooks[this]={set:function(t,e){return ht.isArray(e)?t.checked=ht.inArray(ht(t).val(),e)>-1:void 0}},ct.checkOn||(ht.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var _e=/^(?:focusinfocus|focusoutblur)$/;ht.extend(ht.event,{trigger:function(t,e,n,i){var r,a,o,c,u,h,l,p=[n||tt],f=ot.call(t,"type")?t.type:t,d=ot.call(t,"namespace")?t.namespace.split("."):[];if(a=o=n=n||tt,3!==n.nodeType&&8!==n.nodeType&&!_e.test(f+ht.event.triggered)&&(f.indexOf(".")>-1&&(d=f.split("."),f=d.shift(),d.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[ht.expando]?t:new ht.Event(f,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:ht.makeArray(e,[t]),l=ht.event.special[f]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!ht.isWindow(n)){for(c=l.delegateType||f,_e.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),o=a;o===(n.ownerDocument||tt)&&p.push(o.defaultView||o.parentWindow||s)}for(r=0;(a=p[r++])&&!t.isPropagationStopped();)t.type=r>1?c:l.bindType||f,h=(Lt.get(a,"events")||{})[t.type]&&Lt.get(a,"handle"),h&&h.apply(a,e),(h=u&&a[u])&&h.apply&&Ct(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=f,i||t.isDefaultPrevented()||l._default&&!1!==l._default.apply(p.pop(),e)||!Ct(n)||u&&ht.isFunction(n[f])&&!ht.isWindow(n)&&(o=n[u],o&&(n[u]=null),ht.event.triggered=f,n[f](),ht.event.triggered=void 0,o&&(n[u]=o)),t.result}},simulate:function(t,e,n){var i=ht.extend(new ht.Event,n,{type:t,isSimulated:!0});ht.event.trigger(i,null,e)}}),ht.fn.extend({trigger:function(t,e){return this.each(function(){ht.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ht.event.trigger(t,e,n,!0):void 0}}),ht.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ht.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ht.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ct.focusin="onfocusin"in s,ct.focusin||ht.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){ht.event.simulate(e,t.target,ht.event.fix(t))};ht.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Lt.access(i,e);r||i.addEventListener(t,n,!0),Lt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Lt.access(i,e)-1;r?Lt.access(i,e,r):(i.removeEventListener(t,n,!0),Lt.remove(i,e))}}});var xe=s.location,be=ht.now(),we=/\?/;ht.parseJSON=function(t){return JSON.parse(t+"")},ht.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new s.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||ht.error("Invalid XML: "+t),e};var Ee=/#.*$/,Se=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ae=/^(?:GET|HEAD)$/,Ce=/^\/\//,Le={},Pe={},Re="*/".concat("*"),Ie=tt.createElement("a");Ie.href=xe.href,ht.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:Me.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ht.parseJSON,"text xml":ht.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Y(Y(t,ht.ajaxSettings),e):Y(ht.ajaxSettings,t)},ajaxPrefilter:q(Le),ajaxTransport:q(Pe),ajax:function(t,e){function n(t,e,n,o){var u,l,y,_,b,E=e;2!==x&&(x=2,c&&s.clearTimeout(c),i=void 0,a=o||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(_=Z(p,w,n)),_=$(p,_,w,u),u?(p.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(ht.lastModified[r]=b),(b=w.getResponseHeader("etag"))&&(ht.etag[r]=b)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=_.state,l=_.data,y=_.error,u=!y)):(y=E,!t&&E||(E="error",0>t&&(t=0))),w.status=t,w.statusText=(e||E)+"",u?g.resolveWith(f,[l,E,w]):g.rejectWith(f,[w,E,y]),w.statusCode(v),v=void 0,h&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,p,u?l:y]),m.fireWith(f,[w,E]),h&&(d.trigger("ajaxComplete",[w,p]),--ht.active||ht.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,a,o,c,u,h,l,p=ht.ajaxSetup({},e),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?ht(f):ht.event,g=ht.Deferred(),m=ht.Callbacks("once memory"),v=p.statusCode||{},y={},_={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!o)for(o={};e=Te.exec(a);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=_[n]=_[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return i&&i.abort(e),n(0,e),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,p.url=((t||p.url||xe.href)+"").replace(Ee,"").replace(Ce,xe.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=ht.trim(p.dataType||"*").toLowerCase().match(Tt)||[""],null==p.crossDomain){u=tt.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Ie.protocol+"//"+Ie.host!=u.protocol+"//"+u.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ht.param(p.data,p.traditional)),X(Le,p,e,w),2===x)return w;h=ht.event&&p.global,h&&0==ht.active++&&ht.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ae.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(we.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=Se.test(r)?r.replace(Se,"$1_="+be++):r+(we.test(r)?"&":"?")+"_="+be++)),p.ifModified&&(ht.lastModified[r]&&w.setRequestHeader("If-Modified-Since",ht.lastModified[r]),ht.etag[r]&&w.setRequestHeader("If-None-Match",ht.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Re+"; q=0.01":""):p.accepts["*"]);for(l in p.headers)w.setRequestHeader(l,p.headers[l]);if(p.beforeSend&&(!1===p.beforeSend.call(f,w,p)||2===x))return w.abort();b="abort";for(l in{success:1,error:1,complete:1})w[l](p[l]);if(i=X(Pe,p,e,w)){if(w.readyState=1,h&&d.trigger("ajaxSend",[w,p]),2===x)return w;p.async&&p.timeout>0&&(c=s.setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,i.send(y,n)}catch(t){if(!(2>x))throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return ht.get(t,e,n,"json")},getScript:function(t,e){return ht.get(t,void 0,e,"script")}}),ht.each(["get","post"],function(t,e){ht[e]=function(t,n,i,r){return ht.isFunction(n)&&(r=r||i,i=n,n=void 0),ht.ajax(ht.extend({url:t,type:e,dataType:r,data:n,success:i},ht.isPlainObject(t)&&t))}}),ht._evalUrl=function(t){return ht.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ht.fn.extend({wrapAll:function(t){var e;return ht.isFunction(t)?this.each(function(e){ht(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ht(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return ht.isFunction(t)?this.each(function(e){ht(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ht(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ht.isFunction(t);return this.each(function(n){ht(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ht.nodeName(this,"body")||ht(this).replaceWith(this.childNodes)}).end()}}),ht.expr.filters.hidden=function(t){return!ht.expr.filters.visible(t)},ht.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var ke=/%20/g,Oe=/\[\]$/,Ne=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;ht.param=function(t,e){var n,i=[],r=function(t,e){e=ht.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ht.ajaxSettings&&ht.ajaxSettings.traditional),ht.isArray(t)||t.jquery&&!ht.isPlainObject(t))ht.each(t,function(){r(this.name,this.value)});else for(n in t)J(n,t[n],e,r);return i.join("&").replace(ke,"+")},ht.fn.extend({serialize:function(){return ht.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ht.prop(this,"elements");return t?ht.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ht(this).is(":disabled")&&Fe.test(this.nodeName)&&!De.test(t)&&(this.checked||!Ft.test(t))}).map(function(t,e){var n=ht(this).val();return null==n?null:ht.isArray(n)?ht.map(n,function(t){return{name:e.name,value:t.replace(Ne,"\r\n")}}):{name:e.name,value:n.replace(Ne,"\r\n")}}).get()}}),ht.ajaxSettings.xhr=function(){try{return new s.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},Be=ht.ajaxSettings.xhr();ct.cors=!!Be&&"withCredentials"in Be,ct.ajax=Be=!!Be,ht.ajaxTransport(function(t){var e,n;return ct.cors||Be&&!t.crossDomain?{send:function(i,r){var a,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)o[a]=t.xhrFields[a];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)o.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=o.onload=o.onerror=o.onabort=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?r(0,"error"):r(o.status,o.statusText):r(Ue[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=e(),n=o.onerror=e("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&s.setTimeout(function(){e&&n()})},e=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0}),ht.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ht.globalEval(t),t}}}),ht.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ht.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=ht("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),tt.head.appendChild(e[0])},abort:function(){n&&n()}}}});var ze=[],je=/(=)\?(?=&|$)|\?\?/;ht.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||ht.expando+"_"+be++;return this[t]=!0,t}}),ht.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,a,o=!1!==t.jsonp&&(je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&je.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ht.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(je,"$1"+i):!1!==t.jsonp&&(t.url+=(we.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ht.error(i+" was not called"),a[0]},t.dataTypes[0]="json",r=s[i],s[i]=function(){a=arguments},n.always(function(){void 0===r?ht(s).removeProp(i):s[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,ze.push(i)),a&&ht.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),ht.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||tt;var i=_t.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=v([t],e,r),r&&r.length&&ht(r).remove(),ht.merge([],i.childNodes))};var He=ht.fn.load;ht.fn.load=function(t,e,n){if("string"!=typeof t&&He)return He.apply(this,arguments);var i,r,s,a=this,o=t.indexOf(" ");return o>-1&&(i=ht.trim(t.slice(o)),t=t.slice(0,o)),ht.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&ht.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,a.html(i?ht("<div>").append(ht.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},ht.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ht.fn[e]=function(t){return this.on(e,t)}}),ht.expr.filters.animated=function(t){return ht.grep(ht.timers,function(e){return t===e.elem}).length},ht.offset={setOffset:function(t,e,n){var i,r,s,a,o,c,u,h=ht.css(t,"position"),l=ht(t),p={};"static"===h&&(t.style.position="relative"),o=l.offset(),s=ht.css(t,"top"),c=ht.css(t,"left"),u=("absolute"===h||"fixed"===h)&&(s+c).indexOf("auto")>-1,u?(i=l.position(),a=i.top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(c)||0),ht.isFunction(e)&&(e=e.call(t,n,ht.extend({},o))),null!=e.top&&(p.top=e.top-o.top+a),null!=e.left&&(p.left=e.left-o.left+r),"using"in e?e.using.call(t,p):l.css(p)}},ht.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ht.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;return s?(e=s.documentElement,ht.contains(e,i)?(r=i.getBoundingClientRect(),n=K(s),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===ht.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ht.nodeName(t[0],"html")||(i=t.offset()),i.top+=ht.css(t[0],"borderTopWidth",!0),i.left+=ht.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ht.css(n,"marginTop",!0),left:e.left-i.left-ht.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ht.css(t,"position");)t=t.offsetParent;return t||ne})}}),ht.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;ht.fn[t]=function(i){return At(this,function(t,i,r){var s=K(t);return void 0===r?s?s[e]:t[i]:void(s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r)},t,i,arguments.length)}}),ht.each(["top","left"],function(t,e){ht.cssHooks[e]=I(ct.pixelPosition,function(t,n){return n?(n=R(t,e),Qt.test(n)?ht(t).position()[e]+"px":n):void 0})}),ht.each({Height:"height",Width:"width"},function(t,e){ht.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){ht.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===r?"margin":"border");return At(this,function(e,n,i){var r;return ht.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?ht.css(e,n,a):ht.style(e,n,i,a)},e,s?i:void 0,s,null)}})}),ht.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),ht.fn.andSelf=ht.fn.addBack,n(29)&&(i=[],void 0!==(r=function(){return ht}.apply(e,i))&&(t.exports=r));var Ve=s.jQuery,Ge=s.$;return ht.noConflict=function(t){return s.$===ht&&(s.$=Ge),t&&s.jQuery===ht&&(s.jQuery=Ve),ht},a||(s.jQuery=s.$=ht),ht})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){n(11),window.THREE=n(121),window._=n(129),window.$=n(45),n(119),window.DI=n(130),n(137),window.Hammer=n(118),window.LRUCache=n(132),window.i18next=n(143),window.i18nextXHR=n(142),window.marked=n(120),n(131),window.paper=n(144),window.FileSaver=n(117),n(146)},function(t,e,n){"use strict";function i(){}var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.__esModule=!0;var s=n(11),a=(function(t){t&&t.__esModule}(s),n(19)),o=n(50),c=n(30);a.Metadata.registration="aurelia:registration",a.Metadata.instanceActivator="aurelia:instance-activator",i.name||Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}});var u=Object.freeze([]);e.emptyParameters=u;var h=function(){function t(e){r(this,t),this.constructionInfo=e||new Map,this.entries=new Map,this.root=this}return t.prototype.addParameterInfoLocator=function(t){if(void 0===this.locateParameterInfoElsewhere)return void(this.locateParameterInfoElsewhere=t);var e=this.locateParameterInfoElsewhere;this.locateParameterInfoElsewhere=function(n){return e(n)||t(n)}},t.prototype.registerInstance=function(t,e){this.registerHandler(t,function(t){return e})},t.prototype.registerTransient=function(t,e){e=e||t,this.registerHandler(t,function(t){return t.invoke(e)})},t.prototype.registerSingleton=function(t,e){var n=null;e=e||t,this.registerHandler(t,function(t){return n||(n=t.invoke(e))})},t.prototype.autoRegister=function(t,e){var n;if(null===t||void 0===t)throw new Error("fn cannot be null or undefined.");n=a.Metadata.get(a.Metadata.registration,t),void 0!==n?n.register(this,e||t,t):this.registerSingleton(e||t,t)},t.prototype.autoRegisterAll=function(t){for(var e=t.length;e--;)this.autoRegister(t[e])},t.prototype.registerHandler=function(t,e){this.getOrCreateEntry(t).push(e)},t.prototype.unregister=function(t){this.entries.delete(t)},t.prototype.get=function(e){var n;if(null===e||void 0===e)throw new Error("key cannot be null or undefined.");return e===t?this:e instanceof c.Resolver?e.get(this):void 0!==(n=this.entries.get(e))?n[0](this):this.parent?this.parent.get(e):(this.autoRegister(e),n=this.entries.get(e),n[0](this))},t.prototype.getAll=function(t){var e,n=this;if(null===t||void 0===t)throw new Error("key cannot be null or undefined.");return e=this.entries.get(t),void 0!==e?e.map(function(t){return t(n)}):this.parent?this.parent.getAll(t):[]},t.prototype.hasHandler=function(t){var e=void 0!==arguments[1]&&arguments[1];if(null===t||void 0===t)throw new Error("key cannot be null or undefined.");return this.entries.has(t)||e&&this.parent&&this.parent.hasHandler(t,e)},t.prototype.createChild=function(){var e=new t(this.constructionInfo);return e.parent=this,e.root=this.root,e.locateParameterInfoElsewhere=this.locateParameterInfoElsewhere,e},t.prototype.invoke=function(t){try{var e,n,i=this.getOrCreateConstructionInfo(t),r=i.keys,s=new Array(r.length);for(e=0,n=r.length;e<n;++e)s[e]=this.get(r[e]);return i.activator.invoke(t,s)}catch(e){throw o.AggregateError("Error instantiating "+t.name+".",e,!0)}},t.prototype.getOrCreateEntry=function(t){var e;if(null===t||void 0===t)throw new Error("key cannot be null or undefined.");return e=this.entries.get(t),void 0===e&&(e=[],this.entries.set(t,e)),e},t.prototype.getOrCreateConstructionInfo=function(t){var e=this.constructionInfo.get(t);return void 0===e&&(e=this.createConstructionInfo(t),this.constructionInfo.set(t,e)),e},t.prototype.createConstructionInfo=function(t){var e={activator:a.Metadata.getOwn(a.Metadata.instanceActivator,t)||c.ClassActivator.instance};return void 0!==t.inject?("function"==typeof t.inject?e.keys=t.inject():e.keys=t.inject,e):(void 0!==this.locateParameterInfoElsewhere?e.keys=this.locateParameterInfoElsewhere(t)||Reflect.getOwnMetadata(a.Metadata.paramTypes,t)||u:e.keys=Reflect.getOwnMetadata(a.Metadata.paramTypes,t)||u,e)},t}();e.Container=h},function(t,e,n){"use strict";function i(t){var e=function(t){t.inject=Reflect.getOwnMetadata(h.Metadata.paramTypes,t)||l.emptyParameters};return t?e(t):e}function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){t.inject=e}}function s(t){return function(e){Reflect.defineMetadata(h.Metadata.registration,t,e)}}function a(t){return s(new l.TransientRegistration(t))}function o(t){var e=void 0!==arguments[1]&&arguments[1];return s(new l.SingletonRegistration(t,e))}function c(t){return function(e){Reflect.defineMetadata(h.Metadata.instanceActivator,t,e)}}function u(){return c(l.FactoryActivator.instance)}e.__esModule=!0,e.autoinject=i,e.inject=r,e.registration=s,e.transient=a,e.singleton=o,e.instanceActivator=c,e.factory=u;var h=n(19),l=n(30);e.TransientRegistration=l.TransientRegistration,e.SingletonRegistration=l.SingletonRegistration,e.Resolver=l.Resolver,e.Lazy=l.Lazy,e.All=l.All,e.Optional=l.Optional,e.Parent=l.Parent,e.ClassActivator=l.ClassActivator,e.FactoryActivator=l.FactoryActivator;var p=n(48);e.Container=p.Container,h.Decorators.configure.simpleDecorator("autoinject",i),h.Decorators.configure.parameterizedDecorator("inject",r),h.Decorators.configure.parameterizedDecorator("registration",s),h.Decorators.configure.parameterizedDecorator("transient",a),h.Decorators.configure.parameterizedDecorator("singleton",o),h.Decorators.configure.parameterizedDecorator("instanceActivator",c),h.Decorators.configure.parameterizedDecorator("factory",u)},function(t,e,n){"use strict";function i(t,e,n){if(e){if(e.innerError&&n)return e;e.stack&&(t+="\n------------------------------------------------\ninner error: "+e.stack)}var i=new Error(t);return e&&(i.innerError=e),i}function r(t,e,n){var i,r=y.length;for(n=_.call(n),n.unshift(t);r--;)i=y[r],i[e].apply(i,n)}function s(){v<4||r(this,"debug",arguments)}function a(){v<3||r(this,"info",arguments)}function o(){v<2||r(this,"warn",arguments)}function c(){v<1||r(this,"error",arguments)}function u(t){t.debug=s,t.info=a,t.warn=o,t.error=c}function h(t){var e=new b(t,x);return y.length&&u(e),e}function l(t){return m[t]||(m[t]=h(t))}function p(t){if(y.push(t),1===y.length)for(var e in m)u(m[e])}function f(t){v=t}var d=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.__esModule=!0,e.AggregateError=i,e.getLogger=l,e.addAppender=p,e.setLevel=f;var g={none:0,error:1,warn:2,info:3,debug:4};e.logLevel=g;var m={},v=g.none,y=[],_=Array.prototype.slice,x={},b=function(){function t(e,n){if(d(this,t),n!==x)throw new Error('You cannot instantiate "Logger". Use the "getLogger" API instead.');this.id=e}return t.prototype.debug=function(){},t.prototype.info=function(){},t.prototype.warn=function(){},t.prototype.error=function(){},t}();e.Logger=b},function(t,e,n){"use strict";var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.__esModule=!0;var r=(n(31),function(){function t(){i(this,t),this._first=null,this._second=null,this._third=null,this._rest=null}return t.prototype.decorator=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return null===this._first?(this._first=t,this):null===this._second?(this._second=t,this):null===this._third?(this._third=t,this):(null===this._rest&&(this._rest=[]),this._rest.push(t),this)}),t.prototype._decorate=function(t){var e,n,i;if(null!==this._first&&this._first(t),null!==this._second&&this._second(t),null!==this._third&&this._third(t),null!==(i=this._rest))for(e=0,n=i.length;e<n;++e)i[e](t)},t}());e.DecoratorApplicator=r},function(t,e,n){"use strict";e.__esModule=!0;var i=n(51),r={configure:{parameterizedDecorator:function(t,e){r[t]=function(){var e=new i.DecoratorApplicator;return e[t].apply(e,arguments)},i.DecoratorApplicator.prototype[t]=function(){var t=e.apply(null,arguments);return this.decorator(t)}},simpleDecorator:function(t,e){r[t]=function(){return(new i.DecoratorApplicator).decorator(e)},i.DecoratorApplicator.prototype[t]=function(){return this.decorator(e)}}}};e.Decorators=r},function(t,e,n){"use strict";function i(t){return t instanceof c?t:new c(t)}var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.__esModule=!0;var s=n(11),a=(function(t){t&&t.__esModule}(s),new Map),o=Object.freeze({moduleId:void 0,moduleMember:void 0}),c=function(){function t(e,n){r(this,t),this.moduleId=e,this.moduleMember=n}return t.get=function(t){var e=a.get(t);return void 0!==e?e:("function"==typeof t.origin?a.set(t,e=i(t.origin())):void 0!==t.origin&&a.set(t,e=i(t.origin)),e||o)},t.set=function(e,n){t.get(e)===o&&a.set(e,n)},t}();e.Origin=c},function(t,e,n){"use strict";function i(t,e,n,i){if(S(i)){if(S(n)){if(!T(t))throw new TypeError;if(!A(e))throw new TypeError;return f(t,e)}if(!T(t))throw new TypeError;if(!M(e))throw new TypeError;return n=L(n),g(t,e,n)}if(!T(t))throw new TypeError;if(!M(e))throw new TypeError;if(S(n))throw new TypeError;if(!M(i))throw new TypeError;return n=L(n),d(t,e,n,i)}function r(t,e){function n(n,i){if(S(i)){if(!A(n))throw new TypeError;b(t,e,n,void 0)}else{if(!M(n))throw new TypeError;i=L(i),b(t,e,n,i)}}return n}function s(t,e,n,i){if(!M(n))throw new TypeError;return S(i)||(i=L(i)),b(t,e,n,i)}function a(t,e,n){if(!M(e))throw new TypeError;return S(n)||(n=L(n)),v(t,e,n)}function o(t,e,n){if(!M(e))throw new TypeError;return S(n)||(n=L(n)),y(t,e,n)}function c(t,e,n){if(!M(e))throw new TypeError;return S(n)||(n=L(n)),_(t,e,n)}function u(t,e,n){if(!M(e))throw new TypeError;return S(n)||(n=L(n)),x(t,e,n)}function h(t,e){if(!M(t))throw new TypeError;return S(e)||(e=L(e)),w(t,e)}function l(t,e){if(!M(t))throw new TypeError;return S(e)||(e=L(e)),E(t,e)}function p(t,e,n){if(!M(e))throw new TypeError;S(n)||(n=L(n));var i=m(e,n,!1);if(S(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=D.get(e);return r.delete(n),r.size>0||(D.delete(e),!0)}function f(t,e){for(var n=t.length-1;n>=0;--n){var i=t[n],r=i(e);if(!S(r)){if(!A(r))throw new TypeError;e=r}}return e}function d(t,e,n,i){for(var r=t.length-1;r>=0;--r){var s=t[r],a=s(e,n,i);if(!S(a)){if(!M(a))throw new TypeError;i=a}}return i}function g(t,e,n){for(var i=t.length-1;i>=0;--i){(0,t[i])(e,n)}}function m(t,e,n){var i=D.get(t);if(!i){if(!n)return;i=new k,D.set(t,i)}var r=i.get(e);if(!r){if(!n)return;r=new k,i.set(e,r)}return r}function v(t,e,n){for(var i=!0;i;){o=c=void 0,i=!1;var r=t,s=e,a=n,o=y(r,s,a);if(o)return!0;var c=P(s);if(null===c)return!1;t=r,e=c,n=a,i=!0}}function y(t,e,n){var i=m(e,n,!1);return void 0!==i&&Boolean(i.has(t))}function _(t,e,n){for(var i=!0;i;){o=c=void 0,i=!1;var r=t,s=e,a=n,o=y(r,s,a);if(o)return x(r,s,a);var c=P(s);if(null===c)return;t=r,e=c,n=a,i=!0}}function x(t,e,n){var i=m(e,n,!1);if(void 0!==i)return i.get(t)}function b(t,e,n,i){m(n,i,!0).set(t,e)}function w(t,e){var n=E(t,e),i=P(t);if(null===i)return n;var r=w(i,e);if(r.length<=0)return n;if(n.length<=0)return r;for(var s=new O,a=[],o=0;o<n.length;o++){var c=n[o],u=s.has(c);u||(s.add(c),a.push(c))}for(var h=0;h<r.length;h++){var c=r[h],u=s.has(c);u||(s.add(c),a.push(c))}return a}function E(t,e){var n=m(t,e,!1),i=[];return n&&n.forEach(function(t,e){return i.push(e)}),i}function S(t){return void 0===t}function T(t){return Array.isArray(t)}function M(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t){return"function"==typeof t}function C(t){return"symbol"==typeof t}function L(t){return C(t)?t:String(t)}function P(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===I)return e;if(e!==I)return e;var n=t.prototype,i=Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r?e:r===t?e:r}var R=n(11),I=(function(t){t&&t.__esModule}(R),Object.getPrototypeOf(Function)),k=Map,O=Set,N=WeakMap,D=new N;Reflect.decorate=i,Reflect.metadata=r,Reflect.defineMetadata=s,Reflect.hasMetadata=a,Reflect.hasOwnMetadata=o,Reflect.getMetadata=c,Reflect.getOwnMetadata=u,Reflect.getMetadataKeys=h,Reflect.getOwnMetadataKeys=l,Reflect.deleteMetadata=p},function(t,e){t.exports=function(t){return t.FW=!0,t.path=t.g,t}},function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);this[f]=g(t),this[l]=!!e}function r(t){function e(t,e,n){this[f]=g(t),this[l]=t[l],this[p]=a(e,n,t[l]?2:1)}return v(e,"Chain",t,y),m(e.prototype,s.that),e}var s=n(0),a=n(7),o=n(4).safe,c=n(1),u=n(5),h=n(9),l=o("entries"),p=o("fn"),f=o("iter"),d=n(21),g=u.get,m=u.set,v=u.create;v(i,"Wrapper",function(){return this[f].next()});var y=i.prototype;m(y,function(){return this[f]});var _=r(function(){var t=this[f].next();return t.done?t:u.step(0,d(this[f],this[p],t.value,this[l]))}),x=r(function(){for(;;){var t=this[f].next();if(t.done||d(this[f],this[p],t.value,this[l]))return t}});n(13)(y,{of:function(t,e){h(this,this[l],t,e)},array:function(t,e){var n=[];return h(void 0!=t?this.map(t,e):this,!1,n.push,n),n},filter:function(t,e){return new x(this,t,e)},map:function(t,e){return new _(this,t,e)}}),i.isIterable=u.is,i.getIterator=g,c(c.G+c.F,{$for:i})},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(2).fn;r(r.P+r.F,"Array",{turn:function(t,e){s(t);for(var n=void 0==e?[]:Object(e),r=i.ES5Object(this),a=i.toLength(r.length),o=0;a>o&&!1!==t(n,r[o],o++,this););return n}}),n(10)("turn")},function(t,e,n){function i(t){return t>9?t:"0"+t}function r(t){return function(e,n){function r(e){return s[t+e]()}var s=this,o=l[a.has(l,n)?n:p];return String(e).replace(u,function(t){switch(t){case"s":return r(f);case"ss":return i(r(f));case"m":return r(d);case"mm":return i(r(d));case"h":return r(g);case"hh":return i(r(g));case"D":return r(m);case"DD":return i(r(m));case"W":return o[0][r("Day")];case"N":return r(v)+1;case"NN":return i(r(v)+1);case"M":return o[2][r(v)];case"MM":return o[1][r(v)];case"Y":return r(y);case"YY":return i(r(y)%100)}return t})}}function s(t,e){function n(t){var n=[];return a.each.call(e.months.split(","),function(e){n.push(e.replace(h,"$"+t))}),n}return l[t]=[e.weekdays.split(","),n(1),n(2)],c}var a=n(0),o=n(1),c=a.core,u=/\b\w\w?\b/g,h=/:(.*)\|(.*)$/,l={},p="en",f="Seconds",d="Minutes",g="Hours",m="Date",v="Month",y="FullYear";o(o.P+o.F,m,{format:r("get"),formatUTC:r("getUTC")}),s(p,{weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",months:"January,February,March,April,May,June,July,August,September,October,November,December"}),s("ru",{weekdays:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435,\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a,\u0412\u0442\u043e\u0440\u043d\u0438\u043a,\u0421\u0440\u0435\u0434\u0430,\u0427\u0435\u0442\u0432\u0435\u0440\u0433,\u041f\u044f\u0442\u043d\u0438\u0446\u0430,\u0421\u0443\u0431\u0431\u043e\u0442\u0430",months:"\u042f\u043d\u0432\u0430\u0440:\u044f|\u044c,\u0424\u0435\u0432\u0440\u0430\u043b:\u044f|\u044c,\u041c\u0430\u0440\u0442:\u0430|,\u0410\u043f\u0440\u0435\u043b:\u044f|\u044c,\u041c\u0430:\u044f|\u0439,\u0418\u044e\u043d:\u044f|\u044c,\u0418\u044e\u043b:\u044f|\u044c,\u0410\u0432\u0433\u0443\u0441\u0442:\u0430|,\u0421\u0435\u043d\u0442\u044f\u0431\u0440:\u044f|\u044c,\u041e\u043a\u0442\u044f\u0431\u0440:\u044f|\u044c,\u041d\u043e\u044f\u0431\u0440:\u044f|\u044c,\u0414\u0435\u043a\u0430\u0431\u0440:\u044f|\u044c"}),c.locale=function(t){return a.has(l,t)?p=t:p},c.addLocale=s},function(t,e,n){var i=n(0),r=n(1),s=n(24);r(r.G+r.F,{delay:function(t){return new(i.core.Promise||i.g.Promise)(function(e){setTimeout(s.call(e,!0),t)})}})},function(t,e,n){function i(t){var e=u.create(null);return void 0!=t&&(m.is(t)?v(t,!0,function(t,n){e[t]=n}):p(e,t)),e}function r(t,e){u.set(this,d,{o:x(t),a:_(t),i:0,k:e})}function s(t){return function(e){return new r(e,t)}}function a(t,e){return"function"==typeof t?t:e}function o(t){var e=1==t,n=4==t;return function(r,s,o){var c,u,l,p=h(s,o,3),f=x(r),d=e||7==t||2==t?new(a(this,i)):void 0;for(c in f)if(b(f,c)&&(u=f[c],l=p(u,c,r),t))if(e)d[c]=l;else if(l)switch(t){case 2:d[c]=u;break;case 3:return!0;case 5:return u;case 6:return c;case 7:d[l[0]]=l[1]}else if(n)return!1;return 3==t||n?n:d}}function c(t){return function(e,n,r){g.fn(n);var s,o,c,u=x(e),h=_(u),l=h.length,p=0;for(t?s=void 0==r?new(a(this,i)):Object(r):arguments.length<3?(g(l,"Reduce of empty object with no initial value"),s=u[h[p++]]):s=Object(r);l>p;)if(b(u,o=h[p++]))if(c=n(s,u[o],o,e),t){if(!1===c)break}else s=c;return s}}var u=n(0),h=n(7),l=n(1),p=n(20),f=n(39),d=n(4).safe("iter"),g=n(2),m=n(5),v=n(9),y=m.step,_=u.getKeys,x=u.toObject,b=u.has;i.prototype=null,m.create(r,"Dict",function(){var t,e=this[d],n=e.o,i=e.a,r=e.k;do{if(e.i>=i.length)return e.o=void 0,y(1)}while(!b(n,t=i[e.i++]));return"keys"==r?y(0,t):"values"==r?y(0,n[t]):y(0,[t,n[t]])});var w=o(6);l(l.G+l.F,{Dict:i}),l(l.S,"Dict",{keys:s("keys"),values:s("values"),entries:s("entries"),forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findKey:w,mapPairs:o(7),reduce:c(!1),turn:c(!0),keyOf:f,includes:function(t,e){return void 0!==(e==e?f(t,e):w(t,function(t){return t!=t}))},has:b,get:function(t,e){if(b(t,e))return t[e]},set:u.def,isDict:function(t){return u.isObject(t)&&u.getProto(t)===i.prototype}})},function(t,e,n){"use strict";var i=n(0),r=n(1);i.core._=i.path._=i.path._||{},r(r.P+r.F,"Function",{part:n(24)})},function(t,e,n){var i=n(1);i(i.G+i.F,{global:n(0).g})},function(t,e,n){var i=n(0).core,r=n(5);i.isIterable=r.is,i.getIterator=r.get},function(t,e,n){var i=n(0),r=n(1),s={},a=!0;i.each.call("assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,isIndependentlyComposed,log,markTimeline,profile,profileEnd,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(","),function(t){s[t]=function(){if(a&&i.g.console&&i.isFunction(console[t]))return Function.apply.call(console[t],console,arguments)}}),r(r.G+r.F,{log:n(20)(s.log,s,{enable:function(){a=!0},disable:function(){a=!1}})})},function(t,e,n){"use strict";var i=n(0),r=n(4).safe("iter");n(16)(Number,"Number",function(t){i.set(this,r,{l:i.toLength(t),i:0})},function(){var t=this[r],e=t.i++,n=e>=t.l;return{done:n,value:n?void 0:e}})},function(t,e,n){"use strict";var i=n(0),r=n(1),s=n(12),a={};a.random=function(t){var e=+this,n=void 0==t?0:+t,i=Math.min(e,n);return Math.random()*(Math.max(e,n)-i)+i},i.FW&&i.each.call("round,floor,ceil,abs,sin,asin,cos,acos,tan,atan,exp,sqrt,max,min,pow,atan2,acosh,asinh,atanh,cbrt,clz32,cosh,expm1,hypot,imul,log1p,log10,log2,sign,sinh,tanh,trunc".split(","),function(t){var e=Math[t];e&&(a[t]=function(){for(var t=[+this],n=0;arguments.length>n;)t.push(arguments[n++]);return s(e,t)})}),r(r.P+r.F,"Number",a)},function(t,e,n){function i(t,e){for(var n,i=a(r.toObject(e)),s=i.length,o=0;s>o;)r.setDesc(t,n=i[o++],r.getDesc(e,n));return t}var r=n(0),s=n(1),a=n(23);s(s.S+s.F,"Object",{isObject:r.isObject,classof:n(3).classof,define:i,make:function(t,e){return i(r.create(t),e)}})},function(t,e,n){var i,r=n(1),s=n(17),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},o={};for(i in a)o[a[i]]=i;r(r.P+r.F,"String",{escapeHTML:s(/[&<>"']/g,a),unescapeHTML:s(/&(?:amp|lt|gt|quot|apos);/g,o)})},function(t,e,n){function i(t,e){return function(n){var i,r=C(n),s=0,a=[];for(i in r)i!=f&&w(r,i)&&a.push(i);for(;e>s;)w(r,i=t[s++])&&(~I(a,i)||a.push(i));return a}}function r(){}function s(t){return function(e,n){d.fn(e);var i=C(this),r=L(i.length),s=t?r-1:0,a=t?-1:1;if(arguments.length<2)for(;;){if(s in i){n=i[s],s+=a;break}s+=a,d(t?s>=0:r>s,"Reduce of empty array with no initial value")}for(;t?s>=0:r>s;s+=a)s in i&&(n=e(n,i[s],s,this));return n}}function a(t){return t>9?t:"0"+t}var o=n(0),c=n(36),u=n(3),h=n(1),l=n(12),p=n(14),f=n(4).safe("__proto__"),d=n(2),g=d.obj,m=Object.prototype,v=o.html,y=[],_=y.slice,x=y.join,b=u.classof,w=o.has,E=o.setDesc,S=o.getDesc,T=o.setDescs,M=o.isFunction,A=o.isObject,C=o.toObject,L=o.toLength,P=o.toIndex,R=!1,I=n(32)(!1),k=p(0),O=p(1),N=p(2),D=p(3),F=p(4);if(!o.DESC){try{R=8==E(c("div"),"x",{get:function(){return 8}}).x}catch(t){}o.setDesc=function(t,e,n){if(R)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(g(t)[e]=n.value),t},o.getDesc=function(t,e){if(R)try{return S(t,e)}catch(t){}if(w(t,e))return o.desc(!m.propertyIsEnumerable.call(t,e),t[e])},o.setDescs=T=function(t,e){g(t);for(var n,i=o.getKeys(e),r=i.length,s=0;r>s;)o.setDesc(t,n=i[s++],e[n]);return t}}h(h.S+h.F*!o.DESC,"Object",{getOwnPropertyDescriptor:o.getDesc,defineProperty:o.setDesc,defineProperties:T});var U="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),B=U.concat("length","prototype"),z=U.length,j=function(){var t,e=c("iframe"),n=z;for(e.style.display="none",v.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),j=t.F;n--;)delete j.prototype[U[n]];return j()};h(h.S,"Object",{getPrototypeOf:o.getProto=o.getProto||function(t){return t=Object(d.def(t)),w(t,f)?t[f]:M(t.constructor)&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?m:null},getOwnPropertyNames:o.getNames=o.getNames||i(B,B.length),create:o.create=o.create||function(t,e){var n;return null!==t?(r.prototype=g(t),n=new r,r.prototype=null,n[f]=t):n=j(),void 0===e?n:T(n,e)},keys:o.getKeys=o.getKeys||i(U,z),seal:function(t){return t},freeze:function(t){return t},preventExtensions:function(t){return t},isSealed:function(t){return!A(t)},isFrozen:function(t){return!A(t)},isExtensible:function(t){return A(t)}}),h(h.P,"Function",{bind:function(t){function e(){var r=i.concat(_.call(arguments)),s=this instanceof e,a=s?o.create(n.prototype):t,c=l(n,r,a);return s?a:c}var n=d.fn(this),i=_.call(arguments,1);return n.prototype&&(e.prototype=n.prototype),e}}),0 in Object("z")&&"z"=="z"[0]||(o.ES5Object=function(t){return"String"==u(t)?t.split(""):Object(t)});var H=!0;try{v&&_.call(v),H=!1}catch(t){}h(h.P+h.F*H,"Array",{slice:function(t,e){var n=L(this.length),i=u(this);if(e=void 0===e?n:e,"Array"==i)return _.call(this,t,e);for(var r=P(t,n),s=P(e,n),a=L(s-r),o=Array(a),c=0;c<a;c++)o[c]="String"==i?this.charAt(r+c):this[r+c];return o}}),h(h.P+h.F*(o.ES5Object!=Object),"Array",{join:function(){return x.apply(o.ES5Object(this),arguments)}}),h(h.S,"Array",{isArray:function(t){return"Array"==u(t)}}),h(h.P,"Array",{forEach:o.each=o.each||function(t){return k(this,t,arguments[1])},map:function(t){return O(this,t,arguments[1])},filter:function(t){return N(this,t,arguments[1])},some:function(t){return D(this,t,arguments[1])},every:function(t){return F(this,t,arguments[1])},reduce:s(!1),reduceRight:s(!0),indexOf:function(t){return I(this,t,arguments[1])},lastIndexOf:function(t,e){var n=C(this),i=L(n.length),r=i-1;for(arguments.length>1&&(r=Math.min(r,o.toInteger(e))),r<0&&(r=L(i+r));r>=0;r--)if(r in n&&n[r]===t)return r;return-1}}),h(h.P,"String",{trim:n(17)(/^\s*([\s\S]*\S)?\s*$/,"$1")}),h(h.S,"Date",{now:function(){return+new Date}});var V=new Date(-5e13-1),G=!(V.toISOString&&"0385-07-25T07:06:39.999Z"==V.toISOString()&&n(28)(function(){new Date(NaN).toISOString()}));h(h.P+h.F*G,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}}),"Object"==b(function(){return arguments}())&&(u.classof=function(t){var e=b(t);return"Object"==e&&M(t.callee)?"Arguments":e})},function(t,e,n){"use strict";var i=n(0),r=n(1),s=i.toIndex;r(r.P,"Array",{copyWithin:function(t,e){var n=Object(i.assertDefined(this)),r=i.toLength(n.length),a=s(t,r),o=s(e,r),c=arguments[2],u=void 0===c?r:s(c,r),h=Math.min(u-o,r-a),l=1;for(o<a&&a<o+h&&(l=-1,o=o+h-1,a=a+h-1);h-- >0;)o in n?n[a]=n[o]:delete n[a],a+=l,o+=l;return n}}),n(10)("copyWithin")},function(t,e,n){"use strict";var i=n(0),r=n(1),s=i.toIndex;r(r.P,"Array",{fill:function(t){for(var e=Object(i.assertDefined(this)),n=i.toLength(e.length),r=s(arguments[1],n),a=arguments[2],o=void 0===a?n:s(a,n);o>r;)e[r++]=t;return e}}),n(10)("fill")},function(t,e,n){"use strict";var i="findIndex",r=n(1),s=!0,a=n(14)(6);i in[]&&Array(1)[i](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(t){return a(this,t,arguments[1])}}),n(10)(i)},function(t,e,n){"use strict";var i=n(1),r=!0,s=n(14)(5);"find"in[]&&Array(1).find(function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return s(this,t,arguments[1])}}),n(10)("find")},function(t,e,n){var i=n(0),r=n(7),s=n(1),a=n(5),o=n(21);s(s.S+s.F*!n(22)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,s,c,u=Object(i.assertDefined(t)),h=arguments[1],l=void 0!==h,p=l?r(h,arguments[2],2):void 0,f=0;if(a.is(u))for(c=a.get(u),n=new("function"==typeof this?this:Array);!(s=c.next()).done;f++)n[f]=l?o(c,p,[s.value,f],!0):s.value;else for(n=new("function"==typeof this?this:Array)(e=i.toLength(u.length));e>f;f++)n[f]=l?p(u[f],f):u[f];return n.length=f,n}})},function(t,e,n){var i=n(1);i(i.S,"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)n[t]=arguments[t++];return n.length=e,n}})},function(t,e,n){n(18)(Array)},function(t,e,n){var i=n(0),r=n(6)("hasInstance"),s=Function.prototype;r in s||i.setDesc(s,r,{value:function(t){if(!i.isFunction(this)||!i.isObject(t))return!1;if(!i.isObject(this.prototype))return t instanceof this;for(;t=i.getProto(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){"use strict";var i=n(0),r=i.setDesc,s=Function.prototype;"name"in s||i.FW&&i.DESC&&r(s,"name",{configurable:!0,get:function(){var t=String(this).match(/^\s*function ([^ (]*)/),e=t?t[1]:"";return i.has(this,"name")||r(this,"name",i.desc(5,e)),e},set:function(t){i.has(this,"name")||r(this,"name",i.desc(0,t))}})},function(t,e,n){"use strict";var i=n(33);n(15)("Map",function(t){return function(){return t(this,arguments[0])}},{get:function(t){var e=i.getEntry(this,t);return e&&e.v},set:function(t,e){return i.def(this,0===t?0:t,e)}},i,!0)},function(t,e,n){function i(t){return t+1/m-1/m}function r(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}function s(t){return isFinite(t=+t)&&0!=t?t<0?-s(-t):p(t+f(t*t+1)):t}function a(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:l(t)-1}var o=n(1),c=Math.E,u=Math.pow,h=Math.abs,l=Math.exp,p=Math.log,f=Math.sqrt,d=Math.ceil,g=Math.floor,m=u(2,-52),v=u(2,-23),y=u(2,127)*(2-v),_=u(2,-126);o(o.S,"Math",{acosh:function(t){return(t=+t)<1?NaN:isFinite(t)?p(t/c+f(t+1)*f(t-1)/c)+1:t},asinh:s,atanh:function(t){return 0==(t=+t)?t:p((1+t)/(1-t))/2},cbrt:function(t){return r(t=+t)*u(h(t),1/3)},clz32:function(t){return(t>>>=0)?31-g(p(t+.5)*Math.LOG2E):32},cosh:function(t){return(l(t=+t)+l(-t))/2},expm1:a,fround:function(t){var e,n,s=h(t),a=r(t);return s<_?a*i(s/_/v)*_*v:(e=(1+v/m)*s,n=e-(e-s),n>y||n!=n?a*(1/0):a*n)},hypot:function(t,e){for(var n,i,r=0,s=0,a=arguments.length,o=0;s<a;)n=h(arguments[s++]),o<n?(i=o/n,r=r*i*i+1,o=n):n>0?(i=n/o,r+=i*i):r+=n;return o===1/0?1/0:o*f(r)},imul:function(t,e){var n=+t,i=+e,r=65535&n,s=65535&i;return 0|r*s+((65535&n>>>16)*s+r*(65535&i>>>16)<<16>>>0)},log1p:function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:p(1+t)},log10:function(t){return p(t)/Math.LN10},log2:function(t){return p(t)/Math.LN2},sign:r,sinh:function(t){return h(t=+t)<1?(a(t)-a(-t))/2:(l(t-1)-l(-t-1))*(c/2)},tanh:function(t){var e=a(t=+t),n=a(-t);return e==1/0?1:n==1/0?-1:(e-n)/(l(t)+l(-t))},trunc:function(t){return(t>0?g:d)(t)}})},function(t,e,n){"use strict";function i(t){var e,n;if(o(e=t.valueOf)&&!a(n=e.call(t)))return n;if(o(e=t.toString)&&!a(n=e.call(t)))return n;throw TypeError("Can't convert object to number")}function r(t){if(a(t)&&(t=i(t)),"string"==typeof t&&t.length>2&&48==t.charCodeAt(0)){var e=!1;switch(t.charCodeAt(1)){case 66:case 98:e=!0;case 79:case 111:return parseInt(t.slice(2),e?2:8)}}return+t}var s=n(0),a=s.isObject,o=s.isFunction,c=s.g.Number,u=c,h=c.prototype;!s.FW||c("0o1")&&c("0b1")||(c=function(t){return this instanceof c?new u(r(t)):r(t)},s.each.call(s.DESC?s.getNames(u):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(t){s.has(u,t)&&!s.has(c,t)&&s.setDesc(c,t,s.getDesc(u,t))}),c.prototype=h,h.constructor=c,n(8)(s.g,"Number",c))},function(t,e,n){function i(t){return!r.isObject(t)&&c(t)&&o(t)===t}var r=n(0),s=n(1),a=Math.abs,o=Math.floor,c=r.g.isFinite;s(s.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function(t){return"number"==typeof t&&c(t)},isInteger:i,isNaN:function(t){return t!=t},isSafeInteger:function(t){return i(t)&&a(t)<=9007199254740991},MAX_SAFE_INTEGER:9007199254740991,MIN_SAFE_INTEGER:-9007199254740991,parseFloat:parseFloat,parseInt:parseInt})},function(t,e,n){var i=n(1);i(i.S,"Object",{assign:n(20)})},function(t,e,n){var i=n(1);i(i.S,"Object",{is:n(40)})},function(t,e,n){var i=n(1);i(i.S,"Object",{setPrototypeOf:n(25).set})},function(t,e,n){var i=n(0),r=n(1),s=i.isObject,a=i.toObject;i.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(t,e){var o=(i.core.Object||{})[t]||Object[t],c=0,u={};u[t]=0==e?function(t){return s(t)?o(t):t}:1==e?function(t){return s(t)?o(t):t}:2==e?function(t){return s(t)?o(t):t}:3==e?function(t){return!s(t)||o(t)}:4==e?function(t){return!s(t)||o(t)}:5==e?function(t){return!!s(t)&&o(t)}:6==e?function(t,e){return o(a(t),e)}:7==e?function(t){return o(Object(i.assertDefined(t)))}:8==e?function(t){return o(a(t))}:n(38).get;try{o("z")}catch(t){c=1}r(r.S+r.F*c,"Object",u)})},function(t,e,n){"use strict";var i=n(3),r={};r[n(6)("toStringTag")]="z",n(0).FW&&"z"!=i(r)&&n(8)(Object.prototype,"toString",function(){return"[object "+i.classof(this)+"]"},!0)},function(t,e,n){"use strict";function i(t){var e=new C(function(){});return t&&(e.constructor=Object),C.resolve(e)===e}function r(t){return P(t)&&(k?"Promise"==g.classof(t):E in t)}function s(t,e){return!f.FW&&t===C&&e===p||x(t,e)}function a(t){var e=I(t)[w];return void 0!=e?e:t}function o(t){var e;return P(t)&&(e=t.then),!!L(e)&&e}function c(t){var e=t.c;e.length&&A.call(S,function(){for(var n=t.v,i=1==t.s,r=0;e.length>r;)!function(e){var r,s,a=i?e.ok:e.fail;try{a?(i||(t.h=!0),r=!0===a?n:a(n),r===e.P?e.rej(TypeError("Promise-chain cycle")):(s=o(r))?s.call(r,e.res,e.rej):e.res(r)):e.rej(n)}catch(t){e.rej(t)}}(e[r++]);e.length=0})}function u(t){var e,n=t[E],i=n.a||n.c,r=0;if(n.h)return!1;for(;i.length>r;)if(e=i[r++],e.fail||!u(e.P))return!1;return!0}function h(t){var e,n=this;n.d||(n.d=!0,n=n.r||n,n.v=t,n.s=2,n.a=n.c.slice(),setTimeout(function(){A.call(S,function(){u(e=n.p)&&(M?T.emit("unhandledRejection",t,e):S.console&&console.error&&console.error("Unhandled promise rejection",t)),n.a=void 0})},1),c(n))}function l(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{(e=o(t))?A.call(S,function(){var i={r:n,d:!1};try{e.call(t,d(l,i,1),d(h,i,1))}catch(t){h.call(i,t)}}):(n.v=t,n.s=1,c(n))}catch(t){h.call({r:n,d:!1},t)}}}var p,f=n(0),d=n(7),g=n(3),m=n(1),v=n(2),y=n(9),_=n(25).set,x=n(40),b=n(18),w=n(6)("species"),E=n(4).safe("record"),S=f.g,T=S.process,M="process"==g(T),A=T&&T.nextTick||n(43).set,C=S.Promise,L=f.isFunction,P=f.isObject,R=v.fn,I=v.obj,k=function(){function t(e){var n=new C(e);return _(n,t.prototype),n}var e=!1;try{if(e=L(C)&&L(C.resolve)&&i(),_(t,C),t.prototype=f.create(C.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&f.DESC){var n=!1;C.resolve(f.setDesc({},"then",{get:function(){n=!0}})),e=n}}catch(t){e=!1}return e}();k||(C=function(t){R(t);var e={p:v.inst(this,C,"Promise"),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1};f.hide(this,E,e);try{t(d(l,e,1),d(h,e,1))}catch(t){h.call(e,t)}},n(13)(C.prototype,{then:function(t,e){var n=I(I(this).constructor)[w],i={ok:!L(t)||t,fail:!!L(e)&&e},r=i.P=new(void 0!=n?n:C)(function(t,e){i.res=R(t),i.rej=R(e)}),s=this[E];return s.c.push(i),s.a&&s.a.push(i),s.s&&c(s),r},catch:function(t){return this.then(void 0,t)}})),m(m.G+m.W+m.F*!k,{Promise:C}),g.set(C,"Promise"),b(C),b(p=f.core.Promise),m(m.S+m.F*!k,"Promise",{reject:function(t){return new(a(this))(function(e,n){n(t)})}}),m(m.S+m.F*(!k||i(!0)),"Promise",{resolve:function(t){return r(t)&&s(t.constructor,this)?t:new this(function(e){e(t)})}}),m(m.S+m.F*!(k&&n(22)(function(t){C.all(t).catch(function(){})})),"Promise",{all:function(t){var e=a(this),n=[];return new e(function(i,r){y(t,!1,n.push,n);var s=n.length,a=Array(s);s?f.each.call(n,function(t,n){e.resolve(t).then(function(t){a[n]=t,--s||i(a)},r)}):i(a)})},race:function(t){var e=a(this);return new e(function(n,i){y(t,!1,function(t){e.resolve(t).then(n,i)})})}})},function(t,e,n){function i(t){r.set(this,u,{o:t,k:void 0,i:0})}var r=n(0),s=n(1),a=n(25),o=n(5),c=n(6)("iterator"),u=n(4).safe("iter"),h=o.step,l=n(2),p=r.isObject,f=r.getProto,d=r.g.Reflect,g=Function.apply,m=l.obj,v=Object.isExtensible||p,y=Object.preventExtensions,_=!(d&&d.enumerate&&c in d.enumerate({}));o.create(i,"Object",function(){var t,e=this[u],n=e.k;if(void 0==n){e.k=n=[];for(t in e.o)n.push(t)}do{if(e.i>=n.length)return h(1)}while(!((t=n[e.i++])in e.o));return h(0,t)});var x={apply:function(t,e,n){return g.call(t,e,n)},construct:function(t,e){var n=l.fn(arguments.length<3?t:arguments[2]).prototype,i=r.create(p(n)?n:Object.prototype),s=g.call(t,i,e);return p(s)?s:i},defineProperty:function(t,e,n){m(t);try{return r.setDesc(t,e,n),!0}catch(t){return!1}},deleteProperty:function(t,e){var n=r.getDesc(m(t),e);return!(n&&!n.configurable)&&delete t[e]},get:function t(e,n){var i,s=arguments.length<3?e:arguments[2],a=r.getDesc(m(e),n);return a?r.has(a,"value")?a.value:void 0===a.get?void 0:a.get.call(s):p(i=f(e))?t(i,n,s):void 0},getOwnPropertyDescriptor:function(t,e){return r.getDesc(m(t),e)},getPrototypeOf:function(t){return f(m(t))},has:function(t,e){return e in t},isExtensible:function(t){return v(m(t))},ownKeys:n(23),preventExtensions:function(t){m(t);try{return y&&y(t),!0}catch(t){return!1}},set:function t(e,n,i){var s,a,o=arguments.length<4?e:arguments[3],c=r.getDesc(m(e),n);if(!c){if(p(a=f(e)))return t(a,n,i,o);c=r.desc(0)}return r.has(c,"value")?!(!1===c.writable||!p(o))&&(s=r.getDesc(o,n)||r.desc(0),s.value=i,r.setDesc(o,n,s),!0):void 0!==c.set&&(c.set.call(o,i),!0)}};a&&(x.setPrototypeOf=function(t,e){a.check(t,e);try{return a.set(t,e),!0}catch(t){return!1}}),s(s.G,{Reflect:{}}),s(s.S+s.F*_,"Reflect",{enumerate:function(t){return new i(m(t))}}),s(s.S,"Reflect",x)},function(t,e,n){var i=n(0),r=n(3),s=i.g.RegExp,a=s,o=s.prototype,c=/a/g,u=new s(c)!==c,h=function(){try{return"/a/i"==s(c,"i")}catch(t){}}();i.FW&&i.DESC&&(u&&h||(s=function(t,e){var n="RegExp"==r(t),i=void 0===e;return this instanceof s||!n||!i?u?new a(n&&!i?t.source:t,e):new a(n?t.source:t,n&&i?t.flags:e):t},i.each.call(i.getNames(a),function(t){t in s||i.setDesc(s,t,{configurable:!0,get:function(){return a[t]},set:function(e){a[t]=e}})}),o.constructor=s,s.prototype=o,n(8)(i.g,"RegExp",s)),"g"!=/./g.flags&&i.setDesc(o,"flags",{configurable:!0,get:n(17)(/^.*\/(\w*)$/,"$1")})),n(18)(s)},function(t,e,n){"use strict";var i=n(33);n(15)("Set",function(t){return function(){return t(this,arguments[0])}},{add:function(t){return i.def(this,t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i=n(1),r=n(27)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(0),r=n(3),s=n(1),a=i.toLength;s(s.P+s.F*!n(28)(function(){"q".endsWith(/./)}),"String",{endsWith:function(t){if("RegExp"==r(t))throw TypeError();var e=String(i.assertDefined(this)),n=arguments[1],s=a(e.length),o=void 0===n?s:Math.min(a(n),s);return t+="",e.slice(o-t.length,o)===t}})},function(t,e,n){var i=n(1),r=n(0).toIndex,s=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?s(e):s(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(0),r=n(3),s=n(1);s(s.P,"String",{includes:function(t){if("RegExp"==r(t))throw TypeError();return!!~String(i.assertDefined(this)).indexOf(t,arguments[1])}})},function(t,e,n){var i=n(0).set,r=n(27)(!0),s=n(4).safe("iter"),a=n(5),o=a.step;n(16)(String,"String",function(t){i(this,s,{o:String(t),i:0})},function(){var t,e=this[s],n=e.o,i=e.i;return i>=n.length?o(1):(t=r(n,i),e.i+=t.length,o(0,t))})},function(t,e,n){var i=n(0),r=n(1);r(r.S,"String",{raw:function(t){for(var e=i.toObject(t.raw),n=i.toLength(e.length),r=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<r&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){var i=n(1);i(i.P,"String",{repeat:n(42)})},function(t,e,n){"use strict";var i=n(0),r=n(3),s=n(1);s(s.P+s.F*!n(28)(function(){"q".startsWith(/./)}),"String",{startsWith:function(t){if("RegExp"==r(t))throw TypeError();var e=String(i.assertDefined(this)),n=i.toLength(Math.min(arguments[1],e.length));return t+="",e.slice(n,n+t.length)===t}})},function(t,e,n){"use strict";function i(t){var e=D[t]=l.set(E(P.prototype),I,t);return b&&R&&U(x,t,{configurable:!0,set:function(e){w(this,k)&&w(this[k],t)&&(this[k][t]=!1),U(this,t,M(1,e))}}),e}function r(t,e,n){return n&&w(D,e)?(n.enumerable?(w(t,k)&&t[k][e]&&(t[k][e]=!1),n=E(n,{enumerable:M(0,!1)})):(w(t,k)||T(t,k,M(1,{})),t[k][e]=!0),U(t,e,n)):T(t,e,n)}function s(t,e){_(t);for(var n,i=y(e=L(e)),s=0,a=i.length;a>s;)r(t,n=i[s++],e[n]);return t}function a(t,e){return void 0===e?E(t):s(E(t),e)}function o(t){var e=O.call(this,t);return!(e||!w(this,t)||!w(D,t)||w(this,k)&&this[k][t])||e}function c(t,e){var n=S(t=L(t),e);return!n||!w(D,e)||w(t,k)&&t[k][e]||(n.enumerable=!0),n}function u(t){for(var e,n=C(L(t)),i=[],r=0;n.length>r;)w(D,e=n[r++])||e==k||i.push(e);return i}function h(t){for(var e,n=C(L(t)),i=[],r=0;n.length>r;)w(D,e=n[r++])&&i.push(D[e]);return i}var l=n(0),p=n(3).set,f=n(4),d=n(26),g=n(1),m=n(8),v=n(39),y=n(37),_=n(2).obj,x=Object.prototype,b=l.DESC,w=l.has,E=l.create,S=l.getDesc,T=l.setDesc,M=l.desc,A=n(38),C=A.get,L=l.toObject,P=l.g.Symbol,R=!1,I=f("tag"),k=f("hidden"),O={}.propertyIsEnumerable,N=d("symbol-registry"),D=d("symbols"),F=l.isFunction(P),U=b?function(){try{return E(T({},k,{get:function(){return T(this,k,{value:!1})[k]}}))[k]||T}catch(t){return function(t,e,n){var i=S(x,e);i&&delete x[e],T(t,e,n),i&&t!==x&&T(x,e,i)}}}():T;F||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor");return i(f(arguments[0]))},m(P.prototype,"toString",function(){return this[I]}),l.create=a,l.setDesc=r,l.getDesc=c,l.setDescs=s,l.getNames=A.get=u,l.getSymbols=h,l.DESC&&l.FW&&m(x,"propertyIsEnumerable",o,!0));var B={for:function(t){return w(N,t+="")?N[t]:N[t]=P(t)},keyFor:function(t){return v(N,t)},useSetter:function(){R=!0},useSimple:function(){R=!1}};l.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=n(6)(t);B[t]=F?e:i(e)}),R=!0,g(g.G+g.W,{Symbol:P}),g(g.S,"Symbol",B),g(g.S+g.F*!F,"Object",{create:a,defineProperty:r,defineProperties:s,getOwnPropertyDescriptor:c,getOwnPropertyNames:u,getOwnPropertySymbols:h}),p(P,"Symbol"),p(Math,"Math",!0),p(l.g.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(0),r=n(35),s=r.leakStore,a=r.ID,o=r.WEAK,c=i.has,u=i.isObject,h=Object.isExtensible||u,l={},p=n(15)("WeakMap",function(t){return function(){return t(this,arguments[0])}},{get:function(t){if(u(t)){if(!h(t))return s(this).get(t);if(c(t,o))return t[o][this[a]]}},set:function(t,e){return r.def(this,t,e)}},r,!0,!0);7!=(new p).set((Object.freeze||Object)(l),7).get(l)&&i.each.call(["delete","has","get","set"],function(t){var e=p.prototype,i=e[t];n(8)(e,t,function(e,n){if(u(e)&&!h(e)){var r=s(this)[t](e,n);return"set"==t?this:r}return i.call(this,e,n)})})},function(t,e,n){"use strict";var i=n(35);n(15)("WeakSet",function(t){return function(){return t(this,arguments[0])}},{add:function(t){return i.def(this,t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(1),r=n(32)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments[1])}}),n(10)("includes")},function(t,e,n){n(34)("Map")},function(t,e,n){var i=n(0),r=n(1),s=n(23);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e=i.toObject(t),n={};return i.each.call(s(e),function(t){i.setDesc(n,t,i.desc(0,i.getDesc(e,t)))}),n}})},function(t,e,n){function i(t){return function(e){var n,i=r.toObject(e),s=r.getKeys(i),a=s.length,o=0,c=Array(a);if(t)for(;a>o;)c[o]=[n=s[o++],i[n]];else for(;a>o;)c[o]=i[s[o++]];return c}}var r=n(0),s=n(1);s(s.S,"Object",{values:i(!1),entries:i(!0)})},function(t,e,n){var i=n(1);i(i.S,"RegExp",{escape:n(17)(/[\\^$*+?.()|[\]{}]/g,"\\$&",!0)})},function(t,e,n){n(34)("Set")},function(t,e,n){"use strict";var i=n(1),r=n(27)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(1),r=n(41);i(i.P,"String",{lpad:function(t){return r(this,t,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(1),r=n(41);i(i.P,"String",{rpad:function(t){return r(this,t,arguments[1],!1)}})},function(t,e,n){function i(t,e){r.each.call(t.split(","),function(t){void 0==e&&t in a?o[t]=a[t]:t in[]&&(o[t]=n(7)(Function.call,[][t],e))})}var r=n(0),s=n(1),a=r.core.Array||Array,o={};i("pop,reverse,shift,keys,values,entries",1),i("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),i("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),s(s.S,"Array",o)},function(t,e,n){n(44);var i=n(0),r=n(5).Iterators,s=n(6)("iterator"),a=r.Array,o=i.g.NodeList,c=i.g.HTMLCollection,u=o&&o.prototype,h=c&&c.prototype;i.FW&&(!o||s in u||i.hide(u,s,a),!c||s in h||i.hide(h,s,a)),r.NodeList=r.HTMLCollection=a},function(t,e,n){var i=n(1),r=n(43);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){function i(t){return u?function(e,n){return t(a(o,[].slice.call(arguments,2),r.isFunction(e)?e:Function(e)),n)}:t}var r=n(0),s=n(1),a=n(12),o=n(24),c=r.g.navigator,u=!!c&&/MSIE .\./.test(c.userAgent);s(s.G+s.B+s.F*u,{setTimeout:i(r.g.setTimeout),setInterval:i(r.g.setInterval)})},function(t,e,n){n(69),n(100),n(83),n(84),n(85),n(87),n(86),n(78),n(77),n(81),n(82),n(80),n(94),n(97),n(96),n(92),n(93),n(95),n(98),n(99),n(74),n(75),n(44),n(76),n(70),n(71),n(73),n(72),n(90),n(88),n(79),n(91),n(101),n(102),n(89),n(103),n(109),n(110),n(111),n(107),n(105),n(106),n(104),n(108),n(112),n(115),n(114),n(113),t.exports=n(0).core},function(t,e,n){var i,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,s=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,4e4)},h=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var r=t["on"+e[i]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},p=function(e,c,p){p||(e=l(e));var f,d=this,g=e.type,m="application/octet-stream"===g,v=function(){h(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,r)return f=n().createObjectURL(e),void setTimeout(function(){i.href=f,i.download=c,s(i),v(),u(f),d.readyState=d.DONE});!function(){if((o||m&&a)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=o?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,v()},i.readAsDataURL(e),void(d.readyState=d.INIT)}if(f||(f=n().createObjectURL(e)),m)t.location.href=f;else{t.open(f,"_blank")||(t.location.href=f)}d.readyState=d.DONE,v(),u(f)}()},f=p.prototype,d=function(t,e,n){return new p(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=r:null!==n(145)&&null!==n(29)&&void 0!==(i=function(){return r}.call(e,n,e,t))&&(t.exports=i)},function(t,e,n){var i;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(r,s,a,o){"use strict";function c(t,e,n){return setTimeout(f(t,n),e)}function u(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function l(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,i,n),t.apply(this,arguments)}}function p(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&dt(i,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==vt?t.apply(e?e[0]||o:o,e):t}function g(t,e){return t===o?e:t}function m(t,e,n){h(x(e),function(e){t.addEventListener(e,n,!1)})}function v(t,e,n){h(x(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function x(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function E(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];b(r,a)<0&&i.push(t[s]),r[s]=a,s++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function S(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),s=0;s<gt.length;){if(n=gt[s],(i=n?n+r:e)in t)return i;s++}return o}function T(){return Et++}function M(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function A(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(Mt?H:At?W:Tt?X:j))(t,L)}function L(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,s=e&Rt&&i-r==0,a=e&(kt|Ot)&&i-r==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=k(e)),r>1&&!n.firstMultiple?n.firstMultiple=k(e):1===r&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,o=a?a.center:s.center,c=e.center=O(i);e.timeStamp=xt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=U(o,c),e.distance=F(o,c),R(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var u=N(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=_t(u.x)>_t(u.y)?u.x:u.y,e.scale=a?z(a.pointers,i):1,e.rotation=a?B(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,I(n,e);var h=t.element;y(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h}function R(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Rt&&s.eventType!==kt||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function I(t,e){var n,i,r,s,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(e.eventType!=Ot&&(c>Pt||a.velocity===o)){var u=e.deltaX-a.deltaX,h=e.deltaY-a.deltaY,l=N(c,u,h);i=l.x,r=l.y,n=_t(l.x)>_t(l.y)?l.x:l.y,s=D(u,h),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=s}function k(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:yt(t.pointers[n].clientX),clientY:yt(t.pointers[n].clientY)},n++;return{timeStamp:xt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:yt(n/e),y:yt(i/e)}}function N(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Nt:_t(t)>=_t(e)?0>t?Dt:Ft:0>e?Ut:Bt}function F(t,e,n){n||(n=Vt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function U(t,e,n){n||(n=Vt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function B(t,e){return U(e[1],e[0],Gt)+U(t[1],t[0],Gt)}function z(t,e){return F(e[0],e[1],Gt)/F(t[0],t[1],Gt)}function j(){this.evEl=qt,this.evWin=Xt,this.pressed=!1,A.apply(this,arguments)}function H(){this.evEl=$t,this.evWin=Jt,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function V(){this.evTarget=Qt,this.evWin=te,this.started=!1,A.apply(this,arguments)}function G(t,e){var n=w(t.touches),i=w(t.changedTouches);return e&(kt|Ot)&&(n=E(n.concat(i),"identifier",!0)),[n,i]}function W(){this.evTarget=ne,this.targetIds={},A.apply(this,arguments)}function q(t,e){var n=w(t.touches),i=this.targetIds;if(e&(Rt|It)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,a=w(t.changedTouches),o=[],c=this.target;if(s=n.filter(function(t){return y(t.target,c)}),e===Rt)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&o.push(a[r]),e&(kt|Ot)&&delete i[a[r].identifier],r++;return o.length?[E(s.concat(o),"identifier",!0),o]:void 0}function X(){A.apply(this,arguments);var t=f(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new j(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Y(t,e){t&Rt?(this.primaryTouch=e.changedPointers[0].identifier,Z.call(this,e)):t&(kt|Ot)&&Z.call(this,e)}function Z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(r,ie)}}function $(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),a=Math.abs(n-r.y);if(re>=s&&re>=a)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function K(t){if(_(t,he))return he;var e=_(t,le),n=_(t,pe);return e&&n?he:e||n?e?le:pe:_(t,ue)?ue:ce}function Q(t){this.options=dt({},this.defaults,t||{}),this.id=T(),this.manager=null,this.options.enable=g(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function tt(t){return t&_e?"cancel":t&ve?"end":t&me?"move":t&ge?"start":""}function et(t){return t==Bt?"down":t==Ut?"up":t==Dt?"left":t==Ft?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function it(){Q.apply(this,arguments)}function rt(){it.apply(this,arguments),this.pX=null,this.pY=null}function st(){it.apply(this,arguments)}function at(){Q.apply(this,arguments),this._timer=null,this._input=null}function ot(){it.apply(this,arguments)}function ct(){it.apply(this,arguments)}function ut(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ht(t,e){return e=e||{},e.recognizers=g(e.recognizers,ht.defaults.preset),new lt(t,e)}function lt(t,e){this.options=dt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new J(this,this.options.touchAction),pt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var i;h(t.options.cssProps,function(r,s){i=S(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var dt,gt=["","webkit","Moz","MS","ms","o"],mt=s.createElement("div"),vt="function",yt=Math.round,_t=Math.abs,xt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===o||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==o&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var bt=l(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===o)&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),wt=l(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),Et=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in r,Mt=S(r,"PointerEvent")!==o,At=Tt&&St.test(navigator.userAgent),Ct="touch",Lt="mouse",Pt=25,Rt=1,It=2,kt=4,Ot=8,Nt=1,Dt=2,Ft=4,Ut=8,Bt=16,zt=Dt|Ft,jt=Ut|Bt,Ht=zt|jt,Vt=["x","y"],Gt=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(M(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:Rt,mousemove:It,mouseup:kt},qt="mousedown",Xt="mousemove mouseup";p(j,A,{handler:function(t){var e=Wt[t.type];e&Rt&&0===t.button&&(this.pressed=!0),e&It&&1!==t.which&&(e=kt),this.pressed&&(e&kt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Lt,srcEvent:t}))}});var Yt={pointerdown:Rt,pointermove:It,pointerup:kt,pointercancel:Ot,pointerout:Ot},Zt={2:Ct,3:"pen",4:Lt,5:"kinect"},$t="pointerdown",Jt="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&($t="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),p(H,A,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Yt[i],s=Zt[t.pointerType]||t.pointerType,a=s==Ct,o=b(e,t.pointerId,"pointerId");r&Rt&&(0===t.button||a)?0>o&&(e.push(t),o=e.length-1):r&(kt|Ot)&&(n=!0),0>o||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(o,1))}});var Kt={touchstart:Rt,touchmove:It,touchend:kt,touchcancel:Ot},Qt="touchstart",te="touchstart touchmove touchend touchcancel";p(V,A,{handler:function(t){var e=Kt[t.type];if(e===Rt&&(this.started=!0),this.started){var n=G.call(this,t,e);e&(kt|Ot)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:t})}}});var ee={touchstart:Rt,touchmove:It,touchend:kt,touchcancel:Ot},ne="touchstart touchmove touchend touchcancel";p(W,A,{handler:function(t){var e=ee[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ct,srcEvent:t})}});var ie=2500,re=25;p(X,A,{handler:function(t,e,n){var i=n.pointerType==Ct,r=n.pointerType==Lt;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Y.call(this,e,n);else if(r&&$.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=S(mt.style,"touchAction"),ae=se!==o,oe="compute",ce="auto",ue="manipulation",he="none",le="pan-x",pe="pan-y",fe=function(){if(!ae)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||r.CSS.supports("touch-action",n)}),t}();J.prototype={set:function(t){t==oe&&(t=this.compute()),ae&&this.manager.element.style&&fe[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),K(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=_(i,he)&&!fe[he],s=_(i,pe)&&!fe[pe],a=_(i,le)&&!fe[le];if(r){var o=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(o&&c&&u)return}return a&&s?void 0:r||s&&n&zt||a&&n&jt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,ge=2,me=4,ve=8,ye=ve,_e=16;Q.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;ve>i&&e(n.options.event+tt(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=ve&&e(n.options.event+tt(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|de)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);return d(this.options.enable,[this,e])?(this.state&(ye|_e|32)&&(this.state=de),this.state=this.process(e),void(this.state&(ge|me|ve|_e)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},p(it,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ge|me),r=this.attrTest(t);return i&&(n&Ot||!r)?e|_e:i||r?n&kt?e|ve:e&ge?e|me:ge:32}}),p(rt,it,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function(){var t=this.options.direction,e=[];return t&zt&&e.push(pe),t&jt&&e.push(le),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&zt?(r=0===s?Nt:0>s?Dt:Ft,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?Nt:0>a?Ut:Bt,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return it.prototype.attrTest.call(this,t)&&(this.state&ge||!(this.state&ge)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(st,it,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ge)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(at,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(kt|Ot)&&!r)this.reset();else if(t.eventType&Rt)this.reset(),this._timer=c(function(){this.state=ye,this.tryEmit()},e.time,this);else if(t.eventType&kt)return ye;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ye&&(t&&t.eventType&kt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),p(ot,it,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[he]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ge)}}),p(ct,it,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:zt|jt,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(zt|jt)?e=t.overallVelocity:n&zt?e=t.overallVelocityX:n&jt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&kt},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(ut,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ue]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Rt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=kt)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=ye,this.tryEmit()},e.interval,this),ge):ye}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ye&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:oe,enable:!0,inputTarget:null,inputClass:null,preset:[[ot,{enable:!1}],[st,{enable:!1},["rotate"]],[ct,{direction:zt}],[rt,{direction:zt},["swipe"]],[ut],[ut,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};lt.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&ye)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(ge|me|ve)&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=b(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return h(x(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==o){var n=this.handlers;return h(x(t),function(t){e?n[t]&&n[t].splice(b(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(ht,{INPUT_START:Rt,INPUT_MOVE:It,INPUT_END:kt,INPUT_CANCEL:Ot,STATE_POSSIBLE:de,STATE_BEGAN:ge,STATE_CHANGED:me,STATE_ENDED:ve,STATE_RECOGNIZED:ye,STATE_CANCELLED:_e,STATE_FAILED:32,DIRECTION_NONE:Nt,DIRECTION_LEFT:Dt,DIRECTION_RIGHT:Ft,DIRECTION_UP:Ut,DIRECTION_DOWN:Bt,DIRECTION_HORIZONTAL:zt,DIRECTION_VERTICAL:jt,DIRECTION_ALL:Ht,Manager:lt,Input:A,TouchAction:J,TouchInput:W,MouseInput:j,PointerEventInput:H,TouchMouseInput:X,SingleTouchInput:V,Recognizer:Q,AttrRecognizer:it,Tap:ut,Pan:rt,Swipe:ct,Pinch:st,Rotate:ot,Press:at,on:m,off:v,each:h,merge:wt,extend:bt,assign:dt,inherit:p,bindFn:f,prefixed:S}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=ht,void 0!==(i=function(){return ht}.call(e,n,e,t))&&(t.exports=i)}(window,document)},function(t,e,n){var i,r,s;/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
!function(a){r=[n(45)],i=a,void 0!==(s="function"==typeof i?i.apply(e,r):i)&&(t.exports=s)}(function(t){function e(e){var a=e||window.event,o=c.call(arguments,1),u=0,l=0,p=0,f=0,d=0,g=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(l=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(l=-1*p,p=0),u=0===p?l:p,"deltaY"in a&&(p=-1*a.deltaY,u=p),"deltaX"in a&&(l=a.deltaX,0===p&&(u=-1*l)),0!==p||0!==l){if(1===a.deltaMode){var m=t.data(this,"mousewheel-line-height");u*=m,p*=m,l*=m}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");u*=v,p*=v,l*=v}if(f=Math.max(Math.abs(p),Math.abs(l)),(!s||f<s)&&(s=f,i(a,f)&&(s/=40)),i(a,f)&&(u/=40,l/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/s),l=Math[l>=1?"floor":"ceil"](l/s),p=Math[p>=1?"floor":"ceil"](p/s),h.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();d=e.clientX-y.left,g=e.clientY-y.top}return e.deltaX=l,e.deltaY=p,e.deltaFactor=s,e.offsetX=d,e.offsetY=g,e.deltaMode=0,o.unshift(e,u,l,p),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,o)}}function n(){s=null}function i(t,e){return h.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var r,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(t.event.fixHooks)for(var u=a.length;u;)t.event.fixHooks[a[--u]]=t.event.mouseHooks;var h=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",h.getLineHeight(this)),t.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=o.length;n;)this.removeEventListener(o[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})},function(t,e,n){(function(e){(function(){function e(t){this.tokens=[],this.tokens.links={},this.options=t||h.defaults,this.rules=l.normal,this.options.gfm&&(this.options.tables?this.rules=l.tables:this.rules=l.gfm)}function n(t,e){if(this.options=e||h.defaults,this.links=t,this.rules=p.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function i(t){this.options=t||{}}function r(t){this.tokens=[],this.token=null,this.options=t||h.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function o(t,e){return t=t.source,e=e||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,r),n):new RegExp(t,e)}}function c(){}function u(t){for(var e,n,i=1;i<arguments.length;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function h(t,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=u({},h.defaults,n||{});var a,o,c=n.highlight,l=0;try{a=e.lex(t,n)}catch(t){return i(t)}o=a.length;var p=function(t){if(t)return n.highlight=c,i(t);var e;try{e=r.parse(a,n)}catch(e){t=e}return n.highlight=c,t?i(t):i(null,e)};if(!c||c.length<3)return p();if(delete n.highlight,!o)return p();for(;l<a.length;l++)!function(t){"code"!==t.type?--o||p():c(t.text,t.lang,function(e,n){return e?p(e):null==n||n===t.text?--o||p():(t.text=n,t.escaped=!0,void(--o||p()))})}(a[l])}else try{return n&&(n=u({},h.defaults,n)),r.parse(e.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+s(t.message+"",!0)+"</pre>";throw t}}var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=o(l.item,"gm")(/bull/g,l.bullet)(),l.list=o(l.list)(/bull/g,l.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+l.def.source+")")(),l.blockquote=o(l.blockquote)("def",l.def)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",l.html=o(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=o(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=u({},l),l.gfm=u({},l.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),l.gfm.paragraph=o(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|"+l.list.source.replace("\\1","\\3")+"|")(),l.tables=u({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=l,e.lex=function(t,n){return new e(n).lex(t)},e.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},e.prototype.token=function(t,e,n){for(var i,r,s,a,o,c,u,h,p,t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(e&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].split(/ *\| */);this.tokens.push(c)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),a=s[2],this.tokens.push({type:"list_start",ordered:a.length>1}),s=s[0].match(this.rules.item),i=!1,p=s.length,h=0;h<p;h++)c=s[h],u=c.length,c=c.replace(/^ *([*+-]|\d+\.) +/,""),~c.indexOf("\n ")&&(u-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&h!==p-1&&(o=l.bullet.exec(s[h+1])[0],a===o||a.length>1&&o.length>1||(t=s.slice(h+1).join("\n")+t,h=p-1)),r=i||/\n\n(?!\s*$)/.test(c),h!==p-1&&(i="\n"===c.charAt(c.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(c,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(e&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<c.align.length;h++)/^ *-+: *$/.test(c.align[h])?c.align[h]="right":/^ *:-+: *$/.test(c.align[h])?c.align[h]="center":/^ *:-+ *$/.test(c.align[h])?c.align[h]="left":c.align[h]=null;for(h=0;h<c.cells.length;h++)c.cells[h]=c.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=o(p.link)("inside",p._inside)("href",p._href)(),p.reflink=o(p.reflink)("inside",p._inside)(),p.normal=u({},p),p.pedantic=u({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=u({},p.normal,{escape:o(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=u({},p.gfm,{br:o(p.br)("{2,}","*")(),text:o(p.gfm.text)("{2,}","*")()}),n.rules=p,n.output=function(t,e,i){return new n(e,i).output(t)},n.prototype.output=function(t){for(var e,n,i,r,a="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),a+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):(n=s(r[1]),i=n),a+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(t))){if(r=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),t=t.substring(r[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):s(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),this.inLink=!0,a+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){a+=r[0].charAt(0),t=r[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),a+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),a+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),a+=this.renderer.codespan(s(r[2],!0));else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),a+=this.renderer.br();else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),a+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),a+=this.renderer.text(s(this.smartypants(r[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(r[0].length),n=s(r[1]),i=n,a+=this.renderer.link(i,null,n);return a},n.prototype.outputLink=function(t,e){var n=s(e.href),i=e.title?s(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,s(t[1]))},n.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):t},n.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,r=0;r<i;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+s(e,!0)+'">'+(n?t:s(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:s(t,!0))+"\n</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(a(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return""}var r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},i.prototype.image=function(t,e,n){var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},i.prototype.text=function(t){return t},r.parse=function(t,e,n){return new r(e,n).parse(t)},r.prototype.parse=function(t){this.inline=new n(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,r="",s="";for(n="",t=0;t<this.token.header.length;t++)({header:!0,align:this.token.align[t]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var o=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(o);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},c.exec=c,h.options=h.setOptions=function(t){return u(h.defaults,t),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},h.Parser=r,h.parser=r.parse,h.Renderer=i,h.Lexer=e,h.lexer=e.lex,h.InlineLexer=n,h.inlineLexer=n.output,h.parse=h,t.exports=h}).call(function(){return this||("undefined"!=typeof window?window:e)}())}).call(e,n(46))},function(t,e,n){!function(t,n){n(e)}(0,function(t){function e(){}function n(t,e){this.x=t||0,this.y=e||0}function i(t,e,r,s,a,o,c,u,h,l){Object.defineProperty(this,"id",{value:ir++}),this.uuid=nr.generateUUID(),this.name="",this.image=void 0!==t?t:i.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:i.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:1001,this.wrapT=void 0!==s?s:1001,this.magFilter=void 0!==a?a:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:1023,this.type=void 0!==u?u:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:3e3,this.version=0,this.onUpdate=null}function r(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function s(t,e,n){this.uuid=nr.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=1006),this.texture=new i(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function a(t,e,n){s.call(this,t,e,n),this.activeMipMapLevel=this.activeCubeFace=0}function o(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function c(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(t,e,n,r,s,a,o,c,u,h){t=void 0!==t?t:[],i.call(this,t,void 0!==e?e:301,n,r,s,a,o,c,u,h),this.flipY=!1}function l(t,e,n){var i=t[0];if(0>=i||0<i)return t;var r=e*n,s=ar[r];if(void 0===s&&(s=new Float32Array(r),ar[r]=s),0!==e)for(i.toArray(s,0),i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r);return s}function p(t,e){var n=or[e];void 0===n&&(n=new Int32Array(e),or[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function f(t,e){t.uniform1f(this.addr,e)}function d(t,e){t.uniform1i(this.addr,e)}function g(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function m(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function v(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function y(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function _(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function b(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||rr,i)}function w(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||sr,i)}function E(t,e){t.uniform2iv(this.addr,e)}function S(t,e){t.uniform3iv(this.addr,e)}function T(t,e){t.uniform4iv(this.addr,e)}function M(t){switch(t){case 5126:return f;case 35664:return g;case 35665:return m;case 35666:return v;case 35674:return y;case 35675:return _;case 35676:return x;case 35678:return b;case 35680:return w;case 5124:case 35670:return d;case 35667:case 35671:return E;case 35668:case 35672:return S;case 35669:case 35673:return T}}function A(t,e){t.uniform1fv(this.addr,e)}function C(t,e){t.uniform1iv(this.addr,e)}function L(t,e){t.uniform2fv(this.addr,l(e,this.size,2))}function P(t,e){t.uniform3fv(this.addr,l(e,this.size,3))}function R(t,e){t.uniform4fv(this.addr,l(e,this.size,4))}function I(t,e){t.uniformMatrix2fv(this.addr,!1,l(e,this.size,4))}function k(t,e){t.uniformMatrix3fv(this.addr,!1,l(e,this.size,9))}function O(t,e){t.uniformMatrix4fv(this.addr,!1,l(e,this.size,16))}function N(t,e,n){var i=e.length,r=p(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.setTexture2D(e[t]||rr,r[t])}function D(t,e,n){var i=e.length,r=p(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.setTextureCube(e[t]||sr,r[t])}function F(t){switch(t){case 5126:return A;case 35664:return L;case 35665:return P;case 35666:return R;case 35674:return I;case 35675:return k;case 35676:return O;case 35678:return N;case 35680:return D;case 5124:case 35670:return C;case 35667:case 35671:return E;case 35668:case 35672:return S;case 35669:case 35673:return T}}function U(t,e,n){this.id=t,this.addr=n,this.setValue=M(e.type)}function B(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=F(e.type)}function z(t){this.id=t,this.seq=[],this.map={}}function j(t,e,n){this.seq=[],this.map={},this.renderer=n,n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var i=0;i!==n;++i){var r=t.getActiveUniform(e,i),s=t.getUniformLocation(e,r.name),a=this,o=r.name,c=o.length;for(cr.lastIndex=0;;){var u=cr.exec(o),h=cr.lastIndex,l=u[1],p=u[3];if("]"===u[2]&&(l|=0),void 0===p||"["===p&&h+2===c){o=a,r=void 0===p?new U(l,r,s):new B(l,r,s),o.seq.push(r),o.map[r.id]=r;break}p=a.map[l],void 0===p&&(p=new z(l),l=a,a=p,l.seq.push(a),l.map[a.id]=a),a=p}}}function H(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function V(t,e,n,r,s,a,o,c,u,h,l,p){i.call(this,null,a,o,c,u,h,r,s,l,p),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==h?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function G(t,e){this.min=void 0!==t?t:new n(1/0,1/0),this.max=void 0!==e?e:new n(-1/0,-1/0)}function W(t,e){var i,r,s,a,o,u,h,l,p,f,d,g,m,v,y,_,x=t.context,b=t.state;this.render=function(w,E,S){if(0!==e.length){w=new c;var T=S.w/S.z,M=.5*S.z,A=.5*S.w,C=16/S.w,L=new n(C*T,C),P=new c(1,1,0),R=new n(1,1),I=new G;if(I.min.set(S.x,S.y),I.max.set(S.x+(S.z-16),S.y+(S.w-16)),void 0===v){var C=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),k=new Uint16Array([0,1,2,0,2,3]);d=x.createBuffer(),g=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,d),x.bufferData(x.ARRAY_BUFFER,C,x.STATIC_DRAW),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,g),x.bufferData(x.ELEMENT_ARRAY_BUFFER,k,x.STATIC_DRAW),y=x.createTexture(),_=x.createTexture(),b.bindTexture(x.TEXTURE_2D,y),x.texImage2D(x.TEXTURE_2D,0,x.RGB,16,16,0,x.RGB,x.UNSIGNED_BYTE,null),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),b.bindTexture(x.TEXTURE_2D,_),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,16,16,0,x.RGBA,x.UNSIGNED_BYTE,null),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST);var C=m={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},k=x.createProgram(),O=x.createShader(x.FRAGMENT_SHADER),N=x.createShader(x.VERTEX_SHADER),D="precision "+t.getPrecision()+" float;\n";x.shaderSource(O,D+C.fragmentShader),x.shaderSource(N,D+C.vertexShader),x.compileShader(O),x.compileShader(N),x.attachShader(k,O),x.attachShader(k,N),x.linkProgram(k),v=k,p=x.getAttribLocation(v,"position"),f=x.getAttribLocation(v,"uv"),i=x.getUniformLocation(v,"renderType"),r=x.getUniformLocation(v,"map"),s=x.getUniformLocation(v,"occlusionMap"),a=x.getUniformLocation(v,"opacity"),o=x.getUniformLocation(v,"color"),u=x.getUniformLocation(v,"scale"),h=x.getUniformLocation(v,"rotation"),l=x.getUniformLocation(v,"screenPosition")}for(x.useProgram(v),b.initAttributes(),b.enableAttribute(p),b.enableAttribute(f),b.disableUnusedAttributes(),x.uniform1i(s,0),x.uniform1i(r,1),x.bindBuffer(x.ARRAY_BUFFER,d),x.vertexAttribPointer(p,2,x.FLOAT,!1,16,0),x.vertexAttribPointer(f,2,x.FLOAT,!1,16,8),x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,g),b.disable(x.CULL_FACE),b.setDepthWrite(!1),k=0,O=e.length;k<O;k++)if(C=16/S.w,L.set(C*T,C),N=e[k],w.set(N.matrixWorld.elements[12],N.matrixWorld.elements[13],N.matrixWorld.elements[14]),w.applyMatrix4(E.matrixWorldInverse),w.applyProjection(E.projectionMatrix),P.copy(w),R.x=S.x+P.x*M+M-8,R.y=S.y+P.y*A+A-8,!0===I.containsPoint(R)){b.activeTexture(x.TEXTURE0),b.bindTexture(x.TEXTURE_2D,null),b.activeTexture(x.TEXTURE1),b.bindTexture(x.TEXTURE_2D,y),x.copyTexImage2D(x.TEXTURE_2D,0,x.RGB,R.x,R.y,16,16,0),x.uniform1i(i,0),x.uniform2f(u,L.x,L.y),x.uniform3f(l,P.x,P.y,P.z),b.disable(x.BLEND),b.enable(x.DEPTH_TEST),x.drawElements(x.TRIANGLES,6,x.UNSIGNED_SHORT,0),b.activeTexture(x.TEXTURE0),b.bindTexture(x.TEXTURE_2D,_),x.copyTexImage2D(x.TEXTURE_2D,0,x.RGBA,R.x,R.y,16,16,0),x.uniform1i(i,1),b.disable(x.DEPTH_TEST),b.activeTexture(x.TEXTURE1),b.bindTexture(x.TEXTURE_2D,y),x.drawElements(x.TRIANGLES,6,x.UNSIGNED_SHORT,0),N.positionScreen.copy(P),N.customUpdateCallback?N.customUpdateCallback(N):N.updateLensFlares(),x.uniform1i(i,2),b.enable(x.BLEND);for(var D=0,F=N.lensFlares.length;D<F;D++){var U=N.lensFlares[D];.001<U.opacity&&.001<U.scale&&(P.x=U.x,P.y=U.y,P.z=U.z,C=U.size*U.scale/S.w,L.x=C*T,L.y=C,x.uniform3f(l,P.x,P.y,P.z),x.uniform2f(u,L.x,L.y),x.uniform1f(h,U.rotation),x.uniform1f(a,U.opacity),x.uniform3f(o,U.color.r,U.color.g,U.color.b),b.setBlending(U.blending,U.blendEquation,U.blendSrc,U.blendDst),t.setTexture2D(U.texture,1),x.drawElements(x.TRIANGLES,6,x.UNSIGNED_SHORT,0))}}b.enable(x.CULL_FACE),b.enable(x.DEPTH_TEST),b.setDepthWrite(!0),t.resetGLState()}}}function q(t,e){function n(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var r,s,a,u,h,l,p,f,d,g,m,v,y,_,x,b,w,E,S,T,M,A=t.context,C=t.state,L=new c,P=new o,R=new c;this.render=function(o,c){if(0!==e.length){if(void 0===T){var I=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),k=new Uint16Array([0,1,2,0,2,3]);E=A.createBuffer(),S=A.createBuffer(),A.bindBuffer(A.ARRAY_BUFFER,E),A.bufferData(A.ARRAY_BUFFER,I,A.STATIC_DRAW),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,S),A.bufferData(A.ELEMENT_ARRAY_BUFFER,k,A.STATIC_DRAW);var I=A.createProgram(),k=A.createShader(A.VERTEX_SHADER),O=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(k,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),A.shaderSource(O,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),A.compileShader(k),A.compileShader(O),A.attachShader(I,k),A.attachShader(I,O),A.linkProgram(I),T=I,b=A.getAttribLocation(T,"position"),w=A.getAttribLocation(T,"uv"),r=A.getUniformLocation(T,"uvOffset"),s=A.getUniformLocation(T,"uvScale"),a=A.getUniformLocation(T,"rotation"),u=A.getUniformLocation(T,"scale"),h=A.getUniformLocation(T,"color"),l=A.getUniformLocation(T,"map"),p=A.getUniformLocation(T,"opacity"),f=A.getUniformLocation(T,"modelViewMatrix"),d=A.getUniformLocation(T,"projectionMatrix"),g=A.getUniformLocation(T,"fogType"),m=A.getUniformLocation(T,"fogDensity"),v=A.getUniformLocation(T,"fogNear"),y=A.getUniformLocation(T,"fogFar"),_=A.getUniformLocation(T,"fogColor"),x=A.getUniformLocation(T,"alphaTest"),I=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),I.width=8,I.height=8,k=I.getContext("2d"),k.fillStyle="white",k.fillRect(0,0,8,8),M=new i(I),M.needsUpdate=!0}A.useProgram(T),C.initAttributes(),C.enableAttribute(b),C.enableAttribute(w),C.disableUnusedAttributes(),C.disable(A.CULL_FACE),C.enable(A.BLEND),A.bindBuffer(A.ARRAY_BUFFER,E),A.vertexAttribPointer(b,2,A.FLOAT,!1,16,0),A.vertexAttribPointer(w,2,A.FLOAT,!1,16,8),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,S),A.uniformMatrix4fv(d,!1,c.projectionMatrix.elements),C.activeTexture(A.TEXTURE0),A.uniform1i(l,0),k=I=0,(O=o.fog)?(A.uniform3f(_,O.color.r,O.color.g,O.color.b),O.isFog?(A.uniform1f(v,O.near),A.uniform1f(y,O.far),A.uniform1i(g,1),k=I=1):O.isFogExp2&&(A.uniform1f(m,O.density),A.uniform1i(g,2),k=I=2)):(A.uniform1i(g,0),k=I=0);for(var O=0,N=e.length;O<N;O++){var D=e[O];D.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,D.matrixWorld),D.z=-D.modelViewMatrix.elements[14]}e.sort(n);for(var F=[],O=0,N=e.length;O<N;O++){var D=e[O],U=D.material;!1!==U.visible&&(A.uniform1f(x,U.alphaTest),A.uniformMatrix4fv(f,!1,D.modelViewMatrix.elements),D.matrixWorld.decompose(L,P,R),F[0]=R.x,F[1]=R.y,D=0,o.fog&&U.fog&&(D=k),I!==D&&(A.uniform1i(g,D),I=D),null!==U.map?(A.uniform2f(r,U.map.offset.x,U.map.offset.y),A.uniform2f(s,U.map.repeat.x,U.map.repeat.y)):(A.uniform2f(r,0,0),A.uniform2f(s,1,1)),A.uniform1f(p,U.opacity),A.uniform3f(h,U.color.r,U.color.g,U.color.b),A.uniform1f(a,U.rotation),A.uniform2fv(u,F),C.setBlending(U.blending,U.blendEquation,U.blendSrc,U.blendDst),C.setDepthTest(U.depthTest),C.setDepthWrite(U.depthWrite),U.map?t.setTexture2D(U.map,0):t.setTexture2D(M,0),A.drawElements(A.TRIANGLES,6,A.UNSIGNED_SHORT,0))}C.enable(A.CULL_FACE),t.resetGLState()}}}function X(){Object.defineProperty(this,"id",{value:dr++}),this.uuid=nr.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.shading=2,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.premultipliedAlpha=!1,this.overdraw=0,this._needsUpdate=this.visible=!0}function Y(t){X.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Z(t){X.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function $(t,e){this.min=void 0!==t?t:new c(1/0,1/0,1/0),this.max=void 0!==e?e:new c(-1/0,-1/0,-1/0)}function J(t,e){this.center=void 0!==t?t:new c,this.radius=void 0!==e?e:0}function K(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Q(t,e){this.normal=void 0!==t?t:new c(1,0,0),this.constant=void 0!==e?e:0}function tt(t,e,n,i,r,s){this.planes=[void 0!==t?t:new Q,void 0!==e?e:new Q,void 0!==n?n:new Q,void 0!==i?i:new Q,void 0!==r?r:new Q,void 0!==s?s:new Q]}function et(t,e,i,a){function o(e,n,i,r){var s,a=e.geometry;s=b;var o=e.customDepthMaterial;return i&&(s=w,o=e.customDistanceMaterial),o?s=o:(o=!1,n.morphTargets&&(a&&a.isBufferGeometry?o=a.morphAttributes&&a.morphAttributes.position&&0<a.morphAttributes.position.length:a&&a.isGeometry&&(o=a.morphTargets&&0<a.morphTargets.length)),e=e.isSkinnedMesh&&n.skinning,a=0,o&&(a|=1),e&&(a|=2),s=s[a]),t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(a=s.uuid,o=n.uuid,e=E[a],void 0===e&&(e={},E[a]=e),a=e[o],void 0===a&&(a=s.clone(),e[o]=a),s=a),s.visible=n.visible,s.wireframe=n.wireframe,o=n.side,I.renderSingleSided&&2==o&&(o=0),I.renderReverseSided&&(0===o?o=1:1===o&&(o=0)),s.side=o,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,i&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(r),s}function h(t,e,n){if(!1!==t.visible){0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===f.intersectsObject(t))&&!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),x.push(t)),t=t.children;for(var i=0,r=t.length;i<r;i++)h(t[i],e,n)}}var l=t.context,p=t.state,f=new tt,d=new u,g=e.shadows,m=new n,v=new n(a.maxTextureSize,a.maxTextureSize),y=new c,_=new c,x=[],b=Array(4),w=Array(4),E={},S=[new c(1,0,0),new c(-1,0,0),new c(0,0,1),new c(0,0,-1),new c(0,1,0),new c(0,-1,0)],T=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,-1)],M=[new r,new r,new r,new r,new r,new r];e=new Z,e.depthPacking=3201,e.clipping=!0,a=fr.distanceRGBA;for(var A=ur.clone(a.uniforms),C=0;4!==C;++C){var L=0!=(1&C),P=0!=(2&C),R=e.clone();R.morphTargets=L,R.skinning=P,b[C]=R,L=new Y({defines:{USE_SHADOWMAP:""},uniforms:A,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,morphTargets:L,skinning:P,clipping:!0}),w[C]=L}var I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.renderSingleSided=this.renderReverseSided=!0,this.render=function(e,n){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==g.length){p.buffers.color.setClear(1,1,1,1),p.disable(l.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var r,a,c=0,u=g.length;c<u;c++){var b=g[c],w=b.shadow;if(void 0===w)console.warn("THREE.WebGLShadowMap:",b,"has no shadow.");else{var E=w.camera;if(m.copy(w.mapSize),m.min(v),b&&b.isPointLight){r=6,a=!0;var A=m.x,C=m.y;M[0].set(2*A,C,A,C),M[1].set(0,C,A,C),M[2].set(3*A,C,A,C),M[3].set(A,C,A,C),M[4].set(3*A,0,A,C),M[5].set(A,0,A,C),m.x*=4,m.y*=2}else r=1,a=!1;for(null===w.map&&(w.map=new s(m.x,m.y,{minFilter:1003,magFilter:1003,format:1023}),E.updateProjectionMatrix()),w.isSpotLightShadow&&w.update(b),w&&w.isRectAreaLightShadow&&w.update(b),A=w.map,w=w.matrix,_.setFromMatrixPosition(b.matrixWorld),E.position.copy(_),t.setRenderTarget(A),t.clear(),A=0;A<r;A++){a?(y.copy(E.position),y.add(S[A]),E.up.copy(T[A]),E.lookAt(y),p.viewport(M[A])):(y.setFromMatrixPosition(b.target.matrixWorld),E.lookAt(y)),E.updateMatrixWorld(),E.matrixWorldInverse.getInverse(E.matrixWorld),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(E.projectionMatrix),w.multiply(E.matrixWorldInverse),d.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),f.setFromMatrix(d),x.length=0,h(e,n,E);for(var C=0,L=x.length;C<L;C++){var P=x[C],R=i.update(P),k=P.material;if(k&&k.isMultiMaterial)for(var O=R.groups,k=k.materials,N=0,D=O.length;N<D;N++){var F=O[N],U=k[F.materialIndex];!0===U.visible&&(U=o(P,U,a,_),t.renderBufferDirect(E,null,R,U,P,F))}else U=o(P,k,a,_),t.renderBufferDirect(E,null,R,U,P,null)}}}}r=t.getClearColor(),a=t.getClearAlpha(),t.setClearColor(r,a),I.needsUpdate=!1}}}function nt(t,e){this.origin=void 0!==t?t:new c,this.direction=void 0!==e?e:new c}function it(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||it.DefaultOrder}function rt(){this.mask=1}function st(){Object.defineProperty(this,"id",{value:gr++}),this.uuid=nr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=st.DefaultUp.clone();var t=new c,e=new it,n=new o,i=new c(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new u},normalMatrix:{value:new K}}),this.matrix=new u,this.matrixWorld=new u,this.matrixAutoUpdate=st.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new rt,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function at(t,e){this.start=void 0!==t?t:new c,this.end=void 0!==e?e:new c}function ot(t,e,n){this.a=void 0!==t?t:new c,this.b=void 0!==e?e:new c,this.c=void 0!==n?n:new c}function ct(t,e,n,i,r,s){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new c,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new H,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function ut(t){X.call(this),this.type="MeshBasicMaterial",this.color=new H(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function ht(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=nr.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function lt(t,e){ht.call(this,new Int8Array(t),e)}function pt(t,e){ht.call(this,new Uint8Array(t),e)}function ft(t,e){ht.call(this,new Uint8ClampedArray(t),e)}function dt(t,e){ht.call(this,new Int16Array(t),e)}function gt(t,e){ht.call(this,new Uint16Array(t),e)}function mt(t,e){ht.call(this,new Int32Array(t),e)}function vt(t,e){ht.call(this,new Uint32Array(t),e)}function yt(t,e){ht.call(this,new Float32Array(t),e)}function _t(t,e){ht.call(this,new Float64Array(t),e)}function xt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function bt(){Object.defineProperty(this,"id",{value:mr++}),this.uuid=nr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function wt(){Object.defineProperty(this,"id",{value:mr++}),this.uuid=nr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function Et(t,e){st.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new wt,this.material=void 0!==e?e:new ut({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function St(t,e,n,i,r,s){function a(t,e,n,i,r,s,a,u,h,x,b){var w=s/h,E=a/x,S=s/2,T=a/2,M=u/2;a=h+1;for(var A=x+1,C=s=0,L=new c,P=0;P<A;P++)for(var R=P*E-T,I=0;I<a;I++)L[t]=(I*w-S)*i,L[e]=R*r,L[n]=M,p[g]=L.x,p[g+1]=L.y,p[g+2]=L.z,L[t]=0,L[e]=0,L[n]=0<u?1:-1,f[g]=L.x,f[g+1]=L.y,f[g+2]=L.z,d[m]=I/h,d[m+1]=1-P/x,g+=3,m+=2,s+=1;for(P=0;P<x;P++)for(I=0;I<h;I++)t=y+I+a*(P+1),e=y+(I+1)+a*(P+1),n=y+(I+1)+a*P,l[v]=y+I+a*P,l[v+1]=t,l[v+2]=n,l[v+3]=t,l[v+4]=e,l[v+5]=n,v+=6,C+=6;o.addGroup(_,C,b),_+=C,y+=s}wt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};var o=this;i=Math.floor(i)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var u=function(t,e,n){return t=0+(t+1)*(e+1)*2+(t+1)*(n+1)*2+(n+1)*(e+1)*2}(i,r,s),h=function(t,e,n){return 6*(t=0+t*e*2+t*n*2+n*e*2)}(i,r,s),l=new(65535<h?Uint32Array:Uint16Array)(h),p=new Float32Array(3*u),f=new Float32Array(3*u),d=new Float32Array(2*u),g=0,m=0,v=0,y=0,_=0;a("z","y","x",-1,-1,n,e,t,s,r,0),a("z","y","x",1,-1,n,e,-t,s,r,1),a("x","z","y",1,1,t,n,e,i,s,2),a("x","z","y",1,-1,t,n,-e,i,s,3),a("x","y","z",1,-1,t,e,n,i,r,4),a("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(new ht(l,1)),this.addAttribute("position",new ht(p,3)),this.addAttribute("normal",new ht(f,3)),this.addAttribute("uv",new ht(d,2))}function Tt(t,e,n,i){wt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r=t/2,s=e/2;n=Math.floor(n)||1,i=Math.floor(i)||1;var a=n+1,o=i+1,c=t/n,u=e/i;e=new Float32Array(a*o*3),t=new Float32Array(a*o*3);for(var h=new Float32Array(a*o*2),l=0,p=0,f=0;f<o;f++)for(var d=f*u-s,g=0;g<a;g++)e[l]=g*c-r,e[l+1]=-d,t[l+2]=1,h[p]=g/n,h[p+1]=1-f/i,l+=3,p+=2;for(l=0,r=new(65535<e.length/3?Uint32Array:Uint16Array)(n*i*6),f=0;f<i;f++)for(g=0;g<n;g++)s=g+a*(f+1),o=g+1+a*(f+1),c=g+1+a*f,r[l]=g+a*f,r[l+1]=s,r[l+2]=c,r[l+3]=s,r[l+4]=o,r[l+5]=c,l+=6;this.setIndex(new ht(r,1)),this.addAttribute("position",new ht(e,3)),this.addAttribute("normal",new ht(t,3)),this.addAttribute("uv",new ht(h,2))}function Mt(){st.call(this),this.type="Camera",this.matrixWorldInverse=new u,this.projectionMatrix=new u}function At(t,e,n,i){Mt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ct(t,e,n,i,r,s){Mt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function Lt(t,e,n){var i,r,s;return{setMode:function(t){i=t},setIndex:function(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(r=t.UNSIGNED_INT,s=4):n.array instanceof Uint16Array?(r=t.UNSIGNED_SHORT,s=2):(r=t.UNSIGNED_BYTE,s=1)},render:function(e,a){t.drawElements(i,a,r,e*s),n.calls++,n.vertices+=a,i===t.TRIANGLES&&(n.faces+=a/3)},renderInstances:function(a,o,c){var u=e.get("ANGLE_instanced_arrays");null===u?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(u.drawElementsInstancedANGLE(i,c,r,o*s,a.maxInstancedCount),n.calls++,n.vertices+=c*a.maxInstancedCount,i===t.TRIANGLES&&(n.faces+=a.maxInstancedCount*c/3))}}}function Pt(t,e,n){var i;return{setMode:function(t){i=t},render:function(e,r){t.drawArrays(i,e,r),n.calls++,n.vertices+=r,i===t.TRIANGLES&&(n.faces+=r/3)},renderInstances:function(r){var s=e.get("ANGLE_instanced_arrays");if(null===s)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var a=r.attributes.position,a=a.isInterleavedBufferAttribute?a.data.count:a.count;s.drawArraysInstancedANGLE(i,0,a,r.maxInstancedCount),n.calls++,n.vertices+=a*r.maxInstancedCount,i===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*a/3)}}}}function Rt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new c,color:new H,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={position:new c,direction:new c,color:new H,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={position:new c,color:new H,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":i={direction:new c,skyColor:new H,groundColor:new H};break;case"RectAreaLight":i={color:new H,position:new c,halfWidth:new c,halfHeight:new c}}return t[e.id]=i}}}function It(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}function kt(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),It(n)),i}function Ot(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function Nt(t,e){var n=Ot(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Dt(t,e){var n=Ot(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ft(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ut(t,e,n){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zt).join("\n")}function Bt(t){var e,n=[];for(e in t){var i=t[e];!1!==i&&n.push("#define "+e+" "+i)}return n.join("\n")}function zt(t){return""!==t}function jt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Ht(t){return t.replace(/#include +<([\w\d.]+)>/g,function(t,e){var n=hr[e];if(void 0===n)throw Error("Can not resolve #include <"+e+">");return Ht(n)})}function Vt(t){return t.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,i){for(t="",e=parseInt(e);e<parseInt(n);e++)t+=i.replace(/\[ i \]/g,"[ "+e+" ]");return t})}function Gt(t,e,n,i){var r=t.context,s=n.extensions,a=n.defines,o=n.__webglShader.vertexShader,c=n.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===i.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===i.shadowMapType&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",l="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(n.envMap.mapping){case 301:case 302:h="ENVMAP_TYPE_CUBE";break;case 306:case 307:h="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:h="ENVMAP_TYPE_EQUIREC";break;case 305:h="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:l="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:p="ENVMAP_BLENDING_MULTIPLY";break;case 1:p="ENVMAP_BLENDING_MIX";break;case 2:p="ENVMAP_BLENDING_ADD"}}var f=0<t.gammaFactor?t.gammaFactor:1,s=Ut(s,i,t.extensions),d=Bt(a),g=r.createProgram();n.isRawShaderMaterial?(a=[d,"\n"].filter(zt).join("\n"),u=[s,d,"\n"].filter(zt).join("\n")):(a=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,d,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+l:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zt).join("\n"),u=[s,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,d,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.envMap?"#define "+l:"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?hr.tonemapping_pars_fragment:"",0!==i.toneMapping?Ft("toneMapping",i.toneMapping):"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?hr.encodings_pars_fragment:"",i.mapEncoding?Nt("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?Nt("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?Nt("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?Dt("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(zt).join("\n")),o=Ht(o,i),o=jt(o,i),c=Ht(c,i),c=jt(c,i),n.isShaderMaterial||(o=Vt(o),c=Vt(c)),c=u+c,o=kt(r,r.VERTEX_SHADER,a+o),c=kt(r,r.FRAGMENT_SHADER,c),r.attachShader(g,o),r.attachShader(g,c),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),i=r.getProgramInfoLog(g),h=r.getShaderInfoLog(o),l=r.getShaderInfoLog(c),f=p=!0,!1===r.getProgramParameter(g,r.LINK_STATUS)?(p=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(g,r.VALIDATE_STATUS),"gl.getProgramInfoLog",i,h,l)):""!==i?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",i):""!==h&&""!==l||(f=!1),f&&(this.diagnostics={runnable:p,material:n,programLog:i,vertexShader:{log:h,prefix:a},fragmentShader:{log:l,prefix:u}}),r.deleteShader(o),r.deleteShader(c);var m;this.getUniforms=function(){return void 0===m&&(m=new j(r,g,t)),m};var v;return this.getAttributes=function(){if(void 0===v){for(var t={},e=r.getProgramParameter(g,r.ACTIVE_ATTRIBUTES),n=0;n<e;n++){var i=r.getActiveAttrib(g,n).name;t[i]=r.getAttribLocation(g,i)}v=t}return v},this.destroy=function(){r.deleteProgram(g),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=vr++,this.code=e,this.usedTimes=1,this.program=g,this.vertexShader=o,this.fragmentShader=c,this}function Wt(t,e){function n(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=3e3,3e3===n&&e&&(n=3007),n}var i=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking".split(" ");this.getParameters=function(i,s,a,o,c,u){var h,l=r[i.type];e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture?h=1024:(h=Math.floor((e.maxVertexUniforms-20)/4),void 0!==u&&u&&u.isSkinnedMesh&&(h=Math.min(u.skeleton.bones.length,h))<u.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+u.skeleton.bones.length+", this GPU supports just "+h+" (try OpenGL instead of ANGLE)"));var p=t.getPrecision();null!==i.precision&&(p=e.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead.");var f=t.getCurrentRenderTarget();return{shaderID:l,precision:p,supportsVertexTextures:e.vertexTextures,outputEncoding:n(f?f.texture:null,t.gammaOutput),map:!!i.map,mapEncoding:n(i.map,t.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:n(i.envMap,t.gammaInput),envMapCubeUV:!!i.envMap&&(306===i.envMap.mapping||307===i.envMap.mapping),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:n(i.emissiveMap,t.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!a,useFog:i.fog,fogExp:a&&a.isFogExp2,flatShading:1===i.shading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:i.skinning,maxBones:h,useVertexTexture:e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numClippingPlanes:o,numClipIntersection:c,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&0<s.shadows.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking}},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(i=0;i<s.length;i++)n.push(e[s[i]]);return n.join()},this.acquireProgram=function(e,n,r){for(var s,a=0,o=i.length;a<o;a++){var c=i[a];if(c.code===r){s=c,++s.usedTimes;break}}return void 0===s&&(s=new Gt(t,r,e,n),i.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function qt(t,e,n){function i(t){var a=t.target;t=s[a.id],null!==t.index&&r(t.index);var o,c=t.attributes;for(o in c)r(c[o]);a.removeEventListener("dispose",i),delete s[a.id],o=e.get(a),o.wireframe&&r(o.wireframe),e.delete(a),a=e.get(t),a.wireframe&&r(a.wireframe),e.delete(t),n.memory.geometries--}function r(n){var i;void 0!==(i=n.isInterleavedBufferAttribute?e.get(n.data).__webglBuffer:e.get(n).__webglBuffer)&&(t.deleteBuffer(i),n.isInterleavedBufferAttribute?e.delete(n.data):e.delete(n))}var s={};return{get:function(t){var e=t.geometry;if(void 0!==s[e.id])return s[e.id];e.addEventListener("dispose",i);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new wt).setFromObject(t)),r=e._bufferGeometry),s[e.id]=r,n.memory.geometries++,r}}}function Xt(t,e,n){function i(n,i){var r=n.isInterleavedBufferAttribute?n.data:n,s=e.get(r);if(void 0===s.__webglBuffer){s.__webglBuffer=t.createBuffer(),t.bindBuffer(i,s.__webglBuffer),t.bufferData(i,r.array,r.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW);var a=t.FLOAT,o=r.array;o instanceof Float32Array?a=t.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?a=t.UNSIGNED_SHORT:o instanceof Int16Array?a=t.SHORT:o instanceof Uint32Array?a=t.UNSIGNED_INT:o instanceof Int32Array?a=t.INT:o instanceof Int8Array?a=t.BYTE:o instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),s.bytesPerElement=o.BYTES_PER_ELEMENT,s.type=a,s.version=r.version,r.onUploadCallback()}else s.version!==r.version&&(t.bindBuffer(i,s.__webglBuffer),!1===r.dynamic?t.bufferData(i,r.array,t.STATIC_DRAW):-1===r.updateRange.count?t.bufferSubData(i,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),s.version=r.version)}var r=new qt(t,e,n);return{getAttributeBuffer:function(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer},getAttributeProperties:function(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)},getWireframeAttribute:function(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var s=[],a=n.index,o=n.attributes;if(n=o.position,null!==a)for(var a=a.array,o=0,c=a.length;o<c;o+=3){var u=a[o+0],h=a[o+1],l=a[o+2];s.push(u,h,h,l,l,u)}else for(a=o.position.array,o=0,c=a.length/3-1;o<c;o+=3)u=o+0,h=o+1,l=o+2,s.push(u,h,h,l,l,u);return s=new ht(new(65535<n.count?Uint32Array:Uint16Array)(s),1),i(s,t.ELEMENT_ARRAY_BUFFER),r.wireframe=s},update:function(e){var n=r.get(e);e.geometry.isGeometry&&n.updateFromObject(e),e=n.index;var s=n.attributes;null!==e&&i(e,t.ELEMENT_ARRAY_BUFFER);for(var a in s)i(s[a],t.ARRAY_BUFFER);e=n.morphAttributes;for(a in e)for(var s=e[a],o=0,c=s.length;o<c;o++)i(s[o],t.ARRAY_BUFFER);return n}}}function Yt(t,e,n,i,r,s,a){function o(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function c(t){return nr.isPowerOfTwo(t.width)&&nr.isPowerOfTwo(t.height)}function u(e){return 1003===e||1004===e||1005===e?t.NEAREST:t.LINEAR}function h(e){e=e.target,e.removeEventListener("dispose",h);t:{var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)break t;t.deleteTexture(n.__webglTexture)}i.delete(e)}m.textures--}function l(e){e=e.target,e.removeEventListener("dispose",l);var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(n.__webglFramebuffer[r]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.delete(e.texture),i.delete(e)}m.textures--}function p(e,a){var u=i.get(e);if(0<e.version&&u.__version!==e.version){var l=e.image;if(void 0===l)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==l.complete){void 0===u.__webglInit&&(u.__webglInit=!0,e.addEventListener("dispose",h),u.__webglTexture=t.createTexture(),m.textures++),n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_2D,u.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,e.unpackAlignment);var p=o(e.image,r.maxTextureSize);if((1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)&&!1===c(p))if((l=p)instanceof HTMLImageElement||l instanceof HTMLCanvasElement){var d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=nr.nearestPowerOfTwo(l.width),d.height=nr.nearestPowerOfTwo(l.height),d.getContext("2d").drawImage(l,0,0,d.width,d.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+l.width+"x"+l.height+"). Resized to "+d.width+"x"+d.height,l),p=d}else p=l;var l=c(p),d=s(e.format),g=s(e.type);f(t.TEXTURE_2D,e,l);var y=e.mipmaps;if(e.isDepthTexture){if(y=t.DEPTH_COMPONENT,1015===e.type){if(!v)throw Error("Float Depth Texture only supported in WebGL2.0");y=t.DEPTH_COMPONENT32F}else v&&(y=t.DEPTH_COMPONENT16);1026===e.format&&y===t.DEPTH_COMPONENT&&1012!==e.type&&1014!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=1012,g=s(e.type)),1027===e.format&&(y=t.DEPTH_STENCIL,1020!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=1020,g=s(e.type))),n.texImage2D(t.TEXTURE_2D,0,y,p.width,p.height,0,d,g,null)}else if(e.isDataTexture)if(0<y.length&&l){for(var _=0,x=y.length;_<x;_++)p=y[_],n.texImage2D(t.TEXTURE_2D,_,d,p.width,p.height,0,d,g,p.data);e.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,d,p.width,p.height,0,d,g,p.data);else if(e.isCompressedTexture)for(_=0,x=y.length;_<x;_++)p=y[_],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(d)?n.compressedTexImage2D(t.TEXTURE_2D,_,d,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,_,d,p.width,p.height,0,d,g,p.data);else if(0<y.length&&l){for(_=0,x=y.length;_<x;_++)p=y[_],n.texImage2D(t.TEXTURE_2D,_,d,d,g,p);e.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,d,d,g,p);return e.generateMipmaps&&l&&t.generateMipmap(t.TEXTURE_2D),u.__version=e.version,void(e.onUpdate&&e.onUpdate(e))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_2D,u.__webglTexture)}function f(n,a,o){o?(t.texParameteri(n,t.TEXTURE_WRAP_S,s(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,s(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,s(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,s(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,u(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,u(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),!(o=e.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===e.get("OES_texture_float_linear")||1016===a.type&&null===e.get("OES_texture_half_float_linear")||!(1<a.anisotropy||i.get(a).__currentAnisotropy)||(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}function d(e,r,a,o){var c=s(r.texture.format),u=s(r.texture.type);n.texImage2D(o,0,c,r.width,r.height,0,c,u,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,o,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function g(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}var m=a.memory,v="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=p,this.setTextureCube=function(e,a){var u=i.get(e);if(6===e.image.length)if(0<e.version&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",h),u.__image__webglTextureCube=t.createTexture(),m.textures++),n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var l=e&&e.isCompressedTexture,p=e.image[0]&&e.image[0].isDataTexture,d=[],g=0;6>g;g++)d[g]=l||p?p?e.image[g].image:e.image[g]:o(e.image[g],r.maxCubemapSize);var v=c(d[0]),y=s(e.format),_=s(e.type);for(f(t.TEXTURE_CUBE_MAP,e,v),g=0;6>g;g++)if(l)for(var x,b=d[g].mipmaps,w=0,E=b.length;w<E;w++)x=b[w],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(y)?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,w,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,w,y,x.width,x.height,0,y,_,x.data);else p?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,d[g].width,d[g].height,0,y,_,d[g].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,y,_,d[g]);e.generateMipmaps&&v&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+a),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",l),s.__webglTexture=t.createTexture(),m.textures++;var a=!0===e.isWebGLRenderTargetCube,o=c(e);if(a){r.__webglFramebuffer=[];for(var u=0;6>u;u++)r.__webglFramebuffer[u]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(a){for(n.bindTexture(t.TEXTURE_CUBE_MAP,s.__webglTexture),f(t.TEXTURE_CUBE_MAP,e.texture,o),u=0;6>u;u++)d(r.__webglFramebuffer[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);e.texture.generateMipmaps&&o&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,s.__webglTexture),f(t.TEXTURE_2D,e.texture,o),d(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&o&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);if(e.depthBuffer){if(r=i.get(e),s=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(s)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(i.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),p(e.depthTexture,0),r=i.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}else if(s)for(r.__webglDepthbuffer=[],s=0;6>s;s++)t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[s]),r.__webglDepthbuffer[s]=t.createRenderbuffer(),g(r.__webglDepthbuffer[s],e);else t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),g(r.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(e){var r=e.texture;r.generateMipmaps&&c(e)&&1003!==r.minFilter&&1006!==r.minFilter&&(e=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,r=i.get(r).__webglTexture,n.bindTexture(e,r),t.generateMipmap(e),n.bindTexture(e,null))}}function Zt(){var t={};return{get:function(e){e=e.uuid;var n=t[e];return void 0===n&&(n={},t[e]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function $t(t,e,n){function i(e,n,i){var r=new Uint8Array(4),s=t.createTexture();for(t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST),e=0;e<i;e++)t.texImage2D(n+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return s}function s(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function a(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function o(e,i,r,o,c,u,h,l){0!==e?s(t.BLEND):a(t.BLEND),e===b&&l===C||(2===e?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):3===e?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):4===e?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),b=e,C=l),5===e?(c=c||i,u=u||r,h=h||o,i===w&&c===T||(t.blendEquationSeparate(n(i),n(c)),w=i,T=c),r===E&&o===S&&u===M&&h===A||(t.blendFuncSeparate(n(r),n(o),n(u),n(h)),E=r,S=o,M=u,A=h)):A=M=T=S=E=w=null}function c(t){f.setFunc(t)}function u(e){L!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),L=e)}function h(e){0!==e?(s(t.CULL_FACE),e!==P&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):a(t.CULL_FACE),P=e}function l(e){void 0===e&&(e=t.TEXTURE0+N-1),F!==e&&(t.activeTexture(e),F=e)}var p=new function(){var e=!1,n=new r,i=null,s=new r;return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,r,a,o){!0===o&&(e*=a,i*=a,r*=a),n.set(e,i,r,a),!1===s.equals(n)&&(t.clearColor(e,i,r,a),s.copy(n))},reset:function(){e=!1,i=null,s.set(0,0,0,1)}}},f=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?s(t.DEPTH_TEST):a(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=i=n=null}}},d=new function(){var e=!1,n=null,i=null,r=null,o=null,c=null,u=null,h=null,l=null;return{setTest:function(e){e?s(t.STENCIL_TEST):a(t.STENCIL_TEST)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&o===s||(t.stencilFunc(e,n,s),i=e,r=n,o=s)},setOp:function(e,n,i){c===e&&u===n&&h===i||(t.stencilOp(e,n,i),c=e,u=n,h=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,l=h=u=c=o=r=i=n=null}}},g=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=new Uint8Array(g),v=new Uint8Array(g),y=new Uint8Array(g),_={},x=null,b=null,w=null,E=null,S=null,T=null,M=null,A=null,C=!1,L=null,P=null,R=null,I=null,k=null,O=null,N=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),D=1<=parseFloat(g),F=null,U={},B=new r,z=new r,j={};return j[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),j[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:p,depth:f,stencil:d},init:function(){p.setClear(0,0,0,1),f.setClear(1),d.setClear(0),s(t.DEPTH_TEST),c(3),u(!1),h(1),s(t.CULL_FACE),s(t.BLEND),o(1)},initAttributes:function(){for(var t=0,e=m.length;t<e;t++)m[t]=0},enableAttribute:function(n){m[n]=1,0===v[n]&&(t.enableVertexAttribArray(n),v[n]=1),0!==y[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),y[n]=0)},enableAttributeAndDivisor:function(e,n,i){m[e]=1,0===v[e]&&(t.enableVertexAttribArray(e),v[e]=1),y[e]!==n&&(i.vertexAttribDivisorANGLE(e,n),y[e]=n)},disableUnusedAttributes:function(){for(var e=0,n=v.length;e!==n;++e)v[e]!==m[e]&&(t.disableVertexAttribArray(e),v[e]=0)},enable:s,disable:a,getCompressedTextureFormats:function(){if(null===x&&(x=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)x.push(n[i]);return x},setBlending:o,setColorWrite:function(t){p.setMask(t)},setDepthTest:function(t){f.setTest(t)},setDepthWrite:function(t){f.setMask(t)},setDepthFunc:c,setStencilTest:function(t){d.setTest(t)},setStencilWrite:function(t){d.setMask(t)},setStencilFunc:function(t,e,n){d.setFunc(t,e,n)},setStencilOp:function(t,e,n){d.setOp(t,e,n)},setFlipSided:u,setCullFace:h,setLineWidth:function(e){e!==R&&(D&&t.lineWidth(e),R=e)},setPolygonOffset:function(e,n,i){e?(s(t.POLYGON_OFFSET_FILL),(I!==n||k!==i)&&(t.polygonOffset(n,i),I=n,k=i)):a(t.POLYGON_OFFSET_FILL)},getScissorTest:function(){return O},setScissorTest:function(e){(O=e)?s(t.SCISSOR_TEST):a(t.SCISSOR_TEST)},activeTexture:l,bindTexture:function(e,n){null===F&&l();var i=U[F];void 0===i&&(i={type:void 0,texture:void 0},U[F]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||j[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(t)}},scissor:function(e){!1===B.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),B.copy(e))},viewport:function(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))},reset:function(){for(var e=0;e<v.length;e++)1===v[e]&&(t.disableVertexAttribArray(e),v[e]=0);_={},F=x=null,U={},P=L=b=null,p.reset(),f.reset(),d.reset()}}}function Jt(t,e,n){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var r,s=void 0!==n.precision?n.precision:"highp",a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a),n=!0===n.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth");var a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),o=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),h=t.getParameter(t.MAX_VERTEX_ATTRIBS),l=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),f=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),d=0<o,g=!!e.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:n,maxTextures:a,maxVertexTextures:o,maxTextureSize:c,maxCubemapSize:u,maxAttributes:h,maxVertexUniforms:l,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:d,floatFragmentTextures:g,floatVertexTextures:d&&g}}function Kt(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i}}}function Qt(){function t(){u.value!==i&&(u.value=i,u.needsUpdate=0<r),n.numPlanes=r,n.numIntersection=0}function e(t,e,i,r){var s=null!==t?t.length:0,a=null;if(0!==s){if(a=u.value,!0!==r||null===a)for(r=i+4*s,e=e.matrixWorldInverse,c.getNormalMatrix(e),(null===a||a.length<r)&&(a=new Float32Array(r)),r=0;r!==s;++r,i+=4)o.copy(t[r]).applyMatrix4(e,c),o.normal.toArray(a,i),a[i+3]=o.constant;u.value=a,u.needsUpdate=!0}return n.numPlanes=s,a}var n=this,i=null,r=0,s=!1,a=!1,o=new Q,c=new K,u={value:null,needsUpdate:!1};this.uniform=u,this.numIntersection=this.numPlanes=0,this.init=function(t,n,a){var o=0!==t.length||n||0!==r||s;return s=n,i=e(t,a,0),r=t.length,o},this.beginShadows=function(){a=!0,e(null)},this.endShadows=function(){a=!1,t()},this.setState=function(n,o,c,h,l,p){if(!s||null===n||0===n.length||a&&!c)a?e(null):t();else{c=a?0:r;var f=4*c,d=l.clippingState||null;for(u.value=d,d=e(n,h,f,p),n=0;n!==f;++n)d[n]=i[n];l.clippingState=d,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=c}}}function te(t){function e(){Ot.init(),Ot.scissor(Z.copy(ot).multiplyScalar(at)),Ot.viewport(K.copy(ht).multiplyScalar(at)),Ot.buffers.color.setClear(nt.r,nt.g,nt.b,it,A)}function n(){X=U=null,G="",V=-1,Ot.reset()}function i(t){t.preventDefault(),n(),e(),Nt.clear()}function s(t){t=t.target,t.removeEventListener("dispose",s),a(t),Nt.delete(t)}function a(t){var e=Nt.get(t).program;t.program=void 0,void 0!==e&&Ut.releaseProgram(e)}function o(t,e){return Math.abs(e[0])-Math.abs(t[0])}function h(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function l(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function p(t,e,n,i,r){var s;n.transparent?(i=I,s=++k):(i=P,s=++R),s=i[s],void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.z=vt.z,s.group=r):(s={id:t.id,object:t,geometry:e,material:n,z:vt.z,group:r},i.push(s))}function f(t){if(!lt.intersectsSphere(t))return!1;var e=pt.numPlanes;if(0===e)return!0;var n=F.clippingPlanes,i=t.center;t=-t.radius;var r=0;do{if(n[r].distanceToPoint(i)<t)return!1}while(++r!==e);return!0}function d(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)L.push(t);else if(t.isSprite){var n;(n=!1===t.frustumCulled)||(gt.center.set(0,0,0),gt.radius=.7071067811865476,gt.applyMatrix4(t.matrixWorld),n=!0===f(gt)),n&&N.push(t)}else if(t.isLensFlare)D.push(t);else if(t.isImmediateRenderObject)!0===F.sortObjects&&(vt.setFromMatrixPosition(t.matrixWorld),vt.applyProjection(mt)),p(t,null,t.material,vt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),(n=!1===t.frustumCulled)||(n=t.geometry,null===n.boundingSphere&&n.computeBoundingSphere(),gt.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),n=!0===f(gt)),n)){var i=t.material;if(!0===i.visible)if(!0===F.sortObjects&&(vt.setFromMatrixPosition(t.matrixWorld),vt.applyProjection(mt)),n=Ft.update(t),i.isMultiMaterial)for(var r=n.groups,s=i.materials,i=0,a=r.length;i<a;i++){var o=r[i],c=s[o.materialIndex];!0===c.visible&&p(t,n,c,vt.z,o)}else p(t,n,i,vt.z,null)}for(n=t.children,i=0,a=n.length;i<a;i++)d(n[i],e)}}function g(t,e,n,i){for(var r=0,s=t.length;r<s;r++){var a=t[r],o=a.object,c=a.geometry,u=void 0===i?a.material:i,a=a.group;if(o.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,o.matrixWorld),o.normalMatrix.getNormalMatrix(o.modelViewMatrix),o.onBeforeRender(F,e,n,c,u,a),o.isImmediateRenderObject){m(u);var h=v(n,e.fog,u,o);G="",o.render(function(t){F.renderBufferImmediate(t,h,u)})}else F.renderBufferDirect(n,e.fog,c,u,o,a);o.onAfterRender(F,e,n,c,u,a)}}function m(t){2===t.side?Ot.disable(Mt.CULL_FACE):Ot.enable(Mt.CULL_FACE),Ot.setFlipSided(1===t.side),!0===t.transparent?Ot.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):Ot.setBlending(0),Ot.setDepthFunc(t.depthFunc),Ot.setDepthTest(t.depthTest),Ot.setDepthWrite(t.depthWrite),Ot.setColorWrite(t.colorWrite),Ot.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function v(t,e,n,i){Q=0;var r=Nt.get(n);if(ft&&(dt||t!==X)&&pt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,t===X&&n.id===V),!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==xt.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===pt.numPlanes&&r.numIntersection===pt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate){t:{var o=Nt.get(n),c=Ut.getParameters(n,xt,e,pt.numPlanes,pt.numIntersection,i),u=Ut.getProgramCode(n,c),h=o.program,l=!0;if(void 0===h)n.addEventListener("dispose",s);else if(h.code!==u)a(n);else{if(void 0!==c.shaderID)break t;l=!1}if(l&&(c.shaderID?(h=fr[c.shaderID],o.__webglShader={name:n.type,uniforms:ur.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):o.__webglShader={name:n.type,uniforms:n.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader},n.__webglShader=o.__webglShader,h=Ut.acquireProgram(n,c,u),o.program=h,n.program=h),c=h.getAttributes(),n.morphTargets)for(u=n.numSupportedMorphTargets=0;u<F.maxMorphTargets;u++)0<=c["morphTarget"+u]&&n.numSupportedMorphTargets++;if(n.morphNormals)for(u=n.numSupportedMorphNormals=0;u<F.maxMorphNormals;u++)0<=c["morphNormal"+u]&&n.numSupportedMorphNormals++;c=o.__webglShader.uniforms,(n.isShaderMaterial||n.isRawShaderMaterial)&&!0!==n.clipping||(o.numClippingPlanes=pt.numPlanes,o.numIntersection=pt.numIntersection,c.clippingPlanes=pt.uniform),o.fog=e,o.lightsHash=xt.hash,n.lights&&(c.ambientLightColor.value=xt.ambient,c.directionalLights.value=xt.directional,c.spotLights.value=xt.spot,c.rectAreaLights.value=xt.rectArea,c.pointLights.value=xt.point,c.hemisphereLights.value=xt.hemi,c.directionalShadowMap.value=xt.directionalShadowMap,c.directionalShadowMatrix.value=xt.directionalShadowMatrix,c.spotShadowMap.value=xt.spotShadowMap,c.spotShadowMatrix.value=xt.spotShadowMatrix,c.pointShadowMap.value=xt.pointShadowMap,c.pointShadowMatrix.value=xt.pointShadowMatrix),u=o.program.getUniforms(),c=j.seqWithValue(u.seq,c),o.uniformsList=c}n.needsUpdate=!1}var p=!1,l=h=!1,o=r.program,c=o.getUniforms(),u=r.__webglShader.uniforms;if(o.id!==U&&(Mt.useProgram(o.program),U=o.id,l=h=p=!0),n.id!==V&&(V=n.id,h=!0),(p||t!==X)&&(c.set(Mt,t,"projectionMatrix"),kt.logarithmicDepthBuffer&&c.setValue(Mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==X&&(X=t,l=h=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(p=c.map.cameraPosition)&&p.setValue(Mt,vt.setFromMatrixPosition(t.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&c.setValue(Mt,"viewMatrix",t.matrixWorldInverse),c.set(Mt,F,"toneMappingExposure"),c.set(Mt,F,"toneMappingWhitePoint")),n.skinning&&(c.setOptional(Mt,i,"bindMatrix"),c.setOptional(Mt,i,"bindMatrixInverse"),t=i.skeleton)&&(kt.floatVertexTextures&&t.useVertexTexture?(c.set(Mt,t,"boneTexture"),c.set(Mt,t,"boneTextureWidth"),c.set(Mt,t,"boneTextureHeight")):c.setOptional(Mt,t,"boneMatrices")),h){if(n.lights&&(t=l,u.ambientLightColor.needsUpdate=t,u.directionalLights.needsUpdate=t,u.pointLights.needsUpdate=t,u.spotLights.needsUpdate=t,u.rectAreaLights.needsUpdate=t,u.hemisphereLights.needsUpdate=t),e&&n.fog&&(u.fogColor.value=e.color,e.isFog?(u.fogNear.value=e.near,u.fogFar.value=e.far):e.isFogExp2&&(u.fogDensity.value=e.density)),n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial){u.opacity.value=n.opacity,u.diffuse.value=n.color,n.emissive&&u.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),u.map.value=n.map,u.specularMap.value=n.specularMap,u.alphaMap.value=n.alphaMap,n.lightMap&&(u.lightMap.value=n.lightMap,u.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(u.aoMap.value=n.aoMap,u.aoMapIntensity.value=n.aoMapIntensity);var f;n.map?f=n.map:n.specularMap?f=n.specularMap:n.displacementMap?f=n.displacementMap:n.normalMap?f=n.normalMap:n.bumpMap?f=n.bumpMap:n.roughnessMap?f=n.roughnessMap:n.metalnessMap?f=n.metalnessMap:n.alphaMap?f=n.alphaMap:n.emissiveMap&&(f=n.emissiveMap),void 0!==f&&(f.isWebGLRenderTarget&&(f=f.texture),e=f.offset,f=f.repeat,u.offsetRepeat.value.set(e.x,e.y,f.x,f.y)),u.envMap.value=n.envMap,u.flipEnvMap.value=n.envMap&&n.envMap.isCubeTexture?-1:1,u.reflectivity.value=n.reflectivity,u.refractionRatio.value=n.refractionRatio}n.isLineBasicMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity):n.isLineDashedMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.dashSize.value=n.dashSize,u.totalSize.value=n.dashSize+n.gapSize,u.scale.value=n.scale):n.isPointsMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.size.value=n.size*at,u.scale.value=.5*st,u.map.value=n.map,null!==n.map&&(f=n.map.offset,n=n.map.repeat,u.offsetRepeat.value.set(f.x,f.y,n.x,n.y))):n.isMeshLambertMaterial?n.emissiveMap&&(u.emissiveMap.value=n.emissiveMap):n.isMeshToonMaterial?(y(u,n),n.gradientMap&&(u.gradientMap.value=n.gradientMap)):n.isMeshPhongMaterial?y(u,n):n.isMeshPhysicalMaterial?(u.clearCoat.value=n.clearCoat,u.clearCoatRoughness.value=n.clearCoatRoughness,_(u,n)):n.isMeshStandardMaterial?_(u,n):n.isMeshDepthMaterial?n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(n.bumpMap&&(u.bumpMap.value=n.bumpMap,u.bumpScale.value=n.bumpScale),n.normalMap&&(u.normalMap.value=n.normalMap,u.normalScale.value.copy(n.normalScale)),n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias)),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),j.upload(Mt,r.uniformsList,u,F)}return c.set(Mt,i,"modelViewMatrix"),c.set(Mt,i,"normalMatrix"),c.setValue(Mt,"modelMatrix",i.matrixWorld),o}function y(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function _(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function x(t){var e;if(1e3===t)return Mt.REPEAT;if(1001===t)return Mt.CLAMP_TO_EDGE;if(1002===t)return Mt.MIRRORED_REPEAT;if(1003===t)return Mt.NEAREST;if(1004===t)return Mt.NEAREST_MIPMAP_NEAREST;if(1005===t)return Mt.NEAREST_MIPMAP_LINEAR;if(1006===t)return Mt.LINEAR;if(1007===t)return Mt.LINEAR_MIPMAP_NEAREST;if(1008===t)return Mt.LINEAR_MIPMAP_LINEAR;if(1009===t)return Mt.UNSIGNED_BYTE;if(1017===t)return Mt.UNSIGNED_SHORT_4_4_4_4;if(1018===t)return Mt.UNSIGNED_SHORT_5_5_5_1;if(1019===t)return Mt.UNSIGNED_SHORT_5_6_5;if(1010===t)return Mt.BYTE;if(1011===t)return Mt.SHORT;if(1012===t)return Mt.UNSIGNED_SHORT;if(1013===t)return Mt.INT;if(1014===t)return Mt.UNSIGNED_INT;if(1015===t)return Mt.FLOAT;if(1016===t&&null!==(e=It.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(1021===t)return Mt.ALPHA;if(1022===t)return Mt.RGB;if(1023===t)return Mt.RGBA;if(1024===t)return Mt.LUMINANCE;if(1025===t)return Mt.LUMINANCE_ALPHA;if(1026===t)return Mt.DEPTH_COMPONENT;if(1027===t)return Mt.DEPTH_STENCIL;if(100===t)return Mt.FUNC_ADD;if(101===t)return Mt.FUNC_SUBTRACT;if(102===t)return Mt.FUNC_REVERSE_SUBTRACT;if(200===t)return Mt.ZERO;if(201===t)return Mt.ONE;if(202===t)return Mt.SRC_COLOR;if(203===t)return Mt.ONE_MINUS_SRC_COLOR;if(204===t)return Mt.SRC_ALPHA;if(205===t)return Mt.ONE_MINUS_SRC_ALPHA;if(206===t)return Mt.DST_ALPHA;if(207===t)return Mt.ONE_MINUS_DST_ALPHA;if(208===t)return Mt.DST_COLOR;if(209===t)return Mt.ONE_MINUS_DST_COLOR;if(210===t)return Mt.SRC_ALPHA_SATURATE;if((2001===t||2002===t||2003===t||2004===t)&&null!==(e=It.get("WEBGL_compressed_texture_s3tc"))){if(2001===t)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===t)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===t)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===t)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((2100===t||2101===t||2102===t||2103===t)&&null!==(e=It.get("WEBGL_compressed_texture_pvrtc"))){if(2100===t)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===t)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===t)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===t)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===t&&null!==(e=It.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((103===t||104===t)&&null!==(e=It.get("EXT_blend_minmax"))){if(103===t)return e.MIN_EXT;if(104===t)return e.MAX_EXT}return 1020===t&&null!==(e=It.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer","83"),t=t||{};var b=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),w=void 0!==t.context?t.context:null,E=void 0!==t.alpha&&t.alpha,S=void 0===t.depth||t.depth,T=void 0===t.stencil||t.stencil,M=void 0!==t.antialias&&t.antialias,A=void 0===t.premultipliedAlpha||t.premultipliedAlpha,C=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,L=[],P=[],R=-1,I=[],k=-1,O=new Float32Array(8),N=[],D=[];this.domElement=b,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var F=this,U=null,B=null,z=null,V=-1,G="",X=null,Z=new r,$=null,K=new r,Q=0,nt=new H(0),it=0,rt=b.width,st=b.height,at=1,ot=new r(0,0,rt,st),ct=!1,ht=new r(0,0,rt,st),lt=new tt,pt=new Qt,ft=!1,dt=!1,gt=new J,mt=new u,vt=new c,yt=new u,_t=new u,xt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},bt={calls:0,vertices:0,faces:0,points:0};this.info={render:bt,memory:{geometries:0,textures:0},programs:null};var Mt;try{if(E={alpha:E,depth:S,stencil:T,antialias:M,premultipliedAlpha:A,preserveDrawingBuffer:C},null===(Mt=w||b.getContext("webgl",E)||b.getContext("experimental-webgl",E))){if(null!==b.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}void 0===Mt.getShaderPrecisionFormat&&(Mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),b.addEventListener("webglcontextlost",i,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var It=new Kt(Mt);It.get("WEBGL_depth_texture"),It.get("OES_texture_float"),It.get("OES_texture_float_linear"),It.get("OES_texture_half_float"),It.get("OES_texture_half_float_linear"),It.get("OES_standard_derivatives"),It.get("ANGLE_instanced_arrays"),It.get("OES_element_index_uint")&&(wt.MaxIndex=4294967296);var kt=new Jt(Mt,It,t),Ot=new $t(Mt,It,x),Nt=new Zt,Dt=new Yt(Mt,It,Ot,Nt,kt,x,this.info),Ft=new Xt(Mt,Nt,this.info),Ut=new Wt(this,kt),Bt=new Rt;this.info.programs=Ut.programs;var zt=new Pt(Mt,It,bt),jt=new Lt(Mt,It,bt),Ht=new Ct(-1,1,1,-1,0,1),Vt=new At,Gt=new Et(new Tt(2,2),new ut({depthTest:!1,depthWrite:!1,fog:!1}));t=fr.cube;var qt=new Et(new St(5,5,5),new Y({uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}));e(),this.context=Mt,this.capabilities=kt,this.extensions=It,this.properties=Nt,this.state=Ot;var te=new et(this,xt,Ft,kt);this.shadowMap=te;var ee=new q(this,N),ne=new W(this,D);this.getContext=function(){return Mt},this.getContextAttributes=function(){return Mt.getContextAttributes()},this.forceContextLoss=function(){It.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return kt.getMaxAnisotropy()},this.getPrecision=function(){return kt.precision},this.getPixelRatio=function(){return at},this.setPixelRatio=function(t){void 0!==t&&(at=t,this.setSize(ht.z,ht.w,!1))},this.getSize=function(){return{width:rt,height:st}},this.setSize=function(t,e,n){rt=t,st=e,b.width=t*at,b.height=e*at,!1!==n&&(b.style.width=t+"px",b.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,i){Ot.viewport(ht.set(t,e,n,i))},this.setScissor=function(t,e,n,i){Ot.scissor(ot.set(t,e,n,i))},this.setScissorTest=function(t){Ot.setScissorTest(ct=t)},this.getClearColor=function(){return nt},this.setClearColor=function(t,e){nt.set(t),it=void 0!==e?e:1,Ot.buffers.color.setClear(nt.r,nt.g,nt.b,it,A)},this.getClearAlpha=function(){return it},this.setClearAlpha=function(t){it=t,Ot.buffers.color.setClear(nt.r,nt.g,nt.b,it,A)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=Mt.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=Mt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Mt.STENCIL_BUFFER_BIT),Mt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.resetGLState=n,this.dispose=function(){I=[],k=-1,P=[],R=-1,b.removeEventListener("webglcontextlost",i,!1)},this.renderBufferImmediate=function(t,e,n){Ot.initAttributes();var i=Nt.get(t);if(t.hasPositions&&!i.position&&(i.position=Mt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=Mt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=Mt.createBuffer()),t.hasColors&&!i.color&&(i.color=Mt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(Mt.bindBuffer(Mt.ARRAY_BUFFER,i.position),Mt.bufferData(Mt.ARRAY_BUFFER,t.positionArray,Mt.DYNAMIC_DRAW),Ot.enableAttribute(e.position),Mt.vertexAttribPointer(e.position,3,Mt.FLOAT,!1,0,0)),t.hasNormals){if(Mt.bindBuffer(Mt.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&1===n.shading)for(var r=0,s=3*t.count;r<s;r+=9){var a=t.normalArray,o=(a[r+0]+a[r+3]+a[r+6])/3,c=(a[r+1]+a[r+4]+a[r+7])/3,u=(a[r+2]+a[r+5]+a[r+8])/3;a[r+0]=o,a[r+1]=c,a[r+2]=u,a[r+3]=o,a[r+4]=c,a[r+5]=u,a[r+6]=o,a[r+7]=c,a[r+8]=u}Mt.bufferData(Mt.ARRAY_BUFFER,t.normalArray,Mt.DYNAMIC_DRAW),Ot.enableAttribute(e.normal),Mt.vertexAttribPointer(e.normal,3,Mt.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Mt.bindBuffer(Mt.ARRAY_BUFFER,i.uv),Mt.bufferData(Mt.ARRAY_BUFFER,t.uvArray,Mt.DYNAMIC_DRAW),Ot.enableAttribute(e.uv),Mt.vertexAttribPointer(e.uv,2,Mt.FLOAT,!1,0,0)),t.hasColors&&0!==n.vertexColors&&(Mt.bindBuffer(Mt.ARRAY_BUFFER,i.color),Mt.bufferData(Mt.ARRAY_BUFFER,t.colorArray,Mt.DYNAMIC_DRAW),Ot.enableAttribute(e.color),Mt.vertexAttribPointer(e.color,3,Mt.FLOAT,!1,0,0)),Ot.disableUnusedAttributes(),Mt.drawArrays(Mt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,s){m(i);var a=v(t,e,i,r),c=!1;if(t=n.id+"_"+a.id+"_"+i.wireframe,t!==G&&(G=t,c=!0),void 0!==(e=r.morphTargetInfluences)){var u=[];t=0;for(var h=e.length;t<h;t++)c=e[t],u.push([c,t]);u.sort(o),8<u.length&&(u.length=8);var l=n.morphAttributes;for(t=0,h=u.length;t<h;t++)c=u[t],O[t]=c[0],0!==c[0]?(e=c[1],!0===i.morphTargets&&l.position&&n.addAttribute("morphTarget"+t,l.position[e]),!0===i.morphNormals&&l.normal&&n.addAttribute("morphNormal"+t,l.normal[e])):(!0===i.morphTargets&&n.removeAttribute("morphTarget"+t),!0===i.morphNormals&&n.removeAttribute("morphNormal"+t));for(t=u.length,e=O.length;t<e;t++)O[t]=0;a.getUniforms().setValue(Mt,"morphTargetInfluences",O),c=!0}if(e=n.index,h=n.attributes.position,u=1,!0===i.wireframe&&(e=Ft.getWireframeAttribute(n),u=2),null!==e?(t=jt,t.setIndex(e)):t=zt,c){var p,c=void 0;if(n&&n.isInstancedBufferGeometry&&null===(p=It.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===c&&(c=0),Ot.initAttributes();var f,l=n.attributes,a=a.getAttributes(),d=i.defaultAttributeValues;for(f in a){var g=a[f];if(0<=g){var y=l[f];if(void 0!==y){var _=y.normalized,x=y.itemSize,b=Ft.getAttributeProperties(y),w=b.__webglBuffer,E=b.type,b=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var S=y.data,T=S.stride,y=y.offset;S&&S.isInstancedInterleavedBuffer?(Ot.enableAttributeAndDivisor(g,S.meshPerAttribute,p),void 0===n.maxInstancedCount&&(n.maxInstancedCount=S.meshPerAttribute*S.count)):Ot.enableAttribute(g),Mt.bindBuffer(Mt.ARRAY_BUFFER,w),Mt.vertexAttribPointer(g,x,E,_,T*b,(c*T+y)*b)}else y.isInstancedBufferAttribute?(Ot.enableAttributeAndDivisor(g,y.meshPerAttribute,p),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):Ot.enableAttribute(g),Mt.bindBuffer(Mt.ARRAY_BUFFER,w),Mt.vertexAttribPointer(g,x,E,_,0,c*x*b)}else if(void 0!==d&&void 0!==(_=d[f]))switch(_.length){case 2:Mt.vertexAttrib2fv(g,_);break;case 3:Mt.vertexAttrib3fv(g,_);break;case 4:Mt.vertexAttrib4fv(g,_);break;default:Mt.vertexAttrib1fv(g,_)}}}Ot.disableUnusedAttributes()}null!==e&&Mt.bindBuffer(Mt.ELEMENT_ARRAY_BUFFER,Ft.getAttributeBuffer(e))}if(p=0,null!==e?p=e.count:void 0!==h&&(p=h.count),e=n.drawRange.start*u,h=null!==s?s.start*u:0,f=Math.max(e,h),0!==(s=Math.max(0,Math.min(p,e+n.drawRange.count*u,h+(null!==s?s.count*u:1/0))-1-f+1))){if(r.isMesh)if(!0===i.wireframe)Ot.setLineWidth(i.wireframeLinewidth*(null===B?at:1)),t.setMode(Mt.LINES);else switch(r.drawMode){case 0:t.setMode(Mt.TRIANGLES);break;case 1:t.setMode(Mt.TRIANGLE_STRIP);break;case 2:t.setMode(Mt.TRIANGLE_FAN)}else r.isLine?(i=i.linewidth,void 0===i&&(i=1),Ot.setLineWidth(i*(null===B?at:1)),r.isLineSegments?t.setMode(Mt.LINES):t.setMode(Mt.LINE_STRIP)):r.isPoints&&t.setMode(Mt.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,f,s):t.render(f,s)}},this.render=function(t,e,n,i){if(void 0!==e&&!0!==e.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{G="",V=-1,X=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),mt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),lt.setFromMatrix(mt),L.length=0,k=R=-1,N.length=0,D.length=0,dt=this.localClippingEnabled,ft=pt.init(this.clippingPlanes,dt,e),d(t,e),P.length=R+1,I.length=k+1,!0===F.sortObjects&&(P.sort(h),I.sort(l)),ft&&pt.beginShadows();for(var r=L,s=0,a=0,o=r.length;a<o;a++){var c=r[a];c.castShadow&&(xt.shadows[s++]=c)}xt.shadows.length=s,te.render(t,e);for(var p,f,m,v,r=L,y=c=0,_=0,x=e.matrixWorldInverse,b=0,w=0,E=0,S=0,T=0,s=0,a=r.length;s<a;s++)if(o=r[s],p=o.color,f=o.intensity,m=o.distance,v=o.shadow&&o.shadow.map?o.shadow.map.texture:null,o.isAmbientLight)c+=p.r*f,y+=p.g*f,_+=p.b*f;else if(o.isDirectionalLight){var M=Bt.get(o);M.color.copy(o.color).multiplyScalar(o.intensity),M.direction.setFromMatrixPosition(o.matrixWorld),vt.setFromMatrixPosition(o.target.matrixWorld),M.direction.sub(vt),M.direction.transformDirection(x),(M.shadow=o.castShadow)&&(M.shadowBias=o.shadow.bias,M.shadowRadius=o.shadow.radius,M.shadowMapSize=o.shadow.mapSize),xt.directionalShadowMap[b]=v,xt.directionalShadowMatrix[b]=o.shadow.matrix,xt.directional[b++]=M}else o.isSpotLight?(M=Bt.get(o),M.position.setFromMatrixPosition(o.matrixWorld),M.position.applyMatrix4(x),M.color.copy(p).multiplyScalar(f),M.distance=m,M.direction.setFromMatrixPosition(o.matrixWorld),vt.setFromMatrixPosition(o.target.matrixWorld),M.direction.sub(vt),M.direction.transformDirection(x),M.coneCos=Math.cos(o.angle),M.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),M.decay=0===o.distance?0:o.decay,(M.shadow=o.castShadow)&&(M.shadowBias=o.shadow.bias,M.shadowRadius=o.shadow.radius,M.shadowMapSize=o.shadow.mapSize),xt.spotShadowMap[E]=v,xt.spotShadowMatrix[E]=o.shadow.matrix,xt.spot[E++]=M):o.isRectAreaLight?(M=Bt.get(o),M.color.copy(p).multiplyScalar(f/(o.width*o.height)),M.position.setFromMatrixPosition(o.matrixWorld),M.position.applyMatrix4(x),_t.identity(),yt.copy(o.matrixWorld),yt.premultiply(x),_t.extractRotation(yt),M.halfWidth.set(.5*o.width,0,0),M.halfHeight.set(0,.5*o.height,0),M.halfWidth.applyMatrix4(_t),M.halfHeight.applyMatrix4(_t),xt.rectArea[S++]=M):o.isPointLight?(M=Bt.get(o),M.position.setFromMatrixPosition(o.matrixWorld),M.position.applyMatrix4(x),M.color.copy(o.color).multiplyScalar(o.intensity),M.distance=o.distance,M.decay=0===o.distance?0:o.decay,(M.shadow=o.castShadow)&&(M.shadowBias=o.shadow.bias,M.shadowRadius=o.shadow.radius,M.shadowMapSize=o.shadow.mapSize),xt.pointShadowMap[w]=v,void 0===xt.pointShadowMatrix[w]&&(xt.pointShadowMatrix[w]=new u),vt.setFromMatrixPosition(o.matrixWorld).negate(),xt.pointShadowMatrix[w].identity().setPosition(vt),xt.point[w++]=M):o.isHemisphereLight&&(M=Bt.get(o),M.direction.setFromMatrixPosition(o.matrixWorld),M.direction.transformDirection(x),M.direction.normalize(),M.skyColor.copy(o.color).multiplyScalar(f),M.groundColor.copy(o.groundColor).multiplyScalar(f),xt.hemi[T++]=M);xt.ambient[0]=c,xt.ambient[1]=y,xt.ambient[2]=_,xt.directional.length=b,xt.spot.length=E,xt.rectArea.length=S,xt.point.length=w,xt.hemi.length=T,xt.hash=b+","+w+","+E+","+S+","+T+","+xt.shadows.length,ft&&pt.endShadows(),bt.calls=0,bt.vertices=0,bt.faces=0,bt.points=0,void 0===n&&(n=null),this.setRenderTarget(n),r=t.background,null===r?Ot.buffers.color.setClear(nt.r,nt.g,nt.b,it,A):r&&r.isColor&&(Ot.buffers.color.setClear(r.r,r.g,r.b,1,A),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(Vt.projectionMatrix.copy(e.projectionMatrix),Vt.matrixWorld.extractRotation(e.matrixWorld),Vt.matrixWorldInverse.getInverse(Vt.matrixWorld),qt.material.uniforms.tCube.value=r,qt.modelViewMatrix.multiplyMatrices(Vt.matrixWorldInverse,qt.matrixWorld),Ft.update(qt),F.renderBufferDirect(Vt,null,qt.geometry,qt.material,qt,null)):r&&r.isTexture&&(Gt.material.map=r,Ft.update(Gt),F.renderBufferDirect(Ht,null,Gt.geometry,Gt.material,Gt,null)),t.overrideMaterial?(i=t.overrideMaterial,g(P,t,e,i),g(I,t,e,i)):(Ot.setBlending(0),g(P,t,e),g(I,t,e)),ee.render(t,e),ne.render(t,e,K),n&&Dt.updateRenderTargetMipmap(n),Ot.setDepthTest(!0),Ot.setDepthWrite(!0),Ot.setColorWrite(!0)}},this.setFaceCulling=function(t,e){Ot.setCullFace(t),Ot.setFlipSided(0===e)},this.allocTextureUnit=function(){var t=Q;return t>=kt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+kt.maxTextures),Q+=1,t},this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Dt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Dt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Dt.setTextureCube(e,n):Dt.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return B},this.setRenderTarget=function(t){(B=t)&&void 0===Nt.get(t).__webglFramebuffer&&Dt.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;t?(e=Nt.get(t),e=n?e.__webglFramebuffer[t.activeCubeFace]:e.__webglFramebuffer,Z.copy(t.scissor),$=t.scissorTest,K.copy(t.viewport)):(e=null,Z.copy(ot).multiplyScalar(at),$=ct,K.copy(ht).multiplyScalar(at)),z!==e&&(Mt.bindFramebuffer(Mt.FRAMEBUFFER,e),z=e),Ot.scissor(Z),Ot.setScissorTest($),Ot.viewport(K),n&&(n=Nt.get(t.texture),Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,n.__webglTexture,t.activeMipMapLevel))},this.readRenderTargetPixels=function(t,e,n,i,r,s){if(!1===(t&&t.isWebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var a=Nt.get(t).__webglFramebuffer;if(a){var o=!1;a!==z&&(Mt.bindFramebuffer(Mt.FRAMEBUFFER,a),o=!0);try{var c=t.texture,u=c.format,h=c.type;1023!==u&&x(u)!==Mt.getParameter(Mt.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||x(h)===Mt.getParameter(Mt.IMPLEMENTATION_COLOR_READ_TYPE)||1015===h&&(It.get("OES_texture_float")||It.get("WEBGL_color_buffer_float"))||1016===h&&It.get("EXT_color_buffer_half_float")?Mt.checkFramebufferStatus(Mt.FRAMEBUFFER)===Mt.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&Mt.readPixels(e,n,i,r,x(u),x(h),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&Mt.bindFramebuffer(Mt.FRAMEBUFFER,z)}}}}}function ee(t,e){this.name="",this.color=new H(t),this.density=void 0!==e?e:25e-5}function ne(t,e,n){this.name="",this.color=new H(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ie(){st.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function re(t,e,n,i,r){st.call(this),this.lensFlares=[],this.positionScreen=new c,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,i,r)}function se(t){X.call(this),this.type="SpriteMaterial",this.color=new H(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(t)}function ae(t){st.call(this),this.type="Sprite",this.material=void 0!==t?t:new se}function oe(){st.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ce(t,e,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new u,t=t||[],this.bones=t.slice(0),this.useVertexTexture?(t=Math.sqrt(4*this.bones.length),t=nr.nextPowerOfTwo(Math.ceil(t)),this.boneTextureHeight=this.boneTextureWidth=t=Math.max(t,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new V(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,1023,1015)):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new u)}function ue(){st.call(this),this.type="Bone"}function he(t,e,n){if(Et.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u,this.bindMatrixInverse=new u,t=[],this.geometry&&void 0!==this.geometry.bones){for(var i,r=0,s=this.geometry.bones.length;r<s;++r)i=this.geometry.bones[r],e=new ue,t.push(e),e.name=i.name,e.position.fromArray(i.pos),e.quaternion.fromArray(i.rotq),void 0!==i.scl&&e.scale.fromArray(i.scl);for(r=0,s=this.geometry.bones.length;r<s;++r)i=this.geometry.bones[r],-1!==i.parent&&null!==i.parent&&void 0!==t[i.parent]?t[i.parent].add(t[r]):this.add(t[r])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ce(t,void 0,n),this.matrixWorld)}function le(t){X.call(this),this.type="LineBasicMaterial",this.color=new H(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function pe(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new fe(t,e);st.call(this),this.type="Line",this.geometry=void 0!==t?t:new wt,this.material=void 0!==e?e:new le({color:16777215*Math.random()})}function fe(t,e){pe.call(this,t,e),this.type="LineSegments"}function de(t){X.call(this),this.type="PointsMaterial",this.color=new H(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function ge(t,e){st.call(this),this.type="Points",this.geometry=void 0!==t?t:new wt,this.material=void 0!==e?e:new de({color:16777215*Math.random()})}function me(){st.call(this),this.type="Group"}function ve(t,e,n,r,s,a,o,c,u){function h(){requestAnimationFrame(h),t.readyState>=t.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}i.call(this,t,e,n,r,s,a,o,c,u),this.generateMipmaps=!1;var l=this;h()}function ye(t,e,n,r,s,a,o,c,u,h,l,p){i.call(this,null,a,o,c,u,h,r,s,l,p),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function _e(t,e,n,r,s,a,o,c,u){i.call(this,t,e,n,r,s,a,o,c,u),this.needsUpdate=!0}function xe(t,e,n,r,s,a,o,c,u,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===h&&(n=1012),void 0===n&&1027===h&&(n=1020),i.call(this,null,r,s,a,o,c,h,n,u),this.image={width:t,height:e},this.magFilter=void 0!==o?o:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=this.flipY=!1}function be(t){function e(t,e){return t-e}wt.call(this);var n=[0,0],i={},r=["a","b","c"];if(t&&t.isGeometry){var s=t.vertices,a=t.faces,o=0,c=new Uint32Array(6*a.length);t=0;for(var u=a.length;t<u;t++)for(var h=a[t],l=0;3>l;l++){n[0]=h[r[l]],n[1]=h[r[(l+1)%3]],n.sort(e);var p=n.toString();void 0===i[p]&&(c[2*o]=n[0],c[2*o+1]=n[1],i[p]=!0,o++)}for(n=new Float32Array(6*o),t=0,u=o;t<u;t++)for(l=0;2>l;l++)i=s[c[2*t+l]],o=6*t+3*l,n[o+0]=i.x,n[o+1]=i.y,n[o+2]=i.z;this.addAttribute("position",new ht(n,3))}else if(t&&t.isBufferGeometry){if(null!==t.index){for(u=t.index.array,s=t.attributes.position,r=t.groups,o=0,0===r.length&&t.addGroup(0,u.length),c=new Uint32Array(2*u.length),a=0,h=r.length;a<h;++a){t=r[a],l=t.start,p=t.count,t=l;for(var f=l+p;t<f;t+=3)for(l=0;3>l;l++)n[0]=u[t+l],n[1]=u[t+(l+1)%3],n.sort(e),p=n.toString(),void 0===i[p]&&(c[2*o]=n[0],c[2*o+1]=n[1],i[p]=!0,o++)}for(n=new Float32Array(6*o),t=0,u=o;t<u;t++)for(l=0;2>l;l++)o=6*t+3*l,i=c[2*t+l],n[o+0]=s.getX(i),n[o+1]=s.getY(i),n[o+2]=s.getZ(i)}else for(s=t.attributes.position.array,o=s.length/3,c=o/3,n=new Float32Array(6*o),t=0,u=c;t<u;t++)for(l=0;3>l;l++)o=18*t+6*l,c=9*t+3*l,n[o+0]=s[c],n[o+1]=s[c+1],n[o+2]=s[c+2],i=9*t+(l+1)%3*3,n[o+3]=s[i],n[o+4]=s[i+1],n[o+5]=s[i+2];this.addAttribute("position",new ht(n,3))}}function we(t,e,n){wt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,s,a,o,c=[],u=[],h=e+1;for(i=0;i<=n;i++)for(o=i/n,r=0;r<=e;r++)a=r/e,s=t(a,o),c.push(s.x,s.y,s.z),u.push(a,o);t=[];var l;for(i=0;i<n;i++)for(r=0;r<e;r++)s=i*h+r,a=i*h+r+1,o=(i+1)*h+r+1,l=(i+1)*h+r,t.push(s,a,l),t.push(a,o,l);this.setIndex(new(65535<t.length?vt:gt)(t,1)),this.addAttribute("position",new yt(c,3)),this.addAttribute("uv",new yt(u,2)),this.computeVertexNormals()}function Ee(t,e,n){bt.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new we(t,e,n)),this.mergeVertices()}function Se(t,e,i,r){function s(t){u.push(t.x,t.y,t.z)}function a(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function o(t,e,n,i){0>i&&1===t.x&&(h[e]=t.x-1),0===n.x&&0===n.z&&(h[e]=i/2/Math.PI+.5)}wt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1;var u=[],h=[];!function(t){for(var n=new c,i=new c,r=new c,o=0;o<e.length;o+=3){a(e[o+0],n),a(e[o+1],i),a(e[o+2],r);var u,h,l=n,p=i,f=r,d=Math.pow(2,t),g=[];for(u=0;u<=d;u++){g[u]=[];var m=l.clone().lerp(f,u/d),v=p.clone().lerp(f,u/d),y=d-u;for(h=0;h<=y;h++)g[u][h]=0===h&&u===d?m:m.clone().lerp(v,h/y)}for(u=0;u<d;u++)for(h=0;h<2*(d-u)-1;h++)l=Math.floor(h/2),0==h%2?(s(g[u][l+1]),s(g[u+1][l]),s(g[u][l])):(s(g[u][l+1]),s(g[u+1][l+1]),s(g[u+1][l]))}}(r||0),function(t){for(var e=new c,n=0;n<u.length;n+=3)e.x=u[n+0],e.y=u[n+1],e.z=u[n+2],e.normalize().multiplyScalar(t),u[n+0]=e.x,u[n+1]=e.y,u[n+2]=e.z}(i),function(){for(var t=new c,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],h.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));for(var t=new c,e=new c,i=new c,r=new c,s=new n,a=new n,l=new n,p=0,f=0;p<u.length;p+=9,f+=6){t.set(u[p+0],u[p+1],u[p+2]),e.set(u[p+3],u[p+4],u[p+5]),i.set(u[p+6],u[p+7],u[p+8]),s.set(h[f+0],h[f+1]),a.set(h[f+2],h[f+3]),l.set(h[f+4],h[f+5]),r.copy(t).add(e).add(i).divideScalar(3);var d=Math.atan2(r.z,-r.x);o(s,f+0,t,d),o(a,f+2,e,d),o(l,f+4,i,d)}for(t=0;t<h.length;t+=6)e=h[t+0],i=h[t+2],r=h[t+4],s=Math.min(e,i,r),.9<Math.max(e,i,r)&&.1>s&&(.2>e&&(h[t+0]+=1),.2>i&&(h[t+2]+=1),.2>r&&(h[t+4]+=1))}(),this.addAttribute("position",new yt(u,3)),this.addAttribute("normal",new yt(u.slice(),3)),this.addAttribute("uv",new yt(h,2)),this.normalizeNormals(),this.boundingSphere=new J(new c,i)}function Te(t,e){Se.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Me(t,e){bt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Te(t,e)),this.mergeVertices()}function Ae(t,e){Se.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ce(t,e){bt.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ae(t,e)),this.mergeVertices()}function Le(t,e){var n=(1+Math.sqrt(5))/2;Se.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Pe(t,e){bt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Le(t,e)),this.mergeVertices()}function Re(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;Se.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ie(t,e){bt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Re(t,e)),this.mergeVertices()}function ke(t,e,n,i){bt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Se(t,e,n,i)),this.mergeVertices()}function Oe(t,e,i,r,s){function a(n){var s=t.getPointAt(n/e),a=o.normals[n];for(n=o.binormals[n],h=0;h<=r;h++){var c=h/r*Math.PI*2,u=Math.sin(c),c=-Math.cos(c);p.x=c*a.x+u*n.x,p.y=c*a.y+u*n.y,p.z=c*a.z+u*n.z,p.normalize(),g.push(p.x,p.y,p.z),l.x=s.x+i*p.x,l.y=s.y+i*p.y,l.z=s.z+i*p.z,d.push(l.x,l.y,l.z)}}wt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:s},e=e||64,i=i||1,r=r||8,s=s||!1;var o=t.computeFrenetFrames(e,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var u,h,l=new c,p=new c,f=new n,d=[],g=[],m=[],v=[];for(u=0;u<e;u++)a(u);for(a(!1===s?e:0),u=0;u<=e;u++)for(h=0;h<=r;h++)f.x=u/e,f.y=h/r,m.push(f.x,f.y);!function(){for(h=1;h<=e;h++)for(u=1;u<=r;u++){var t=(r+1)*h+(u-1),n=(r+1)*h+u,i=(r+1)*(h-1)+u;v.push((r+1)*(h-1)+(u-1),t,i),v.push(t,n,i)}}(),this.setIndex(new(65535<v.length?vt:gt)(v,1)),this.addAttribute("position",new yt(d,3)),this.addAttribute("normal",new yt(g,3)),this.addAttribute("uv",new yt(m,2))}function Ne(t,e,n,i,r,s){bt.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new Oe(t,e,n,i,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function De(t,e,i,r,s,a){function o(t,e,n,i,r){var s=Math.sin(t);e=n/e*t,n=Math.cos(e),r.x=i*(2+n)*.5*Math.cos(t),r.y=i*(2+n)*s*.5,r.z=i*Math.sin(e)*.5}wt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:s,q:a},t=t||100,e=e||40,i=Math.floor(i)||64,r=Math.floor(r)||8,s=s||2,a=a||3;var u,h,l=(r+1)*(i+1),p=r*i*6,p=new ht(new(65535<p?Uint32Array:Uint16Array)(p),1),f=new ht(new Float32Array(3*l),3),d=new ht(new Float32Array(3*l),3),l=new ht(new Float32Array(2*l),2),g=0,m=0,v=new c,y=new c,_=new n,x=new c,b=new c,w=new c,E=new c,S=new c;for(u=0;u<=i;++u)for(h=u/i*s*Math.PI*2,o(h,s,a,t,x),o(h+.01,s,a,t,b),E.subVectors(b,x),S.addVectors(b,x),w.crossVectors(E,S),S.crossVectors(w,E),w.normalize(),S.normalize(),h=0;h<=r;++h){var T=h/r*Math.PI*2,M=-e*Math.cos(T),T=e*Math.sin(T);v.x=x.x+(M*S.x+T*w.x),v.y=x.y+(M*S.y+T*w.y),v.z=x.z+(M*S.z+T*w.z),f.setXYZ(g,v.x,v.y,v.z),y.subVectors(v,x).normalize(),d.setXYZ(g,y.x,y.y,y.z),_.x=u/i,_.y=h/r,l.setXY(g,_.x,_.y),g++}for(h=1;h<=i;h++)for(u=1;u<=r;u++)t=(r+1)*h+(u-1),e=(r+1)*h+u,s=(r+1)*(h-1)+u,p.setX(m,(r+1)*(h-1)+(u-1)),m++,p.setX(m,t),m++,p.setX(m,s),m++,p.setX(m,t),m++,p.setX(m,e),m++,p.setX(m,s),m++;this.setIndex(p),this.addAttribute("position",f),this.addAttribute("normal",d),this.addAttribute("uv",l)}function Fe(t,e,n,i,r,s,a){bt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new De(t,e,n,i,r,s)),this.mergeVertices()}function Ue(t,e,n,i,r){wt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||100,e=e||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var s,a,o=(n+1)*(i+1),u=n*i*6,u=new(65535<u?Uint32Array:Uint16Array)(u),h=new Float32Array(3*o),l=new Float32Array(3*o),o=new Float32Array(2*o),p=0,f=0,d=0,g=new c,m=new c,v=new c;for(s=0;s<=n;s++)for(a=0;a<=i;a++){var y=a/i*r,_=s/n*Math.PI*2;m.x=(t+e*Math.cos(_))*Math.cos(y),m.y=(t+e*Math.cos(_))*Math.sin(y),m.z=e*Math.sin(_),h[p]=m.x,h[p+1]=m.y,h[p+2]=m.z,g.x=t*Math.cos(y),g.y=t*Math.sin(y),v.subVectors(m,g).normalize(),l[p]=v.x,l[p+1]=v.y,l[p+2]=v.z,o[f]=a/i,o[f+1]=s/n,p+=3,f+=2}for(s=1;s<=n;s++)for(a=1;a<=i;a++)t=(i+1)*(s-1)+a-1,e=(i+1)*(s-1)+a,r=(i+1)*s+a,u[d]=(i+1)*s+a-1,u[d+1]=t,u[d+2]=r,u[d+3]=t,u[d+4]=e,u[d+5]=r,d+=6;this.setIndex(new ht(u,1)),this.addAttribute("position",new ht(h,3)),this.addAttribute("normal",new ht(l,3)),this.addAttribute("uv",new ht(o,2))}function Be(t,e,n,i,r){bt.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Ue(t,e,n,i,r))}function ze(t,e){void 0!==t&&(bt.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals())}function je(t,e){e=e||{};var n=e.font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new bt;n=n.generateShapes(t,e.size,e.curveSegments),e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),ze.call(this,n,e),this.type="TextGeometry"}function He(t,e,n,i,r,s,a){wt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,a=void 0!==a?a:Math.PI;for(var o=s+a,u=(e+1)*(n+1),h=new ht(new Float32Array(3*u),3),l=new ht(new Float32Array(3*u),3),u=new ht(new Float32Array(2*u),2),p=0,f=[],d=new c,g=0;g<=n;g++){for(var m=[],v=g/n,y=0;y<=e;y++){var _=y/e,x=-t*Math.cos(i+_*r)*Math.sin(s+v*a),b=t*Math.cos(s+v*a),w=t*Math.sin(i+_*r)*Math.sin(s+v*a);d.set(x,b,w).normalize(),h.setXYZ(p,x,b,w),l.setXYZ(p,d.x,d.y,d.z),u.setXY(p,_,1-v),m.push(p),p++}f.push(m)}for(i=[],g=0;g<n;g++)for(y=0;y<e;y++)r=f[g][y+1],a=f[g][y],p=f[g+1][y],d=f[g+1][y+1],(0!==g||0<s)&&i.push(r,a,d),(g!==n-1||o<Math.PI)&&i.push(a,p,d);this.setIndex(new(65535<h.count?vt:gt)(i,1)),this.addAttribute("position",h),this.addAttribute("normal",l),this.addAttribute("uv",u),this.boundingSphere=new J(new c,t)}function Ve(t,e,n,i,r,s,a){bt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new He(t,e,n,i,r,s,a))}function Ge(t,e,i,r,s,a){wt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},t=t||20,e=e||50,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):1;var o,u,h=(i+1)*(r+1),l=i*r*6,l=new ht(new(65535<l?Uint32Array:Uint16Array)(l),1),p=new ht(new Float32Array(3*h),3),f=new ht(new Float32Array(3*h),3),h=new ht(new Float32Array(2*h),2),d=0,g=0,m=t,v=(e-t)/r,y=new c,_=new n;for(t=0;t<=r;t++){for(u=0;u<=i;u++)o=s+u/i*a,y.x=m*Math.cos(o),y.y=m*Math.sin(o),p.setXYZ(d,y.x,y.y,y.z),f.setXYZ(d,0,0,1),_.x=(y.x/e+1)/2,_.y=(y.y/e+1)/2,h.setXY(d,_.x,_.y),d++;m+=v}for(t=0;t<r;t++)for(e=t*(i+1),u=0;u<i;u++)s=o=u+e,a=o+i+1,d=o+i+2,o+=1,l.setX(g,s),g++,l.setX(g,a),g++,l.setX(g,d),g++,l.setX(g,s),g++,l.setX(g,d),g++,l.setX(g,o),g++;this.setIndex(l),this.addAttribute("position",p),this.addAttribute("normal",f),this.addAttribute("uv",h)}function We(t,e,n,i,r,s){bt.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new Ge(t,e,n,i,r,s))}function qe(t,e,n,i){bt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Tt(t,e,n,i))}function Xe(t,e,i,r){wt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=nr.clamp(r,0,2*Math.PI);for(var s=(e+1)*t.length,a=e*t.length*6,o=new ht(new(65535<a?Uint32Array:Uint16Array)(a),1),u=new ht(new Float32Array(3*s),3),h=new ht(new Float32Array(2*s),2),l=0,p=0,f=1/e,d=new c,g=new n,s=0;s<=e;s++)for(var a=i+s*f*r,m=Math.sin(a),v=Math.cos(a),a=0;a<=t.length-1;a++)d.x=t[a].x*m,d.y=t[a].y,d.z=t[a].x*v,u.setXYZ(l,d.x,d.y,d.z),g.x=s/e,g.y=a/(t.length-1),h.setXY(l,g.x,g.y),l++;for(s=0;s<e;s++)for(a=0;a<t.length-1;a++)i=a+s*t.length,l=i+t.length,f=i+t.length+1,d=i+1,o.setX(p,i),p++,o.setX(p,l),p++,o.setX(p,d),p++,o.setX(p,l),p++,o.setX(p,f),p++,o.setX(p,d),p++;if(this.setIndex(o),this.addAttribute("position",u),this.addAttribute("uv",h),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,o=new c,u=new c,h=new c,i=e*t.length*3,a=s=0;s<t.length;s++,a+=3)o.x=r[a+0],o.y=r[a+1],o.z=r[a+2],u.x=r[i+a+0],u.y=r[i+a+1],u.z=r[i+a+2],h.addVectors(o,u).normalize(),r[a+0]=r[i+a+0]=h.x,r[a+1]=r[i+a+1]=h.y,r[a+2]=r[i+a+2]=h.z}function Ye(t,e,n,i){bt.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Xe(t,e,n,i)),this.mergeVertices()}function Ze(t,e){function n(t){var n,o,u=i.length/3;t=t.extractPoints(e);var h=t.shape,l=t.holes;if(!1===yr.isClockWise(h))for(h=h.reverse(),t=0,n=l.length;t<n;t++)o=l[t],!0===yr.isClockWise(o)&&(l[t]=o.reverse());var p=yr.triangulateShape(h,l);for(t=0,n=l.length;t<n;t++)o=l[t],h=h.concat(o);for(t=0,n=h.length;t<n;t++)o=h[t],i.push(o.x,o.y,0),r.push(0,0,1),s.push(o.x,o.y);for(t=0,n=p.length;t<n;t++)h=p[t],a.push(h[0]+u,h[1]+u,h[2]+u),c+=3}wt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],s=[],a=[],o=0,c=0;if(!1===Array.isArray(t))n(t);else for(var u=0;u<t.length;u++)n(t[u]),this.addGroup(o,c,u),o+=c,c=0;this.setIndex(new(65535<a.length?vt:gt)(a,1)),this.addAttribute("position",new yt(i,3)),this.addAttribute("normal",new yt(r,3)),this.addAttribute("uv",new yt(s,2))}function $e(t,e){bt.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Ze(t,e)),this.mergeVertices()}function Je(t,e){function n(t,e){return t-e}wt.call(this);var i,r=Math.cos(nr.DEG2RAD*(void 0!==e?e:1)),s=[0,0],a={},o=["a","b","c"];t.isBufferGeometry?(i=new bt,i.fromBufferGeometry(t)):i=t.clone(),i.mergeVertices(),i.computeFaceNormals();var c=i.vertices;i=i.faces;for(var u=0,h=i.length;u<h;u++)for(var l=i[u],p=0;3>p;p++){s[0]=l[o[p]],s[1]=l[o[(p+1)%3]],s.sort(n);var f=s.toString();void 0===a[f]?a[f]={vert1:s[0],vert2:s[1],face1:u,face2:void 0}:a[f].face2=u}s=[];for(f in a)o=a[f],(void 0===o.face2||i[o.face1].normal.dot(i[o.face2].normal)<=r)&&(u=c[o.vert1],s.push(u.x),s.push(u.y),s.push(u.z),u=c[o.vert2],s.push(u.x),s.push(u.y),s.push(u.z));this.addAttribute("position",new yt(s,3))}function Ke(t,e,i,r,s,a,o,u){function h(i){var s,a,h,p=new n,f=new c,d=0,b=!0===i?t:e,S=!0===i?1:-1;for(a=_,s=1;s<=r;s++)m.setXYZ(_,0,w*S,0),v.setXYZ(_,0,S,0),p.x=.5,p.y=.5,y.setXY(_,p.x,p.y),_++;for(h=_,s=0;s<=r;s++){var T=s/r*u+o,M=Math.cos(T),T=Math.sin(T);f.x=b*T,f.y=w*S,f.z=b*M,m.setXYZ(_,f.x,f.y,f.z),v.setXYZ(_,0,S,0),p.x=.5*M+.5,p.y=.5*T*S+.5,y.setXY(_,p.x,p.y),_++}for(s=0;s<r;s++)p=a+s,f=h+s,!0===i?(g.setX(x,f),x++,g.setX(x,f+1)):(g.setX(x,f+1),x++,g.setX(x,f)),x++,g.setX(x,p),x++,d+=3;l.addGroup(E,d,!0===i?1:2),E+=d}wt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:u};var l=this;t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,r=Math.floor(r)||8,s=Math.floor(s)||1,a=void 0!==a&&a,o=void 0!==o?o:0,u=void 0!==u?u:2*Math.PI;var p=0;!1===a&&(0<t&&p++,0<e&&p++);var f=function(){var t=(r+1)*(s+1);return!1===a&&(t+=(r+1)*p+r*p),t}(),d=function(){var t=r*s*6;return!1===a&&(t+=r*p*3),t}(),g=new ht(new(65535<d?Uint32Array:Uint16Array)(d),1),m=new ht(new Float32Array(3*f),3),v=new ht(new Float32Array(3*f),3),y=new ht(new Float32Array(2*f),2),_=0,x=0,b=[],w=i/2,E=0;!function(){var n,a,h=new c,p=new c,f=0,d=(e-t)/i;for(a=0;a<=s;a++){var S=[],T=a/s,M=T*(e-t)+t;for(n=0;n<=r;n++){var A=n/r,C=A*u+o,L=Math.sin(C),C=Math.cos(C);p.x=M*L,p.y=-T*i+w,p.z=M*C,m.setXYZ(_,p.x,p.y,p.z),h.set(L,d,C).normalize(),v.setXYZ(_,h.x,h.y,h.z),y.setXY(_,A,1-T),S.push(_),_++}b.push(S)}for(n=0;n<r;n++)for(a=0;a<s;a++)h=b[a+1][n],p=b[a+1][n+1],d=b[a][n+1],g.setX(x,b[a][n]),x++,g.setX(x,h),x++,g.setX(x,d),x++,g.setX(x,h),x++,g.setX(x,p),x++,g.setX(x,d),x++,f+=6;l.addGroup(E,f,0),E+=f}(),!1===a&&(0<t&&h(!0),0<e&&h(!1)),this.setIndex(g),this.addAttribute("position",m),this.addAttribute("normal",v),this.addAttribute("uv",y)}function Qe(t,e,n,i,r,s,a,o){bt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ke(t,e,n,i,r,s,a,o)),this.mergeVertices()}function tn(t,e,n,i,r,s,a){Qe.call(this,0,t,e,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}function en(t,e,n,i,r,s,a){Ke.call(this,0,t,e,n,i,r,s,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}function nn(t,e,n,i){wt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r=e+2,s=new Float32Array(3*r),a=new Float32Array(3*r),r=new Float32Array(2*r);a[2]=1,r[0]=.5,r[1]=.5;for(var o=0,u=3,h=2;o<=e;o++,u+=3,h+=2){var l=n+o/e*i;s[u]=t*Math.cos(l),s[u+1]=t*Math.sin(l),a[u+2]=1,r[h]=(s[u]/t+1)/2,r[h+1]=(s[u+1]/t+1)/2}for(n=[],u=1;u<=e;u++)n.push(u,u+1,0);this.setIndex(new ht(new Uint16Array(n),1)),this.addAttribute("position",new ht(s,3)),this.addAttribute("normal",new ht(a,3)),this.addAttribute("uv",new ht(r,2)),this.boundingSphere=new J(new c,t)}function rn(t,e,n,i){bt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new nn(t,e,n,i))}function sn(t,e,n,i,r,s){bt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new St(t,e,n,i,r,s)),this.mergeVertices()}function an(){Y.call(this,{uniforms:ur.merge([pr.lights,{opacity:{value:1}}]),vertexShader:hr.shadow_vert,fragmentShader:hr.shadow_frag}),this.transparent=this.lights=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function on(t){Y.call(this,t),this.type="RawShaderMaterial"}function cn(t){this.uuid=nr.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function un(t){X.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new H(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function hn(t){un.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function ln(t){X.call(this),this.type="MeshPhongMaterial",this.color=new H(16777215),this.specular=new H(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function pn(t){ln.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function fn(t){X.call(this,t),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function dn(t){X.call(this),this.type="MeshLambertMaterial",this.color=new H(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new H(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function gn(t){X.call(this),this.type="LineDashedMaterial",this.color=new H(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function mn(t,e,n){var i=this,r=!1,s=0,a=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,s,a),r=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,a),s===a&&(r=!1,void 0!==i.onLoad)&&i.onLoad()},this.itemError=function(t){void 0!==i.onError&&i.onError(t)}}function vn(t){this.manager=void 0!==t?t:wr}function yn(t){this.manager=void 0!==t?t:wr,this._parser=null}function _n(t){this.manager=void 0!==t?t:wr,this._parser=null}function xn(t){this.manager=void 0!==t?t:wr}function bn(t){this.manager=void 0!==t?t:wr}function wn(t){this.manager=void 0!==t?t:wr}function En(t,e){st.call(this),this.type="Light",this.color=new H(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Sn(t,e,n){En.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(st.DefaultUp),this.updateMatrix(),this.groundColor=new H(e)}function Tn(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new u}function Mn(){Tn.call(this,new At(50,1,.5,500))}function An(t,e,n,i,r,s){En.call(this,t,e),this.type="SpotLight",this.position.copy(st.DefaultUp),this.updateMatrix(),this.target=new st,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new Mn}function Cn(t,e,n,i){En.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Tn(new At(90,1,.5,500))}function Ln(t){Tn.call(this,new Ct(-5,5,5,-5,.5,500))}function Pn(t,e){En.call(this,t,e),this.type="DirectionalLight",this.position.copy(st.DefaultUp),this.updateMatrix(),this.target=new st,this.shadow=new Ln}function Rn(t,e){En.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function In(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function kn(t,e,n,i){In.call(this,t,e,n,i),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function On(t,e,n,i){In.call(this,t,e,n,i)}function Nn(t,e,n,i){In.call(this,t,e,n,i)}function Dn(t,e,n,i){if(void 0===t)throw Error("track name is undefined");if(void 0===e||0===e.length)throw Error("no keyframes in track named "+t);this.name=t,this.times=Er.convertArray(e,this.TimeBufferType),this.values=Er.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function Fn(t,e,n,i){Dn.call(this,t,e,n,i)}function Un(t,e,n,i){In.call(this,t,e,n,i)}function Bn(t,e,n,i){Dn.call(this,t,e,n,i)}function zn(t,e,n,i){Dn.call(this,t,e,n,i)}function jn(t,e,n,i){Dn.call(this,t,e,n,i)}function Hn(t,e,n){Dn.call(this,t,e,n)}function Vn(t,e,n,i){Dn.call(this,t,e,n,i)}function Gn(t,e,n,i){Dn.apply(this,arguments)}function Wn(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=nr.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function qn(t){this.manager=void 0!==t?t:wr,this.textures={}}function Xn(t){this.manager=void 0!==t?t:wr}function Yn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Zn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:wr,this.withCredentials=!1}function $n(t){this.manager=void 0!==t?t:wr,this.texturePath=""}function Jn(){}function Kn(t,e){this.v1=t,this.v2=e}function Qn(){this.curves=[],this.autoClose=!1}function ti(t,e,n,i,r,s,a,o){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o||0}function ei(t){this.points=void 0===t?[]:t}function ni(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i}function ii(t,e,n){this.v0=t,this.v1=e,this.v2=n}function ri(){si.apply(this,arguments),this.holes=[]}function si(t){Qn.call(this),this.currentPoint=new n,t&&this.fromPoints(t)}function ai(){this.subPaths=[],this.currentPath=null}function oi(t){this.data=t}function ci(t){this.manager=void 0!==t?t:wr}function ui(t){this.manager=void 0!==t?t:wr}function hi(t,e,n,i){En.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function li(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new At,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new At,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function pi(t,e,n){st.call(this),this.type="CubeCamera";var i=new At(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new c(1,0,0)),this.add(i);var r=new At(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new c(-1,0,0)),this.add(r);var s=new At(90,1,t,e);s.up.set(0,0,1),s.lookAt(new c(0,1,0)),this.add(s);var o=new At(90,1,t,e);o.up.set(0,0,-1),o.lookAt(new c(0,-1,0)),this.add(o);var u=new At(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new c(0,0,1)),this.add(u);var h=new At(90,1,t,e);h.up.set(0,-1,0),h.lookAt(new c(0,0,-1)),this.add(h),this.renderTarget=new a(n,n,{format:1022,magFilter:1006,minFilter:1006}),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,r,n),n.activeCubeFace=2,t.render(e,s,n),n.activeCubeFace=3,t.render(e,o,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(null)}}function fi(){st.call(this),this.type="AudioListener",this.context=Cr.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function di(t){st.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function gi(t){di.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function mi(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function vi(t,e,n){switch(this.binding=t,this.valueSize=n,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*n),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function yi(t,e,n){this.path=e,this.parsedPath=n||yi.parseTrackName(e),this.node=yi.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function _i(t){this.uuid=nr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function xi(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null,t=e.tracks,e=t.length,n=Array(e);for(var i={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var s=t[r].createInterpolant(null);n[r]=s,s.settings=i}this._interpolantSettings=i,this._interpolants=n,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function bi(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function wi(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Ei(){wt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Si(t,e,n,i){this.uuid=nr.generateUUID(),this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Ti(t,e){this.uuid=nr.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Mi(t,e,n){Ti.call(this,t,e),this.meshPerAttribute=n||1}function Ai(t,e,n){ht.call(this,t,e),this.meshPerAttribute=n||1}function Ci(t,e,n,i){this.ray=new nt(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Li(t,e){return t.distance-e.distance}function Pi(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i)){t=t.children,i=0;for(var r=t.length;i<r;i++)Pi(t[i],e,n,!0)}}function Ri(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Ii(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function ki(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Oi(t,e){Et.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)}function Ni(t){st.call(this),this.material=t,this.render=function(t){}}function Di(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16711680,i=void 0!==i?i:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=3*n.faces.length:n&&n.isBufferGeometry&&(e=n.attributes.normal.count),n=new wt,e=new yt(6*e,3),n.addAttribute("position",e),fe.call(this,n,new le({color:t,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function Fi(t){st.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,t=new wt;for(var e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1;32>n;n++,i++){var r=n/32*Math.PI*2,s=i/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new yt(e,3)),e=new le({fog:!1}),this.cone=new fe(t,e),this.add(this.cone),this.update()}function Ui(t){this.bones=this.getBoneList(t);for(var e=new wt,n=[],i=[],r=new H(0,0,1),s=new H(0,1,0),a=0;a<this.bones.length;a++){var o=this.bones[a];o.parent&&o.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(r.r,r.g,r.b),i.push(s.r,s.g,s.b))}e.addAttribute("position",new yt(n,3)),e.addAttribute("color",new yt(i,3)),n=new le({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),fe.call(this,e,n),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Bi(t,e){this.light=t,this.light.updateMatrixWorld();var n=new He(e,4,2),i=new ut({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),Et.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function zi(t){st.call(this),this.light=t,this.light.updateMatrixWorld();var e=new ut({color:t.color,fog:!1});t=new ut({color:t.color,fog:!1,wireframe:!0});var n=new wt;n.addAttribute("position",new ht(new Float32Array(18),3)),this.add(new Et(n,e)),this.add(new Et(n,t)),this.update()}function ji(t,e){st.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var n=new Ae(e);n.rotateY(.5*Math.PI);var i=new ut({vertexColors:2,wireframe:!0}),r=n.getAttribute("position"),r=new Float32Array(3*r.count);n.addAttribute("color",new ht(r,3)),this.add(new Et(n,i)),this.update()}function Hi(t,e,n,i){t=t||10,e=e||10,n=new H(void 0!==n?n:4473924),i=new H(void 0!==i?i:8947848);for(var r=e/2,s=2*t/e,a=[],o=[],c=0,u=0,h=-t;c<=e;c++,h+=s){a.push(-t,0,h,t,0,h),a.push(h,0,-t,h,0,t);var l=c===r?n:i;l.toArray(o,u),u+=3,l.toArray(o,u),u+=3,l.toArray(o,u),u+=3,l.toArray(o,u),u+=3}t=new wt,t.addAttribute("position",new yt(a,3)),t.addAttribute("color",new yt(o,3)),a=new le({vertexColors:2}),fe.call(this,t,a)}function Vi(t,e,n,i,r,s){t=t||10,e=e||16,n=n||8,i=i||64,r=new H(void 0!==r?r:4473924),s=new H(void 0!==s?s:8947848);var a,o,c,u,h,l=[],p=[];for(c=0;c<=e;c++)o=c/e*2*Math.PI,a=Math.sin(o)*t,o=Math.cos(o)*t,l.push(0,0,0),l.push(a,0,o),h=1&c?r:s,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(c=0;c<=n;c++)for(h=1&c?r:s,u=t-t/n*c,e=0;e<i;e++)o=e/i*2*Math.PI,a=Math.sin(o)*u,o=Math.cos(o)*u,l.push(a,0,o),p.push(h.r,h.g,h.b),o=(e+1)/i*2*Math.PI,a=Math.sin(o)*u,o=Math.cos(o)*u,l.push(a,0,o),p.push(h.r,h.g,h.b);t=new wt,t.addAttribute("position",new yt(l,3)),t.addAttribute("color",new yt(p,3)),l=new le({vertexColors:2}),fe.call(this,t,l)}function Gi(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16776960,i=void 0!==i?i:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new wt,e=new yt(6*e,3),n.addAttribute("position",e),fe.call(this,n,new le({color:t,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function Wi(t,e){st.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new wt;n.addAttribute("position",new yt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new le({fog:!1});this.add(new pe(n,i)),n=new wt,n.addAttribute("position",new yt([0,0,0,0,0,1],3)),this.add(new pe(n,i)),this.update()}function qi(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){s.push(0,0,0),a.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(s.length/3-1)}var i=new wt,r=new le({color:16777215,vertexColors:1}),s=[],a=[],o={},c=new H(16755200),u=new H(16711680),h=new H(43775),l=new H(16777215),p=new H(3355443);e("n1","n2",c),e("n2","n4",c),e("n4","n3",c),e("n3","n1",c),e("f1","f2",c),e("f2","f4",c),e("f4","f3",c),e("f3","f1",c),e("n1","f1",c),e("n2","f2",c),e("n3","f3",c),e("n4","f4",c),e("p","n1",u),e("p","n2",u),e("p","n3",u),e("p","n4",u),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",l),e("p","c",p),e("cn1","cn2",p),e("cn3","cn4",p),e("cf1","cf2",p),e("cf3","cf4",p),i.addAttribute("position",new yt(s,3)),i.addAttribute("color",new yt(a,3)),fe.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Xi(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new wt;r.setIndex(new ht(n,1)),r.addAttribute("position",new ht(i,3)),fe.call(this,r,new le({color:e})),void 0!==t&&this.update(t)}function Yi(t,e,n,i,r,s){st.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===s&&(s=.2*r),this.position.copy(e),this.line=new pe(Lr,new le({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Et(Pr,new ut({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,s)}function Zi(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new wt,t.addAttribute("position",new yt(e,3)),t.addAttribute("color",new yt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new le({vertexColors:2}),fe.call(this,t,e)}function $i(t,e,n,i,r,s){ti.call(this,t,e,n,n,i,r,s)}function Ji(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rr.call(this,t),this.type="catmullrom",this.closed=!0}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;var n,i=[],r=e.length;for(n=0;n<r;n++)i[n]=e[n];for(n=0;n<r;n++)i[n].call(this,t)}}}});var Ki={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Qi={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},tr={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},er={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},nr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=Array(36),i=0;return function(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19===r?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*nr.DEG2RAD},radToDeg:function(t){return t*nr.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):this.y=this.x=0,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new n,e=new n),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return t=this.y-t.y,e*e+t*t},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}};var ir=0;i.DEFAULT_IMAGE=void 0,i.DEFAULT_MAPPING=300,i.prototype={constructor:i,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=nr.generateUUID()),void 0===t.images[n.uuid]){var i,r=t.images,s=n.uuid,a=n.uuid;void 0!==n.toDataURL?i=n:(i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0,n.width,n.height)),i=2048<i.width||2048<i.height?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png"),r[s]={uuid:a,url:i}}e.image=n.uuid}return t.textures[this.uuid]=e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(i.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):this.w=this.z=this.y=this.x=0,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i;t=t.elements;var r=t[0];i=t[4];var s=t[8],a=t[1],o=t[5],c=t[9];n=t[2],e=t[6];var u=t[10];return.01>Math.abs(i-a)&&.01>Math.abs(s-n)&&.01>Math.abs(c-e)?.1>Math.abs(i+a)&&.1>Math.abs(s+n)&&.1>Math.abs(c+e)&&.1>Math.abs(r+o+u-3)?(this.set(1,0,0,0),this):(t=Math.PI,r=(r+1)/2,o=(o+1)/2,u=(u+1)/2,i=(i+a)/4,s=(s+n)/4,c=(c+e)/4,r>o&&r>u?.01>r?(e=0,i=n=.707106781):(e=Math.sqrt(r),n=i/e,i=s/e):o>u?.01>o?(e=.707106781,n=0,i=.707106781):(n=Math.sqrt(o),e=i/n,i=c/n):.01>u?(n=e=.707106781,i=0):(i=Math.sqrt(u),e=s/i,n=c/i),this.set(e,n,i,t),this):(t=Math.sqrt((e-c)*(e-c)+(s-n)*(s-n)+(a-i)*(a-i)),.001>Math.abs(t)&&(t=1),this.x=(e-c)/t,this.y=(s-n)/t,this.z=(a-i)/t,this.w=Math.acos((r+o+u-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r,e=new r),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},Object.assign(s.prototype,e.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.isWebGLRenderTargetCube=!0,o.prototype={constructor:o,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),i=Math.cos(t._y/2),r=Math.cos(t._z/2),s=Math.sin(t._x/2),a=Math.sin(t._y/2),o=Math.sin(t._z/2),c=t.order;return"XYZ"===c?(this._x=s*i*r+n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r-s*a*o):"YXZ"===c?(this._x=s*i*r+n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r+s*a*o):"ZXY"===c?(this._x=s*i*r-n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r-s*a*o):"ZYX"===c?(this._x=s*i*r-n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r+s*a*o):"YZX"===c?(this._x=s*i*r+n*a*o,this._y=n*a*r+s*i*o,this._z=n*i*o-s*a*r,this._w=n*i*r-s*a*o):"XZY"===c&&(this._x=s*i*r-n*a*o,this._y=n*a*r-s*i*o,this._z=n*i*o+s*a*r,this._w=n*i*r+s*a*o),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0];t=e[4];var i=e[8],r=e[1],s=e[5],a=e[9],o=e[2],c=e[6],e=e[10],u=n+s+e;return 0<u?(n=.5/Math.sqrt(u+1),this._w=.25/n,this._x=(c-a)*n,this._y=(i-o)*n,this._z=(r-t)*n):n>s&&n>e?(n=2*Math.sqrt(1+n-s-e),this._w=(c-a)/n,this._x=.25*n,this._y=(t+r)/n,this._z=(i+o)/n):s>e?(n=2*Math.sqrt(1+s-n-e),this._w=(i-o)/n,this._x=(t+r)/n,this._y=.25*n,this._z=(a+c)/n):(n=2*Math.sqrt(1+e-n-s),this._w=(r-t)/n,this._x=(i+o)/n,this._y=(a+c)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(n,i){return void 0===t&&(t=new c),e=n.dot(i)+1,1e-6>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,s=t._w,a=e._x,o=e._y,c=e._z,u=e._w;return this._x=n*u+s*a+i*c-r*o,this._y=i*u+s*o+r*a-n*c,this._z=r*u+s*c+n*o-i*a,this._w=s*u-n*a-i*o-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,s=this._w,a=s*t._w+n*t._x+i*t._y+r*t._z;if(0>a?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),1<=a)return this._w=s,this._x=n,this._y=i,this._z=r,this;var o=Math.sqrt(1-a*a);if(.001>Math.abs(o))return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(o,a),a=Math.sin((1-e)*c)/o,o=Math.sin(e*c)/o;return this._w=s*a+this._w*o,this._x=n*a+this._x*o,this._y=i*a+this._y*o,this._z=r*a+this._z*o,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(o,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,s,a){var o=n[i+0],c=n[i+1],u=n[i+2];n=n[i+3],i=r[s+0];var h=r[s+1],l=r[s+2];if(r=r[s+3],n!==r||o!==i||c!==h||u!==l){s=1-a;var p=o*i+c*h+u*l+n*r,f=0<=p?1:-1,d=1-p*p;d>Number.EPSILON&&(d=Math.sqrt(d),p=Math.atan2(d,p*f),s=Math.sin(s*p)/d,a=Math.sin(a*p)/d),f*=a,o=o*s+i*f,c=c*s+h*f,u=u*s+l*f,n=n*s+r*f,s===1-a&&(a=1/Math.sqrt(o*o+c*c+u*u+n*n),o*=a,c*=a,u*=a,n*=a)}t[e]=o,t[e+1]=c,t[e+2]=u,t[e+3]=n}}),c.prototype={constructor:c,isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new o),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new o),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12],this.y=t[1]*e+t[5]*n+t[9]*i+t[13],this.z=t[2]*e+t[6]*n+t[10]*i+t[14],this},applyProjection:function(t){var e=this.x,n=this.y,i=this.z;t=t.elements;var r=1/(t[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,a=t.z;t=t.w;var o=t*e+s*i-a*n,c=t*n+a*e-r*i,u=t*i+r*n-s*e,e=-r*e-s*n-a*i;return this.x=o*t+e*-r+c*-a-u*-s,this.y=c*t+e*-s+u*-r-o*-a,this.z=u*t+e*-a+o*-s-c*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new c,e=new c),t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new c),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new c),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(nr.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return t=this.z-t.z,e*e+n*n+t*t},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},u.prototype={constructor:u,isMatrix4:!0,set:function(t,e,n,i,r,s,a,o,c,u,h,l,p,f,d,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=s,m[9]=a,m[13]=o,m[2]=c,m[6]=u,m[10]=h,m[14]=l,m[3]=p,m[7]=f,m[11]=d,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new c);var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),s=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[8]=i[8]*e,n[9]=i[9]*e,n[10]=i[10]*e,this}}(),makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),n=Math.sin(n),a=Math.cos(i),i=Math.sin(i),o=Math.cos(r),r=Math.sin(r);if("XYZ"===t.order){t=s*o;var c=s*r,u=n*o,h=n*r;e[0]=a*o,e[4]=-a*r,e[8]=i,e[1]=c+u*i,e[5]=t-h*i,e[9]=-n*a,e[2]=h-t*i,e[6]=u+c*i,e[10]=s*a}else"YXZ"===t.order?(t=a*o,c=a*r,u=i*o,h=i*r,e[0]=t+h*n,e[4]=u*n-c,e[8]=s*i,e[1]=s*r,e[5]=s*o,e[9]=-n,e[2]=c*n-u,e[6]=h+t*n,e[10]=s*a):"ZXY"===t.order?(t=a*o,c=a*r,u=i*o,h=i*r,e[0]=t-h*n,e[4]=-s*r,e[8]=u+c*n,e[1]=c+u*n,e[5]=s*o,e[9]=h-t*n,e[2]=-s*i,e[6]=n,e[10]=s*a):"ZYX"===t.order?(t=s*o,c=s*r,u=n*o,h=n*r,e[0]=a*o,e[4]=u*i-c,e[8]=t*i+h,e[1]=a*r,e[5]=h*i+t,e[9]=c*i-u,e[2]=-i,e[6]=n*a,e[10]=s*a):"YZX"===t.order?(t=s*a,c=s*i,u=n*a,h=n*i,e[0]=a*o,e[4]=h-t*r,e[8]=u*r+c,e[1]=r,e[5]=s*o,e[9]=-n*o,e[2]=-i*o,e[6]=c*r+u,e[10]=t-h*r):"XZY"===t.order&&(t=s*a,c=s*i,u=n*a,h=n*i,e[0]=a*o,e[4]=-r,e[8]=i*o,e[1]=t*r+h,e[5]=s*o,e[9]=c*r-u,e[2]=u*r-c,e[6]=n*o,e[10]=h*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z,s=t.w,a=n+n,o=i+i,c=r+r;t=n*a;var u=n*o,n=n*c,h=i*o,i=i*c,r=r*c,a=s*a,o=s*o,s=s*c;return e[0]=1-(h+r),e[4]=u-s,e[8]=n+o,e[1]=u+s,e[5]=1-(t+r),e[9]=i-a,e[2]=n-o,e[6]=i+a,e[10]=1-(t+h),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(i,r,s){void 0===t&&(t=new c,e=new c,n=new c);var a=this.elements;return n.subVectors(i,r).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(s,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(s,n).normalize()),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,s=n[0],a=n[4],o=n[8],c=n[12],u=n[1],h=n[5],l=n[9],p=n[13],f=n[2],d=n[6],g=n[10],m=n[14],v=n[3],y=n[7],_=n[11],n=n[15],x=i[0],b=i[4],w=i[8],E=i[12],S=i[1],T=i[5],M=i[9],A=i[13],C=i[2],L=i[6],P=i[10],R=i[14],I=i[3],k=i[7],O=i[11],i=i[15];return r[0]=s*x+a*S+o*C+c*I,r[4]=s*b+a*T+o*L+c*k,r[8]=s*w+a*M+o*P+c*O,r[12]=s*E+a*A+o*R+c*i,r[1]=u*x+h*S+l*C+p*I,r[5]=u*b+h*T+l*L+p*k,r[9]=u*w+h*M+l*P+p*O,r[13]=u*E+h*A+l*R+p*i,r[2]=f*x+d*S+g*C+m*I,r[6]=f*b+d*T+g*L+m*k,r[10]=f*w+d*M+g*P+m*O,r[14]=f*E+d*A+g*R+m*i,r[3]=v*x+y*S+_*C+n*I,r[7]=v*b+y*T+_*L+n*k,r[11]=v*w+y*M+_*P+n*O,r[15]=v*E+y*A+_*R+n*i,this},multiplyToArray:function(t,e,n){var i=this.elements;return this.multiplyMatrices(t,e),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,i){void 0===t&&(t=new c),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0;r<i;r+=3,n+=3)t.fromArray(e,n),t.applyMatrix4(this),t.toArray(e,n);return e}}(),applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new c);for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],a=t[5],o=t[9],c=t[13],u=t[2],h=t[6],l=t[10],p=t[14];return t[3]*(+r*o*h-i*c*h-r*a*l+n*c*l+i*a*p-n*o*p)+t[7]*(+e*o*p-e*c*l+r*s*l-i*s*p+i*c*u-r*o*u)+t[11]*(+e*c*h-e*a*p-r*s*h+n*s*p+r*a*u-n*c*u)+t[15]*(-i*a*u-e*o*h+e*a*l+i*s*h-n*s*l+n*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],s=i[1],a=i[2],o=i[3],c=i[4],u=i[5],h=i[6],l=i[7],p=i[8],f=i[9],d=i[10],g=i[11],m=i[12],v=i[13],y=i[14],i=i[15],_=f*y*l-v*d*l+v*h*g-u*y*g-f*h*i+u*d*i,x=m*d*l-p*y*l-m*h*g+c*y*g+p*h*i-c*d*i,b=p*v*l-m*f*l+m*u*g-c*v*g-p*u*i+c*f*i,w=m*f*h-p*v*h-m*u*d+c*v*d+p*u*y-c*f*y,E=r*_+s*x+a*b+o*w;if(0===E){if(!0===e)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return E=1/E,n[0]=_*E,n[1]=(v*d*o-f*y*o-v*a*g+s*y*g+f*a*i-s*d*i)*E,n[2]=(u*y*o-v*h*o+v*a*l-s*y*l-u*a*i+s*h*i)*E,n[3]=(f*h*o-u*d*o-f*a*l+s*d*l+u*a*g-s*h*g)*E,n[4]=x*E,n[5]=(p*y*o-m*d*o+m*a*g-r*y*g-p*a*i+r*d*i)*E,n[6]=(m*h*o-c*y*o-m*a*l+r*y*l+c*a*i-r*h*i)*E,n[7]=(c*d*o-p*h*o+p*a*l-r*d*l-c*a*g+r*h*g)*E,n[8]=b*E,n[9]=(m*f*o-p*v*o-m*s*g+r*v*g+p*s*i-r*f*i)*E,n[10]=(c*v*o-m*u*o+m*s*l-r*v*l-c*s*i+r*u*i)*E,n[11]=(p*u*o-c*f*o-p*s*l+r*f*l+c*s*g-r*u*g)*E,n[12]=w*E,n[13]=(p*v*a-m*f*a+m*s*d-r*v*d-p*s*y+r*f*y)*E,n[14]=(m*u*a-c*v*a-m*s*h+r*v*h+c*s*y-r*u*y)*E,n[15]=(c*f*a-p*u*a+p*s*h-r*f*h-c*s*d+r*u*d)*E,this},scale:function(t){var e=this.elements,n=t.x,i=t.y;return t=t.z,e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,a=t.y,o=t.z,c=r*s,u=r*a;return this.set(c*s+n,c*a-i*o,c*o+i*a,0,c*a+i*o,u*a+n,u*o-i*s,0,c*o-i*a,u*o+i*s,r*o*o+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,i,r){void 0===t&&(t=new c,e=new u);var s=this.elements,a=t.set(s[0],s[1],s[2]).length(),o=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length();0>this.determinant()&&(a=-a),n.x=s[12],n.y=s[13],n.z=s[14],e.elements.set(this.elements),n=1/a;var s=1/o,l=1/h;return e.elements[0]*=n,e.elements[1]*=n,e.elements[2]*=n,e.elements[4]*=s,e.elements[5]*=s,e.elements[6]*=s,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,i.setFromRotationMatrix(e),r.x=a,r.y=o,r.z=h,this}}(),makeFrustum:function(t,e,n,i,r,s){var a=this.elements;return a[0]=2*r/(e-t),a[4]=0,a[8]=(e+t)/(e-t),a[12]=0,a[1]=0,a[5]=2*r/(i-n),a[9]=(i+n)/(i-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(s+r)/(s-r),a[14]=-2*s*r/(s-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,i){t=n*Math.tan(nr.DEG2RAD*t*.5);var r=-t;return this.makeFrustum(r*e,t*e,r,t,n,i)},makeOrthographic:function(t,e,n,i,r,s){var a=this.elements,o=1/(e-t),c=1/(n-i),u=1/(s-r);return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-(e+t)*o,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-(n+i)*c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-(s+r)*u,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;16>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var rr=new i,sr=new h,ar=[],or=[];z.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var s=n[i];s.setValue(t,e[s.id])}};var cr=/([\w\d_]+)(\])?(\[|\.)?/g;j.prototype.setValue=function(t,e,n){void 0!==(e=this.map[e])&&e.setValue(t,n,this.renderer)},j.prototype.set=function(t,e,n){var i=this.map[n];void 0!==i&&i.setValue(t,e[n],this.renderer)},j.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},j.upload=function(t,e,n,i){for(var r=0,s=e.length;r!==s;++r){var a=e[r],o=n[a.id];!1!==o.needsUpdate&&a.setValue(t,o.value,i)}},j.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var s=t[i];s.id in e&&n.push(s)}return n};var ur={merge:function(t){for(var e={},n=0;n<t.length;n++){var i,r=this.clone(t[n]);for(i in r)e[i]=r[i]}return e},clone:function(t){var e,n={};for(e in t){n[e]={};for(var i in t[e]){var r=t[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?n[e][i]=r.clone():Array.isArray(r)?n[e][i]=r.slice():n[e][i]=r}}return n}},hr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};H.prototype={constructor:H,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){return e=nr.euclideanModulo(e,1),n=nr.clamp(n,0,1),i=nr.clamp(i,0,1),0===n?this.r=this.g=this.b=i:(n=.5>=i?i*(1+n):i+n-i*n,i=2*i-n,this.r=t(i,n,e+1/3),this.g=t(i,n,e),this.b=t(i,n,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var i=parseFloat(n[1])/360,r=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(i,r,s)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){if(n=n[1],3===(i=n.length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===i)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length&&(n=lr[t],void 0!==n?this.setHex(n):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=0<e?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var e,n=this.r,i=this.g,r=this.b,s=Math.max(n,i,r),a=Math.min(n,i,r),o=(a+s)/2;if(a===s)a=e=0;else{var c=s-a,a=.5>=o?c/(s+a):c/(2-s-a);switch(s){case n:e=(i-r)/c+(i<r?6:0);break;case i:e=(r-n)/c+2;break;case r:e=(n-i)/c+4}e/=6}return t.h=e,t.s=a,t.l=o,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var i=this.getHSL();return i.h+=t,i.s+=e,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V.prototype=Object.create(i.prototype),V.prototype.constructor=V,V.prototype.isDataTexture=!0;var pr={common:{diffuse:{value:new H(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new H(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new H(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},fr={basic:{uniforms:ur.merge([pr.common,pr.aomap,pr.lightmap,pr.fog]),vertexShader:hr.meshbasic_vert,fragmentShader:hr.meshbasic_frag},lambert:{uniforms:ur.merge([pr.common,pr.aomap,pr.lightmap,pr.emissivemap,pr.fog,pr.lights,{emissive:{value:new H(0)}}]),vertexShader:hr.meshlambert_vert,fragmentShader:hr.meshlambert_frag},phong:{uniforms:ur.merge([pr.common,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.gradientmap,pr.fog,pr.lights,{emissive:{value:new H(0)},specular:{value:new H(1118481)},shininess:{value:30}}]),vertexShader:hr.meshphong_vert,fragmentShader:hr.meshphong_frag},standard:{uniforms:ur.merge([pr.common,pr.aomap,pr.lightmap,pr.emissivemap,pr.bumpmap,pr.normalmap,pr.displacementmap,pr.roughnessmap,pr.metalnessmap,pr.fog,pr.lights,{emissive:{value:new H(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag},points:{uniforms:ur.merge([pr.points,pr.fog]),vertexShader:hr.points_vert,fragmentShader:hr.points_frag},dashed:{uniforms:ur.merge([pr.common,pr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hr.linedashed_vert,fragmentShader:hr.linedashed_frag},depth:{uniforms:ur.merge([pr.common,pr.displacementmap]),vertexShader:hr.depth_vert,fragmentShader:hr.depth_frag},normal:{uniforms:ur.merge([pr.common,pr.bumpmap,pr.normalmap,pr.displacementmap,{opacity:{value:1}}]),vertexShader:hr.normal_vert,fragmentShader:hr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hr.cube_vert,fragmentShader:hr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:hr.equirect_vert,fragmentShader:hr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new c}},vertexShader:hr.distanceRGBA_vert,fragmentShader:hr.distanceRGBA_frag}};fr.physical={uniforms:ur.merge([fr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag},G.prototype={constructor:G,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return t=t||new n,this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t=t||new n,this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new n).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new n).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var dr=0;X.prototype={constructor:X,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else{var i=this[e];void 0===i?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?Number(n):n}}},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n=void 0===t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),2!==this.shading&&(i.shading=this.shading),0!==this.side&&(i.side=this.side),0!==this.vertexColors&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),i.skinning=this.skinning,i.morphTargets=this.morphTargets,n&&(n=e(t.textures),t=e(t.images),0<n.length&&(i.textures=n),0<t.length&&(i.images=t)),i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection,t=t.clippingPlanes;var e=null;if(null!==t)for(var n=t.length,e=Array(n),i=0;i!==n;++i)e[i]=t[i].clone();return this.clippingPlanes=e,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(X.prototype,e.prototype),Y.prototype=Object.create(X.prototype),Y.prototype.constructor=Y,Y.prototype.isShaderMaterial=!0,Y.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ur.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Y.prototype.toJSON=function(t){return t=X.prototype.toJSON.call(this,t),t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Z.prototype=Object.create(X.prototype),Z.prototype.constructor=Z,Z.prototype.isMeshDepthMaterial=!0,Z.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},$.prototype={constructor:$,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,c=t.length;o<c;o+=3){var u=t[o],h=t[o+1],l=t[o+2];u<e&&(e=u),h<n&&(n=h),l<i&&(i=l),u>r&&(r=u),h>s&&(s=h),l>a&&(a=l)}this.min.set(e,n,i),this.max.set(r,s,a)},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,c=t.count;o<c;o++){var u=t.getX(o),h=t.getY(o),l=t.getZ(o);u<e&&(e=u),h<n&&(n=h),l<i&&(i=l),u>r&&(r=u),h>s&&(s=h),l>a&&(a=l)}this.min.set(e,n,i),this.max.set(r,s,a)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new c;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(){var t=new c;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var i,r;if(void 0!==(i=e.geometry))if(i.isGeometry){var s=i.vertices;for(i=0,r=s.length;i<r;i++)t.copy(s[i]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}else if(i.isBufferGeometry&&void 0!==(s=i.attributes.position))for(i=0,r=s.count;i<r;i++)t.fromAttribute(s,i).applyMatrix4(e.matrixWorld),n.expandByPoint(t)}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return t=t||new c,this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t=t||new c,this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new c).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new c),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return 0<t.normal.x?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){return(e||new c).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new c;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new c;return function(e){return e=e||new J,this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new c,new c,new c,new c,new c,new c,new c,new c];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},J.prototype={constructor:J,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new $;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),i=e||new c;return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){return t=t||new $,t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},K.prototype={constructor:K,isMatrix3:!0,set:function(t,e,n,i,r,s,a,o,c){var u=this.elements;return u[0]=t,u[1]=i,u[2]=a,u[3]=e,u[4]=r,u[5]=o,u[6]=n,u[7]=s,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var t;return function(e,n,i){void 0===t&&(t=new c),void 0===n&&(n=0),void 0===i&&(i=e.length);for(var r=0;r<i;r+=3,n+=3)t.fromArray(e,n),t.applyMatrix3(this),t.toArray(e,n);return e}}(),applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new c);for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],c=t[7],t=t[8];return e*s*t-e*a*c-n*r*t+n*a*o+i*r*c-i*s*o},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],s=n[1],a=n[2],o=n[3],c=n[4],u=n[5],h=n[6],l=n[7],n=n[8],p=n*c-u*l,f=u*h-n*o,d=l*o-c*h,g=r*p+s*f+a*d;if(0===g){if(!0===e)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return g=1/g,i[0]=p*g,i[1]=(a*l-n*s)*g,i[2]=(u*s-a*c)*g,i[3]=f*g,i[4]=(n*r-a*h)*g,i[5]=(a*o-u*r)*g,i[6]=d*g,i[7]=(s*h-l*r)*g,i[8]=(c*r-s*o)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},Q.prototype={constructor:Q,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new c,e=new c;return function(n,i,r){return i=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize(),this.setFromNormalAndCoplanarPoint(i,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new c).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new c;return function(e,n){var i=n||new c,r=e.delta(t),s=this.normal.dot(r);return 0!==s?(s=-(e.start.dot(this.normal)+this.constant)/s,0>s||1<s?void 0:i.copy(r).multiplyScalar(s).add(e.start)):0===this.distanceToPoint(e.start)?i.copy(e.start):void 0}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new c).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new c,e=new K;return function(n,i){var r=this.coplanarPoint(t).applyMatrix4(n),s=i||e.getNormalMatrix(n),s=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(s),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},tt.prototype={constructor:tt,set:function(t,e,n,i,r,s){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements;t=n[0];var i=n[1],r=n[2],s=n[3],a=n[4],o=n[5],c=n[6],u=n[7],h=n[8],l=n[9],p=n[10],f=n[11],d=n[12],g=n[13],m=n[14],n=n[15];return e[0].setComponents(s-t,u-a,f-h,n-d).normalize(),e[1].setComponents(s+t,u+a,f+h,n+d).normalize(),e[2].setComponents(s+i,u+o,f+l,n+g).normalize(),e[3].setComponents(s-i,u-o,f-l,n-g).normalize(),e[4].setComponents(s-r,u-c,f-p,n-m).normalize(),e[5].setComponents(s+r,u+c,f+p,n+m).normalize(),this},intersectsObject:function(){var t=new J;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new J;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var i=0;6>i;i++)if(e[i].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(){var t=new c,e=new c;return function(n){for(var i=this.planes,r=0;6>r;r++){var s=i[r];t.x=0<s.normal.x?n.min.x:n.max.x,e.x=0<s.normal.x?n.max.x:n.min.x,t.y=0<s.normal.y?n.min.y:n.max.y,e.y=0<s.normal.y?n.max.y:n.min.y,t.z=0<s.normal.z?n.min.z:n.max.z,e.z=0<s.normal.z?n.max.z:n.min.z;var a=s.distanceToPoint(t),s=s.distanceToPoint(e);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0}},nt.prototype={constructor:nt,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new c).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new c;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new c;n.subVectors(t,this.origin);var i=n.dot(this.direction);return 0>i?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new c;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new c,e=new c,n=new c;return function(i,r,s,a){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var o,c=.5*i.distanceTo(r),u=-this.direction.dot(e),h=n.dot(this.direction),l=-n.dot(e),p=n.lengthSq(),f=Math.abs(1-u*u);return 0<f?(i=u*l-h,r=u*h-l,o=c*f,0<=i?r>=-o?r<=o?(c=1/f,i*=c,r*=c,u=i*(i+u*r+2*h)+r*(u*i+r+2*l)+p):(r=c,i=Math.max(0,-(u*r+h)),u=-i*i+r*(r+2*l)+p):(r=-c,i=Math.max(0,-(u*r+h)),u=-i*i+r*(r+2*l)+p):r<=-o?(i=Math.max(0,-(-u*c+h)),r=0<i?-c:Math.min(Math.max(-c,-l),c),u=-i*i+r*(r+2*l)+p):r<=o?(i=0,r=Math.min(Math.max(-c,-l),c),u=r*(r+2*l)+p):(i=Math.max(0,-(u*c+h)),r=0<i?c:Math.min(Math.max(-c,-l),c),u=-i*i+r*(r+2*l)+p)):(r=0<u?-c:c,i=Math.max(0,-(u*r+h)),u=-i*i+r*(r+2*l)+p),s&&s.copy(this.direction).multiplyScalar(i).add(this.origin),a&&a.copy(e).multiplyScalar(r).add(t),u}}(),intersectSphere:function(){var t=new c;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,s=e.radius*e.radius;return r>s?null:(s=Math.sqrt(s-r),r=i-s,i+=s,0>r&&0>i?null:0>r?this.at(i,n):this.at(r,n))}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:(t=-(this.origin.dot(t.normal)+t.constant)/e,0<=t?t:null)},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var n,i,r,s,a;i=1/this.direction.x,s=1/this.direction.y,a=1/this.direction.z;var o=this.origin;return 0<=i?(n=(t.min.x-o.x)*i,i*=t.max.x-o.x):(n=(t.max.x-o.x)*i,i*=t.min.x-o.x),0<=s?(r=(t.min.y-o.y)*s,s*=t.max.y-o.y):(r=(t.max.y-o.y)*s,s*=t.min.y-o.y),n>s||r>i?null:((r>n||n!==n)&&(n=r),(s<i||i!==i)&&(i=s),0<=a?(r=(t.min.z-o.z)*a,a*=t.max.z-o.z):(r=(t.max.z-o.z)*a,a*=t.min.z-o.z),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),0>i?null:this.at(0<=n?n:i,e)))},intersectsBox:function(){var t=new c;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new c,e=new c,n=new c,i=new c;return function(r,s,a,o,c){if(e.subVectors(s,r),n.subVectors(a,r),i.crossVectors(e,n),0<(s=this.direction.dot(i))){if(o)return null;o=1}else{if(!(0>s))return null;o=-1,s=-s}return t.subVectors(this.origin,r),0>(r=o*this.direction.dot(n.crossVectors(t,n)))?null:0>(a=o*this.direction.dot(e.cross(t)))||r+a>s?null:(r=-o*t.dot(i),0>r?null:this.at(r/s,c))}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},it.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),it.DefaultOrder="XYZ",it.prototype={constructor:it,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=nr.clamp,r=t.elements;t=r[0];var s=r[4],a=r[8],o=r[1],c=r[5],u=r[9],h=r[2],l=r[6],r=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-u,r),this._z=Math.atan2(-s,t)):(this._x=Math.atan2(l,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(a,r),this._z=Math.atan2(o,c)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(o,t))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(l,r),this._z=Math.atan2(o,t)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(i(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(a,r))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(l,c),this._y=Math.atan2(a,t)):(this._x=Math.atan2(-u,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},rt.prototype={constructor:rt,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}};var gr=0;st.DefaultUp=new c(0,1,0),st.DefaultMatrixAutoUpdate=!0,Object.assign(st.prototype,e.prototype,{isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new c(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new c(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new c(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new c;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new c(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new c(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new c(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new u;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new u;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return t=t||new c,this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new c,e=new c;return function(n){return n=n||new o,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new o;return function(e){return e=e||new it,this.getWorldQuaternion(t),e.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new c,e=new o;return function(n){return n=n||new c,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new o;return function(e){return e=e||new c,this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n=void 0===t||""===t,i={};n&&(t={geometries:{},materials:{},textures:{},images:{}},i.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),0<this.children.length){r.children=[];for(var s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(n){var n=e(t.geometries),s=e(t.materials),a=e(t.textures);t=e(t.images),0<n.length&&(i.geometries=n),0<s.length&&(i.materials=s),0<a.length&&(i.textures=a),0<t.length&&(i.images=t)}return i.object=r,i},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}}),at.prototype={constructor:at,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new c).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new c).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new c;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new c,e=new c;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),r=e.dot(t)/r;return i&&(r=nr.clamp(r,0,1)),r}}(),closestPointToPoint:function(t,e,n){return t=this.closestPointToPointParameter(t,e),n=n||new c,this.delta(n).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ot.normal=function(){var t=new c;return function(e,n,i,r){return r=r||new c,r.subVectors(i,n),t.subVectors(e,n),r.cross(t),e=r.lengthSq(),0<e?r.multiplyScalar(1/Math.sqrt(e)):r.set(0,0,0)}}(),ot.barycoordFromPoint=function(){var t=new c,e=new c,n=new c;return function(i,r,s,a,o){t.subVectors(a,r),e.subVectors(s,r),n.subVectors(i,r),i=t.dot(t),r=t.dot(e),s=t.dot(n);var u=e.dot(e);a=e.dot(n);var h=i*u-r*r;return o=o||new c,0===h?o.set(-2,-1,-1):(h=1/h,u=(u*s-r*a)*h,i=(i*a-r*s)*h,o.set(1-u-i,i,u))}}(),ot.containsPoint=function(){var t=new c;return function(e,n,i,r){return e=ot.barycoordFromPoint(e,n,i,r,t),0<=e.x&&0<=e.y&&1>=e.x+e.y}}(),ot.prototype={constructor:ot,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new c,e=new c;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new c).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ot.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new Q).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ot.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ot.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,i;return function(r,s){void 0===t&&(t=new Q,e=[new at,new at,new at],n=new c,i=new c);var a=s||new c,o=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),!0===this.containsPoint(n))a.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var u=0;u<e.length;u++){e[u].closestPointToPoint(n,!0,i);var h=n.distanceToSquared(i);h<o&&(o=h,a.copy(i))}}return a}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ct.prototype={constructor:ct,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},ut.prototype=Object.create(X.prototype),ut.prototype.constructor=ut,ut.prototype.isMeshBasicMaterial=!0,ut.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ht.prototype={constructor:ht,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new H),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];e[n++]=s.a,e[n++]=s.b,e[n++]=s.c}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,s=t.length;r<s;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new n),e[i++]=a.x,e[i++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new c),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,s=t.length;i<s;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new r),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return(new this.constructor).copy(this)}},lt.prototype=Object.create(ht.prototype),lt.prototype.constructor=lt,pt.prototype=Object.create(ht.prototype),pt.prototype.constructor=pt,ft.prototype=Object.create(ht.prototype),ft.prototype.constructor=ft,dt.prototype=Object.create(ht.prototype),dt.prototype.constructor=dt,gt.prototype=Object.create(ht.prototype),gt.prototype.constructor=gt,mt.prototype=Object.create(ht.prototype),mt.prototype.constructor=mt,vt.prototype=Object.create(ht.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(ht.prototype),yt.prototype.constructor=yt,_t.prototype=Object.create(ht.prototype),_t.prototype.constructor=_t,Object.assign(xt.prototype,{computeGroups:function(t){var e,n=[],i=void 0;t=t.faces;for(var r=0;r<t.length;r++){var s=t[r];s.materialIndex!==i&&(i=s.materialIndex,void 0!==e&&(e.count=3*r-e.start,n.push(e)),e={start:3*r,materialIndex:i})}void 0!==e&&(e.count=3*r-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,s=t.faceVertexUvs,a=s[0]&&0<s[0].length,o=s[1]&&0<s[1].length,c=t.morphTargets,u=c.length;if(0<u){e=[];for(var h=0;h<u;h++)e[h]=[];this.morphTargets.position=e}var l,p=t.morphNormals,f=p.length;if(0<f){for(l=[],h=0;h<f;h++)l[h]=[];this.morphTargets.normal=l}for(var d=t.skinIndices,g=t.skinWeights,m=d.length===r.length,v=g.length===r.length,h=0;h<i.length;h++){var y=i[h];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),_=y.vertexColors,3===_.length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===a&&(_=s[0][h],void 0!==_?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new n,new n,new n))),!0===o&&(_=s[1][h],void 0!==_?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new n,new n,new n))),_=0;_<u;_++){var x=c[_].vertices;e[_].push(x[y.a],x[y.b],x[y.c])}for(_=0;_<f;_++)x=p[_].vertexNormals[h],l[_].push(x.a,x.b,x.c);m&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}}),Object.assign(bt.prototype,e.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=(new K).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){t=this.faces[n],t.normal.applyMatrix3(e).normalize();for(var r=0,s=t.vertexNormals.length;r<s;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new st),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,r){r=new ct(t,e,n,void 0!==o?[p[t].clone(),p[e].clone(),p[n].clone()]:[],void 0!==u?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],r),i.faces.push(r),void 0!==h&&i.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[n].clone()]),void 0!==l&&i.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[n].clone()])}var i=this,r=null!==t.index?t.index.array:void 0,s=t.attributes,a=s.position.array,o=void 0!==s.normal?s.normal.array:void 0,u=void 0!==s.color?s.color.array:void 0,h=void 0!==s.uv?s.uv.array:void 0,l=void 0!==s.uv2?s.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var p=[],f=[],d=[],g=s=0;s<a.length;s+=3,g+=2)i.vertices.push(new c(a[s],a[s+1],a[s+2])),void 0!==o&&p.push(new c(o[s],o[s+1],o[s+2])),void 0!==u&&i.colors.push(new H(u[s],u[s+1],u[s+2])),void 0!==h&&f.push(new n(h[g],h[g+1])),void 0!==l&&d.push(new n(l[g],l[g+1]));if(void 0!==r)if(a=t.groups,0<a.length)for(s=0;s<a.length;s++)for(var m=a[s],v=m.start,y=m.count,g=v,v=v+y;g<v;g+=3)e(r[g],r[g+1],r[g+2],m.materialIndex);else for(s=0;s<r.length;s+=3)e(r[s],r[s+1],r[s+2]);else for(s=0;s<a.length/3;s+=3)e(s,s+1,s+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,e=0===e?1:1/e,n=new u;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new c,e=new c,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],s=this.vertices[r.a],a=this.vertices[r.b];t.subVectors(this.vertices[r.c],a),e.subVectors(s,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,i;for(i=Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)i[e]=new c;if(t){var r,s,a,o=new c,u=new c;for(t=0,e=this.faces.length;t<e;t++)n=this.faces[t],r=this.vertices[n.a],s=this.vertices[n.b],a=this.vertices[n.c],o.subVectors(a,s),u.subVectors(r,s),o.cross(u),i[n.a].add(o),i[n.b].add(o),i[n.c].add(o)}else for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++)n=this.faces[t],i[n.a].add(n.normal),i[n.b].add(n.normal),i[n.c].add(n.normal);for(e=0,n=this.vertices.length;e<n;e++)i[e].normalize();for(t=0,e=this.faces.length;t<e;t++)n=this.faces[t],r=n.vertexNormals,3===r.length?(r[0].copy(i[n.a]),r[1].copy(i[n.b]),r[2].copy(i[n.c])):(r[0]=i[n.a].clone(),r[1]=i[n.b].clone(),r[2]=i[n.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var s=new bt;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[],r=this.morphNormals[t].faceNormals;var a,o,u=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)a=new c,o={a:new c,b:new c,c:new c},r.push(a),u.push(o)}for(u=this.morphNormals[t],s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],a=u.faceNormals[n],o=u.vertexNormals[n],a.copy(r.normal),o.a.copy(r.vertexNormals[0]),o.b.copy(r.vertexNormals[1]),o.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,i=e.length;n<i;n++)0<n&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new J),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!1===(t&&t.isGeometry))console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);else{var i,r=this.vertices.length,s=this.vertices,a=t.vertices,o=this.faces,c=t.faces,u=this.faceVertexUvs[0],h=t.faceVertexUvs[0],l=this.colors,p=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new K).getNormalMatrix(e)),t=0;for(var f=a.length;t<f;t++){var d=a[t].clone();void 0!==e&&d.applyMatrix4(e),s.push(d)}for(t=0,f=p.length;t<f;t++)l.push(p[t].clone());for(t=0,f=c.length;t<f;t++){var a=c[t],g=a.vertexNormals,p=a.vertexColors,l=new ct(a.a+r,a.b+r,a.c+r);for(l.normal.copy(a.normal),void 0!==i&&l.normal.applyMatrix3(i).normalize(),e=0,s=g.length;e<s;e++)d=g[e].clone(),void 0!==i&&d.applyMatrix3(i).normalize(),l.vertexNormals.push(d);for(l.color.copy(a.color),e=0,s=p.length;e<s;e++)d=p[e],l.vertexColors.push(d.clone());l.materialIndex=a.materialIndex+n,o.push(l)}for(t=0,f=h.length;t<f;t++)if(n=h[t],i=[],void 0!==n){for(e=0,s=n.length;e<s;e++)i.push(n[e].clone());u.push(i)}}},mergeMesh:function(t){!1===(t&&t.isMesh)?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,i={},r=[],s=[],a=Math.pow(10,4);for(e=0,n=this.vertices.length;e<n;e++)t=this.vertices[e],t=Math.round(t.x*a)+"_"+Math.round(t.y*a)+"_"+Math.round(t.z*a),void 0===i[t]?(i[t]=e,r.push(this.vertices[e]),s[e]=r.length-1):s[e]=s[i[t]];for(i=[],e=0,n=this.faces.length;e<n;e++)for(a=this.faces[e],a.a=s[a.a],a.b=s[a.b],a.c=s[a.c],a=[a.a,a.b,a.c],t=0;3>t;t++)if(a[t]===a[(t+1)%3]){i.push(e);break}for(e=i.length-1;0<=e;e--)for(a=i[e],this.faces.splice(a,1),s=0,n=this.faceVertexUvs.length;s<n;s++)this.faceVertexUvs[s].splice(a,1);return e=this.vertices.length-r.length,this.vertices=r,e},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(s&&s.length===e&&(i=[]),a&&a.length===e&&(r=[]),n=0;n<e;n++){var o=t[n]._id;i&&i.push(s[o]),r&&r.push(a[o])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=c.length/3,c.push(t.x,t.y,t.z),u[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=h.length,h.push(t.getHex()),l[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=p.length/2,p.push(t.x,t.y),f[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var s,a=this.parameters;for(s in a)void 0!==a[s]&&(r[s]=a[s]);return r}for(a=[],s=0;s<this.vertices.length;s++){var o=this.vertices[s];a.push(o.x,o.y,o.z)}var o=[],c=[],u={},h=[],l={},p=[],f={};for(s=0;s<this.faces.length;s++){var d=this.faces[s],g=void 0!==this.faceVertexUvs[0][s],m=0<d.normal.length(),v=0<d.vertexNormals.length,y=1!==d.color.r||1!==d.color.g||1!==d.color.b,_=0<d.vertexColors.length,x=0,x=t(x,0,0),x=t(x,1,!0),x=t(x,2,!1),x=t(x,3,g),x=t(x,4,m),x=t(x,5,v),x=t(x,6,y),x=t(x,7,_);o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),g&&(g=this.faceVertexUvs[0][s],o.push(i(g[0]),i(g[1]),i(g[2]))),m&&o.push(e(d.normal)),v&&(m=d.vertexNormals,o.push(e(m[0]),e(m[1]),e(m[2]))),y&&o.push(n(d.color)),_&&(d=d.vertexColors,o.push(n(d[0]),n(d[1]),n(d[2])))}return r.data={},r.data.vertices=a,r.data.normals=c,0<h.length&&(r.data.colors=h),0<p.length&&(r.data.uvs=[p]),r.data.faces=o,r},clone:function(){return(new bt).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(e=t.colors,n=0,i=e.length;n<i;n++)this.colors.push(e[n].clone());for(e=t.faces,n=0,i=e.length;n<i;n++)this.faces.push(e[n].clone());for(n=0,i=t.faceVertexUvs.length;n<i;n++){e=t.faceVertexUvs[n],void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var r=0,s=e.length;r<s;r++){for(var a=e[r],o=[],c=0,u=a.length;c<u;c++)o.push(a[c].clone());this.faceVertexUvs[n].push(o)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var mr=0;Object.assign(wt.prototype,e.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e,n){if(!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new ht(e,n));else{if("index"!==t)return this.attributes[t]=e,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e)}},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;return void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0),e=this.attributes.normal,void 0!==e&&((new K).getNormalMatrix(t).applyToVector3Array(e.array),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new st),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new yt(3*e.vertices.length,3);var n=new yt(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new yt(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new xt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);this.addAttribute("position",new ht(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new ht(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new ht(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new ht(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new ht(e,2).copyVector2sArray(t.uvs2))),0<t.indices.length&&(e=new(65535<t.vertices.length?Uint32Array:Uint16Array)(3*t.indices.length),this.setIndex(new ht(e,1).copyIndicesArray(t.indices))),this.groups=t.groups;for(var n in t.morphTargets){for(var e=[],i=t.morphTargets[n],r=0,s=i.length;r<s;r++){var a=i[r],o=new yt(3*a.length,3);e.push(o.copyVector3sArray(a))}this.morphAttributes[n]=e}return 0<t.skinIndices.length&&(n=new yt(4*t.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new yt(4*t.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new $,e=new c;return function(){null===this.boundingSphere&&(this.boundingSphere=new J);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,s=0,a=n.count;s<a;s++)e.x=n.getX(s),e.y=n.getY(s),e.z=n.getZ(s),r=Math.max(r,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ht(new Float32Array(i.length),3));else for(var r=e.normal.array,s=0,a=r.length;s<a;s++)r[s]=0;var o,u,h,r=e.normal.array,l=new c,p=new c,f=new c,d=new c,g=new c;if(t){t=t.array,0===n.length&&this.addGroup(0,t.length);for(var m=0,v=n.length;m<v;++m)for(s=n[m],a=s.start,o=s.count,s=a,a+=o;s<a;s+=3)o=3*t[s+0],u=3*t[s+1],h=3*t[s+2],l.fromArray(i,o),p.fromArray(i,u),f.fromArray(i,h),d.subVectors(f,p),g.subVectors(l,p),d.cross(g),r[o]+=d.x,r[o+1]+=d.y,r[o+2]+=d.z,r[u]+=d.x,r[u+1]+=d.y,r[u+2]+=d.z,r[h]+=d.x,r[h+1]+=d.y,r[h+2]+=d.z}else for(s=0,a=i.length;s<a;s+=9)l.fromArray(i,s),p.fromArray(i,s+3),f.fromArray(i,s+6),d.subVectors(f,p),g.subVectors(l,p),d.cross(g),r[s]=d.x,r[s+1]=d.y,r[s+2]=d.z,r[s+3]=d.x,r[s+4]=d.y,r[s+5]=d.z,r[s+6]=d.x,r[s+7]=d.y,r[s+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1!==(t&&t.isBufferGeometry)){void 0===e&&(e=0);var n,i=this.attributes;for(n in i)if(void 0!==t.attributes[n])for(var r=i[n].array,s=t.attributes[n],a=s.array,o=0,s=s.itemSize*e;o<a.length;o++,s++)r[s]=a[o];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,n,i=this.attributes.normal.array,r=0,s=i.length;r<s;r+=3)t=i[r],e=i[r+1],n=i[r+2],t=1/Math.sqrt(t*t+e*e+n*n),i[r]*=t,i[r+1]*=t,i[r+2]*=t},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,e=new wt,n=this.index.array,i=this.attributes;for(t in i){for(var r,s=i[t],a=s.array,s=s.itemSize,o=new a.constructor(n.length*s),c=0,u=0,h=n.length;u<h;u++){r=n[u]*s;for(var l=0;l<s;l++)o[c++]=a[r++]}e.addAttribute(t,new ht(o,s))}return e},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e,n=this.parameters;for(e in n)void 0!==n[e]&&(t[e]=n[e]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(n=Array.prototype.slice.call(i.array),t.data.index={type:i.array.constructor.name,array:n}),i=this.attributes;for(e in i){var r=i[e],n=Array.prototype.slice.call(r.array);t.data.attributes[e]={itemSize:r.itemSize,type:r.array.constructor.name,array:n,normalized:r.normalized}}return e=this.groups,0<e.length&&(t.data.groups=JSON.parse(JSON.stringify(e))),e=this.boundingSphere,null!==e&&(t.data.boundingSphere={center:e.center.toArray(),radius:e.radius}),t},clone:function(){return(new wt).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n,e=t.attributes;for(n in e)this.addAttribute(n,e[n].clone());for(t=t.groups,n=0,e=t.length;n<e;n++){var i=t[n];this.addGroup(i.start,i.count,i.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),wt.MaxIndex=65535,Et.prototype=Object.assign(Object.create(st.prototype),{constructor:Et,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return st.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&0<t.length){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,n=t.length;e<n;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,n,i,r,s,a){return ot.barycoordFromPoint(t,e,n,i,y),r.multiplyScalar(y.x),s.multiplyScalar(y.y),a.multiplyScalar(y.z),r.add(s).add(a),r.clone()}function e(t,e,n,i,r,s,a){var o=t.material;return null===(1===o.side?n.intersectTriangle(s,r,i,!0,a):n.intersectTriangle(i,r,s,2!==o.side,a))?null:(x.copy(a),x.applyMatrix4(t.matrixWorld),n=e.ray.origin.distanceTo(x),n<e.near||n>e.far?null:{distance:n,point:x.clone(),object:t})}function i(n,i,r,s,a,c,u,p){return o.fromArray(s,3*c),h.fromArray(s,3*u),l.fromArray(s,3*p),(n=e(n,i,r,o,h,l,_))&&(a&&(g.fromArray(a,2*c),m.fromArray(a,2*u),v.fromArray(a,2*p),n.uv=t(_,o,h,l,g,m,v)),n.face=new ct(c,u,p,ot.normal(o,h,l)),n.faceIndex=c),n}var r=new u,s=new nt,a=new J,o=new c,h=new c,l=new c,p=new c,f=new c,d=new c,g=new n,m=new n,v=new n,y=new c,_=new c,x=new c;return function(n,c){var u=this.geometry,y=this.material,x=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),a.copy(u.boundingSphere),a.applyMatrix4(x),!1!==n.ray.intersectsSphere(a)&&(r.getInverse(x),s.copy(n.ray).applyMatrix4(r),null===u.boundingBox||!1!==s.intersectsBox(u.boundingBox)))){var b,w;if(u.isBufferGeometry){var E,S,y=u.index,x=u.attributes,u=x.position.array;if(void 0!==x.uv&&(b=x.uv.array),null!==y)for(var x=y.array,T=0,M=x.length;T<M;T+=3)y=x[T],E=x[T+1],S=x[T+2],(w=i(this,n,s,u,b,y,E,S))&&(w.faceIndex=Math.floor(T/3),c.push(w));else for(T=0,M=u.length;T<M;T+=9)y=T/3,E=y+1,S=y+2,(w=i(this,n,s,u,b,y,E,S))&&(w.index=y,c.push(w))}else if(u.isGeometry){var A,C,x=y&&y.isMultiMaterial,T=!0===x?y.materials:null,M=u.vertices;E=u.faces,S=u.faceVertexUvs[0],0<S.length&&(b=S);for(var L=0,P=E.length;L<P;L++){var R=E[L];if(void 0!==(w=!0===x?T[R.materialIndex]:y)){if(S=M[R.a],A=M[R.b],C=M[R.c],!0===w.morphTargets){w=u.morphTargets;var I=this.morphTargetInfluences;o.set(0,0,0),h.set(0,0,0),l.set(0,0,0);for(var k=0,O=w.length;k<O;k++){var N=I[k];if(0!==N){var D=w[k].vertices;o.addScaledVector(p.subVectors(D[R.a],S),N),h.addScaledVector(f.subVectors(D[R.b],A),N),l.addScaledVector(d.subVectors(D[R.c],C),N)}}o.add(S),h.add(A),l.add(C),S=o,A=h,C=l}(w=e(this,n,s,S,A,C,_))&&(b&&(I=b[L],g.copy(I[0]),m.copy(I[1]),v.copy(I[2]),w.uv=t(_,S,A,C,g,m,v)),w.face=R,w.faceIndex=L,c.push(w))}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),St.prototype=Object.create(wt.prototype),St.prototype.constructor=St,Tt.prototype=Object.create(wt.prototype),Tt.prototype.constructor=Tt,Mt.prototype=Object.create(st.prototype),Mt.prototype.constructor=Mt,Mt.prototype.isCamera=!0,Mt.prototype.getWorldDirection=function(){var t=new o;return function(e){return e=e||new c,this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),Mt.prototype.lookAt=function(){var t=new u;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Mt.prototype.clone=function(){return(new this.constructor).copy(this)},Mt.prototype.copy=function(t){return st.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},At.prototype=Object.assign(Object.create(Mt.prototype),{constructor:At,isPerspectiveCamera:!0,copy:function(t){return Mt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*nr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*nr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*nr.RAD2DEG*Math.atan(Math.tan(.5*nr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,s){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*nr.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==s)var a=s.fullWidth,o=s.fullHeight,r=r+s.offsetX*i/a,e=e-s.offsetY*n/o,i=s.width/a*i,n=s.height/o*n;s=this.filmOffset,0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makeFrustum(r,r+i,e-n,e,t,this.far)},toJSON:function(t){return t=st.prototype.toJSON.call(this,t),t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ct.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Ct,isOrthographicCamera:!0,copy:function(t){return Mt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,s){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:s},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,n=n+t,t=i+e,e=i-e;if(null!==this.view)var n=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight),s=(this.right-this.left)/this.view.width,i=(this.top-this.bottom)/this.view.height,r=r+this.view.offsetX/n*s,n=r+this.view.width/n*s,t=t-this.view.offsetY/e*i,e=t-this.view.height/e*i;this.projectionMatrix.makeOrthographic(r,n,t,e,this.near,this.far)},toJSON:function(t){return t=st.prototype.toJSON.call(this,t),t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var vr=0;ee.prototype.isFogExp2=!0,ee.prototype.clone=function(){return new ee(this.color.getHex(),this.density)},ee.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ne.prototype.isFog=!0,ne.prototype.clone=function(){return new ne(this.color.getHex(),this.near,this.far)},ne.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ie.prototype=Object.create(st.prototype),ie.prototype.constructor=ie,ie.prototype.copy=function(t,e){return st.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ie.prototype.toJSON=function(t){var e=st.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},re.prototype=Object.assign(Object.create(st.prototype),{constructor:re,isLensFlare:!0,copy:function(t){st.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,i,r,s){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=new H(16777215)),void 0===i&&(i=1),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:s,color:r,blending:i})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+i*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),se.prototype=Object.create(X.prototype),se.prototype.constructor=se,se.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},ae.prototype=Object.assign(Object.create(st.prototype),{constructor:ae,isSprite:!0,raycast:function(){var t=new c;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.distanceSqToPoint(t);i>this.scale.x*this.scale.y/4||n.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),oe.prototype=Object.assign(Object.create(st.prototype),{constructor:oe,copy:function(t){st.prototype.copy.call(this,t,!1),t=t.levels;for(var e=0,n=t.length;e<n;e++){var i=t[e];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new c;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new c,e=new c;return function(n){var i=this.levels;if(1<i.length){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),n=t.distanceTo(e),i[0].object.visible=!0;for(var r=1,s=i.length;r<s&&n>=i[r].distance;r++)i[r-1].object.visible=!1,i[r].object.visible=!0;for(;r<s;r++)i[r].object.visible=!1}}}(),toJSON:function(t){t=st.prototype.toJSON.call(this,t),t.object.levels=[];for(var e=this.levels,n=0,i=e.length;n<i;n++){var r=e[n];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),Object.assign(ce.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new u;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new u;return function(){for(var e=0,n=this.bones.length;e<n;e++)t.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ce(this.bones,this.boneInverses,this.useVertexTexture)}}),ue.prototype=Object.assign(Object.create(st.prototype),{constructor:ue,isBone:!0}),he.prototype=Object.assign(Object.create(Et.prototype),{constructor:he,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();1/0!==n?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var e=new r,i=this.geometry.attributes.skinWeight,t=0;t<i.count;t++)e.x=i.getX(t),e.y=i.getY(t),e.z=i.getZ(t),e.w=i.getW(t),n=1/e.lengthManhattan(),1/0!==n?e.multiplyScalar(n):e.set(1,0,0,0),i.setXYZW(t,e.x,e.y,e.z,e.w)},updateMatrixWorld:function(t){Et.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),le.prototype=Object.create(X.prototype),le.prototype.constructor=le,le.prototype.isLineBasicMaterial=!0,le.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},pe.prototype=Object.assign(Object.create(st.prototype),{constructor:pe,isLine:!0,raycast:function(){var t=new u,e=new nt,n=new J;return function(i,r){var s=i.linePrecision,s=s*s,a=this.geometry,o=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(o),!1!==i.ray.intersectsSphere(n)){t.getInverse(o),e.copy(i.ray).applyMatrix4(t);var u=new c,h=new c,o=new c,l=new c,p=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var f=a.index,d=a.attributes.position.array;if(null!==f)for(var f=f.array,a=0,g=f.length-1;a<g;a+=p){var m=f[a+1];u.fromArray(d,3*f[a]),h.fromArray(d,3*m),m=e.distanceSqToSegment(u,h,l,o),m>s||(l.applyMatrix4(this.matrixWorld),(m=i.ray.origin.distanceTo(l))<i.near||m>i.far||r.push({distance:m,point:o.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else for(a=0,g=d.length/3-1;a<g;a+=p)u.fromArray(d,3*a),h.fromArray(d,3*a+3),(m=e.distanceSqToSegment(u,h,l,o))>s||(l.applyMatrix4(this.matrixWorld),(m=i.ray.origin.distanceTo(l))<i.near||m>i.far||r.push({distance:m,point:o.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}else if(a.isGeometry)for(u=a.vertices,h=u.length,a=0;a<h-1;a+=p)(m=e.distanceSqToSegment(u[a],u[a+1],l,o))>s||(l.applyMatrix4(this.matrixWorld),(m=i.ray.origin.distanceTo(l))<i.near||m>i.far||r.push({distance:m,point:o.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),fe.prototype=Object.assign(Object.create(pe.prototype),{constructor:fe,isLineSegments:!0}),de.prototype=Object.create(X.prototype),de.prototype.constructor=de,de.prototype.isPointsMaterial=!0,de.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},ge.prototype=Object.assign(Object.create(st.prototype),{constructor:ge,isPoints:!0,raycast:function(){var t=new u,e=new nt,n=new J;return function(i,r){function s(t,n){var s=e.distanceSqToPoint(t);if(s<l){var o=e.closestPointToPoint(t);o.applyMatrix4(u);var c=i.ray.origin.distanceTo(o);c<i.near||c>i.far||r.push({distance:c,distanceToRay:Math.sqrt(s),point:o.clone(),index:n,face:null,object:a})}}var a=this,o=this.geometry,u=this.matrixWorld,h=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(u),!1!==i.ray.intersectsSphere(n)){t.getInverse(u),e.copy(i.ray).applyMatrix4(t);var h=h/((this.scale.x+this.scale.y+this.scale.z)/3),l=h*h,h=new c;if(o.isBufferGeometry){var p=o.index,o=o.attributes.position.array;if(null!==p)for(var f=p.array,p=0,d=f.length;p<d;p++){var g=f[p];h.fromArray(o,3*g),s(h,g)}else for(p=0,f=o.length/3;p<f;p++)h.fromArray(o,3*p),s(h,p)}else for(h=o.vertices,p=0,f=h.length;p<f;p++)s(h[p],p)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),me.prototype=Object.assign(Object.create(st.prototype),{constructor:me}),ve.prototype=Object.create(i.prototype),ve.prototype.constructor=ve,ye.prototype=Object.create(i.prototype),ye.prototype.constructor=ye,ye.prototype.isCompressedTexture=!0,_e.prototype=Object.create(i.prototype),_e.prototype.constructor=_e,xe.prototype=Object.create(i.prototype),xe.prototype.constructor=xe,xe.prototype.isDepthTexture=!0,be.prototype=Object.create(wt.prototype),be.prototype.constructor=be,we.prototype=Object.create(wt.prototype),we.prototype.constructor=we,Ee.prototype=Object.create(bt.prototype),Ee.prototype.constructor=Ee,Se.prototype=Object.create(wt.prototype),Se.prototype.constructor=Se,Te.prototype=Object.create(Se.prototype),Te.prototype.constructor=Te,Me.prototype=Object.create(bt.prototype),Me.prototype.constructor=Me,Ae.prototype=Object.create(Se.prototype),Ae.prototype.constructor=Ae,Ce.prototype=Object.create(bt.prototype),Ce.prototype.constructor=Ce,Le.prototype=Object.create(Se.prototype),Le.prototype.constructor=Le,Pe.prototype=Object.create(bt.prototype),Pe.prototype.constructor=Pe,Re.prototype=Object.create(Se.prototype),Re.prototype.constructor=Re,Ie.prototype=Object.create(bt.prototype),Ie.prototype.constructor=Ie,ke.prototype=Object.create(bt.prototype),ke.prototype.constructor=ke,Oe.prototype=Object.create(wt.prototype),Oe.prototype.constructor=Oe,Ne.prototype=Object.create(bt.prototype),Ne.prototype.constructor=Ne,De.prototype=Object.create(wt.prototype),De.prototype.constructor=De,Fe.prototype=Object.create(bt.prototype),Fe.prototype.constructor=Fe,Ue.prototype=Object.create(wt.prototype),Ue.prototype.constructor=Ue,Be.prototype=Object.create(bt.prototype),Be.prototype.constructor=Be;var yr={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},triangulate:function(){return function(t,e){var n=t.length;if(3>n)return null;var i,r,s,a=[],o=[],c=[];if(0<yr.area(t))for(r=0;r<n;r++)o[r]=r;else for(r=0;r<n;r++)o[r]=n-1-r;var u=2*n;for(r=n-1;2<n;){if(0>=u--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}i=r,n<=i&&(i=0),r=i+1,n<=r&&(r=0),s=r+1,n<=s&&(s=0);var h;t:{var l,p,f,d,g,m,v,y;if(l=t[o[i]].x,p=t[o[i]].y,f=t[o[r]].x,d=t[o[r]].y,g=t[o[s]].x,m=t[o[s]].y,0>=(f-l)*(m-p)-(d-p)*(g-l))h=!1;else{var _,x,b,w,E,S,T,M,A,C;for(_=g-f,x=m-d,b=l-g,w=p-m,E=f-l,S=d-p,h=0;h<n;h++)if(v=t[o[h]].x,y=t[o[h]].y,!(v===l&&y===p||v===f&&y===d||v===g&&y===m)&&(T=v-l,M=y-p,A=v-f,C=y-d,v-=g,y-=m,A=_*C-x*A,T=E*M-S*T,M=b*y-w*v,A>=-Number.EPSILON&&M>=-Number.EPSILON&&T>=-Number.EPSILON)){h=!1;break t}h=!0}}if(h){for(a.push([t[o[i]],t[o[r]],t[o[s]]]),c.push([o[i],o[r],o[s]]),i=r,s=r+1;s<n;i++,s++)o[i]=o[s];n--,u=2*n}}return e?c:a}}(),triangulateShape:function(t,e){function n(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function i(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function r(t,e,n,r,s){var a=e.x-t.x,o=e.y-t.y,c=r.x-n.x,u=r.y-n.y,h=t.x-n.x,l=t.y-n.y,p=o*c-a*u,f=o*h-a*l;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>f||f>p)return[];if(0>(c=u*h-c*l)||c>p)return[]}else{if(0<f||f<p)return[];if(0<(c=u*h-c*l)||c<p)return[]}return 0===c?!s||0!==f&&f!==p?[t]:[]:c===p?!s||0!==f&&f!==p?[e]:[]:0===f?[n]:f===p?[r]:(s=c/p,[{x:t.x+s*a,y:t.y+s*o}])}return 0!==f||u*h!=c*l?[]:(o=0===a&&0===o,c=0===c&&0===u,o&&c?t.x!==n.x||t.y!==n.y?[]:[t]:o?i(n,r,t)?[t]:[]:c?i(t,e,n)?[n]:[]:(0!==a?(t.x<e.x?(a=t,c=t.x,o=e,t=e.x):(a=e,c=e.x,o=t,t=t.x),n.x<r.x?(e=n,p=n.x,u=r,n=r.x):(e=r,p=r.x,u=n,n=n.x)):(t.y<e.y?(a=t,c=t.y,o=e,t=e.y):(a=e,c=e.y,o=t,t=t.y),n.y<r.y?(e=n,p=n.y,u=r,n=r.y):(e=r,p=r.y,u=n,n=n.y)),c<=p?t<p?[]:t===p?s?[]:[e]:t<=n?[e,o]:[e,u]:c>n?[]:c===n?s?[]:[a]:t<=n?[a,o]:[a,u]))}function s(t,e,n,i){var r=e.x-t.x,s=e.y-t.y;e=n.x-t.x,n=n.y-t.y;var a=i.x-t.x;return i=i.y-t.y,t=r*n-s*e,r=r*i-s*a,Math.abs(t)>Number.EPSILON?(e=a*n-i*e,0<t?0<=r&&0<=e:0<=r||0<=e):0<r}n(t),e.forEach(n);var a,o,c,u,h,l={};for(c=t.concat(),a=0,o=e.length;a<o;a++)Array.prototype.push.apply(c,e[a]);for(a=0,o=c.length;a<o;a++)h=c[a].x+":"+c[a].y,void 0!==l[h]&&console.warn("THREE.ShapeUtils: Duplicate point",h,a),l[h]=a;a=function(t,e){var n,i,a,o,c,u,h,l,p,f=t.concat(),d=[],g=[],m=0;for(i=e.length;m<i;m++)d.push(m);h=0;for(var v=2*d.length;0<d.length;){if(0>--v){console.log("Infinite Loop! Holes left:"+d.length+", Probably Hole outside Shape!");break}for(a=h;a<f.length;a++){for(o=f[a],i=-1,m=0;m<d.length;m++)if(c=d[m],u=o.x+":"+o.y+":"+c,void 0===g[u]){for(n=e[c],l=0;l<n.length;l++)if(c=n[l],function(t,e){var i=f.length-1,r=t-1;0>r&&(r=i);var a=t+1;return a>i&&(a=0),!!(i=s(f[t],f[r],f[a],n[e]))&&(i=n.length-1,r=e-1,0>r&&(r=i),a=e+1,a>i&&(a=0),!!(i=s(n[e],n[r],n[a],f[t])))}(a,l)&&!function(t,e){var n,i;for(n=0;n<f.length;n++)if(i=n+1,i%=f.length,i=r(t,e,f[n],f[i],!0),0<i.length)return!0;return!1}(o,c)&&!function(t,n){var i,s,a,o;for(i=0;i<d.length;i++)for(s=e[d[i]],a=0;a<s.length;a++)if(o=a+1,o%=s.length,o=r(t,n,s[a],s[o],!0),0<o.length)return!0;return!1}(o,c)){i=l,d.splice(m,1),h=f.slice(0,a+1),c=f.slice(a),l=n.slice(i),p=n.slice(0,i+1),f=h.concat(l).concat(p).concat(c),h=a;break}if(0<=i)break;g[u]=!0}if(0<=i)break}}return f}(t,e);var p=yr.triangulate(a,!1);for(a=0,o=p.length;a<o;a++)for(u=p[a],c=0;3>c;c++)h=u[c].x+":"+u[c].y,void 0!==(h=l[h])&&(u[c]=h);return p.concat()},isClockWise:function(t){return 0>yr.area(t)},b2:function(){return function(t,e,n,i){var r=1-t;return r*r*e+2*(1-t)*t*n+t*t*i}}(),b3:function(){return function(t,e,n,i,r){var s=1-t,a=1-t;return s*s*s*e+3*a*a*t*n+3*(1-t)*t*t*i+t*t*t*r}}()};ze.prototype=Object.create(bt.prototype),ze.prototype.constructor=ze,ze.prototype.addShapeList=function(t,e){for(var n=t.length,i=0;i<n;i++)this.addShape(t[i],e)},ze.prototype.addShape=function(t,e){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,i){var r,s,a;s=t.x-e.x,a=t.y-e.y,r=i.x-t.x;var o=i.y-t.y,c=s*s+a*a;if(Math.abs(s*o-a*r)>Number.EPSILON){var u=Math.sqrt(c),h=Math.sqrt(r*r+o*o),c=e.x-a/u;if(e=e.y+s/u,o=((i.x-o/h-c)*o-(i.y+r/h-e)*r)/(s*o-a*r),r=c+s*o-t.x,s=e+a*o-t.y,2>=(a=r*r+s*s))return new n(r,s);a=Math.sqrt(a/2)}else t=!1,s>Number.EPSILON?r>Number.EPSILON&&(t=!0):s<-Number.EPSILON?r<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(o)&&(t=!0),t?(r=-a,a=Math.sqrt(c)):(r=s,s=a,a=Math.sqrt(c/2));return new n(r/a,s/a)}function s(t,e){var n,i;for(z=t.length;0<=--z;){n=z,i=z-1,0>i&&(i=t.length-1);var r,s=x+2*v;for(r=0;r<s;r++){var a=U*r,o=U*(r+1),c=e+n+a,a=e+i+a,u=e+i+o,o=e+n+o,c=c+C,a=a+C,u=u+C,o=o+C;A.faces.push(new ct(c,a,o,null,null,1)),A.faces.push(new ct(a,u,o,null,null,1)),c=E.generateSideWallUV(A,c,a,u,o),A.faceVertexUvs[0].push([c[0],c[1],c[3]]),A.faceVertexUvs[0].push([c[1],c[2],c[3]])}}}function a(t,e,n){A.vertices.push(new c(t,e,n))}function o(t,e,n){t+=C,e+=C,n+=C,A.faces.push(new ct(t,e,n,null,null,0)),t=E.generateTopUV(A,t,e,n),A.faceVertexUvs[0].push(t)}var u,h,l,p,f,d=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,m=void 0!==e.bevelSize?e.bevelSize:g-2,v=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,b=e.extrudePath,w=!1,E=void 0!==e.UVGenerator?e.UVGenerator:ze.WorldUVGenerator;b&&(u=b.getSpacedPoints(x),w=!0,y=!1,h=void 0!==e.frames?e.frames:b.computeFrenetFrames(x,!1),l=new c,p=new c,f=new c),y||(m=g=v=0);var S,T,M,A=this,C=this.vertices.length,b=t.extractPoints(_),_=b.shape,L=b.holes;if(b=!yr.isClockWise(_)){for(_=_.reverse(),T=0,M=L.length;T<M;T++)S=L[T],yr.isClockWise(S)&&(L[T]=S.reverse());b=!1}var P=yr.triangulateShape(_,L),R=_;for(T=0,M=L.length;T<M;T++)S=L[T],_=_.concat(S);var I,k,O,N,D,F,U=_.length,B=P.length,b=[],z=0;for(O=R.length,I=O-1,k=z+1;z<O;z++,I++,k++)I===O&&(I=0),k===O&&(k=0),b[z]=r(R[z],R[I],R[k]);var j,H=[],V=b.concat();for(T=0,M=L.length;T<M;T++){for(S=L[T],j=[],z=0,O=S.length,I=O-1,k=z+1;z<O;z++,I++,k++)I===O&&(I=0),k===O&&(k=0),j[z]=r(S[z],S[I],S[k]);H.push(j),V=V.concat(j)}for(I=0;I<v;I++){for(O=I/v,N=g*Math.cos(O*Math.PI/2),k=m*Math.sin(O*Math.PI/2),z=0,O=R.length;z<O;z++)D=i(R[z],b[z],k),a(D.x,D.y,-N);for(T=0,M=L.length;T<M;T++)for(S=L[T],j=H[T],z=0,O=S.length;z<O;z++)D=i(S[z],j[z],k),a(D.x,D.y,-N)}for(k=m,z=0;z<U;z++)D=y?i(_[z],V[z],k):_[z],w?(p.copy(h.normals[0]).multiplyScalar(D.x),l.copy(h.binormals[0]).multiplyScalar(D.y),f.copy(u[0]).add(p).add(l),a(f.x,f.y,f.z)):a(D.x,D.y,0);for(O=1;O<=x;O++)for(z=0;z<U;z++)D=y?i(_[z],V[z],k):_[z],w?(p.copy(h.normals[O]).multiplyScalar(D.x),l.copy(h.binormals[O]).multiplyScalar(D.y),f.copy(u[O]).add(p).add(l),a(f.x,f.y,f.z)):a(D.x,D.y,d/x*O);for(I=v-1;0<=I;I--){for(O=I/v,N=g*Math.cos(O*Math.PI/2),k=m*Math.sin(O*Math.PI/2),z=0,O=R.length;z<O;z++)D=i(R[z],b[z],k),a(D.x,D.y,d+N);for(T=0,M=L.length;T<M;T++)for(S=L[T],j=H[T],z=0,O=S.length;z<O;z++)D=i(S[z],j[z],k),w?a(D.x,D.y+u[x-1].y,u[x-1].x+N):a(D.x,D.y,d+N)}!function(){if(y){var t=0*U;for(z=0;z<B;z++)F=P[z],o(F[2]+t,F[1]+t,F[0]+t);for(t=U*(x+2*v),z=0;z<B;z++)F=P[z],o(F[0]+t,F[1]+t,F[2]+t)}else{for(z=0;z<B;z++)F=P[z],o(F[2],F[1],F[0]);for(z=0;z<B;z++)F=P[z],o(F[0]+U*x,F[1]+U*x,F[2]+U*x)}}(),function(){var t=0;for(s(R,t),t+=R.length,T=0,M=L.length;T<M;T++)S=L[T],s(S,t),t+=S.length}()},ze.WorldUVGenerator={generateTopUV:function(t,e,i,r){return t=t.vertices,e=t[e],i=t[i],r=t[r],[new n(e.x,e.y),new n(i.x,i.y),new n(r.x,r.y)]},generateSideWallUV:function(t,e,i,r,s){return t=t.vertices,e=t[e],i=t[i],r=t[r],s=t[s],.01>Math.abs(e.y-i.y)?[new n(e.x,1-e.z),new n(i.x,1-i.z),new n(r.x,1-r.z),new n(s.x,1-s.z)]:[new n(e.y,1-e.z),new n(i.y,1-i.z),new n(r.y,1-r.z),new n(s.y,1-s.z)]}},je.prototype=Object.create(ze.prototype),je.prototype.constructor=je,He.prototype=Object.create(wt.prototype),He.prototype.constructor=He,Ve.prototype=Object.create(bt.prototype),Ve.prototype.constructor=Ve,Ge.prototype=Object.create(wt.prototype),Ge.prototype.constructor=Ge,We.prototype=Object.create(bt.prototype),We.prototype.constructor=We,qe.prototype=Object.create(bt.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(wt.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(bt.prototype),Ye.prototype.constructor=Ye,Ze.prototype=Object.create(wt.prototype),Ze.prototype.constructor=Ze,$e.prototype=Object.create(bt.prototype),$e.prototype.constructor=$e,Je.prototype=Object.create(wt.prototype),Je.prototype.constructor=Je,Ke.prototype=Object.create(wt.prototype),Ke.prototype.constructor=Ke,Qe.prototype=Object.create(bt.prototype),Qe.prototype.constructor=Qe,tn.prototype=Object.create(Qe.prototype),tn.prototype.constructor=tn,en.prototype=Object.create(Ke.prototype),en.prototype.constructor=en,nn.prototype=Object.create(wt.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(bt.prototype),rn.prototype.constructor=rn,sn.prototype=Object.create(bt.prototype),sn.prototype.constructor=sn;var _r=Object.freeze({WireframeGeometry:be,ParametricGeometry:Ee,ParametricBufferGeometry:we,TetrahedronGeometry:Me,TetrahedronBufferGeometry:Te,OctahedronGeometry:Ce,OctahedronBufferGeometry:Ae,IcosahedronGeometry:Pe,IcosahedronBufferGeometry:Le,DodecahedronGeometry:Ie,DodecahedronBufferGeometry:Re,PolyhedronGeometry:ke,PolyhedronBufferGeometry:Se,TubeGeometry:Ne,TubeBufferGeometry:Oe,TorusKnotGeometry:Fe,TorusKnotBufferGeometry:De,TorusGeometry:Be,TorusBufferGeometry:Ue,TextGeometry:je,SphereBufferGeometry:He,SphereGeometry:Ve,RingGeometry:We,RingBufferGeometry:Ge,PlaneBufferGeometry:Tt,PlaneGeometry:qe,LatheGeometry:Ye,LatheBufferGeometry:Xe,ShapeGeometry:$e,ShapeBufferGeometry:Ze,ExtrudeGeometry:ze,EdgesGeometry:Je,ConeGeometry:tn,ConeBufferGeometry:en,CylinderGeometry:Qe,CylinderBufferGeometry:Ke,CircleBufferGeometry:nn,CircleGeometry:rn,BoxBufferGeometry:St,BoxGeometry:sn});an.prototype=Object.create(Y.prototype),an.prototype.constructor=an,an.prototype.isShadowMaterial=!0,on.prototype=Object.create(Y.prototype),on.prototype.constructor=on,on.prototype.isRawShaderMaterial=!0,cn.prototype={constructor:cn,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,i=0,r=n.length;i<r;i++){var s=n[i].toJSON(t);delete s.metadata,e.materials.push(s)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},un.prototype=Object.create(X.prototype),un.prototype.constructor=un,un.prototype.isMeshStandardMaterial=!0,un.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hn.prototype=Object.create(un.prototype),hn.prototype.constructor=hn,hn.prototype.isMeshPhysicalMaterial=!0,hn.prototype.copy=function(t){return un.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},ln.prototype=Object.create(X.prototype),ln.prototype.constructor=ln,ln.prototype.isMeshPhongMaterial=!0,ln.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},pn.prototype=Object.create(ln.prototype),pn.prototype.constructor=pn,pn.prototype.isMeshToonMaterial=!0,pn.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},fn.prototype=Object.create(X.prototype),fn.prototype.constructor=fn,fn.prototype.isMeshNormalMaterial=!0,fn.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},dn.prototype=Object.create(X.prototype),dn.prototype.constructor=dn,dn.prototype.isMeshLambertMaterial=!0,dn.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},gn.prototype=Object.create(X.prototype),gn.prototype.constructor=gn,gn.prototype.isLineDashedMaterial=!0,gn.prototype.copy=function(t){return X.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var xr=Object.freeze({ShadowMaterial:an,SpriteMaterial:se,RawShaderMaterial:on,ShaderMaterial:Y,PointsMaterial:de,MultiMaterial:cn,MeshPhysicalMaterial:hn,MeshStandardMaterial:un,MeshPhongMaterial:ln,MeshToonMaterial:pn,MeshNormalMaterial:fn,MeshLambertMaterial:dn,MeshDepthMaterial:Z,MeshBasicMaterial:ut,LineDashedMaterial:gn,LineBasicMaterial:le,Material:X}),br={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},wr=new mn;Object.assign(vn.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,s=br.get(t);if(void 0!==s)return r.manager.itemStart(t),setTimeout(function(){e&&e(s),r.manager.itemEnd(t)},0),s;var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],c=!!a[2],a=a[3],a=window.decodeURIComponent(a);c&&(a=window.atob(a));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":u=new ArrayBuffer(a.length);for(var l=new Uint8Array(u),c=0;c<a.length;c++)l[c]=a.charCodeAt(c);"blob"===h&&(u=new Blob([u],{type:o}));break;case"document":u=(new DOMParser).parseFromString(a,o);break;case"json":u=JSON.parse(a);break;default:u=a}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){i&&i(e),r.manager.itemError(t)},0)}}else{var p=new XMLHttpRequest;p.open("GET",t,!0),p.addEventListener("load",function(n){var s=n.target.response;br.add(t,s),200===this.status?(e&&e(s),r.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(s),r.manager.itemEnd(t)):(i&&i(n),r.manager.itemError(t))},!1),void 0!==n&&p.addEventListener("progress",function(t){n(t)},!1),p.addEventListener("error",function(e){i&&i(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(p.responseType=this.responseType),void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials),p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),p.send(null)}return r.manager.itemStart(t),p},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(yn.prototype,{load:function(t,e,n,i){var r=this,s=[],a=new ye;a.image=s;var o=new vn(this.manager);if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,u=0,h=t.length;u<h;++u)!function(u){o.load(t[u],function(t){t=r._parser(t,!0),s[u]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,e&&e(a))},n,i)}(u);else o.load(t,function(t){if(t=r._parser(t,!0),t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){s[i]={mipmaps:[]};for(var o=0;o<t.mipmapCount;o++)s[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+o]),s[i].format=t.format,s[i].width=t.width,s[i].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=1006),a.format=t.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function(t){return this.path=t,this}}),Object.assign(_n.prototype,{load:function(t,e,n,i){var r=this,s=new V,a=new vn(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){(t=r._parser(t))&&(void 0!==t.image?s.image=t.image:void 0!==t.data&&(s.image.width=t.width,s.image.height=t.height,s.image.data=t.data),s.wrapS=void 0!==t.wrapS?t.wrapS:1001,s.wrapT=void 0!==t.wrapT?t.wrapT:1001,s.magFilter=void 0!==t.magFilter?t.magFilter:1006,s.minFilter=void 0!==t.minFilter?t.minFilter:1008,s.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(s.format=t.format),void 0!==t.type&&(s.type=t.type),void 0!==t.mipmaps&&(s.mipmaps=t.mipmaps),1===t.mipmapCount&&(s.minFilter=1006),s.needsUpdate=!0,e&&e(s,t))},n,i),s}}),Object.assign(xn.prototype,{load:function(t,e,n,i){var r=this,s=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(s.onload=function(){s.onload=null,URL.revokeObjectURL(s.src),e&&e(s),r.manager.itemEnd(t)},s.onerror=i,0===t.indexOf("data:"))s.src=t;else if(void 0!==this.crossOrigin)s.crossOrigin=this.crossOrigin,s.src=t;else{var a=new vn;a.setPath(this.path),a.setResponseType("blob"),a.setWithCredentials(this.withCredentials),a.load(t,function(t){s.src=URL.createObjectURL(t)},n,i)}return r.manager.itemStart(t),s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(bn.prototype,{load:function(t,e,n,i){var r=new h,s=new xn(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var a=0;for(n=0;n<t.length;++n)!function(n){s.load(t[n],function(t){r.images[n]=t,6==++a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}(n);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(wn.prototype,{load:function(t,e,n,r){var s=new i,a=new xn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setWithCredentials(this.withCredentials),a.setPath(this.path),a.load(t,function(n){var i=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data\:image\/jpeg/);s.format=i?1022:1023,s.image=n,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),En.prototype=Object.assign(Object.create(st.prototype),{constructor:En,isLight:!0,copy:function(t){return st.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return t=st.prototype.toJSON.call(this,t),t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Sn.prototype=Object.assign(Object.create(En.prototype),{constructor:Sn,isHemisphereLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Tn.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Mn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Mn,isSpotLightShadow:!0,update:function(t){var e=2*nr.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||500;var i=this.camera;e===i.fov&&n===i.aspect&&t===i.far||(i.fov=e,i.aspect=n,i.far=t,i.updateProjectionMatrix())}}),An.prototype=Object.assign(Object.create(En.prototype),{constructor:An,isSpotLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Cn.prototype=Object.assign(Object.create(En.prototype),{constructor:Cn,isPointLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ln.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Ln}),Pn.prototype=Object.assign(Object.create(En.prototype),{constructor:Pn,isDirectionalLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Rn.prototype=Object.assign(Object.create(En.prototype),{constructor:Rn,isAmbientLight:!0});var Er={arraySlice:function(t,e,n){return Er.isTypedArray(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),s=0,a=0;a!==i;++s)for(var o=n[s]*e,c=0;c!==e;++c)r[a++]=t[o+c];return r},flattenJSON:function(t,e,n,i){for(var r=1,s=t[0];void 0!==s&&void 0===s[i];)s=t[r++];if(void 0!==s){var a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(e.push(s.time),n.push.apply(n,a)),s=t[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(e.push(s.time),a.toArray(n,n.length)),s=t[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(e.push(s.time),n.push(a)),s=t[r++]}while(void 0!==s)}}};In.prototype={constructor:In,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{n:{i:if(!(t<i)){for(var s=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,i=e[++n],t<i)break e}i=e.length;break n}if(t>=r)break t;for(s=e[1],t<s&&(n=2,r=s),s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===s)break;if(i=r,r=e[--n-1],t>=r)break e}i=n,n=0}for(;n<i;)r=n+i>>>1,t<e[r]?i=r:n=r+1;if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize;t*=i;for(var r=0;r!==i;++r)e[r]=n[t+r];return e},interpolate_:function(t,e,n,i){throw Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(In.prototype,{beforeStart_:In.prototype.copySampleValue_,afterEnd_:In.prototype.copySampleValue_}),kn.prototype=Object.assign(Object.create(In.prototype),{constructor:kn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,s=t+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-n;break;case 2402:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=t,o=2*n-e;break;case 2402:s=1,o=n+i[1]-i[0];break;default:s=t-1,o=e}t=.5*(n-e),i=this.valueSize,this._weightPrev=t/(e-a),this._weightNext=t/(o-n),this._offsetPrev=r*i,this._offsetNext=s*i},interpolate_:function(t,e,n,i){var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize;t*=a;var o=t-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,l=this._weightNext,p=(n-e)/(i-e);for(n=p*p,i=n*p,e=-h*i+2*h*n-h*p,h=(1+h)*i+(-1.5-2*h)*n+(-.5+h)*p+1,p=(-1-l)*i+(1.5+l)*n+.5*p,l=l*i-l*n,n=0;n!==a;++n)r[n]=e*s[c+n]+h*s[o+n]+p*s[t+n]+l*s[u+n];return r}}),On.prototype=Object.assign(Object.create(In.prototype),{constructor:On,interpolate_:function(t,e,n,i){var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize;t*=a;var o=t-a;for(e=(n-e)/(i-e),n=1-e,i=0;i!==a;++i)r[i]=s[o+i]*n+s[t+i]*e;return r}}),Nn.prototype=Object.assign(Object.create(In.prototype),{constructor:Nn,interpolate_:function(t,e,n,i){return this.copySampleValue_(t-1)}});var Sr;Sr={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Nn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new On(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new kn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn(e)}else this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,s=i-1;r!==i&&n[r]<t;)++r;for(;-1!==s&&n[s]>e;)--s;return++s,0===r&&s===i||(r>=s&&(s=Math.max(s,1),r=s-1),i=this.getValueSize(),this.times=Er.arraySlice(n,r,s),this.values=Er.arraySlice(this.values,r*i,s*i)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("invalid value size in track",this),t=!1);var n=this.times,e=this.values,i=n.length;0===i&&(console.error("track is empty",this),t=!1);for(var r=null,s=0;s!==i;s++){var a=n[s];if("number"==typeof a&&isNaN(a)){console.error("time is not a valid number",this,s,a),t=!1;break}if(null!==r&&r>a){console.error("out of order keys",this,s,a,r),t=!1;break}r=a}if(void 0!==e&&Er.isTypedArray(e))for(s=0,n=e.length;s!==n;++s)if(i=e[s],isNaN(i)){console.error("value is not a valid number",this,s,i),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,s=t.length-1,a=1;a<s;++a){var o=!1,c=t[a];if(c!==t[a+1]&&(1!==a||c!==c[0]))if(i)o=!0;else for(var u=a*n,h=u-n,l=u+n,c=0;c!==n;++c){var p=e[u+c];if(p!==e[h+c]||p!==e[l+c]){o=!0;break}}if(o){if(a!==r)for(t[r]=t[a],o=a*n,u=r*n,c=0;c!==n;++c)e[u+c]=e[o+c];++r}}if(0<s){for(t[r]=t[s],o=s*n,u=r*n,c=0;c!==n;++c)e[u+c]=e[o+c];++r}return r!==t.length&&(this.times=Er.arraySlice(t,0,r),this.values=Er.arraySlice(e,0,r*n)),this}},Fn.prototype=Object.assign(Object.create(Sr),{constructor:Fn,ValueTypeName:"vector"}),Un.prototype=Object.assign(Object.create(In.prototype),{constructor:Un,interpolate_:function(t,e,n,i){var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize;for(t*=a,e=(n-e)/(i-e),n=t+a;t!==n;t+=4)o.slerpFlat(r,0,s,t-a,s,t,e);return r}}),Bn.prototype=Object.assign(Object.create(Sr),{constructor:Bn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Un(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),zn.prototype=Object.assign(Object.create(Sr),{constructor:zn,ValueTypeName:"number"}),jn.prototype=Object.assign(Object.create(Sr),{constructor:jn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hn.prototype=Object.assign(Object.create(Sr),{constructor:Hn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vn.prototype=Object.assign(Object.create(Sr),{constructor:Vn,ValueTypeName:"color"}),Gn.prototype=Sr,Sr.constructor=Gn,Object.assign(Gn,{parse:function(t){if(void 0===t.type)throw Error("track type undefined, can not parse");var e=Gn._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];Er.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{var e={name:t.name,times:Er.convertArray(t.times,Array),values:Er.convertArray(t.values,Array)},n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zn;case"vector":case"vector2":case"vector3":case"vector4":return Fn;case"color":return Vn;case"quaternion":return Bn;case"bool":case"boolean":return Hn;case"string":return jn}throw Error("Unsupported typeName: "+t)}}),Wn.prototype={constructor:Wn,resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e)var i=this.tracks[e],t=Math.max(t,i.times[i.times.length-1]);this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Wn,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,s=n.length;r!==s;++r)e.push(Gn.parse(n[r]).scale(i));return new Wn(t.name,t.duration,e)},toJSON:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e};for(var i=0,r=n.length;i!==r;++i)e.push(Gn.toJSON(n[i]));return t},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,s=[],a=0;a<r;a++){var o=[],c=[];o.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);var u=Er.getKeyframeOrder(o),o=Er.sortedArray(o,1,u),c=Er.sortedArray(c,1,u);i||0!==o[0]||(o.push(r),c.push(c[0])),s.push(new zn(".morphTargetInfluences["+e[a].name+"]",o,c).scale(1/n))}return new Wn(t,-1,s)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,s=0,a=t.length;s<a;s++){var o=t[s],c=o.name.match(r);if(c&&1<c.length){var u=c[1];(c=i[u])||(i[u]=c=[]),c.push(o)}}t=[];for(u in i)t.push(Wn.CreateFromMorphTargetSequence(u,i[u],e,n));return t},parseAnimation:function(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var s=[],a=[];Er.flattenJSON(n,s,a,i),0!==s.length&&r.push(new t(e,s,a))}},i=[],r=t.name||"default",s=t.length||-1,a=t.fps||30,o=t.hierarchy||[],c=0;c<o.length;c++){var u=o[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var s={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var l=0;l<u[h].morphTargets.length;l++)s[u[h].morphTargets[l]]=-1;for(var p in s){for(var f=[],d=[],l=0;l!==u[h].morphTargets.length;++l){var g=u[h];f.push(g.time),d.push(g.morphTarget===p?1:0)}i.push(new zn(".morphTargetInfluence["+p+"]",f,d))}s=s.length*(a||1)}else h=".bones["+e[c].name+"]",n(Fn,h+".position",u,"pos",i),n(Bn,h+".quaternion",u,"rot",i),n(Fn,h+".scale",u,"scl",i)}return 0===i.length?null:new Wn(r,s,i)}}),Object.assign(qn.prototype,{load:function(t,e,n,i){var r=this;new vn(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,r=new xr[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new n).fromArray(s)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var s=0,a=t.materials.length;s<a;s++)r.materials.push(this.parse(t.materials[s]));return r}}),Object.assign(Xn.prototype,{load:function(t,e,n,i){var r=this;new vn(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new wt,n=t.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==n&&(n=new i[n.type](n.array),e.setIndex(new ht(n,1)));var r,s=t.data.attributes;for(r in s){var a=s[r],n=new i[a.type](a.array);e.addAttribute(r,new ht(n,a.itemSize,a.normalized))}if(void 0!==(i=t.data.groups||t.data.drawcalls||t.data.offsets))for(r=0,n=i.length;r!==n;++r)s=i[r],e.addGroup(s.start,s.count,s.materialIndex);return t=t.data.boundingSphere,void 0!==t&&(i=new c,void 0!==t.center&&i.fromArray(t.center),e.boundingSphere=new J(i,t.radius)),e}}),Yn.prototype={constructor:Yn,crossOrigin:void 0,extractUrlBase:function(t){return t=t.split("/"),1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var t,e,n;return function(i,r,s){function a(t,n,i,a,o){t=r+t;var u=Yn.Handlers.get(t);return null!==u?t=u.load(t):(e.setCrossOrigin(s),t=e.load(t)),void 0!==n&&(t.repeat.fromArray(n),1!==n[0]&&(t.wrapS=1e3),1!==n[1]&&(t.wrapT=1e3)),void 0!==i&&t.offset.fromArray(i),void 0!==a&&("repeat"===a[0]&&(t.wrapS=1e3),"mirror"===a[0]&&(t.wrapS=1002),"repeat"===a[1]&&(t.wrapT=1e3),"mirror"===a[1]&&(t.wrapT=1002)),void 0!==o&&(t.anisotropy=o),n=nr.generateUUID(),c[n]=t,n}void 0===t&&(t=new H),void 0===e&&(e=new wn),void 0===n&&(n=new qn);var o,c={},u={uuid:nr.generateUUID(),type:"MeshLambertMaterial"};for(o in i){var h=i[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=Ki[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=a(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=a(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=a(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=a(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=a(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=a(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=a(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=a(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=a(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=a(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=1;break;case"doubleSided":u.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[o]=h;break;case"vertexColors":!0===h&&(u.vertexColors=2),"face"===h&&(u.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,1>u.opacity&&(u.transparent=!0),n.setTextures(c),n.parse(u)}}()},Yn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n+1];if(e[n].test(t))return r}return null}},Object.assign(Zn.prototype,{load:function(t,e,n,i){var r=this,s=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Yn.prototype.extractUrlBase(t),a=new vn(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(n){n=JSON.parse(n);var i=n.metadata;if(void 0!==i&&void 0!==(i=i.type)){if("object"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}n=r.parse(n,s),e(n.geometry,n.materials)},n,i)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var i=new bt,s=void 0!==t.scale?1/t.scale:1;return function(e){var r,s,a,o,u,h,l,p,f,d,g,m,v,y=t.faces;h=t.vertices;var _=t.normals,x=t.colors,b=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&b++;for(r=0;r<b;r++)i.faceVertexUvs[r]=[]}for(o=0,u=h.length;o<u;)r=new c,r.x=h[o++]*e,r.y=h[o++]*e,r.z=h[o++]*e,i.vertices.push(r);for(o=0,u=y.length;o<u;)if(e=y[o++],f=1&e,a=2&e,r=8&e,l=16&e,d=32&e,h=64&e,e&=128,f){if(f=new ct,f.a=y[o],f.b=y[o+1],f.c=y[o+3],g=new ct,g.a=y[o+1],g.b=y[o+2],g.c=y[o+3],o+=4,a&&(a=y[o++],f.materialIndex=a,g.materialIndex=a),a=i.faces.length,r)for(r=0;r<b;r++)for(m=t.uvs[r],i.faceVertexUvs[r][a]=[],i.faceVertexUvs[r][a+1]=[],s=0;4>s;s++)p=y[o++],v=m[2*p],p=m[2*p+1],v=new n(v,p),2!==s&&i.faceVertexUvs[r][a].push(v),0!==s&&i.faceVertexUvs[r][a+1].push(v);if(l&&(l=3*y[o++],f.normal.set(_[l++],_[l++],_[l]),g.normal.copy(f.normal)),d)for(r=0;4>r;r++)l=3*y[o++],d=new c(_[l++],_[l++],_[l]),2!==r&&f.vertexNormals.push(d),0!==r&&g.vertexNormals.push(d);if(h&&(h=y[o++],h=x[h],f.color.setHex(h),g.color.setHex(h)),e)for(r=0;4>r;r++)h=y[o++],h=x[h],2!==r&&f.vertexColors.push(new H(h)),0!==r&&g.vertexColors.push(new H(h));i.faces.push(f),i.faces.push(g)}else{if(f=new ct,f.a=y[o++],f.b=y[o++],f.c=y[o++],a&&(a=y[o++],f.materialIndex=a),a=i.faces.length,r)for(r=0;r<b;r++)for(m=t.uvs[r],i.faceVertexUvs[r][a]=[],s=0;3>s;s++)p=y[o++],v=m[2*p],p=m[2*p+1],v=new n(v,p),i.faceVertexUvs[r][a].push(v);if(l&&(l=3*y[o++],f.normal.set(_[l++],_[l++],_[l])),d)for(r=0;3>r;r++)l=3*y[o++],d=new c(_[l++],_[l++],_[l]),f.vertexNormals.push(d);if(h&&(h=y[o++],f.color.setHex(x[h])),e)for(r=0;3>r;r++)h=y[o++],f.vertexColors.push(new H(x[h]));i.faces.push(f)}}(s),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,s=t.skinWeights.length;n<s;n+=e)i.skinWeights.push(new r(t.skinWeights[n],1<e?t.skinWeights[n+1]:0,2<e?t.skinWeights[n+2]:0,3<e?t.skinWeights[n+3]:0));if(t.skinIndices)for(n=0,s=t.skinIndices.length;n<s;n+=e)i.skinIndices.push(new r(t.skinIndices[n],1<e?t.skinIndices[n+1]:0,2<e?t.skinIndices[n+2]:0,3<e?t.skinIndices[n+3]:0));i.bones=t.bones,i.bones&&0<i.bones.length&&(i.skinWeights.length!==i.skinIndices.length||i.skinIndices.length!==i.vertices.length)&&console.warn("When skinning, number of vertices ("+i.vertices.length+"), skinIndices ("+i.skinIndices.length+"), and skinWeights ("+i.skinWeights.length+") should match.")}(),function(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){i.morphTargets[n]={},i.morphTargets[n].name=t.morphTargets[n].name,i.morphTargets[n].vertices=[];for(var s=i.morphTargets[n].vertices,a=t.morphTargets[n].vertices,o=0,u=a.length;o<u;o+=3){var h=new c;h.x=a[o]*e,h.y=a[o+1]*e,h.z=a[o+2]*e,s.push(h)}}if(void 0!==t.morphColors&&0<t.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),e=i.faces,s=t.morphColors[0].colors,n=0,r=e.length;n<r;n++)e[n].color.fromArray(s,3*n)}(s),function(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var s=Wn.parseAnimation(n[r],i.bones);s&&e.push(s)}i.morphTargets&&(n=Wn.CreateClipsFromMorphTargetSequences(i.morphTargets,10),e=e.concat(n)),0<e.length&&(i.animations=e)}(),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:i}:(s=Yn.prototype.initMaterials(t.materials,e,this.crossOrigin),{geometry:i,materials:s})}}),Object.assign($n.prototype,{load:function(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new vn(r.manager).load(t,function(n){var i=null;try{i=JSON.parse(n)}catch(e){return void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}n=i.metadata,void 0===n||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):r.parse(i,e)},n,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),i=this.parseImages(t.images,function(){void 0!==e&&e(r)}),i=this.parseTextures(t.textures,i),i=this.parseMaterials(t.materials,i),r=this.parseObject(t.object,n,i);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new Zn,i=new Xn,r=0,s=t.length;r<s;r++){var a,o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new _r[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new _r[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new _r[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new _r[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new _r[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new _r[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new _r[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new _r[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new _r[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new _r[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new _r[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":a=i.parse(o);break;case"Geometry":a=n.parse(o.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),e[o.uuid]=a}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new qn;i.setTextures(e);for(var r=0,s=t.length;r<s;r++){var a=i.parse(t[r]);n[a.uuid]=a}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=Wn.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){var n=this,i={};if(void 0!==t&&0<t.length){var r=new mn(e),s=new xn(r);s.setCrossOrigin(this.crossOrigin);for(var r=0,a=t.length;r<a;r++){var o=t[r],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o.url)?o.url:n.texturePath+o.url;i[o.uuid]=function(t){return n.manager.itemStart(t),s.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t)})}(c)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var s=0,a=t.length;s<a;s++){var o=t[s];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var c=new i(e[o.image]);c.needsUpdate=!0,c.uuid=o.uuid,void 0!==o.name&&(c.name=o.name),void 0!==o.mapping&&(c.mapping=n(o.mapping,Qi)),void 0!==o.offset&&c.offset.fromArray(o.offset),void 0!==o.repeat&&c.repeat.fromArray(o.repeat),void 0!==o.wrap&&(c.wrapS=n(o.wrap[0],tr),c.wrapT=n(o.wrap[1],tr)),void 0!==o.minFilter&&(c.minFilter=n(o.minFilter,er)),void 0!==o.magFilter&&(c.magFilter=n(o.magFilter,er)),void 0!==o.anisotropy&&(c.anisotropy=o.anisotropy),void 0!==o.flipY&&(c.flipY=o.flipY),r[o.uuid]=c}return r},parseObject:function(){var t=new u;return function(e,n,i){function r(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function s(t){if(void 0!==t)return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}var a;switch(e.type){case"Scene":a=new ie,void 0!==e.background&&Number.isInteger(e.background)&&(a.background=new H(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new ne(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ee(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new At(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ct(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":a=new Rn(e.color,e.intensity);break;case"DirectionalLight":a=new Pn(e.color,e.intensity);break;case"PointLight":a=new Cn(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":a=new An(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Sn(e.color,e.groundColor,e.intensity);break;case"Mesh":a=r(e.geometry);var o=s(e.material);a=a.bones&&0<a.bones.length?new he(a,o):new Et(a,o);break;case"LOD":a=new oe;break;case"Line":a=new pe(r(e.geometry),s(e.material),e.mode);break;case"LineSegments":a=new fe(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":a=new ge(r(e.geometry),s(e.material));break;case"Sprite":a=new ae(s(e.material));break;case"Group":a=new me;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:a=new st}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.children)for(var c in e.children)a.add(this.parseObject(e.children[c],n,i));if("LOD"===e.type)for(e=e.levels,o=0;o<e.length;o++){var u=e[o];c=a.getObjectByProperty("uuid",u.object),void 0!==c&&a.addLevel(c,u.distance)}return a}}()}),Jn.prototype={constructor:Jn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){return t=this.getUtoTmapping(t),this.getPoint(t)},getPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),s+=e.distanceTo(r),i.push(s),r=e;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i,r=this.getLengths(),s=r.length;i=e||t*r[s-1];for(var a,o=0,c=s-1;o<=c;)if(n=Math.floor(o+(c-o)/2),0>(a=r[n]-i))o=n+1;else{if(!(0<a)){c=n;break}c=n-1}return n=c,r[n]===i?n/(s-1):(o=r[n],(n+(i-o)/(r[n+1]-o))/(s-1))},getTangent:function(t){var e=t-1e-4;return t+=1e-4,0>e&&(e=0),1<t&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var n,i,r=new c,s=[],a=[],o=[],h=new c,l=new u;for(n=0;n<=t;n++)i=n/t,s[n]=this.getTangentAt(i),s[n].normalize();a[0]=new c,o[0]=new c,n=Number.MAX_VALUE,i=Math.abs(s[0].x);var p=Math.abs(s[0].y),f=Math.abs(s[0].z);for(i<=n&&(n=i,r.set(1,0,0)),p<=n&&(n=p,r.set(0,1,0)),f<=n&&r.set(0,0,1),h.crossVectors(s[0],r).normalize(),a[0].crossVectors(s[0],h),o[0].crossVectors(s[0],a[0]),n=1;n<=t;n++)a[n]=a[n-1].clone(),o[n]=o[n-1].clone(),h.crossVectors(s[n-1],s[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(nr.clamp(s[n-1].dot(s[n]),-1,1)),a[n].applyMatrix4(l.makeRotationAxis(h,r))),o[n].crossVectors(s[n],a[n]);if(!0===e)for(r=Math.acos(nr.clamp(a[0].dot(a[t]),-1,1)),r/=t,0<s[0].dot(h.crossVectors(a[0],a[t]))&&(r=-r),n=1;n<=t;n++)a[n].applyMatrix4(l.makeRotationAxis(s[n],r*n)),o[n].crossVectors(s[n],a[n]);return{tangents:s,normals:a,binormals:o}}},Jn.create=function(t,e){return t.prototype=Object.create(Jn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Kn.prototype=Object.create(Jn.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isLineCurve=!0,Kn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Kn.prototype.getPointAt=function(t){return this.getPoint(t)},Kn.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},Qn.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Qn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Kn(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths();for(t=0;t<n.length;){if(n[t]>=e)return e=n[t]-e,t=this.curves[t],n=t.getLength(),t.getPointAt(0===n?0:1-e/n);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){t||(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var s=r[i],s=s.getPoints(s&&s.isEllipseCurve?2*t:s&&s.isLineCurve?1:s&&s.isSplineCurve?t*s.points.length:t),a=0;a<s.length;a++){var o=s[a];e&&e.equals(o)||(n.push(o),e=o)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){return t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){for(var e=new bt,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new c(r.x,r.y,r.z||0))}return e}}),ti.prototype=Object.create(Jn.prototype),ti.prototype.constructor=ti,ti.prototype.isEllipseCurve=!0,ti.prototype.getPoint=function(t){for(var e=2*Math.PI,i=this.aEndAngle-this.aStartAngle,r=Math.abs(i)<Number.EPSILON;0>i;)i+=e;for(;i>e;)i-=e;i<Number.EPSILON&&(i=r?0:e),!0!==this.aClockwise||r||(i=i===e?-e:i-e),e=this.aStartAngle+t*i,t=this.aX+this.xRadius*Math.cos(e);var s=this.aY+this.yRadius*Math.sin(e);return 0!==this.aRotation&&(e=Math.cos(this.aRotation),i=Math.sin(this.aRotation),r=t-this.aX,s-=this.aY,t=r*e-s*i+this.aX,s=r*i+s*e+this.aY),new n(t,s)};var Tr={tangentQuadraticBezier:function(t,e,n,i){return 2*(1-t)*(n-e)+2*t*(i-n)},tangentCubicBezier:function(t,e,n,i,r){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*i*(1-t)-3*t*t*i+3*t*t*r},tangentSpline:function(t,e,n,i,r){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},interpolate:function(t,e,n,i,r){t=.5*(n-t),i=.5*(i-e);var s=r*r;return(2*e-2*n+t+i)*r*s+(-3*e+3*n-2*t-i)*s+t*r+e}};ei.prototype=Object.create(Jn.prototype),ei.prototype.constructor=ei,ei.prototype.isSplineCurve=!0,ei.prototype.getPoint=function(t){var e=this.points;t*=e.length-1;var i=Math.floor(t);t-=i;var r=e[0===i?i:i-1],s=e[i],a=e[i>e.length-2?e.length-1:i+1],e=e[i>e.length-3?e.length-1:i+2],i=Tr.interpolate;return new n(i(r.x,s.x,a.x,e.x,t),i(r.y,s.y,a.y,e.y,t))},ni.prototype=Object.create(Jn.prototype),ni.prototype.constructor=ni,ni.prototype.getPoint=function(t){var e=yr.b3;return new n(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},ni.prototype.getTangent=function(t){var e=Tr.tangentCubicBezier;return new n(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ii.prototype=Object.create(Jn.prototype),ii.prototype.constructor=ii,ii.prototype.getPoint=function(t){var e=yr.b2;return new n(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},ii.prototype.getTangent=function(t){var e=Tr.tangentQuadraticBezier;return new n(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()};var Mr=Object.assign(Object.create(Qn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Kn(this.currentPoint.clone(),new n(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,r){t=new ii(this.currentPoint.clone(),new n(t,e),new n(i,r)),this.curves.push(t),this.currentPoint.set(i,r)},bezierCurveTo:function(t,e,i,r,s,a){t=new ni(this.currentPoint.clone(),new n(t,e),new n(i,r),new n(s,a)),this.curves.push(t),this.currentPoint.set(s,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),e=new ei(e);this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,s){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s)},absarc:function(t,e,n,i,r,s){this.absellipse(t,e,n,n,i,r,s)},ellipse:function(t,e,n,i,r,s,a,o){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,s,a,o)},absellipse:function(t,e,n,i,r,s,a,o){t=new ti(t,e,n,i,r,s,a,o),0<this.curves.length&&(e=t.getPoint(0),e.equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)}});ri.prototype=Object.assign(Object.create(Mr),{constructor:ri,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),si.prototype=Mr,Mr.constructor=si,ai.prototype={moveTo:function(t,e){this.currentPath=new si,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,s){this.currentPath.bezierCurveTo(t,e,n,i,r,s)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],s=new ri;s.curves=r.curves,e.push(s)}return e}var i=yr.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return n(r);var s,a,o,c=[];if(1===r.length)return a=r[0],o=new ri,o.curves=a.curves,c.push(o),c;var u=!i(r[0].getPoints()),u=t?!u:u;o=[];var h,l=[],p=[],f=0;l[f]=void 0,p[f]=[];for(var d=0,g=r.length;d<g;d++)a=r[d],h=a.getPoints(),s=i(h),(s=t?!s:s)?(!u&&l[f]&&f++,l[f]={s:new ri,p:h},l[f].s.curves=a.curves,u&&f++,p[f]=[]):p[f].push({h:a,p:h[0]});if(!l[0])return n(r);if(1<l.length){for(d=!1,a=[],i=0,r=l.length;i<r;i++)o[i]=[];for(i=0,r=l.length;i<r;i++)for(s=p[i],u=0;u<s.length;u++){for(f=s[u],h=!0,g=0;g<l.length;g++)(function(t,e){for(var n=e.length,i=!1,r=n-1,s=0;s<n;r=s++){var a=e[r],o=e[s],c=o.x-a.x,u=o.y-a.y;if(Math.abs(u)>Number.EPSILON){if(0>u&&(a=e[s],c=-c,o=e[r],u=-u),!(t.y<a.y||t.y>o.y))if(t.y===a.y){if(t.x===a.x)return!0}else{if(0===(r=u*(t.x-a.x)-c*(t.y-a.y)))return!0;0>r||(i=!i)}}else if(t.y===a.y&&(o.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=o.x))return!0}return i})(f.p,l[g].p)&&(i!==g&&a.push({froms:i,tos:g,hole:u}),h?(h=!1,o[g].push(f)):d=!0);h&&o[i].push(f)}0<a.length&&(d||(p=o))}for(d=0,i=l.length;d<i;d++)for(o=l[d].s,c.push(o),a=p[d],r=0,s=a.length;r<s;r++)o.holes.push(a[r].h);return c}},Object.assign(oi.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);var i=this.data;t=String(t).split("");var r=e/i.resolution,s=0;e=[];for(var a=0;a<t.length;a++){var o;o=r;var c=s,u=i.glyphs[t[a]]||i.glyphs["?"];if(u){var h,l,p,f,d,g,m,v,y=new ai,_=[],x=yr.b2,b=yr.b3;if(u.o)for(var w=u._cachedOutline||(u._cachedOutline=u.o.split(" ")),E=0,S=w.length;E<S;)switch(w[E++]){case"m":h=w[E++]*o+c,l=w[E++]*o,y.moveTo(h,l);break;case"l":h=w[E++]*o+c,l=w[E++]*o,y.lineTo(h,l);break;case"q":if(h=w[E++]*o+c,l=w[E++]*o,d=w[E++]*o+c,g=w[E++]*o,y.quadraticCurveTo(d,g,h,l),f=_[_.length-1]){p=f.x,f=f.y;for(var T=1;T<=n;T++){var M=T/n;x(M,p,d,h),x(M,f,g,l)}}break;case"b":if(h=w[E++]*o+c,l=w[E++]*o,d=w[E++]*o+c,g=w[E++]*o,m=w[E++]*o+c,v=w[E++]*o,y.bezierCurveTo(d,g,m,v,h,l),f=_[_.length-1])for(p=f.x,f=f.y,T=1;T<=n;T++)M=T/n,b(M,p,d,m,h),b(M,f,g,v,l)}o={offset:u.ha*o,path:y}}else o=void 0;s+=o.offset,e.push(o.path)}for(n=[],i=0,t=e.length;i<t;i++)Array.prototype.push.apply(n,e[i].toShapes());return n}}),Object.assign(ci.prototype,{load:function(t,e,n,i){var r=this;new vn(this.manager).load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=r.parse(n),e&&e(t)},n,i)},parse:function(t){return new oi(t)}});var Ar,Cr={getContext:function(){return void 0===Ar&&(Ar=new(window.AudioContext||window.webkitAudioContext)),Ar},setContext:function(t){Ar=t}};Object.assign(ui.prototype,{load:function(t,e,n,i){var r=new vn(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){Cr.getContext().decodeAudioData(t,function(t){e(t)})},n,i)}}),hi.prototype=Object.assign(Object.create(En.prototype),{constructor:hi,isRectAreaLight:!0,copy:function(t){return En.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this}}),Object.assign(li.prototype,{update:function(){var t,e,n,i,r,s,a,o=new u,c=new u;return function(u){if(t!==this||e!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||s!==u.far||a!==u.zoom){t=this,e=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,s=u.far,a=u.zoom;var h,l=u.projectionMatrix.clone(),p=this.eyeSep/2,f=p*r/e,d=r*Math.tan(nr.DEG2RAD*n*.5)/a;c.elements[12]=-p,o.elements[12]=p,p=-d*i+f,h=d*i+f,l.elements[0]=2*r/(h-p),l.elements[8]=(h+p)/(h-p),this.cameraL.projectionMatrix.copy(l),p=-d*i-f,h=d*i-f,l.elements[0]=2*r/(h-p),l.elements[8]=(h+p)/(h-p),this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(o)}}()}),pi.prototype=Object.create(st.prototype),pi.prototype.constructor=pi,fi.prototype=Object.assign(Object.create(st.prototype),{constructor:fi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new c,e=new o,n=new c,i=new c;return function(r){st.prototype.updateMatrixWorld.call(this,r),r=this.context.listener;var s=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),r.positionX?(r.positionX.setValueAtTime(t.x,this.context.currentTime),r.positionY.setValueAtTime(t.y,this.context.currentTime),r.positionZ.setValueAtTime(t.z,this.context.currentTime),r.forwardX.setValueAtTime(i.x,this.context.currentTime),r.forwardY.setValueAtTime(i.y,this.context.currentTime),r.forwardZ.setValueAtTime(i.z,this.context.currentTime),r.upX.setValueAtTime(s.x,this.context.currentTime),r.upY.setValueAtTime(s.y,this.context.currentTime),r.upZ.setValueAtTime(s.z,this.context.currentTime)):(r.setPosition(t.x,t.y,t.z),r.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z))}}()}),di.prototype=Object.assign(Object.create(st.prototype),{constructor:di,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),gi.prototype=Object.assign(Object.create(di.prototype),{constructor:gi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new c;return function(e){st.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(mi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),vi.prototype={constructor:vi,accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,s=this.cumulativeWeight;if(0===s){for(s=0;s!==i;++s)n[r+s]=n[s];s=e}else s+=e,this._mixBufferRegion(n,r,0,e/s,i);this.cumulativeWeight=s},apply:function(t){var e=this.valueSize,n=this.buffer;t=t*e+e;var i=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>i&&this._mixBufferRegion(n,t,3*e,1-i,e);for(var i=e,s=e+e;i!==s;++i)if(n[i]!==n[i+e]){r.setValue(n,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var i=e;i!==n;++i)t[i]=t[n+i%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,i,r){if(.5<=i)for(i=0;i!==r;++i)t[e+i]=t[n+i]},_slerp:function(t,e,n,i,r){o.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var s=1-i,a=0;a!==r;++a){var o=e+a;t[o]=t[o]*s+t[n+a]*i}}},yi.prototype={constructor:yi,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=yi.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var s=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);for(t=t.skeleton.bones,n=0;n<t.length;n++)if(t[n].name===s){s=n;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==s){if(void 0===t[s])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[s]}}if(void 0===(s=t[i]))console.error("  trying to update property for track: "+e.nodeName+"."+i+" but it wasn't found.",t);else{if(e=this.Versioning.None,void 0!==t.needsUpdate?(e=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t),n=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(n=0;n<this.node.geometry.morphTargets.length;n++)if(t.geometry.morphTargets[n].name===r){r=n;break}}n=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(n=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][e]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(yi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:yi.prototype.getValue,_setValue_unbound:yi.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),yi.Composite=function(t,e,n){n=n||yi.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)},yi.Composite.prototype={constructor:yi.Composite,getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},yi.create=function(t,e,n){return t&&t.isAnimationObjectGroup?new yi.Composite(t,e,n):new yi(t,e,n)},yi.parseTrackName=function(t){var e=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(t);if(!e)throw Error("cannot parse trackName at all: "+t);if(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},null===e.propertyName||0===e.propertyName.length)throw Error("can not parse propertyName from trackName: "+t);return e},yi.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var i=t.bones[n];if(i.name===e)return i}return null}(t.skeleton);if(n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e||(r=i(r.children)))return r}return null};if(n=i(t.children))return n}return null},_i.prototype={constructor:_i,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,s=this._paths,a=this._parsedPaths,o=this._bindings,c=o.length,u=0,h=arguments.length;u!==h;++u){var l=arguments[u],p=l.uuid,f=r[p];if(void 0===f){f=n++,r[p]=f,e.push(l);for(var p=0,d=c;p!==d;++p)o[p].push(new yi(l,s[p],a[p]))}else if(f<i){var g=--i,d=e[g];for(r[d.uuid]=f,e[f]=d,r[p]=g,e[g]=l,p=0,d=c;p!==d;++p){var m=o[p],v=m[f];m[f]=m[g],void 0===v&&(v=new yi(l,s[p],a[p])),m[g]=v}}else void 0!==e[f]&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=i},remove:function(t){for(var e=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,s=r.length,a=0,o=arguments.length;a!==o;++a){var c=arguments[a],u=c.uuid,h=i[u];if(void 0!==h&&h>=n){var l=n++,p=e[l];for(i[p.uuid]=h,e[h]=p,i[u]=l,e[l]=c,c=0,u=s;c!==u;++c){var p=r[c],f=p[h];p[h]=p[l],p[l]=f}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,s=this._bindings,a=s.length,o=0,c=arguments.length;o!==c;++o){var u=arguments[o].uuid,h=r[u];if(void 0!==h)if(delete r[u],h<i){var u=--i,l=e[u],p=--n,f=e[p];for(r[l.uuid]=h,e[h]=l,r[f.uuid]=u,e[u]=f,e.pop(),l=0,f=a;l!==f;++l){var d=s[l],g=d[p];d[h]=d[u],d[u]=g,d.pop()}}else for(p=--n,f=e[p],r[f.uuid]=h,e[h]=f,e.pop(),l=0,f=a;l!==f;++l)d=s[l],d[h]=d[p],d.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var s=this._paths,a=this._parsedPaths,o=this._objects,c=this.nCachedObjects_,u=Array(o.length),i=r.length;for(n[t]=i,s.push(t),a.push(e),r.push(u),n=c,i=o.length;n!==i;++n)u[n]=new yi(o[n],t,e);return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];e[t[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}},xi.prototype={constructor:xi,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){n=this._clip.duration;var i=t._clip.duration,r=n/i;t.warp(1,i/n,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,s=this._timeScaleInterpolant,a=this.timeScale;return null===s&&(this._timeScaleInterpolant=s=i._lendControlInterpolant()),i=s.parameterPositions,s=s.sampleValues,i[0]=r,i[1]=r+n,s[0]=t/a,s[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){var r=this._startTime;if(null!==r){if(0>(e=(t-r)*n)||0===n)return;this._startTime=null,e*=n}if(e*=this._updateTimeScale(t),n=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants;for(var r=this._propertyBindings,s=0,a=e.length;s!==a;++s)e[s].evaluate(n),r[s].accumulate(i,t)}},_updateWeight:function(t){var e=0;if(this.enabled){var e=this.weight,n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0],e=e*i;t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){var e=this.timeScale,n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(t)[0],e=e*i;t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i)t:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=n)e=n;else{if(!(0>e))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(i=2202===i,-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),e>=n||0>e){var s=Math.floor(e/n),e=e-n*s,r=r+Math.abs(s),a=this.repetitions-r;0>a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(0===a?(t=0>t,this._setEndings(t,!t,i)):this._setEndings(!1,!1,i),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s}))}if(i&&1==(1&r))return this.time=e,n-e}return this.time=e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,s=this._weightInterpolant;return null===s&&(this._weightInterpolant=s=i._lendControlInterpolant()),i=s.parameterPositions,s=s.sampleValues,i[0]=r,s[0]=e,i[1]=r+t,s[1]=n,this}},Object.assign(bi.prototype,e.prototype,{clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Wn.findByName(n,t):t,n=null!==r?r.uuid:t,s=this._actionsByClip[n],a=null;if(void 0!==s){if(void 0!==(a=s.actionByRoot[i]))return a;a=s.knownActions[0],null===r&&(r=a._clip)}return null===r?null:(r=new xi(this,r,e),this._bindAction(r,a),this._addInactiveAction(r,n,i),r)},existingAction:function(t,e){var n=e||this._root,i=n.uuid,n="string"==typeof t?Wn.findByName(n,t):t,n=this._actionsByClip[n?n.uuid:t];return void 0!==n?n.actionByRoot[i]||null:null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),s=this._accuIndex^=1,a=0;a!==n;++a){var o=e[a];o.enabled&&o._update(i,t,r,s)}for(t=this._bindings,e=this._nActiveBindings,a=0;a!==e;++a)t[a].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var n=this._actionsByClip,i=n[t];if(void 0!==i){for(var i=i.knownActions,r=0,s=i.length;r!==s;++r){var a=i[r];this._deactivateAction(a);var o=a._cacheIndex,c=e[e.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,c._cacheIndex=o,e[o]=c,e.pop(),this._removeInactiveBindingsForAction(a)}delete n[t]}},uncacheRoot:function(t){t=t.uuid;var e,n=this._actionsByClip;for(e in n){var i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}if(void 0!==(e=this._bindingsByRootAndName[t]))for(var r in e)t=e[r],t.restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(bi.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,s=t._propertyBindings,a=t._interpolants,o=n.uuid,c=this._bindingsByRootAndName,u=c[o];for(void 0===u&&(u={},c[o]=u),c=0;c!==r;++c){var h=i[c],l=h.name,p=u[l];if(void 0===p){if(void 0!==(p=s[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,o,l));continue}p=new vi(yi.create(n,l,e&&e._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,l)}s[c]=p,a[c].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,s=r[e];void 0===s?(s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=s):(e=s.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=i.length,i.push(t),s.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var n=t._clip.uuid,i=this._actionsByClip,r=i[n],s=r.knownActions,a=s[s.length-1],o=t._byClipCacheIndex;a._byClipCacheIndex=o,s[o]=a,s.pop(),t._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete i[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){t=t._propertyBindings;for(var e=0,n=t.length;e!==n;++e){var i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],s=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,n=n.path,r=this._bindingsByRootAndName,s=r[i],a=e[e.length-1];t=t._cacheIndex,a._cacheIndex=t,e[t]=a,e.pop(),delete s[n];t:{for(var o in s)break t;delete r[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new On(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),wi.prototype.clone=function(){return new wi(void 0===this.value.clone?this.value:this.value.clone())},Ei.prototype=Object.create(wt.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isInstancedBufferGeometry=!0,Ei.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n})},Ei.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n,e=t.attributes;for(n in e)this.addAttribute(n,e[n].clone());for(t=t.groups,n=0,e=t.length;n<e;n++){var i=t[n];this.addGroup(i.start,i.count,i.materialIndex)}return this},Si.prototype={constructor:Si,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},Ti.prototype={constructor:Ti,isInterleavedBuffer:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}},Mi.prototype=Object.create(Ti.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isInstancedInterleavedBuffer=!0,Mi.prototype.copy=function(t){return Ti.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Ai.prototype=Object.create(ht.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isInstancedBufferAttribute=!0,Ai.prototype.copy=function(t){return ht.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Ci.prototype={constructor:Ci,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var n=[];return Pi(t,this,n,e),n.sort(Li),n},intersectObjects:function(t,e){var n=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=t.length;i<r;i++)Pi(t[i],this,n,e);return n.sort(Li),n}},Ri.prototype={constructor:Ri,start:function(){this.oldTime=this.startTime=(performance||Date).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now(),t=(e-this.oldTime)/1e3;this.oldTime=e,this.elapsedTime+=t}return t}},Ii.prototype={constructor:Ii,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(nr.clamp(t.y/this.radius,-1,1))),this}},ki.prototype={constructor:ki,set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}},Oi.prototype=Object.create(Et.prototype),Oi.prototype.constructor=Oi,Oi.prototype.createAnimation=function(t,e,n,i){e={start:e,end:n,length:n-e+1,fps:i,duration:(n-e)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[t]=e,this.animationsList.push(e)},Oi.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,s=0,a=r.morphTargets.length;s<a;s++){var o=r.morphTargets[s].name.match(n);if(o&&1<o.length){var c=o[1];i[c]||(i[c]={start:1/0,end:-1/0}),o=i[c],s<o.start&&(o.start=s),s>o.end&&(o.end=s),e||(e=c)}}for(c in i)o=i[c],this.createAnimation(c,o.start,o.end,t);this.firstAnimation=e},Oi.prototype.setAnimationDirectionForward=function(t){(t=this.animationsMap[t])&&(t.direction=1,t.directionBackwards=!1)},Oi.prototype.setAnimationDirectionBackward=function(t){(t=this.animationsMap[t])&&(t.direction=-1,t.directionBackwards=!0)},Oi.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},Oi.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},Oi.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},Oi.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},Oi.prototype.getAnimationTime=function(t){var e=0;return(t=this.animationsMap[t])&&(e=t.time),e},Oi.prototype.getAnimationDuration=function(t){var e=-1;return(t=this.animationsMap[t])&&(e=t.duration),e},Oi.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Oi.prototype.stopAnimation=function(t){(t=this.animationsMap[t])&&(t.active=!1)},Oi.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var i=this.animationsList[e];if(i.active){var r=i.duration/i.length;i.time+=i.direction*t,i.mirroredLoop?(i.time>i.duration||0>i.time)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),0>i.time&&(i.time=0,i.directionBackwards=!1)):(i.time%=i.duration,0>i.time&&(i.time+=i.duration));var s=i.start+nr.clamp(Math.floor(i.time/r),0,i.length-1),a=i.weight;s!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*a,this.morphTargetInfluences[s]=0,i.lastFrame=i.currentFrame,i.currentFrame=s),r=i.time%r/r,i.directionBackwards&&(r=1-r),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=r*a,this.morphTargetInfluences[i.lastFrame]=(1-r)*a):this.morphTargetInfluences[i.currentFrame]=a}}},Ni.prototype=Object.create(st.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isImmediateRenderObject=!0,Di.prototype=Object.create(fe.prototype),Di.prototype.constructor=Di,Di.prototype.update=function(){var t=new c,e=new c,n=new K;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var o=a.vertices,c=a.faces,u=a=0,h=c.length;u<h;u++)for(var l=c[u],p=0,f=l.vertexNormals.length;p<f;p++){var d=l.vertexNormals[p];t.copy(o[l[i[p]]]).applyMatrix4(r),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),s.setXYZ(a,t.x,t.y,t.z),a+=1,s.setXYZ(a,e.x,e.y,e.z),a+=1}else if(a&&a.isBufferGeometry)for(i=a.attributes.position,o=a.attributes.normal,p=a=0,f=i.count;p<f;p++)t.set(i.getX(p),i.getY(p),i.getZ(p)).applyMatrix4(r),e.set(o.getX(p),o.getY(p),o.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),s.setXYZ(a,t.x,t.y,t.z),a+=1,s.setXYZ(a,e.x,e.y,e.z),a+=1;return s.needsUpdate=!0,this}}(),Fi.prototype=Object.create(st.prototype),Fi.prototype.constructor=Fi,Fi.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Fi.prototype.update=function(){var t=new c,e=new c;return function(){var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Ui.prototype=Object.create(fe.prototype),Ui.prototype.constructor=Ui,Ui.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},Ui.prototype.update=function(){var t=new c,e=new u,n=new u;return function(){var i=this.geometry,r=i.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,a=0;s<this.bones.length;s++){var o=this.bones[s];o.parent&&o.parent.isBone&&(e.multiplyMatrices(n,o.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(a,t.x,t.y,t.z),e.multiplyMatrices(n,o.parent.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(a+1,t.x,t.y,t.z),a+=2)}i.getAttribute("position").needsUpdate=!0}}(),Bi.prototype=Object.create(Et.prototype),Bi.prototype.constructor=Bi,Bi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Bi.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},zi.prototype=Object.create(st.prototype),zi.prototype.constructor=zi,zi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},zi.prototype.update=function(){var t=new c,e=new c;return function(){var n=this.children[0],i=this.children[1];if(this.light.target){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld);var r=e.clone().sub(t);n.lookAt(r),i.lookAt(r)}n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var i=.5*this.light.width,r=.5*this.light.height,n=n.geometry.getAttribute("position"),s=n.array;s[0]=i,s[1]=-r,s[2]=0,s[3]=i,s[4]=r,s[5]=0,s[6]=-i,s[7]=r,s[8]=0,s[9]=-i,s[10]=r,s[11]=0,s[12]=-i,s[13]=-r,s[14]=0,s[15]=i,s[16]=-r,s[17]=0,n.needsUpdate=!0}}(),ji.prototype=Object.create(st.prototype),ji.prototype.constructor=ji,ji.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ji.prototype.update=function(){var t=new c,e=new H,n=new H;return function(){var i=this.children[0],r=i.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),n.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var s=0,a=r.count;s<a;s++){var o=s<a/2?e:n;r.setXYZ(s,o.r,o.g,o.b)}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),r.needsUpdate=!0}}(),Hi.prototype=Object.create(fe.prototype),Hi.prototype.constructor=Hi,Vi.prototype=Object.create(fe.prototype),Vi.prototype.constructor=Vi,Gi.prototype=Object.create(fe.prototype),Gi.prototype.constructor=Gi,Gi.prototype.update=function(){var t=new c,e=new c,n=new K;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,a=s.vertices,s=s.faces,o=0,c=0,u=s.length;c<u;c++){var h=s[c],l=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),e.copy(l).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(o,t.x,t.y,t.z),o+=1,r.setXYZ(o,e.x,e.y,e.z),o+=1}return r.needsUpdate=!0,this}}(),Wi.prototype=Object.create(st.prototype),Wi.prototype.constructor=Wi,Wi.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},Wi.prototype.update=function(){var t=new c,e=new c,n=new c;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var i=this.children[0],r=this.children[1];i.lookAt(n),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(n),r.scale.z=n.length()}}(),qi.prototype=Object.create(fe.prototype),qi.prototype.constructor=qi,qi.prototype.update=function(){function t(t,s,a,o){if(i.set(s,a,o).unproject(r),void 0!==(t=n[t]))for(s=e.getAttribute("position"),a=0,o=t.length;a<o;a++)s.setXYZ(t[a],i.x,i.y,i.z)}var e,n,i=new c,r=new Mt;return function(){e=this.geometry,n=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Xi.prototype=Object.create(fe.prototype),Xi.prototype.constructor=Xi,Xi.prototype.update=function(){var t=new $;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){e=t.min;var n=t.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Lr=new wt;Lr.addAttribute("position",new yt([0,0,0,0,1,0],3));var Pr=new Ke(0,.5,1,5,1);Pr.translate(0,-.5,0),Yi.prototype=Object.create(st.prototype),Yi.prototype.constructor=Yi,Yi.prototype.setDirection=function(){var t,e=new c;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),Yi.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Yi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Zi.prototype=Object.create(fe.prototype),Zi.prototype.constructor=Zi;var Rr=function(){function t(){}var e=new c,n=new t,i=new t,r=new t;return t.prototype.init=function(t,e,n,i){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-i,this.c3=2*t-2*e+n+i},t.prototype.initNonuniformCatmullRom=function(t,e,n,i,r,s,a){this.init(e,n,((e-t)/r-(n-t)/(r+s)+(n-e)/s)*s,((n-e)/s-(i-e)/(s+a)+(i-n)/a)*s)},t.prototype.initCatmullRom=function(t,e,n,i,r){this.init(e,n,r*(n-t),r*(i-e))},t.prototype.calc=function(t){var e=t*t;return this.c0+this.c1*t+this.c2*e+this.c3*e*t},Jn.create(function(t){this.points=t||[],this.closed=!1},function(t){var s,a,o=this.points;a=o.length,2>a&&console.log("duh, you need at least 2 points"),t*=a-(this.closed?0:1),s=Math.floor(t),t-=s,this.closed?s+=0<s?0:(Math.floor(Math.abs(s)/o.length)+1)*o.length:0===t&&s===a-1&&(s=a-2,t=1);var u,h,l;if(this.closed||0<s?u=o[(s-1)%a]:(e.subVectors(o[0],o[1]).add(o[0]),u=e),h=o[s%a],l=o[(s+1)%a],this.closed||s+2<a?o=o[(s+2)%a]:(e.subVectors(o[a-1],o[a-2]).add(o[a-1]),o=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var p="chordal"===this.type?.5:.25;a=Math.pow(u.distanceToSquared(h),p),s=Math.pow(h.distanceToSquared(l),p),p=Math.pow(l.distanceToSquared(o),p),1e-4>s&&(s=1),1e-4>a&&(a=s),1e-4>p&&(p=s),n.initNonuniformCatmullRom(u.x,h.x,l.x,o.x,a,s,p),i.initNonuniformCatmullRom(u.y,h.y,l.y,o.y,a,s,p),r.initNonuniformCatmullRom(u.z,h.z,l.z,o.z,a,s,p)}else"catmullrom"===this.type&&(a=void 0!==this.tension?this.tension:.5,n.initCatmullRom(u.x,h.x,l.x,o.x,a),i.initCatmullRom(u.y,h.y,l.y,o.y,a),r.initCatmullRom(u.z,h.z,l.z,o.z,a));return new c(n.calc(t),i.calc(t),r.calc(t))})}(),Ir=Jn.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===t?[]:t},function(t){var e=this.points;t*=e.length-1;var n=Math.floor(t);t-=n;var i=e[0==n?n:n-1],r=e[n],s=e[n>e.length-2?e.length-1:n+1],e=e[n>e.length-3?e.length-1:n+2],n=Tr.interpolate;return new c(n(i.x,r.x,s.x,e.x,t),n(i.y,r.y,s.y,e.y,t),n(i.z,r.z,s.z,e.z,t))}),kr=Jn.create(function(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i},function(t){var e=yr.b3;return new c(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),Or=Jn.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(t){var e=yr.b2;return new c(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),Nr=Jn.create(function(t,e){this.v1=t,this.v2=e},function(t){if(1===t)return this.v2.clone();var e=new c;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e});$i.prototype=Object.create(ti.prototype),$i.prototype.constructor=$i,Ji.prototype=Object.create(Rr.prototype),Hi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(G.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign($.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),at.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},nr.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(K.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)}}),Object.assign(u.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new c),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)}}),Q.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},o.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(nt.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ri.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ze(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new $e(this,t)}}),Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}),bt.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(st.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(st.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(oe.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),At.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(En.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ht.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(wt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(wt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(wi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(X.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new H}}}),Object.defineProperties(ln.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Y.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),e.prototype=Object.assign(Object.create({constructor:e,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),e.prototype),Object.assign(te.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(te.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(et.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(t){t=1!==t,console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(s.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),di.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new ui).load(t,function(t){e.setBuffer(t)}),this},mi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},t.WebGLRenderTargetCube=a,t.WebGLRenderTarget=s,t.WebGLRenderer=te,t.ShaderLib=fr,t.UniformsLib=pr,t.UniformsUtils=ur,t.ShaderChunk=hr,t.FogExp2=ee,t.Fog=ne,t.Scene=ie,t.LensFlare=re,t.Sprite=ae,t.LOD=oe,t.SkinnedMesh=he,t.Skeleton=ce,t.Bone=ue,t.Mesh=Et,t.LineSegments=fe,t.Line=pe,t.Points=ge,t.Group=me,t.VideoTexture=ve,t.DataTexture=V,t.CompressedTexture=ye,t.CubeTexture=h,t.CanvasTexture=_e,t.DepthTexture=xe,t.Texture=i,t.CompressedTextureLoader=yn,t.BinaryTextureLoader=_n,t.DataTextureLoader=_n,t.CubeTextureLoader=bn,t.TextureLoader=wn,t.ObjectLoader=$n,t.MaterialLoader=qn,t.BufferGeometryLoader=Xn,t.DefaultLoadingManager=wr,t.LoadingManager=mn,t.JSONLoader=Zn,t.ImageLoader=xn,t.FontLoader=ci,t.FileLoader=vn,t.Loader=Yn,t.Cache=br,t.AudioLoader=ui,t.SpotLightShadow=Mn,t.SpotLight=An,t.PointLight=Cn,t.RectAreaLight=hi,t.HemisphereLight=Sn,t.DirectionalLightShadow=Ln,t.DirectionalLight=Pn,t.AmbientLight=Rn,t.LightShadow=Tn,t.Light=En,t.StereoCamera=li,t.PerspectiveCamera=At,t.OrthographicCamera=Ct,t.CubeCamera=pi,t.Camera=Mt,t.AudioListener=fi,t.PositionalAudio=gi,t.AudioContext=Cr,t.AudioAnalyser=mi,t.Audio=di,t.VectorKeyframeTrack=Fn,t.StringKeyframeTrack=jn,t.QuaternionKeyframeTrack=Bn,t.NumberKeyframeTrack=zn,t.ColorKeyframeTrack=Vn,t.BooleanKeyframeTrack=Hn,t.PropertyMixer=vi,t.PropertyBinding=yi,t.KeyframeTrack=Gn,t.AnimationUtils=Er,t.AnimationObjectGroup=_i,t.AnimationMixer=bi,t.AnimationClip=Wn,t.Uniform=wi,t.InstancedBufferGeometry=Ei,t.BufferGeometry=wt,t.GeometryIdCount=function(){return mr++},t.Geometry=bt,t.InterleavedBufferAttribute=Si,t.InstancedInterleavedBuffer=Mi,t.InterleavedBuffer=Ti,t.InstancedBufferAttribute=Ai,t.Face3=ct,t.Object3D=st,t.Raycaster=Ci,t.Layers=rt,t.EventDispatcher=e,t.Clock=Ri,t.QuaternionLinearInterpolant=Un,t.LinearInterpolant=On,t.DiscreteInterpolant=Nn,t.CubicInterpolant=kn,t.Interpolant=In,t.Triangle=ot,t.Spline=function(t){function e(t,e,n,i,r,s,a){return t=.5*(n-t),i=.5*(i-e),(2*(e-n)+t+i)*a+(-3*(e-n)-2*t-i)*s+t*r+e}this.points=t;var n,i,r,s,a,o,u,h,l,p=[],f={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,i=Math.floor(n),r=n-i,p[0]=0===i?i:i-1,p[1]=i,p[2]=i>this.points.length-2?this.points.length-1:i+1,p[3]=i>this.points.length-3?this.points.length-1:i+2,o=this.points[p[0]],u=this.points[p[1]],h=this.points[p[2]],l=this.points[p[3]],s=r*r,a=r*s,f.x=e(o.x,u.x,h.x,l.x,r,s,a),f.y=e(o.y,u.y,h.y,l.y,r,s,a),f.z=e(o.z,u.z,h.z,l.z,r,s,a),f},this.getControlPointsArray=function(){var t,e,n=this.points.length,i=[];for(t=0;t<n;t++)e=this.points[t],i[t]=[e.x,e.y,e.z];return i},this.getLength=function(t){var e,n,i,r=0,s=new c,a=new c,o=[],u=0;for(o[0]=0,t||(t=100),n=this.points.length*t,s.copy(this.points[0]),t=1;t<n;t++)e=t/n,i=this.getPoint(e),a.copy(i),u+=a.distanceTo(s),s.copy(i),e*=this.points.length-1,(e=Math.floor(e))!==r&&(o[e]=u,r=e);return o[o.length]=u,{chunks:o,total:u}},this.reparametrizeByArcLength=function(t){var e,n,i,r,s,a,o=[],u=new c,h=this.getLength();for(o.push(u.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(n=h.chunks[e]-h.chunks[e-1],a=Math.ceil(t*n/h.total),r=(e-1)/(this.points.length-1),s=e/(this.points.length-1),n=1;n<a-1;n++)i=r+1/a*n*(s-r),i=this.getPoint(i),o.push(u.copy(i).clone());o.push(u.copy(this.points[e]).clone())}this.points=o}},t.Math=nr,t.Spherical=Ii,t.Cylindrical=ki,t.Plane=Q,t.Frustum=tt,t.Sphere=J,t.Ray=nt,t.Matrix4=u,t.Matrix3=K,t.Box3=$,t.Box2=G,t.Line3=at,t.Euler=it,t.Vector4=r,t.Vector3=c,t.Vector2=n,t.Quaternion=o,t.Color=H,t.MorphBlendMesh=Oi,t.ImmediateRenderObject=Ni,t.VertexNormalsHelper=Di,t.SpotLightHelper=Fi,t.SkeletonHelper=Ui,t.PointLightHelper=Bi,t.RectAreaLightHelper=zi,t.HemisphereLightHelper=ji,t.GridHelper=Hi,t.PolarGridHelper=Vi,t.FaceNormalsHelper=Gi,t.DirectionalLightHelper=Wi,t.CameraHelper=qi,t.BoxHelper=Xi,t.ArrowHelper=Yi,t.AxisHelper=Zi,t.CatmullRomCurve3=Rr,t.SplineCurve3=Ir,t.CubicBezierCurve3=kr,t.QuadraticBezierCurve3=Or,t.LineCurve3=Nr,t.ArcCurve=$i,t.EllipseCurve=ti,t.SplineCurve=ei,t.CubicBezierCurve=ni,t.QuadraticBezierCurve=ii,t.LineCurve=Kn,t.Shape=ri,t.ShapePath=ai,t.Path=si,t.Font=oi,t.CurvePath=Qn,t.Curve=Jn,t.ShapeUtils=yr,t.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new me,i=0,r=e.length;i<r;i++)n.add(new Et(t,e[i]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var i=new u;i.getInverse(n.matrixWorld),t.applyMatrix(i),e.remove(t),n.add(t)}},t.CurveUtils=Tr,t.WireframeGeometry=be,t.ParametricGeometry=Ee,t.ParametricBufferGeometry=we,t.TetrahedronGeometry=Me,t.TetrahedronBufferGeometry=Te,t.OctahedronGeometry=Ce,t.OctahedronBufferGeometry=Ae,t.IcosahedronGeometry=Pe,t.IcosahedronBufferGeometry=Le,t.DodecahedronGeometry=Ie,t.DodecahedronBufferGeometry=Re;t.PolyhedronGeometry=ke,t.PolyhedronBufferGeometry=Se,t.TubeGeometry=Ne,t.TubeBufferGeometry=Oe,t.TorusKnotGeometry=Fe,t.TorusKnotBufferGeometry=De,t.TorusGeometry=Be,t.TorusBufferGeometry=Ue,t.TextGeometry=je,t.SphereBufferGeometry=He,t.SphereGeometry=Ve,t.RingGeometry=We,t.RingBufferGeometry=Ge,t.PlaneBufferGeometry=Tt,t.PlaneGeometry=qe,t.LatheGeometry=Ye,t.LatheBufferGeometry=Xe,t.ShapeGeometry=$e,t.ShapeBufferGeometry=Ze,t.ExtrudeGeometry=ze,t.EdgesGeometry=Je,t.ConeGeometry=tn,t.ConeBufferGeometry=en,t.CylinderGeometry=Qe,t.CylinderBufferGeometry=Ke,t.CircleBufferGeometry=nn,t.CircleGeometry=rn,t.BoxBufferGeometry=St,t.BoxGeometry=sn,t.ShadowMaterial=an,t.SpriteMaterial=se,t.RawShaderMaterial=on,t.ShaderMaterial=Y,t.PointsMaterial=de,t.MultiMaterial=cn,t.MeshPhysicalMaterial=hn,t.MeshStandardMaterial=un,t.MeshPhongMaterial=ln,t.MeshToonMaterial=pn,t.MeshNormalMaterial=fn,t.MeshLambertMaterial=dn,t.MeshDepthMaterial=Z,t.MeshBasicMaterial=ut,t.LineDashedMaterial=gn,t.LineBasicMaterial=le,t.Material=X,t.Float64BufferAttribute=_t,t.Float32BufferAttribute=yt,t.Uint32BufferAttribute=vt,t.Int32BufferAttribute=mt,t.Uint16BufferAttribute=gt,t.Int16BufferAttribute=dt,t.Uint8ClampedBufferAttribute=ft,t.Uint8BufferAttribute=pt,t.Int8BufferAttribute=lt,t.BufferAttribute=ht,t.REVISION="83",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.BlendingMode=Ki,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.TextureMapping=Qi,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.TextureWrapping=tr,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.TextureFilter=er,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=2001,t.RGBA_S3TC_DXT1_Format=2002,t.RGBA_S3TC_DXT3_Format=2003,t.RGBA_S3TC_DXT5_Format=2004,t.RGB_PVRTC_4BPPV1_Format=2100,t.RGB_PVRTC_2BPPV1_Format=2101,t.RGBA_PVRTC_4BPPV1_Format=2102,t.RGBA_PVRTC_2BPPV1_Format=2103,t.RGB_ETC1_Format=2151,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.CubeGeometry=sn,t.Face4=function(t,e,n,i,r,s,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ct(t,e,n,r,s,a)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new cn(t)},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ge(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ae(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ge(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new c(t,e,n)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ht(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new lt(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new pt(t,e)};t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ft(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new dt(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new gt(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new mt(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new vt(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new yt(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new _t(t,e)},t.ClosedSplineCurve3=Ji,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Xi(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new fe(new Je(t.geometry),new le({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new fe(new be(t.geometry),new le({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vn(t)},t.GeometryUtils={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new wn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,n,void 0,i),e&&(t.mapping=e),t},loadTextureCube:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new bn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,n,void 0,i),e&&(t.mapping=e),t},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){THREE.EffectComposer=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=t.getSize();e=new THREE.WebGLRenderTarget(i.width,i.height,n)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t);var e=this.renderer.getSize();t.setSize(e.width,e.height)},insertPass:function(t,e){this.passes.splice(e,0,t)},render:function(t){var e,n,i=!1,r=this.passes.length;for(n=0;n<r;n++)if(e=this.passes[n],!1!==e.enabled){if(e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var s=this.renderer.context;s.stencilFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),s.stencilFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(e instanceof THREE.MaskPass?i=!0:e instanceof THREE.ClearMaskPass&&(i=!1))}},reset:function(t){if(void 0===t){var e=this.renderer.getSize();t=this.renderTarget1.clone(),t.setSize(e.width,e.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(t,e)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(t,e){},render:function(t,e,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})},function(t,e){THREE.MaskPass=function(t,e){THREE.Pass.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1},THREE.MaskPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.MaskPass,render:function(t,e,n,i,r){var s=t.context,a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0);var o,c;this.inverse?(o=0,c=1):(o=1,c=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),a.buffers.stencil.setClear(c),t.render(this.scene,this.camera,n,this.clear),t.render(this.scene,this.camera,e,this.clear),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setFunc(s.EQUAL,1,4294967295),a.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),THREE.ClearMaskPass=function(){THREE.Pass.call(this),this.needsSwap=!1},THREE.ClearMaskPass.prototype=Object.create(THREE.Pass.prototype),Object.assign(THREE.ClearMaskPass.prototype,{render:function(t,e,n,i,r){t.state.buffers.stencil.setTest(!1)}})},function(t,e){THREE.RenderPass=function(t,e,n,i,r){THREE.Pass.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(t,e,n,i,r){var s=t.autoClear;t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var a,o;this.clearColor&&(a=t.getClearColor().getHex(),o=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&t.setClearColor(a,o),this.scene.overrideMaterial=null,t.autoClear=s}})},function(t,e){THREE.SSAARenderPass=function(t,e,n,i){THREE.Pass.call(this),this.scene=t,this.camera=e,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==i?i:0,void 0===THREE.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader");var r=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(r.uniforms),this.copyMaterial=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new THREE.Scene,this.quad2=new THREE.Mesh(new THREE.PlaneGeometry(2,2),this.copyMaterial),this.scene2.add(this.quad2)},THREE.SSAARenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(t,e){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(t,e)},render:function(t,e,n,i,r){this.sampleRenderTarget||(this.sampleRenderTarget=new THREE.WebGLRenderTarget(n.width,n.height,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}));var s=THREE.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],a=t.autoClear;t.autoClear=!1;var o=t.getClearColor().getHex(),c=t.getClearAlpha(),u=1/s.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var h=n.width,l=n.height,p=0;p<s.length;p++){var f=s[p];this.camera.setViewOffset&&this.camera.setViewOffset(h,l,.0625*f[0],.0625*f[1],h,l);var d=u;if(this.unbiased){d+=1/32*((p+.5)/s.length-.5)}this.copyUniforms.opacity.value=d,t.setClearColor(this.clearColor,this.clearAlpha),t.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===p&&t.setClearColor(0,0),t.render(this.scene2,this.camera2,this.renderToScreen?null:e,0===p)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=a,t.setClearColor(o,c)}}),THREE.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},function(t,e){THREE.ShaderPass=function(t,e){THREE.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof THREE.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=THREE.UniformsUtils.clone(t.uniforms),this.material=new THREE.ShaderMaterial({defines:t.defines||{},uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(t,e,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?t.render(this.scene,this.camera):t.render(this.scene,this.camera,e,this.clear)}})},function(t,e){THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},function(t,e){THREE.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new THREE.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")}},function(t,e,n){var i,r;(function(){function s(t){function e(e,n,i,r,s,a){for(;s>=0&&a>s;s+=t){var o=r?r[s]:s;i=n(i,e[o],o,e)}return i}return function(n,i,r,s){i=S(i,s,4);var a=!R(n)&&E.keys(n),o=(a||n).length,c=t>0?0:o-1;return arguments.length<3&&(r=n[a?a[c]:c],c+=t),e(n,i,r,a,c,o)}}function a(t){return function(e,n,i){n=T(n,i);for(var r=P(e),s=t>0?0:r-1;s>=0&&r>s;s+=t)if(n(e[s],s,e))return s;return-1}}function o(t,e,n){return function(i,r,s){var a=0,o=P(i);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(n&&s&&o)return s=n(i,r),i[s]===r?s:-1;if(r!==r)return s=e(g.call(i,a,o),E.isNaN),s>=0?s+a:-1;for(s=t>0?a:o-1;s>=0&&o>s;s+=t)if(i[s]===r)return s;return-1}}function c(t,e){var n=D.length,i=t.constructor,r=E.isFunction(i)&&i.prototype||p,s="constructor";for(E.has(t,s)&&!E.contains(e,s)&&e.push(s);n--;)(s=D[n])in t&&t[s]!==r[s]&&!E.contains(e,s)&&e.push(s)}var u=this,h=u._,l=Array.prototype,p=Object.prototype,f=Function.prototype,d=l.push,g=l.slice,m=p.toString,v=p.hasOwnProperty,y=Array.isArray,_=Object.keys,x=f.bind,b=Object.create,w=function(){},E=function(t){return t instanceof E?t:this instanceof E?void(this._wrapped=t):new E(t)};void 0!==t&&t.exports&&(e=t.exports=E),e._=E,E.VERSION="1.8.3";var S=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}},T=function(t,e,n){return null==t?E.identity:E.isFunction(t)?S(t,e,n):E.isObject(t)?E.matcher(t):E.property(t)};E.iteratee=function(t,e){return T(t,e,1/0)};var M=function(t,e){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var s=arguments[r],a=t(s),o=a.length,c=0;o>c;c++){var u=a[c];e&&void 0!==n[u]||(n[u]=s[u])}return n}},A=function(t){if(!E.isObject(t))return{};if(b)return b(t);w.prototype=t;var e=new w;return w.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},L=Math.pow(2,53)-1,P=C("length"),R=function(t){var e=P(t);return"number"==typeof e&&e>=0&&L>=e};E.each=E.forEach=function(t,e,n){e=S(e,n);var i,r;if(R(t))for(i=0,r=t.length;r>i;i++)e(t[i],i,t);else{var s=E.keys(t);for(i=0,r=s.length;r>i;i++)e(t[s[i]],s[i],t)}return t},E.map=E.collect=function(t,e,n){e=T(e,n);for(var i=!R(t)&&E.keys(t),r=(i||t).length,s=Array(r),a=0;r>a;a++){var o=i?i[a]:a;s[a]=e(t[o],o,t)}return s},E.reduce=E.foldl=E.inject=s(1),E.reduceRight=E.foldr=s(-1),E.find=E.detect=function(t,e,n){var i;return i=R(t)?E.findIndex(t,e,n):E.findKey(t,e,n),void 0!==i&&-1!==i?t[i]:void 0},E.filter=E.select=function(t,e,n){var i=[];return e=T(e,n),E.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i},E.reject=function(t,e,n){return E.filter(t,E.negate(T(e)),n)},E.every=E.all=function(t,e,n){e=T(e,n);for(var i=!R(t)&&E.keys(t),r=(i||t).length,s=0;r>s;s++){var a=i?i[s]:s;if(!e(t[a],a,t))return!1}return!0},E.some=E.any=function(t,e,n){e=T(e,n);for(var i=!R(t)&&E.keys(t),r=(i||t).length,s=0;r>s;s++){var a=i?i[s]:s;if(e(t[a],a,t))return!0}return!1},E.contains=E.includes=E.include=function(t,e,n,i){return R(t)||(t=E.values(t)),("number"!=typeof n||i)&&(n=0),E.indexOf(t,e,n)>=0},E.invoke=function(t,e){var n=g.call(arguments,2),i=E.isFunction(e);return E.map(t,function(t){var r=i?e:t[e];return null==r?r:r.apply(t,n)})},E.pluck=function(t,e){return E.map(t,E.property(e))},E.where=function(t,e){return E.filter(t,E.matcher(e))},E.findWhere=function(t,e){return E.find(t,E.matcher(e))},E.max=function(t,e,n){var i,r,s=-1/0,a=-1/0;if(null==e&&null!=t){t=R(t)?t:E.values(t);for(var o=0,c=t.length;c>o;o++)(i=t[o])>s&&(s=i)}else e=T(e,n),E.each(t,function(t,n,i){((r=e(t,n,i))>a||r===-1/0&&s===-1/0)&&(s=t,a=r)});return s},E.min=function(t,e,n){var i,r,s=1/0,a=1/0;if(null==e&&null!=t){t=R(t)?t:E.values(t);for(var o=0,c=t.length;c>o;o++)i=t[o],s>i&&(s=i)}else e=T(e,n),E.each(t,function(t,n,i){r=e(t,n,i),(a>r||1/0===r&&1/0===s)&&(s=t,a=r)});return s},E.shuffle=function(t){for(var e,n=R(t)?t:E.values(t),i=n.length,r=Array(i),s=0;i>s;s++)e=E.random(0,s),e!==s&&(r[s]=r[e]),r[e]=n[s];return r},E.sample=function(t,e,n){return null==e||n?(R(t)||(t=E.values(t)),t[E.random(t.length-1)]):E.shuffle(t).slice(0,Math.max(0,e))},E.sortBy=function(t,e,n){return e=T(e,n),E.pluck(E.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var I=function(t){return function(e,n,i){var r={};return n=T(n,i),E.each(e,function(i,s){var a=n(i,s,e);t(r,i,a)}),r}};E.groupBy=I(function(t,e,n){E.has(t,n)?t[n].push(e):t[n]=[e]}),E.indexBy=I(function(t,e,n){t[n]=e}),E.countBy=I(function(t,e,n){E.has(t,n)?t[n]++:t[n]=1}),E.toArray=function(t){return t?E.isArray(t)?g.call(t):R(t)?E.map(t,E.identity):E.values(t):[]},E.size=function(t){return null==t?0:R(t)?t.length:E.keys(t).length},E.partition=function(t,e,n){e=T(e,n);var i=[],r=[];return E.each(t,function(t,n,s){(e(t,n,s)?i:r).push(t)}),[i,r]},E.first=E.head=E.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:E.initial(t,t.length-e)},E.initial=function(t,e,n){return g.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},E.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:E.rest(t,Math.max(0,t.length-e))},E.rest=E.tail=E.drop=function(t,e,n){return g.call(t,null==e||n?1:e)},E.compact=function(t){return E.filter(t,E.identity)};var k=function(t,e,n,i){for(var r=[],s=0,a=i||0,o=P(t);o>a;a++){var c=t[a];if(R(c)&&(E.isArray(c)||E.isArguments(c))){e||(c=k(c,e,n));var u=0,h=c.length;for(r.length+=h;h>u;)r[s++]=c[u++]}else n||(r[s++]=c)}return r};E.flatten=function(t,e){return k(t,e,!1)},E.without=function(t){return E.difference(t,g.call(arguments,1))},E.uniq=E.unique=function(t,e,n,i){E.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=T(n,i));for(var r=[],s=[],a=0,o=P(t);o>a;a++){var c=t[a],u=n?n(c,a,t):c;e?(a&&s===u||r.push(c),s=u):n?E.contains(s,u)||(s.push(u),r.push(c)):E.contains(r,c)||r.push(c)}return r},E.union=function(){return E.uniq(k(arguments,!0,!0))},E.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=P(t);r>i;i++){var s=t[i];if(!E.contains(e,s)){for(var a=1;n>a&&E.contains(arguments[a],s);a++);a===n&&e.push(s)}}return e},E.difference=function(t){var e=k(arguments,!0,!0,1);return E.filter(t,function(t){return!E.contains(e,t)})},E.zip=function(){return E.unzip(arguments)},E.unzip=function(t){for(var e=t&&E.max(t,P).length||0,n=Array(e),i=0;e>i;i++)n[i]=E.pluck(t,i);return n},E.object=function(t,e){for(var n={},i=0,r=P(t);r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},E.findIndex=a(1),E.findLastIndex=a(-1),E.sortedIndex=function(t,e,n,i){n=T(n,i,1);for(var r=n(e),s=0,a=P(t);a>s;){var o=Math.floor((s+a)/2);n(t[o])<r?s=o+1:a=o}return s},E.indexOf=o(1,E.findIndex,E.sortedIndex),E.lastIndexOf=o(-1,E.findLastIndex),E.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;i>s;s++,t+=n)r[s]=t;return r};var O=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=A(t.prototype),a=t.apply(s,r);return E.isObject(a)?a:s};E.bind=function(t,e){if(x&&t.bind===x)return x.apply(t,g.call(arguments,1));if(!E.isFunction(t))throw new TypeError("Bind must be called on a function");var n=g.call(arguments,2),i=function(){return O(t,i,e,this,n.concat(g.call(arguments)))};return i},E.partial=function(t){var e=g.call(arguments,1),n=function(){for(var i=0,r=e.length,s=Array(r),a=0;r>a;a++)s[a]=e[a]===E?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return O(t,n,this,this,s)};return n},E.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=E.bind(t[n],t);return t},E.memoize=function(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return E.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n},E.delay=function(t,e){var n=g.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},E.defer=E.partial(E.delay,E,1),E.throttle=function(t,e,n){var i,r,s,a=null,o=0;n||(n={});var c=function(){o=!1===n.leading?0:E.now(),a=null,s=t.apply(i,r),a||(i=r=null)};return function(){var u=E.now();o||!1!==n.leading||(o=u);var h=e-(u-o);return i=this,r=arguments,0>=h||h>e?(a&&(clearTimeout(a),a=null),o=u,s=t.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(c,h)),s}},E.debounce=function(t,e,n){var i,r,s,a,o,c=function(){var u=E.now()-a;e>u&&u>=0?i=setTimeout(c,e-u):(i=null,n||(o=t.apply(s,r),i||(s=r=null)))};return function(){s=this,r=arguments,a=E.now();var u=n&&!i;return i||(i=setTimeout(c,e)),u&&(o=t.apply(s,r),s=r=null),o}},E.wrap=function(t,e){return E.partial(e,t)},E.negate=function(t){return function(){return!t.apply(this,arguments)}},E.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},E.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},E.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},E.once=E.partial(E.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];E.keys=function(t){if(!E.isObject(t))return[];if(_)return _(t);var e=[];for(var n in t)E.has(t,n)&&e.push(n);return N&&c(t,e),e},E.allKeys=function(t){if(!E.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&c(t,e),e},E.values=function(t){for(var e=E.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},E.mapObject=function(t,e,n){e=T(e,n);for(var i,r=E.keys(t),s=r.length,a={},o=0;s>o;o++)i=r[o],a[i]=e(t[i],i,t);return a},E.pairs=function(t){for(var e=E.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},E.invert=function(t){for(var e={},n=E.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},E.functions=E.methods=function(t){var e=[];for(var n in t)E.isFunction(t[n])&&e.push(n);return e.sort()},E.extend=M(E.allKeys),E.extendOwn=E.assign=M(E.keys),E.findKey=function(t,e,n){e=T(e,n);for(var i,r=E.keys(t),s=0,a=r.length;a>s;s++)if(i=r[s],e(t[i],i,t))return i},E.pick=function(t,e,n){var i,r,s={},a=t;if(null==a)return s;E.isFunction(e)?(r=E.allKeys(a),i=S(e,n)):(r=k(arguments,!1,!1,1),i=function(t,e,n){return e in n},a=Object(a));for(var o=0,c=r.length;c>o;o++){var u=r[o],h=a[u];i(h,u,a)&&(s[u]=h)}return s},E.omit=function(t,e,n){if(E.isFunction(e))e=E.negate(e);else{var i=E.map(k(arguments,!1,!1,1),String);e=function(t,e){return!E.contains(i,e)}}return E.pick(t,e,n)},E.defaults=M(E.allKeys,!0),E.create=function(t,e){var n=A(t);return e&&E.extendOwn(n,e),n},E.clone=function(t){return E.isObject(t)?E.isArray(t)?t.slice():E.extend({},t):t},E.tap=function(t,e){return e(t),t},E.isMatch=function(t,e){var n=E.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;i>s;s++){var a=n[s];if(e[a]!==r[a]||!(a in r))return!1}return!0};var F=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof E&&(t=t._wrapped),e instanceof E&&(e=e._wrapped);var r=m.call(t);if(r!==m.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,o=e.constructor;if(a!==o&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===t)return i[c]===e;if(n.push(t),i.push(e),s){if((c=t.length)!==e.length)return!1;for(;c--;)if(!F(t[c],e[c],n,i))return!1}else{var u,h=E.keys(t);if(c=h.length,E.keys(e).length!==c)return!1;for(;c--;)if(u=h[c],!E.has(e,u)||!F(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0};E.isEqual=function(t,e){return F(t,e)},E.isEmpty=function(t){return null==t||(R(t)&&(E.isArray(t)||E.isString(t)||E.isArguments(t))?0===t.length:0===E.keys(t).length)},E.isElement=function(t){return!(!t||1!==t.nodeType)},E.isArray=y||function(t){return"[object Array]"===m.call(t)},E.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},E.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){E["is"+t]=function(e){return m.call(e)==="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(t){return E.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(E.isFunction=function(t){return"function"==typeof t||!1}),E.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},E.isNaN=function(t){return E.isNumber(t)&&t!==+t},E.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===m.call(t)},E.isNull=function(t){return null===t},E.isUndefined=function(t){return void 0===t},E.has=function(t,e){return null!=t&&v.call(t,e)},E.noConflict=function(){return u._=h,this},E.identity=function(t){return t},E.constant=function(t){return function(){return t}},E.noop=function(){},E.property=C,E.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},E.matcher=E.matches=function(t){return t=E.extendOwn({},t),function(e){return E.isMatch(e,t)}},E.times=function(t,e,n){var i=Array(Math.max(0,t));e=S(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},E.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},E.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=E.invert(U),z=function(t){var e=function(e){return t[e]},n="(?:"+E.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};E.escape=z(U),E.unescape=z(B),E.result=function(t,e,n){var i=null==t?void 0:t[e];return void 0===i&&(i=n),E.isFunction(i)?i.call(t):i};var j=0;E.uniqueId=function(t){var e=++j+"";return t?t+e:e},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,W=function(t){return"\\"+V[t]};E.template=function(t,e,n){!e&&n&&(e=n),e=E.defaults({},e,E.templateSettings);var i=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,function(e,n,i,a,o){return s+=t.slice(r,o).replace(G,W),r=o+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(s+="';\n"+a+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var a=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var o=function(t){return a.call(this,t,E)};return o.source="function("+(e.variable||"obj")+"){\n"+s+"}",o},E.chain=function(t){var e=E(t);return e._chain=!0,e};var q=function(t,e){return t._chain?E(e).chain():e};E.mixin=function(t){E.each(E.functions(t),function(e){var n=E[e]=t[e];E.prototype[e]=function(){var t=[this._wrapped];return d.apply(t,arguments),q(this,n.apply(E,t))}})},E.mixin(E),E.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];E.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],q(this,n)}}),E.each(["concat","join","slice"],function(t){var e=l[t];E.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),E.prototype.value=function(){return this._wrapped},E.prototype.valueOf=E.prototype.toJSON=E.prototype.value,E.prototype.toString=function(){return""+this._wrapped},n(29)&&(i=[],void 0!==(r=function(){return E}.apply(e,i))&&(t.exports=r))}).call(this)},function(t,e,n){var i=n(19),r=n(49);r.Decorators=i.Decorators,t.exports=r},function(t,e,n){(function(t){var e,e,n=new Blob(["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=='function'&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error('Cannot find module ');throw f.code='MODULE_NOT_FOUND',f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=='function'&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require('./TypedNeuQuant.js');var LZWEncoder=require('./LZWEncoder.js');function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv='';for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither='FloydSteinberg';this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes('GIF89a')};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace('-serpentine',''),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw'Unknown dithering kernel: '+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes('NETSCAPE2.0');this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{'./LZWEncoder.js':2,'./TypedNeuQuant.js':3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require('./GIFEncoder.js');renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{'./GIFEncoder.js':1}]},{},[4]);"]),i=window.URL.createObjectURL(n);!function(n){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this,r.GIF=function(){return function t(n,i,r){function s(o,c){if(!i[o]){if(!n[o]){var u="function"==typeof e&&e;if(!c&&u)return e(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[o]={exports:{}};n[o][0].call(l.exports,function(t){var e=n[o][1][t];return s(e||t)},l,l.exports,t,n,i,r)}return i[o].exports}for(var a="function"==typeof e&&e,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function s(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!s(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,s,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s);return!0},i.prototype.addListener=function(t,e){var n;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var n,i,s,o;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(o=s;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){i=o;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){var i,r,s,a,o;o=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),i=o.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],s="ie"===i[1]&&document.documentMode,r={name:"version"===i[1]?i[3]:i[1],version:s||parseFloat("opera"===i[1]&&i[4]?i[4]:i[2]),platform:{name:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}},r[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,e.exports=r},{}],3:[function(t,e,n){var r,s,a,o=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},h=[].slice;r=t("events").EventEmitter,a=t("./browser.coffee"),s=function(t){function e(t){var e,i,r;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t);for(i in n)r=n[i],null==(e=this.options)[i]&&(e[i]=r)}var n,r;return o(e,t),n={workerScript:i,workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},r={delay:500,copy:!1},e.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},e.prototype.setOptions=function(t){var e,n,i;n=[];for(e in t)c.call(t,e)&&(i=t[e],n.push(this.setOption(e,i)));return n},e.prototype.addFrame=function(t,e){var n,i;null==e&&(e={}),n={},n.transparent=this.options.transparent;for(i in r)n[i]=e[i]||r[i];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},e.prototype.render=function(){var t,e,n,i;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,n,i;for(i=[],t=e=0,n=this.frames.length;0<=n?e<n:e>n;t=0<=n?++e:--e)i.push(null);return i}.call(this),n=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=e=0,i=n;0<=i?e<i:e>i;t=0<=i?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},e.prototype.abort=function(){for(var t;;){if(null==(t=this.activeWorkers.shift()))break;this.log("killing active worker"),t.terminate()}return this.running=!1,this.emit("abort")},e.prototype.spawnWorkers=function(){var t,e,n;return t=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var i=e=this.freeWorkers.length;e<=t?i<t:i>t;e<=t?i++:i--)n.push(i);return n}.apply(this).forEach(function(t){return function(e){var n;return t.log("spawning worker "+e),n=new Worker(t.options.workerScript),n.onmessage=function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(n),1),t.freeWorkers.push(n),t.frameFinished(e.data)},t.freeWorkers.push(n)}}(this)),t},e.prototype.frameFinished=function(t){var e,n;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,n=this.freeWorkers.length;1<=n?e<n:e>n;1<=n?++e:--e)this.renderNextFrame();return u.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},e.prototype.finishRendering=function(){var t,e,n,i,r,s,a,o,c,u,h,l,p,f,d,g;for(o=0,f=this.imageParts,r=0,c=f.length;r<c;r++)e=f[r],o+=(e.data.length-1)*e.pageSize+e.cursor;for(o+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(o/1e3)+"kb"),t=new Uint8Array(o),l=0,d=this.imageParts,s=0,u=d.length;s<u;s++)for(e=d[s],g=e.data,n=a=0,h=g.length;a<h;n=++a)p=g[n],t.set(p,l),n===e.data.length-1?l+=e.cursor:l+=e.pageSize;return i=new Blob([t],{type:"image/gif"}),this.emit("finished",i,t)},e.prototype.renderNextFrame=function(){var t,e,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(e)},e.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},e.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),e=this._canvas.getContext("2d"),e.setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},e.prototype.getTask=function(t){var e,n;if(e=this.frames.indexOf(t),n={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===a.name},null!=t.data)n.data=t.data;else if(null!=t.context)n.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");n.data=this.getImageData(t.image)}return n},e.prototype.log=function(){var t;if(t=1<=arguments.length?h.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},e}(r),e.exports=s},{"./browser.coffee":2,events:1}]},{},[3])(3)}()}()}).call(e,n(46))},function(t,e){function n(t){this.size=0,this.limit=t,this._keymap={}}n.prototype.put=function(t,e){var n={key:t,value:e};if(this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size++},n.prototype.shift=function(){var t=this.head;return t&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),t.newer=t.older=void 0,delete this._keymap[t.key],this.size--),t},n.prototype.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)},t.exports=n},function(t,e){THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(t,e){function n(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=n("DXT1"),s=n("DXT3"),a=n("DXT5"),o=new Int32Array(t,0,31);if(542327876!==o[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),i;if(4&!o[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),i;var c,u=o[21],h=!1;switch(u){case r:c=8,i.format=THREE.RGB_S3TC_DXT1_Format;break;case s:c=16,i.format=THREE.RGBA_S3TC_DXT3_Format;break;case a:c=16,i.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==o[22]&&16711680&o[23]&&65280&o[24]&&255&o[25]&&4278190080&o[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}(u)),i;h=!0,c=64,i.format=THREE.RGBAFormat}i.mipmapCount=1,131072&o[2]&&!1!==e&&(i.mipmapCount=Math.max(1,o[7])),i.isCubemap=!!(512&o[28]),i.width=o[4],i.height=o[3];for(var l=o[1]+4,p=i.width,f=i.height,d=i.isCubemap?6:1,g=0;g<d;g++){for(var m=0;m<i.mipmapCount;m++){if(h)var v=function(t,e,n,i){for(var r=n*i*4,s=new Uint8Array(t,e,r),a=new Uint8Array(r),o=0,c=0,u=0;u<i;u++)for(var h=0;h<n;h++){var l=s[c];c++;var p=s[c];c++;var f=s[c];c++;var d=s[c];c++,a[o]=f,o++,a[o]=p,o++,a[o]=l,o++,a[o]=d,o++}return a}(t,l,p,f),y=v.length;else var y=Math.max(4,p)/4*Math.max(4,f)/4*c,v=new Uint8Array(t,l,y);var _={data:v,width:p,height:f};i.mipmaps.push(_),l+=y,p=Math.max(.5*p,1),f=Math.max(.5*f,1)}p=i.width,f=i.height}return i}},function(t,e,n){"use strict";!function(t){var e={vertexShader:["attribute float id;","","uniform float size;","uniform float scale;","uniform float baseId;","","varying vec4 worldId;","","void main() {","  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","  gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","  float i = baseId + id;","  vec3 a = fract(vec3(1.0/255.0, 1.0/(255.0*255.0), 1.0/(255.0*255.0*255.0)) * i);","  a -= a.xxy * vec3(0.0, 1.0/255.0, 1.0/255.0);","  worldId = vec4(a,1);","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#ifdef GL_ES\n","precision highp float;\n","#endif\n","","varying vec4 worldId;","","void main() {","  gl_FragColor = worldId;","}"].join("\n")},n=function(){t.ShaderMaterial.call(this,{uniforms:{baseId:{type:"f",value:0},size:{type:"f",value:.01},scale:{type:"f",value:400}},vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})};n.prototype=Object.create(t.ShaderMaterial.prototype),n.prototype.constructor=n,n.prototype.setBaseID=function(t){this.uniforms.baseId.value=t},n.prototype.setPointSize=function(t){this.uniforms.size.value=t},n.prototype.setPointScale=function(t){this.uniforms.scale.value=t},function(e){t.Object3D.prototype.clone=function(t,n){return t=e.call(this,t,n),t.originalObject=this,t.priority=this.priority,t}}(t.Object3D.prototype.clone),t.Mesh.prototype.raycastWithID=function(){var e=new t.Vector3,n=new t.Vector3,i=new t.Vector3,r=new t.Matrix4,s=new t.Ray,a=new t.Triangle;return function(o,c){var u=this.geometry.__pickingGeometry,h=u.attributes;if(r.getInverse(this.matrixWorld),s.copy(c.ray).applyMatrix4(r),void 0!==h.index)console.log("WARNING: raycastWithID does not support indexed vertices");else{var l=h.position.array,p=9*o;e.fromArray(l,p),n.fromArray(l,p+3),i.fromArray(l,p+6)}a.set(e,n,i);var f=s.intersectPlane(a.plane());if(null===f)return void console.log("WARNING: intersectionPoint missing");f.applyMatrix4(this.matrixWorld);var d=c.ray.origin.distanceTo(f);if(!(d<c.near||d>c.far)){return{distance:d,point:f,face:new t.Face3(e,n,i,t.Triangle.normal(e,n,i)),index:o,object:this}}}}(),t.Line.prototype.raycastWithID=function(){var e=new t.Matrix4,n=new t.Ray,i=new t.Vector3,r=new t.Vector3,s=new t.Vector3,a=new t.Vector3;return function(o,c){e.getInverse(this.matrixWorld),n.copy(c.ray).applyMatrix4(e);var u=this.geometry.__pickingGeometry;if(u instanceof t.BufferGeometry){var h=u.attributes;if(void 0===h.index){var l=h.position.array,p=6*o;i.fromArray(l,p),r.fromArray(l,p+3);var f=(n.distanceSqToSegment(i,r,a,s),n.origin.distanceTo(a));if(f<c.near||f>c.far)return;return{distance:f,point:s.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}}console.log("WARNING: raycastWithID does not support indexed vertices")}}}(),t.PointCloud.prototype.raycastWithID=function(){var e=new t.Matrix4,n=new t.Ray;return function(i,r){var s=this,a=s.geometry.__pickingGeometry;e.getInverse(this.matrixWorld),n.copy(r.ray).applyMatrix4(e);var o=new t.Vector3,c=a.attributes,u=c.position.array;return o.fromArray(u,3*i),function(t,e){var i=n.distanceToPoint(t),a=n.closestPointToPoint(t);a.applyMatrix4(s.matrixWorld);var o=r.ray.origin.distanceTo(a);if(!(o<r.near||o>r.far)){return{distance:o,distanceToRay:i,point:a.clone(),index:e,face:null,object:s}}}(o,i)}}(),t.GPUPicker=function(e){void 0===e&&(e={}),this.pickingScene=new t.Scene,this.pickingTexture=new t.WebGLRenderTarget,this.pickingTexture.texture.minFilter=t.LinearFilter,this.pickingTexture.texture.generateMipmaps=!1,this.lineShell=void 0!==e.lineShell?e.lineShell:4,this.pointShell=void 0!==e.pointShell?e.pointShell:.1,this.debug=void 0!==e.debug&&e.debug,this.needUpdate=!0,e.renderer&&this.setRenderer(e.renderer),this.container=[],this.objectsMap={},this.setFilter(),this.sceneScreen=new t.Scene;var n=new t.PlaneBufferGeometry(window.innerWidth,window.innerHeight),i=new t.ShaderMaterial({uniforms:{tDiffuse:{type:"t",value:this.pickingTexture}},vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); }",fragmentShader:"varying vec2 vUv; uniform sampler2D tDiffuse; void main() { gl_FragColor = texture2D( tDiffuse, vUv ); }",depthWrite:!1}),r=new t.Mesh(n,i);r.position.z=-100,this.sceneScreen.add(r),this.cameraRTT=new t.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-1e4,1e4),this.cameraRTT.position.z=100},t.GPUPicker.prototype.setRenderer=function(t){this.renderer=t;var e=t.getSize();this.resizeTexture(e.width,e.height),this.needUpdate=!0},t.GPUPicker.prototype.resizeTexture=function(t,e){this.pickingTexture.setSize(t,e),this.pixelBuffer=new Uint8Array(4*t*e),this.needUpdate=!0},t.GPUPicker.prototype.setCamera=function(t){this.camera=t,this.needUpdate=!0},t.GPUPicker.prototype.update=function(){this.needUpdate&&(this._renderPickingScene(),this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,this.pickingTexture.width,this.pickingTexture.height,this.pixelBuffer),this.needUpdate=!1,this.debug&&console.log("GPUPicker rendering updated"))},t.GPUPicker.prototype.setFilter=function(t){t instanceof Function?this.filterFunc=t:this.filterFunc=function(t){return!0}},t.GPUPicker.prototype.setScene=function(t){this.pickingScene=t,this.needUpdate=!0},t.GPUPicker.prototype.pick=function(t,e){this.update();var n=Math.floor(t.x)+(this.pickingTexture.height-Math.floor(t.y))*this.pickingTexture.width,i=255*this.pixelBuffer[4*n+2]*255+255*this.pixelBuffer[4*n+1]+this.pixelBuffer[4*n+0];this.debug&&console.log("pick id:",i);var r=this._getObject(this.pickingScene,0,i),s=r[1],a=i-r[0];if(s&&s.raycastWithID){var o=s.raycastWithID(a,e);if(o)return o.object=s,o}},t.GPUPicker.prototype.debugRender=function(){this.renderer&&this.renderer.render(this.sceneScreen,this.cameraRTT)},t.GPUPicker.prototype._renderPickingScene=function(){this._setObjectForPicking(this.pickingScene,0,this.filterFunc);var t=this.renderer.getClearColor().getHex();this.renderer.setClearColor(16777215),this.renderer.render(this.pickingScene,this.camera,this.pickingTexture),this.renderer.setClearColor(t),this._restoreObject(this.pickingScene,this.filterFunc)},t.GPUPicker.prototype._isPickable=function(t){return t.geometry&&t.__pickingMaterial&&t.geometry.__pickingGeometry},t.GPUPicker.prototype._setObjectForPicking=function(t,e,n){if(this._isPickable(t)){t.__tempGeometry=t.geometry,t.__tempMaterial=t.material,t.geometry=t.geometry.__pickingGeometry,t.__pickingMaterial.setBaseID(e);var i=t.material.size||.01,r=t.material.linewidth||1;t.__pickingMaterial.linewidth=r+this.lineShell,t.__pickingMaterial.setPointSize(i+this.pointShell),t.__pickingMaterial.setPointScale(this.renderer.getSize().height*this.renderer.getPixelRatio()/2),t.__pickingMaterial.depthWrite=t.material.depthWrite,t.__pickingMaterial.depthTest=t.material.depthTest,t.__pickingMaterial.transparent=t.material.transparent,t.__pickingMaterial.side=t.material.side,void 0!==t.elementsCount&&(e+=t.elementsCount),t.material=t.__pickingMaterial}else t.material&&t.material.visible&&(t.material.visible=!1,t.material.__visibleFlipped=!0);var s=n;n(t)?s=function(){return!0}:t.material&&t.material.visible&&(t.material.visible=!1,t.material.__markVisibleByFilter=!0);for(var a=0;a<t.children.length;a++)e=this._setObjectForPicking(t.children[a],e,s);return e},t.GPUPicker.prototype._restoreObject=function(t,e){var n=e;e(t)?n=function(){return!0}:t.material&&t.material.__markVisibleByFilter&&(t.material.visible=!0,t.material.__markVisibleByFilter=!1),t.__tempGeometry?(t.geometry=t.__tempGeometry,t.material=t.__tempMaterial,t.__tempGeometry=null,t.__tempMaterial=null):t.material&&t.material.__visibleFlipped&&(t.material.visible=!0,t.material.__visibleFlipped=!1);for(var i=0;i<t.children.length;i++)this._restoreObject(t.children[i],n)},t.GPUPicker.prototype._getObject=function(t,e,n){if(void 0!==t.elementsCount&&n>=e&&n<e+t.elementsCount)return[e,t];void 0!==t.elementsCount&&(e+=t.elementsCount);for(var i=[e,void 0],r=0;r<t.children.length&&(i=this._getObject(t.children[r],i[0],n),void 0===i[1]);r++);return i},t.GPUPicker.prototype.processObject=function(t){if(t.getPickingObject){var e=t.getPickingObject();null!=e&&this._addElementID(e)}else{this._addElementID(t);for(var n=0;n<t.children.length;n++)this.processObject(t.children[n])}},t.GPUPicker.prototype._addElementID=function(e){if((e instanceof t.Mesh||e instanceof t.Line||e instanceof t.PointCloud)&&e.geometry){var i;if(e.geometry.__pickingGeometry)i=e.geometry.__pickingGeometry;else{i=e.geometry.clone(),e.geometry instanceof t.Geometry&&(this.debug&&console.log("convert geometry to buffer geometry"),i=(new t.BufferGeometry).setFromObject(e));var r=1;e instanceof t.PointCloud?r=1:e instanceof t.Line?r=2:e instanceof t.Mesh&&(r=3);var s,a,o,c,u,h,l,p,f;if(null!==i.index){for(i=i.clone(),this.debug&&console.log("convert indexed geometry to non-indexed geometry"),u=i.index.array,p=i.attributes.position.array,delete i.attributes.position,i.index=null,delete i.attributes.normal,o=u.length/r,h=new Float32Array(3*o*r),i.addAttribute("position",new t.BufferAttribute(h,3)),s=0;s<o;++s)for(a=r*s,c=0;c<r;++c)f=3*u[a+c],l=3*(a+c),h[l]=p[f],h[l+1]=p[f+1],h[l+2]=p[f+2];i.computeVertexNormals()}if(e instanceof t.Line&&!(e instanceof t.LineSegments)){for(this.debug&&console.log("convert Line to LineSegments"),p=i.attributes.position.array,delete i.attributes.position,o=p.length/3-1,h=new Float32Array(o*r*3),i.addAttribute("position",new t.BufferAttribute(h,3)),s=0;s<o;++s)a=3*s,f=a,l=2*a,h[l]=p[f],h[l+1]=p[f+1],h[l+2]=p[f+2],h[l+3]=p[f+3],h[l+4]=p[f+4],h[l+5]=p[f+5];i.computeVertexNormals()}for(var d=i.attributes,g=d.position.array,m=g.length/3,v=new t.Float32BufferAttribute(m,1),c=0,y=m/r;c<y;c++)for(var _=0;_<r;++_)v.array[c*r+_]=c;i.addAttribute("id",v),i.elementsCount=m/r,e.geometry.__pickingGeometry=i}return e.elementsCount=i.elementsCount,e.__pickingMaterial=new n,e.elementsCount}return 0}}(THREE)},function(t,e){THREE.OBJLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(t,e,n,i){var r=this,s=new THREE.XHRLoader(r.manager);s.setCrossOrigin(this.crossOrigin),s.load(t,function(t){e(r.parse(t))},n,i)},parse:function(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+p.length/3)}function n(t){var e=parseInt(t);return 3*(e>=0?e-1:e+f.length/3)}function i(t){var e=parseInt(t);return 2*(e>=0?e-1:e+d.length/2)}function r(t,e,n){u.vertices.push(p[t],p[t+1],p[t+2],p[e],p[e+1],p[e+2],p[n],p[n+1],p[n+2])}function s(t,e,n){u.normals.push(f[t],f[t+1],f[t+2],f[e],f[e+1],f[e+2],f[n],f[n+1],f[n+2])}function a(t,e,n){u.uvs.push(d[t],d[t+1],d[e],d[e+1],d[n],d[n+1])}function o(t,o,c,u,h,l,p,f,d,g,m,v){var y,_=e(t),x=e(o),b=e(c);void 0===u?r(_,x,b):(y=e(u),r(_,x,y),r(x,b,y)),void 0!==h&&(_=i(h),x=i(l),b=i(p),void 0===u?a(_,x,b):(y=i(f),a(_,x,y),a(x,b,y))),void 0!==d&&(_=n(d),x=n(g),b=n(m),void 0===u?s(_,x,b):(y=n(v),s(_,x,y),s(x,b,y)))}console.time("OBJLoader");var c,u,h,l=[];!1===/^o /gm.test(t)&&(u={vertices:[],normals:[],uvs:[]},h={name:""},c={name:"",geometry:u,material:h},l.push(c));for(var p=[],f=[],d=[],g=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,m=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,v=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,_=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,x=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,b=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,w=t.split("\n"),E=0;E<w.length;E++){var S=w[E];S=S.trim();var T;if(0!==S.length&&"#"!==S.charAt(0))if(null!==(T=g.exec(S)))p.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=m.exec(S)))f.push(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));else if(null!==(T=v.exec(S)))d.push(parseFloat(T[1]),parseFloat(T[2]));else if(null!==(T=y.exec(S)))o(T[1],T[2],T[3],T[4]);else if(null!==(T=_.exec(S)))o(T[2],T[5],T[8],T[11],T[3],T[6],T[9],T[12]);else if(null!==(T=x.exec(S)))o(T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15],T[4],T[8],T[12],T[16]);else if(null!==(T=b.exec(S)))o(T[2],T[5],T[8],T[11],void 0,void 0,void 0,void 0,T[3],T[6],T[9],T[12]);else if(/^o /.test(S)||"o"==S){u={vertices:[],normals:[],uvs:[]},h={name:""};var M;M="o"==S?"__obj___"+l.length:S.substring(2).trim(),c={name:M,geometry:u,material:h},l.push(c)}else/^g /.test(S)||(/^usemtl /.test(S)?h.name=S.substring(7).trim():/^mtllib /.test(S)||/^s /.test(S))}for(var A=new THREE.Object3D,E=0,C=l.length;E<C;E++){c=l[E],u=c.geometry;var L=new THREE.BufferGeometry;L.addAttribute("position",new THREE.BufferAttribute(new Float32Array(u.vertices),3)),u.normals.length>0&&L.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(u.normals),3)),u.uvs.length>0&&L.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(u.uvs),2)),h=new THREE.MeshLambertMaterial,h.name=c.material.name;var P=new THREE.Mesh(L,h);P.name=c.name,A.add(P)}return console.timeEnd("OBJLoader"),A}}},function(t,e){THREE.STLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(t,e,n,i){var r=this,s=new THREE.XHRLoader(r.manager);return s.setCrossOrigin(this.crossOrigin),s.setResponseType("arraybuffer"),s.load(t,function(t){e(r.parse(t))},n,i)},parse:function(t){var e=this.ensureBinary(t);return function(){var t,n,i;if(i=new DataView(e),t=50,n=i.getUint32(80,!0),84+n*t===i.byteLength)return!0;for(var r=i.byteLength,s=0;s<r;s++)if(i.getUint8(s,!1)>127)return!0;return!1}()?this.parseBinary(e):this.parseASCII(this.ensureString(t))},parseBinary:function(t){for(var e,n,i,r,s,a,o,c,u=new DataView(t),h=u.getUint32(80,!0),l=!1,p=0;p<70;p++)1129270351==u.getUint32(p,!1)&&82==u.getUint8(p+4)&&61==u.getUint8(p+5)&&(l=!0,r=new Float32Array(3*h*3),s=u.getUint8(p+6)/255,a=u.getUint8(p+7)/255,o=u.getUint8(p+8)/255,c=u.getUint8(p+9)/255);for(var f=0,d=new THREE.BufferGeometry,g=new Float32Array(3*h*3),m=new Float32Array(3*h*3),v=0;v<h;v++){var y=84+50*v,_=u.getFloat32(y,!0),x=u.getFloat32(y+4,!0),b=u.getFloat32(y+8,!0);if(l){var w=u.getUint16(y+48,!0);0==(32768&w)?(e=(31&w)/31,n=(w>>5&31)/31,i=(w>>10&31)/31):(e=s,n=a,i=o)}for(var E=1;E<=3;E++){var S=y+12*E;g[f]=u.getFloat32(S,!0),g[f+1]=u.getFloat32(S+4,!0),g[f+2]=u.getFloat32(S+8,!0),m[f]=_,m[f+1]=x,m[f+2]=b,l&&(r[f]=e,r[f+1]=n,r[f+2]=i),f+=3}}return d.addAttribute("position",new THREE.BufferAttribute(g,3)),d.addAttribute("normal",new THREE.BufferAttribute(m,3)),l&&(d.addAttribute("color",new THREE.BufferAttribute(r,3)),d.hasColors=!0,d.alpha=c),d},parseASCII:function(t){var e,n,i,r,s,a,o,c;for(e=new THREE.Geometry,r=/facet([\s\S]*?)endfacet/g;null!==(o=r.exec(t));){for(c=o[0],s=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(o=s.exec(c));)i=new THREE.Vector3(parseFloat(o[1]),parseFloat(o[3]),parseFloat(o[5]));for(a=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(o=a.exec(c));)e.vertices.push(new THREE.Vector3(parseFloat(o[1]),parseFloat(o[3]),parseFloat(o[5])));n=e.vertices.length,e.faces.push(new THREE.Face3(n-3,n-2,n-1,i))}return e.computeBoundingBox(),e.computeBoundingSphere(),e},ensureString:function(t){if("string"!=typeof t){for(var e=new Uint8Array(t),n="",i=0;i<t.byteLength;i++)n+=String.fromCharCode(e[i]);return n}return t},ensureBinary:function(t){if("string"==typeof t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=255&t.charCodeAt(n);return e.buffer||e}return t}},"undefined"==typeof DataView&&(DataView=function(t,e,n){this.buffer=t,this.byteOffset=e||0,this.byteLength=n||t.byteLength||t.length,this._isString="string"==typeof t},DataView.prototype={_getCharCodes:function(t,e,n){e=e||0,n=n||t.length;for(var i=e+n,r=[],s=e;s<i;s++)r.push(255&t.charCodeAt(s));return r},_getBytes:function(t,e,n){var i;if(void 0===n&&(n=this._littleEndian),e=void 0===e?this.byteOffset:this.byteOffset+e,void 0===t&&(t=this.byteLength-e),"number"!=typeof e)throw new TypeError("DataView byteOffset is not a number");if(t<0||e+t>this.byteLength)throw new Error("DataView length or (byteOffset+length) value is out of bounds");return i=this.isString?this._getCharCodes(this.buffer,e,e+t):this.buffer.slice(e,e+t),!n&&t>1&&(!1===Array.isArray(i)&&(i=Array.prototype.slice.call(i)),i.reverse()),i},getFloat64:function(t,e){var n=this._getBytes(8,t,e),i=1-2*(n[7]>>7),r=((n[7]<<1&255)<<3|n[6]>>4)-1023,s=(15&n[6])*Math.pow(2,48)+n[5]*Math.pow(2,40)+n[4]*Math.pow(2,32)+n[3]*Math.pow(2,24)+n[2]*Math.pow(2,16)+n[1]*Math.pow(2,8)+n[0];return 1024===r?0!==s?NaN:i*(1/0):-1023===r?i*s*Math.pow(2,-1074):i*(1+s*Math.pow(2,-52))*Math.pow(2,r)},getFloat32:function(t,e){var n=this._getBytes(4,t,e),i=1-2*(n[3]>>7),r=(n[3]<<1&255|n[2]>>7)-127,s=(127&n[2])<<16|n[1]<<8|n[0];return 128===r?0!==s?NaN:i*(1/0):-127===r?i*s*Math.pow(2,-149):i*(1+s*Math.pow(2,-23))*Math.pow(2,r)},getInt32:function(t,e){var n=this._getBytes(4,t,e);return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},getUint32:function(t,e){return this.getInt32(t,e)>>>0},getInt16:function(t,e){return this.getUint16(t,e)<<16>>16},getUint16:function(t,e){var n=this._getBytes(2,t,e);return n[1]<<8|n[0]},getInt8:function(t){return this.getUint8(t)<<24>>24},getUint8:function(t){return this._getBytes(1,t)[0]}})},function(t,e,n){n(135),n(136),n(134),n(133),n(138),n(122),n(124),n(126),n(123),n(127),n(128),n(125)},function(t,e){THREE.BufferGeometryLoader.prototype.parse=function(t){var e=new THREE.BufferGeometry,n=t.data.index;if(void 0!==n){var i=new window[n.type](n.array);e.setIndex(new THREE.BufferAttribute(i,1))}var r=t.data.attributes;for(var s in r){var a=r[s],i=new window[a.type](a.array);e.addAttribute(s,new THREE.BufferAttribute(i,a.itemSize))}var o=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==o)for(var c=0,u=o.length;c!==u;++c){var h=o[c];e.addGroup(h.start,h.count)}var l=t.data.boundingSphere;if(void 0!==l){var p=new THREE.Vector3;void 0!==l.center&&p.fromArray(l.center),e.boundingSphere=new THREE.Sphere(p,l.radius)}return e}},function(t,e,n){"use strict";function i(t,e){if(e&&"object"===(void 0===e?"undefined":s(e))){var n="",i=encodeURIComponent;for(var r in e)n+="&"+i(r)+"="+i(e[r]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function r(t,e,n,r,a){r&&"object"===(void 0===r?"undefined":s(r))&&(a||(r._t=new Date),r=i("",r).slice(1)),e.queryStringParams&&(t=i(t,e.queryStringParams));try{var o;o=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),o.open(r?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var c=e.customHeaders;if(c)for(var u in c)o.setRequestHeader(u,c[u]);o.onreadystatechange=function(){o.readyState>3&&n&&n(o.responseText,o)},o.send(r)}catch(t){console&&console.log(t)}}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:u.default}}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(141),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),c=n(139),u=function(t){return t&&t.__esModule?t:{default:t}}(c),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.init(e,n),this.type="backend"}return s(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=o.defaults(e,this.options||{},r())}},{key:"readMulti",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(t,e));var r=this.services.interpolator.interpolate(i,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(r,n)}},{key:"read",value:function(t,e,n){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([t],[e]));var r=this.services.interpolator.interpolate(i,{lng:t,ns:e});this.loadUrl(r,n)}},{key:"loadUrl",value:function(t,e){var n=this;this.options.ajax(t,this.options,function(i,r){if(r.status>=500&&r.status<600)return e("failed loading "+t,!0);if(r.status>=400&&r.status<500)return e("failed loading "+t,!1);var s=void 0,a=void 0;try{s=n.options.parse(i,t)}catch(e){a="failed parsing "+t+" to json"}if(a)return e(a,!1);e(null,s)})}},{key:"create",value:function(t,e,n,i){var r=this;"string"==typeof t&&(t=[t]);var s={};s[n]=i||"",t.forEach(function(t){var n=r.services.interpolator.interpolate(r.options.addPath,{lng:t,ns:e});r.options.ajax(n,r.options,function(t,e){},s)})}}]),t}();h.type="backend",e.default=h},function(t,e,n){"use strict";function i(t){return a.call(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t}function r(t){return a.call(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.defaults=i,e.extend=r;var s=[],a=s.forEach,o=s.slice},function(t,e,n){t.exports=n(140).default},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return null==t?"":""+t}function e(t,e,n){t.forEach(function(t){e[t]&&(n[t]=e[t])})}function n(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var r="string"!=typeof e?[].concat(e):e.split(".");r.length>1;){if(!t)return{};var s=i(r.shift());!t[s]&&n&&(t[s]=new n),t=t[s]}return t?{obj:t,k:i(r.shift())}:{}}function i(t,e,i){var r=n(t,e,Object);r.obj[r.k]=i}function r(t,e,i,r){var s=n(t,e,Object),a=s.obj,o=s.k;a[o]=a[o]||[],r&&(a[o]=a[o].concat(i)),r||a[o].push(i)}function s(t,e){var i=n(t,e),r=i.obj,s=i.k;if(r)return r[s]}function a(t,e,n){for(var i in e)i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):a(t[i],e[i],n):t[i]=e[i];return t}function o(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function c(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return L[t]}):t}function u(t){return t.interpolation={unescapeSuffix:"HTML"},t.interpolation.prefix=t.interpolationPrefix||"__",t.interpolation.suffix=t.interpolationSuffix||"__",t.interpolation.escapeValue=t.escapeInterpolation||!1,t.interpolation.nestingPrefix=t.reusePrefix||"$t(",t.interpolation.nestingSuffix=t.reuseSuffix||")",t}function h(t){return t.resStore&&(t.resources=t.resStore),t.ns&&t.ns.defaultNs?(t.defaultNS=t.ns.defaultNs,t.ns=t.ns.namespaces):t.defaultNS=t.ns||"translation",t.fallbackToDefaultNS&&t.defaultNS&&(t.fallbackNS=t.defaultNS),t.saveMissing=t.sendMissing,t.saveMissingTo=t.sendMissingTo||"current",t.returnNull=!t.fallbackOnNull,t.returnEmptyString=!t.fallbackOnEmpty,t.returnObjects=t.returnObjectTrees,t.joinArrays="\n",t.returnedObjectHandler=t.objectTreeKeyHandler,t.parseMissingKeyHandler=t.parseMissingKey,t.appendNamespaceToMissingKey=!0,t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,"sprintf"===t.shortcutFunction&&(t.overloadTranslationOptionHandler=function(t){for(var e=[],n=1;n<t.length;n++)e.push(t[n]);return{postProcess:"sprintf",sprintf:e}}),t.whitelist=t.lngWhitelist,t.preload=t.preload,"current"===t.load&&(t.load="currentOnly"),"unspecific"===t.load&&(t.load="languageOnly"),t.backend=t.backend||{},t.backend.loadPath=t.resGetPath||"locales/__lng__/__ns__.json",t.backend.addPath=t.resPostPath||"locales/add/__lng__/__ns__",t.backend.allowMultiLoading=t.dynamicLoad,t.cache=t.cache||{},t.cache.prefix="res_",t.cache.expirationTime=6048e5,t.cache.enabled=!!t.useLocalStorage,t=u(t),t.defaultVariables&&(t.interpolation.defaultVariables=t.defaultVariables),t}function l(t){return t=u(t),t.joinArrays="\n",t}function p(t){return(t.interpolationPrefix||t.interpolationSuffix||t.escapeInterpolation)&&(t=u(t)),t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,t.returnObjects=t.returnObjectTrees,t}function f(t){t.lng=function(){return A.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),t.services.languageUtils.toResolveHierarchy(t.language)[0]},t.preload=function(e,n){A.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),t.loadLanguages(e,n)},t.setLng=function(e,n,i){return A.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof n&&(i=n,n={}),n||(n={}),!0===n.fixLng&&i?i(null,t.getFixedT(e)):void t.changeLanguage(e,i)},t.addPostProcessor=function(e,n){A.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),t.use({type:"postProcessor",name:e,process:n})}}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}function g(){var t={};return O.forEach(function(e){e.lngs.forEach(function(n){return t[n]={numbers:e.nr,plurals:N[e.fc]}})}),t}function m(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}function v(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(t){return{defaultValue:t[1]}},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function y(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&t.whitelist.push("cimode"),t}var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},x=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},E=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},S=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T={type:"logger",log:function(t){this._output("log",t)},warn:function(t){this._output("warn",t)},error:function(t){this._output("error",t)},_output:function(t,e){console&&console[t]&&console[t].apply(console,Array.prototype.slice.call(e))}},M=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.subs=[],this.init(e,n)}return t.prototype.init=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=e.prefix||"i18next:",this.logger=t||T,this.options=e,this.debug=!1!==e.debug},t.prototype.setDebug=function(t){this.debug=t,this.subs.forEach(function(e){e.setDebug(t)})},t.prototype.log=function(){this.forward(arguments,"log","",!0)},t.prototype.warn=function(){this.forward(arguments,"warn","",!0)},t.prototype.error=function(){this.forward(arguments,"error","")},t.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,n,i){i&&!this.debug||("string"==typeof t[0]&&(t[0]=n+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){var n=new t(this.logger,b({prefix:this.prefix+":"+e+":"},this.options));return this.subs.push(n),n},t}(),A=new M,C=function(){function t(){x(this,t),this.observers={}}return t.prototype.on=function(t,e){var n=this;t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})},t.prototype.off=function(t,e){var n=this;this.observers[t]&&this.observers[t].forEach(function(){if(e){var i=n.observers[t].indexOf(e);i>-1&&n.observers[t].splice(i,1)}else delete n.observers[t]})},t.prototype.emit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&this.observers[t].forEach(function(t){t.apply(void 0,n)}),this.observers["*"]&&this.observers["*"].forEach(function(e){var i;e.apply(e,(i=[t]).concat.apply(i,n))})},t}(),L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},P=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];x(this,e);var r=E(this,t.call(this));return r.data=n,r.options=i,r}return w(e,t),e.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=i.keySeparator||this.options.keySeparator;void 0===r&&(r=".");var a=[t,e];return n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(a=t.split(".")),s(this.data,a)},e.prototype.addResource=function(t,e,n,r){var s=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],a=this.options.keySeparator;void 0===a&&(a=".");var o=[t,e];n&&(o=o.concat(a?n.split(a):n)),t.indexOf(".")>-1&&(o=t.split("."),r=e,e=o[1]),this.addNamespaces(e),i(this.data,o,r),s.silent||this.emit("added",t,e,n,r)},e.prototype.addResources=function(t,e,n){for(var i in n)"string"==typeof n[i]&&this.addResource(t,e,i,n[i],{silent:!0});this.emit("added",t,e,n)},e.prototype.addResourceBundle=function(t,e,n,r,o){var c=[t,e];t.indexOf(".")>-1&&(c=t.split("."),r=n,n=e,e=c[1]),this.addNamespaces(e);var u=s(this.data,c)||{};r?a(u,n,o):u=b({},u,n),i(this.data,c,u),this.emit("added",t,e,n)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?b({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(C),R={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var s=this;return t.forEach(function(t){s.processors[t]&&(e=s.processors[t].process(e,n,i,r))}),e}},I=function(t){function n(i){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,n);var s=E(this,t.call(this));return e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],i,s),s.options=r,s.logger=A.create("translator"),s}return w(n,t),n.prototype.changeLanguage=function(t){t&&(this.language=t)},n.prototype.exists=function(t){var e=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(e=p(e)),void 0!==this.resolve(t,e)},n.prototype.extractFromKey=function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var r=t.split(n);i=r[0],t=r[1]}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}},n.prototype.translate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==(void 0===e?"undefined":_(e))?e=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(e=p(e)),void 0===t||null===t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var n=e.lng||this.language;if(n&&"cimode"===n.toLowerCase())return t[t.length-1];var i=e.keySeparator||this.options.keySeparator||".",r=this.extractFromKey(t[t.length-1],e),s=r.key,a=r.namespaces,o=a[a.length-1],c=this.resolve(t,e),u=Object.prototype.toString.apply(c),h=["[object Number]","[object Function]","[object RegExp]"],l=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays;if(c&&"string"!=typeof c&&h.indexOf(u)<0&&(!l||"[object Array]"!==u)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(s,c,e):"key '"+s+" ("+this.language+")' returned an object instead of string.";var f="[object Array]"===u?[]:{};for(var d in c)f[d]=this.translate(""+s+i+d,b({joinArrays:!1,ns:a},e));c=f}else if(l&&"[object Array]"===u)(c=c.join(l))&&(c=this.extendTranslation(c,s,e));else{var g=!1,m=!1;if(this.isValidLookup(c)||void 0===e.defaultValue||(g=!0,c=e.defaultValue),this.isValidLookup(c)||(m=!0,c=s),m||g){this.logger.log("missingKey",n,o,s,c);var v=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var y=0;y<this.options.fallbackLng.length;y++)v.push(this.options.fallbackLng[y]);else"all"===this.options.saveMissingTo?v=this.languageUtils.toResolveHierarchy(e.lng||this.language):v.push(e.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(v,o,s,c):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(v,o,s,c)),this.emit("missingKey",v,o,s,c)}c=this.extendTranslation(c,s,e),m&&c===s&&this.options.appendNamespaceToMissingKey&&(c=o+":"+s),m&&this.options.parseMissingKeyHandler&&(c=this.options.parseMissingKeyHandler(c))}return c},n.prototype.extendTranslation=function(t,e,n){var i=this;n.interpolation&&this.interpolator.init(n);var r=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=b({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,this.language),t=this.interpolator.nest(t,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.translate.apply(i,e)},n),n.interpolation&&this.interpolator.reset();var s=n.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return void 0!==t&&a&&a.length&&!1!==n.applyPostProcessor&&(t=R.handle(a,t,e,n,this)),t},n.prototype.resolve=function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!e.isValidLookup(i)){var r=e.extractFromKey(t,n),s=r.key,a=r.namespaces;e.options.fallbackNS&&(a=a.concat(e.options.fallbackNS));var o=void 0!==n.count&&"string"!=typeof n.count,c=void 0!==n.context&&"string"==typeof n.context&&""!==n.context,u=n.lngs?n.lngs:e.languageUtils.toResolveHierarchy(n.lng||e.language);a.forEach(function(t){e.isValidLookup(i)||u.forEach(function(r){if(!e.isValidLookup(i)){var a=s,u=[a],h=void 0;o&&(h=e.pluralResolver.getSuffix(r,n.count)),o&&c&&u.push(a+h),c&&u.push(a+=""+e.options.contextSeparator+n.context),o&&u.push(a+=h);for(var l=void 0;l=u.pop();)e.isValidLookup(i)||(i=e.getResource(r,t,l,n))}})})}}),i},n.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},n.prototype.getResource=function(t,e,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(t,e,n,i)},n}(C),k=function(){function t(e){x(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=A.create("languageUtils")}return t.prototype.getLanguagePartFromCode=function(t){if(t.indexOf("-")<0)return t;var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],n=t.split("-");return this.formatLanguageCode(e.indexOf(t)>-1?n[1].toLowerCase():n[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=d(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=d(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=d(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t,e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist&&!e)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.toResolveHierarchy=function(t,e){var n=this;"string"==typeof(e=e||this.options.fallbackLng||[])&&(e=[e]);var i=[],r=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];n.isWhitelisted(t,e)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: "+t)};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t),!0),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):"string"==typeof t&&r(this.formatLanguageCode(t)),e.forEach(function(t){i.indexOf(t)<0&&r(n.formatLanguageCode(t))}),i},t}(),O=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],N={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}},D=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.languageUtils=e,this.options=n,this.logger=A.create("pluralResolver"),this.rules=g()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return!(e&&e.numbers.length<=1)},t.prototype.getSuffix=function(t,e){var n=this,i=this.getRule(t);if(!i)return this.logger.warn("no plural rule found for: "+t),"";var r=function(){if(1===i.numbers.length)return{v:""};var t=i.noAbs?i.plurals(e):i.plurals(Math.abs(e)),r=i.numbers[t];2===i.numbers.length&&1===i.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===n.options.compatibilityJSON?1===r?{v:""}:"number"==typeof r?{v:"_plural_"+r.toString()}:{v:s()}:"v2"===n.options.compatibilityJSON||2===i.numbers.length&&1===i.numbers[0]?{v:s()}:2===i.numbers.length&&1===i.numbers[0]?{v:s()}:{v:n.options.prepend&&t.toString()?n.options.prepend+t.toString():t.toString()}}();return"object"===(void 0===r?"undefined":_(r))?r.v:void 0},t}(),F=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];x(this,e),this.logger=A.create("interpolator"),this.init(t,!0)}return e.prototype.init=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t}),t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escapeValue=e.escapeValue,this.prefix=e.prefix?o(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?o(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?o(e.formatSeparator):e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?o(e.nestingPrefix):e.nestingPrefixEscaped||o("$t("),this.nestingSuffix=e.nestingSuffix?o(e.nestingSuffix):e.nestingSuffixEscaped||o(")");var n=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(n,"g");var i=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(i,"g");var r=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(r,"g")},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.interpolate=function(e,n,i){for(var r=this,a=void 0,o=void 0,u=function(t){if(t.indexOf(r.formatSeparator)<0)return s(n,t);var e=t.split(r.formatSeparator),a=e.shift().trim(),o=e.join(r.formatSeparator).trim();return r.format(s(n,a),o,i)};a=this.regexpUnescape.exec(e);){var h=u(a[1].trim());e=e.replace(a[0],h),this.regexpUnescape.lastIndex=0}for(;a=this.regexp.exec(e);)o=u(a[1].trim()),"string"!=typeof o&&(o=t(o)),o||(this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+e),o=""),o=function(t){return t.replace(/\$/g,"$$$$")}(this.escapeValue?c(o):o),e=e.replace(a[0],o),this.regexp.lastIndex=0;return e},e.prototype.nest=function(e,n){function i(t){if(t.indexOf(",")<0)return t;var e=t.split(",");t=e.shift();var n=e.join(",");n=this.interpolate(n,o);try{o=JSON.parse(n)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=void 0,a=void 0,o=JSON.parse(JSON.stringify(r));for(o.applyPostProcessor=!1;s=this.nestingRegexp.exec(e);)a=n(i.call(this,s[1].trim()),o),"string"!=typeof a&&(a=t(a)),a||(this.logger.warn("missed to pass in variable "+s[1]+" for interpolating "+e),a=""),a=function(t){return t.replace(/\$/g,"$$$$")}(this.escapeValue?c(a):a),e=e.replace(s[0],a),this.regexp.lastIndex=0;return e},e}(),U=function(t){function e(n,i,r){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=E(this,t.call(this));return a.backend=n,a.store=i,a.services=r,a.options=s,a.logger=A.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,s.backend,s),a}return w(e,t),e.prototype.queueLoad=function(t,e,n){var i=this,r=[],s=[],a=[],o=[];return t.forEach(function(t){var n=!0;e.forEach(function(e){var a=t+"|"+e;i.store.hasResourceBundle(t,e)?i.state[a]=2:i.state[a]<0||(1===i.state[a]?s.indexOf(a)<0&&s.push(a):(i.state[a]=1,n=!1,s.indexOf(a)<0&&s.push(a),r.indexOf(a)<0&&r.push(a),o.indexOf(e)<0&&o.push(e)))}),n||a.push(t)}),(r.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:n}),{toLoad:r,pending:s,toLoadLanguages:a,toLoadNamespaces:o}},e.prototype.loaded=function(t,e,n){var i=this,s=t.split("|"),a=S(s,2),o=a[0],c=a[1];e&&this.emit("failedLoading",o,c,e),n&&this.store.addResourceBundle(o,c,n),this.state[t]=e?-1:2,this.queue.forEach(function(n){r(n.loaded,[o],c),m(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(n.errors.length?n.callback(n.errors):n.callback(),i.emit("loaded",n.loaded),n.done=!0)}),this.queue=this.queue.filter(function(t){return!t.done})},e.prototype.read=function(t,e,n,i,r,s){var a=this;return i||(i=0),r||(r=250),t.length?void this.backend[n](t,e,function(o,c){return o&&c&&i<5?void setTimeout(function(){a.read.call(a,t,e,n,++i,2*r,s)},r):void s(o,c)}):s(null,{})},e.prototype.load=function(t,e,n){var i=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();var r=b({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var a=this.queueLoad(t,e,n);return a.toLoad.length?void(r.allowMultiLoading&&this.backend.readMulti?this.read(a.toLoadLanguages,a.toLoadNamespaces,"readMulti",null,null,function(t,e){t&&i.logger.warn("loading namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&i.logger.log("loaded namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading",e),a.toLoad.forEach(function(n){var r=n.split("|"),a=S(r,2),o=a[0],c=a[1],u=s(e,[o,c]);if(u)i.loaded(n,t,u);else{var h="loading namespace "+c+" for language "+o+" via multiloading failed";i.loaded(n,h),i.logger.error(h)}})}):function(){var t=function(t){var e=this,n=t.split("|"),i=S(n,2),r=i[0],s=i[1];this.read(r,s,"read",null,null,function(n,i){n&&e.logger.warn("loading namespace "+s+" for language "+r+" failed",n),!n&&i&&e.logger.log("loaded namespace "+s+" for language "+r,i),e.loaded(t,n,i)})};a.toLoad.forEach(function(e){t.call(i,e)})}()):void(a.pending.length||n())},e.prototype.reload=function(t,e){var n=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var i=b({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),i.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,function(i,r){i&&n.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",i),!i&&r&&n.logger.log("reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",r),t.forEach(function(t){e.forEach(function(e){var a=s(r,[t,e]);if(a)n.loaded(t+"|"+e,i,a);else{var o="reloading namespace "+e+" for language "+t+" via multiloading failed";n.loaded(t+"|"+e,o),n.logger.error(o)}})})}):function(){var i=function(t){var e=this,n=t.split("|"),i=S(n,2),r=i[0],s=i[1];this.read(r,s,"read",null,null,function(n,i){n&&e.logger.warn("reloading namespace "+s+" for language "+r+" failed",n),!n&&i&&e.logger.log("reloaded namespace "+s+" for language "+r,i),e.loaded(t,n,i)})};t.forEach(function(t){e.forEach(function(e){i.call(n,t+"|"+e)})})}()},e.prototype.saveMissing=function(t,e,n,i){this.backend&&this.backend.create&&this.backend.create(t,e,n,i),t&&t[0]&&this.store.addResource(t[0],e,n,i)},e}(C),B=function(t){function e(n,i,r){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=E(this,t.call(this));return a.cache=n,a.store=i,a.services=r,a.options=s,a.logger=A.create("cacheConnector"),a.cache&&a.cache.init&&a.cache.init(r,s.cache,s),a}return w(e,t),e.prototype.load=function(t,e,n){var i=this;if(!this.cache)return n&&n();var r=b({},this.cache.options,this.options.cache);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),r.enabled?this.cache.load(t,function(e,r){if(e&&i.logger.error("loading languages "+t.join(", ")+" from cache failed",e),r)for(var s in r)for(var a in r[s])if("i18nStamp"!==a){var o=r[s][a];o&&i.store.addResourceBundle(s,a,o)}n&&n()}):n&&n()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(C);return new(function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments[1];x(this,e);var r=E(this,t.call(this));return r.options=y(n),r.services={},r.logger=A,r.modules={},i&&!r.isInitialized&&r.init(n,i),r}return w(e,t),e.prototype.init=function(t,e){function n(t){if(t)return"function"==typeof t?new t:t}var i=this;if("function"==typeof t&&(e=t,t={}),t||(t={}),"v1"===t.compatibilityAPI?this.options=b({},v(),y(h(t)),{}):"v1"===t.compatibilityJSON?this.options=b({},v(),y(l(t)),{}):this.options=b({},v(),this.options,y(t)),e||(e=function(){}),!this.options.isClone){this.modules.logger?A.init(n(this.modules.logger),this.options):A.init(null,this.options);var r=new k(this.options);this.store=new P(this.options.resources,this.options);var s=this.services;s.logger=A,s.resourceStore=this.store,s.resourceStore.on("added removed",function(t,e){s.cacheConnector.save()}),s.languageUtils=r,s.pluralResolver=new D(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),s.interpolator=new F(this.options),s.backendConnector=new U(n(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.emit.apply(i,[t].concat(n))}),s.backendConnector.on("loaded",function(t){s.cacheConnector.save()}),s.cacheConnector=new B(n(this.modules.cache),s.resourceStore,s,this.options),s.cacheConnector.on("*",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.emit.apply(i,[t].concat(n))}),this.modules.languageDetector&&(s.languageDetector=n(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.translator=new I(this.services,this.options),this.translator.on("*",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];i.emit.apply(i,[t].concat(n))})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(t){i[t]=function(){return this.store[t].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&f(this);var a=function(){i.changeLanguage(i.options.lng,function(t,n){i.emit("initialized",i.options),i.logger.log("initialized",i.options),e(t,n)})};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),this},e.prototype.loadResources=function(t){var e=this;if(t||(t=function(){}),this.options.resources)t(null);else{var n=function(){if(e.language&&"cimode"===e.language.toLowerCase())return{v:t()};var n=[],i=function(t){e.services.languageUtils.toResolveHierarchy(t).forEach(function(t){n.indexOf(t)<0&&n.push(t)})};i(e.language),e.options.preload&&e.options.preload.forEach(function(t){i(t)}),e.services.cacheConnector.load(n,e.options.ns,function(){e.services.backendConnector.load(n,e.options.ns,t)})}();if("object"===(void 0===n?"undefined":_(n)))return n.v}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.warn)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&R.addPostProcessor(t),this},e.prototype.changeLanguage=function(t,e){var n=this,i=function(i){t&&(n.emit("languageChanged",t),n.logger.log("languageChanged",t)),e&&e(i,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.t.apply(n,e)})};!t&&this.services.languageDetector&&(t=this.services.languageDetector.detect()),t&&(this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.translator.changeLanguage(t),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(t)),this.loadResources(function(t){i(t)})},e.prototype.getFixedT=function(t,e){var n=this,i=function t(e,i){return i=i||{},i.lng=i.lng||t.lng,i.ns=i.ns||t.ns,n.t(e,i)};return i.lng=t,i.ns=e,i},e.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},e.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var n=this;return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),void this.loadResources(e)):e&&e()},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var n=this.options.preload||[],i=t.filter(function(t){return n.indexOf(t)<0});return i.length?(this.options.preload=n.concat(i),void this.loadResources(e)):e()},e.prototype.dir=function(t){return t||(t=this.language),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr":"rtl"},e.prototype.createInstance=function(){return new e(arguments.length<=0||void 0===arguments[0]?{}:arguments[0],arguments[1])},e.prototype.cloneInstance=function(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments[1],r=new e(b({},n,this.options,{isClone:!0}),i);return["store","translator","services","language"].forEach(function(e){r[e]=t[e]}),r},e}(C))})},function(t,e,n){var i,r,s,i,s,a=function(o,c){o=o||n(149);var u=o.window,h=o.document,l=new function(){function t(t,i,r,s,c){function u(n,u){"string"==typeof(u=u||(u=a(i,n))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var l,p="function"==typeof u,f=u,d=c||p&&!u.base?u&&u.get?n in t:t[n]:null;c&&d||(p&&d&&(u.base=d),p&&!1!==s&&(l=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(h[l[3].toLowerCase()+l[4]]=l[2]),f&&!p&&f.get&&"function"==typeof f.get&&e.isPlainObject(f)||(f={value:f,writable:!0}),(a(t,n)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=r?r:!l),o(t,n,f))}var h={};if(i){for(var l in i)i.hasOwnProperty(l)&&!n.test(l)&&u(l);for(var l in h){var p=h[l],f=t["set"+p],d=t["get"+p]||f&&t["is"+p];!d||!0!==s&&0!==d.length||u(l,{get:d,set:f})}}return t}function e(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],r=i.slice,s=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,u=i.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},h=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},p=function(t,e,n){if(t){var i=a(t,"length");(i&&"number"==typeof i.value?u:h).call(t,e,n=n||t)}return n};return t(e,{inject:function(e){if(e){var n=!0===e.statics?e:e.statics,i=e.beans,r=e.preserve;n!==e&&t(this.prototype,e,e.enumerable,i,r),t(this,n,null,i,r)}for(var s=1,a=arguments.length;s<a;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,n,i,r=this,a=0,c=arguments.length;a<c&&(!e||!n);a++)i=arguments[a],e=e||i.initialize,n=n||i.prototype;return e=e||function(){r.apply(this,arguments)},n=e.prototype=n||s(this.prototype),o(n,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:e,set:e,inject:function(){for(var e=0,n=arguments.length;e<n;e++){var i=arguments[e];i&&t(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=s(this);return t.inject.apply(t,arguments)},each:function(t,e){return p(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:p,create:s,define:o,describe:a,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var n=null!=t&&t.constructor;return n&&(n===Object||n===e||"Object"===n.name)},pick:function(t,e){return t!==c?t:e},slice:function(t,e,n){return r.call(t,e,n)}}})};t.exports=l,l.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+l.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?g.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return l.importJSON(t,this)},exportJSON:function(t){return l.exportJSON(this,t)},toJSON:function(){return l.serialize(this)},set:function(t,e){return t&&l.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!l.exports[n]&&(l.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!l.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!l.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===l){var r=this.peek(t,e);return t.__index++,r}var s=this.prototype,a=s._readIndex,o=e||a&&t.__index||0,u=t.length,h=t[o];if(i=i||u-o,h instanceof this||n&&n.readNull&&null==h&&i<=1)return a&&(t.__index=o+1),h&&n&&n.clone?h.clone():h;if(h=l.create(s),a&&(h.__read=!0),h=h.initialize.apply(h,o>0||o+i<u?l.slice(t,o,o+i):t)||h,a){t.__index=o+h.__read;var p=h.__filtered;p&&(t.__filtered=p,h.__filtered=c),h.__read=c}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],a=e||0,o=i?a+i:t.length,c=a;c<o;c++)s.push(Array.isArray(r=t[c])?this.read(r,0,n):this.read(t,c,n,1));return s},readNamed:function(t,e,n,i,r){var s=this.getNamed(t,e),a=s!==c;if(a){var o=t.__filtered;o||(o=t.__filtered=l.create(t[0]),o.__unfiltered=t[0]),o[e]=c}var u=a?[s]:t;return this.read(u,n,i,r)},getNamed:function(t,e){var n=t[0];if(t._hasObject===c&&(t._hasObject=1===t.length&&l.isPlainObject(n)),t._hasObject)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){function r(i){if(!(n&&i in n||s&&i in s)){var r=e[i];r!==c&&(t[i]=r)}}var s;if(i){for(var a,o={},u=0,h=i.length;u<h;u++)(a=i[u])in e&&(r(a),o[a]=!0);s=o}return Object.keys(e.__unfiltered||e).forEach(r),t},isPlainValue:function(t,e){return l.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new g(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var a=t._class;!a||t._compactSerialize||!s&&n||r[0]===a||r.unshift(a)}else if(Array.isArray(t)){r=[];for(var o=0,c=t.length;o<c;o++)r[o]=l.serialize(t[o],e,n,i)}else if(l.isPlainObject(t)){r={};for(var u=Object.keys(t),o=0,c=u.length;o<c;o++){var h=u[o];r[h]=l.serialize(t[h],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var s=t,a=!n,o=a&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var c=t[0],u="dictionary"===c;if(1==t.length&&/^#/.test(c))return n.dictionary[c];c=l.exports[c],s=[];for(var h=c?1:0,p=t.length;h<p;h++)s.push(l.deserialize(t[h],e,n,u,o));if(c){var f=s;e?s=e(c,f,a||r):(s=l.create(c.prototype),c.apply(s,f))}}else if(l.isPlainObject(t)){s={},i&&(n.dictionary=s);for(var d in t)s[d]=l.deserialize(t[d],e,n)}return o?s[1]:s},exportJSON:function(t,e){var n=l.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return l.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,s=r?e:l.create(t.prototype);if(1===n.length&&s instanceof A&&(r||!(s instanceof L))){var a=n[0];l.isPlainObject(a)&&(a.insert=!1)}return(r?s.set:t).apply(s,n),r&&(e=null),s})},splice:function(t,e,n,i){var r=e&&e.length,s=n===c;(n=s?t.length:n)>t.length&&(n=t.length);for(var a=0;a<r;a++)e[a]._index=n+a;if(s)return t.push.apply(t,e),[];var o=[n,i];e&&o.push.apply(o,e);for(var u=t.splice.apply(t,o),a=0,h=u.length;a<h;a++)u[a]._index=c;for(var a=n+r,h=t.length;a<h;a++)t[a]._index=a;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var p={on:function(t,e){if("string"!=typeof t)l.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};r=r[t]=r[t]||[],-1===r.indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void l.each(t,function(t,e){this.off(e,t)},this);var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=l.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var s=0,a=n.length;s<a;s++)if(0==n[s].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],a=s&&s[i];a&&a.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};l.each(n,function(t,n){var r="string"==typeof t,s=r?t:n,a=l.capitalize(s),o=s.substring(2).toLowerCase();i[o]=r?{}:t,s="_"+s,e["get"+a]=function(){return this[s]},e["set"+a]=function(t){var e=this[s];e&&this.off(o,e),t&&this.on(o,t),this[s]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},f=l.extend({_class:"PaperScope",initialize:function t(){a=this,this.settings=new l({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=ot.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ct.nativeModes},ot.release(n)}if(!this.agent){var i=o.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],s="darwin"===r?"mac":r,c=e.agent=e.browser={platform:s};s&&(c[s]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!c.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;c.version=s,c.versionNumber=parseFloat(s),e="trident"===e?"msie":e,c.name=e,c[e]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){a.PaperScript.execute(t,this,e),K.updateFocus()},install:function(t){var e=this;l.each(["project","view","tool"],function(n){l.define(t,n,{configurable:!0,get:function(){return e[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return a=this,this.project=new M(t),this},createCanvas:function(t,e){return ot.getCanvas(t,e)},activate:function(){a=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(var n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),d=l.extend(p,{initialize:function(t){this._scope=a,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(l.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g=l.extend({initialize:function(t){this.precision=l.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});g.instance=new g;var m=new function(){function t(t,e,n){return t<e?e:t>n?n:t}function e(t,e,n){function i(t){var e=134217729*t,n=t-e,i=n+e;return[i,t-i]}var r=e*e-t*n,a=e*e+t*n;if(3*s(r)<a){var o=i(t),c=i(e),u=i(n),h=e*e,l=c[0]*c[0]-h+2*c[0]*c[1]+c[1]*c[1],p=t*n;r=h-p+(l-(o[0]*u[0]-p+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return r}function n(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(c(t))):0}var i=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,a=Math.sqrt,o=Math.pow,c=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,n,s){for(var a=i[s-2],o=r[s-2],c=.5*(n-e),u=c+e,h=0,l=s+1>>1,p=1&s?o[h++]*t(u):0;h<l;){var f=c*a[h];p+=o[h++]*(t(u+f)+t(u-f))}return c*p},findRoot:function(e,n,i,r,a,o,c){for(var u=0;u<o;u++){var h=e(i),l=h/n(i),p=i-l;if(s(l)<c){i=p;break}h>0?(a=i,i=p<=r?.5*(r+a):p):(r=i,i=p>=a?.5*(r+a):p)}return t(i,r,a)},solveQuadratic:function(i,r,o,c,u,h){var l,p=1/0;if(s(i)<1e-12){if(s(r)<1e-12)return s(o)<1e-12?-1:0;l=-o/r}else{r*=-.5;var f=e(i,r,o);if(f&&s(f)<1.12e-16){var d=n(s(i),s(r),s(o));d&&(i*=d,r*=d,o*=d,f=e(i,r,o))}if(f>=-1.12e-16){var g=f<0?0:a(f),m=r+(r<0?-g:g);0===m?(l=o/i,p=-l):(l=m/i,p=o/m)}}var v=0,y=null==u,_=u-1e-12,x=h+1e-12;return isFinite(l)&&(y||l>_&&l<x)&&(c[v++]=y?l:t(l,u,h)),p!==l&&isFinite(p)&&(y||p>_&&p<x)&&(c[v++]=y?p:t(p,u,h)),v},solveCubic:function(e,i,r,c,u,h,l){function p(t){f=t;var n=e*f;d=n+i,g=d*f+r,v=(n+d)*f+g,y=g*f+c}var f,d,g,v,y,_=n(s(e),s(i),s(r),s(c));if(_&&(e*=_,i*=_,r*=_,c*=_),s(e)<1e-12)e=i,d=r,g=c,f=1/0;else if(s(c)<1e-12)d=i,g=r,f=0;else{p(-i/e/3);var x=y/e,b=o(s(x),1/3),w=x<0?-1:1,E=-v/e,S=E>0?1.324717957244746*Math.max(b,a(E)):b,T=f-w*S;if(T!==f){do{p(T),T=0===v?f:f-y/v/(1+1.12e-16)}while(w*T>w*f);s(e)*f*f>s(c/f)&&(g=-c/f,d=(g-r)/f)}}var M=m.solveQuadratic(e,d,g,u,h,l),A=null==h;return isFinite(f)&&(0===M||M>0&&f!==u[0]&&f!==u[1])&&(A||f>h-1e-12&&f<l+1e-12)&&(u[M++]=A?f:t(f,h,l)),M}}},v={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},y=l.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var a="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=y.read(arguments),e=this.getLength()*t.getLength();if(m.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=y.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=y.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n;return l.read(arguments)?i:Math.sqrt(i)},normalize:function(t){t===c&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new y(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new y(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=y.read(arguments);return new y(this.x+t.x,this.y+t.y)},subtract:function(){var t=y.read(arguments);return new y(this.x-t.x,this.y-t.y)},multiply:function(){var t=y.read(arguments);return new y(this.x*t.x,this.y*t.y)},divide:function(){var t=y.read(arguments);return new y(this.x/t.x,this.y/t.y)},modulo:function(){var t=y.read(arguments);return new y(this.x%t.x,this.y%t.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=y.read(arguments),e=l.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=y.read(arguments);return y.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=y.read(arguments);return y.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=m.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=y.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=y.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=y.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new y(t.x*e,t.y*e)},statics:{min:function(){var t=y.read(arguments),e=y.read(arguments);return new y(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=y.read(arguments),e=y.read(arguments);return new y(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},l.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new y(e(this.x),e(this.y))}},{})),_=y.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),x=l.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var a="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new x(this.width,this.height)},toString:function(){var t=g.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=x.read(arguments);return new x(this.width+t.width,this.height+t.height)},subtract:function(){var t=x.read(arguments);return new x(this.width-t.width,this.height-t.height)},multiply:function(){var t=x.read(arguments);return new x(this.width*t.width,this.height*t.height)},divide:function(){var t=x.read(arguments);return new x(this.width/t.width,this.height/t.height)},modulo:function(){var t=x.read(arguments);return new x(this.width%t.width,this.height%t.height)},negate:function(){return new x(-this.width,-this.height)},isZero:function(){var t=m.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new x(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new x(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new x(Math.random(),Math.random())}}},l.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new x(e(this.width),e(this.height))}},{})),b=x.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=l.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r,s=typeof t;if("number"===s?(this._set(t,e,n,i),r=4):"undefined"===s||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==c||t.width!==c?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===c&&t.to===c&&(this._set(0,0,0,0),l.filter(this,t),r=1)),r===c){var a,o,u=y.readNamed(arguments,"from"),h=l.peek(arguments),p=u.x,f=u.y;if(h&&h.x!==c||l.hasNamed(arguments,"to")){var d=y.readNamed(arguments,"to");a=d.x-p,o=d.y-f,a<0&&(p=d.x,a=-a),o<0&&(f=d.y,o=-o)}else{var g=x.read(arguments);a=g.width,o=g.height}this._set(p,f,a,o),r=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=l.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?y:_)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?x:b)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=x.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?y:_)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=y.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==c||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=l.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,i-e,r-n)},include:function(){var t=y.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new w(e,n,i-e,r-n)},expand:function(){var t=x.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===c?t:e)-this.height)}},l.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],a="get"+r,o="get"+s,c="set"+r,u="set"+s,h="get"+n,l="set"+n;this[h]=function(t){return new(t?y:_)(this[a](),this[o](),this,l)},this[l]=function(){var t=y.read(arguments);this[c](t.x),this[u](t.y)}},{beans:!0})),E=w.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return l.each(["x","y","width","height"],function(t){var e=l.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},l.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),S=l.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,a){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return l.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=g.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,l.pick(t,!0),e),this.isIdentity())},translate:function(){var t=y.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=y.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),a=n-n*r+i*s,o=i-n*s-i*r,c=this._a,u=this._b,h=this._c,l=this._d;return this._a=r*c+s*h,this._b=r*u+s*l,this._c=-s*c+r*h,this._d=-s*u+r*l,this._tx+=a*c+o*h,this._ty+=a*u+o*l,this._changed(),this},shear:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=y.read(arguments),e=y.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new y(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=t._a,o=t._c,c=t._b,u=t._d,h=t._tx,l=t._ty;this._a=a*n+c*r,this._c=o*n+u*r,this._b=a*i+c*s,this._d=o*i+u*s,this._tx+=h*n+l*r,this._ty+=h*i+l*s,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,c=t._a,u=t._c,h=t._b,l=t._d,p=t._tx,f=t._ty;this._a=c*n+u*i,this._c=c*r+u*s,this._b=h*n+l*i,this._d=h*r+l*s,this._tx=c*a+u*o+p,this._ty=h*a+l*o+f,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,a=t*i-e*n,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=i/a,this._b=-e/a,this._c=-n/a,this._d=t/a,this._tx=(n*s-i*r)/a,this._ty=(e*r-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new y),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],a=t[i+1];e[i]=s*this._a+a*this._c+this._tx,e[i+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=i[a],c=1&a;o<r[c]?r[c]=o:o>s[c]&&(s[c]=o)}return e||(e=new w),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,c=this._ty,u=i*a-r*s,h=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(c)){var l=t.x-this._tx,p=t.y-this._ty;e||(e=new y),h=e._set((l*a-p*s)/u,(p*i-l*r)/u,n)}return h},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,a=this._d,o=i*a-r*s,c=Math.sqrt,u=Math.atan2,h=180/Math.PI;if(0!==i||0!==r){var l=c(i*i+r*r);t=Math.acos(i/l)*(r>0?1:-1),e=[l,o/l],n=[u(i*s+r*a,l*l),0]}else if(0!==s||0!==a){var p=c(s*s+a*a);t=Math.asin(s/p)*(a>0?1:-1),e=[o/p,p],n=[0,u(i*s+r*a,p*p)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*h,scaling:new y(e),skewing:new y(n[0]*h,n[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},l.each(["a","b","c","d","tx","ty"],function(t){var e=l.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),T=l.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return T.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return T.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return T.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return y.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return y.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,a,o,c,u){c||(n-=t,i-=e,a-=r,o-=s);var h=n*o-i*a;if(!m.isZero(h)){var l=t-r,p=e-s,f=(a*p-o*l)/h,d=(n*p-i*l)/h;if(u||-1e-12<f&&f<1+1e-12&&-1e-12<d&&d<1+1e-12)return u||(f=f<=0?0:f>=1?1:f),new y(t+f*n,e+f*i)}},getSide:function(t,e,n,i,r,s,a,o){a||(n-=t,i-=e);var c=r-t,u=s-e,h=c*i-u*n;return!o&&m.isZero(h)&&(h=(c*n+c*n)/(n*n+i*i))>=0&&h<=1&&(h=0),h<0?-1:h>0?1:0},getSignedDistance:function(t,e,n,i,r,s,a){return a||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,s,a){return Math.abs(T.getSignedDistance(t,e,n,i,r,s,a))}}}),M=d.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){d.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=K.create(this,t||ot.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return l.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,a=r[s];a?a.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new L({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:I,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(c,t)},insertLayer:function(t,e){if(e instanceof L){e._remove(!1,!0),l.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(c,new L(A.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return A._getItems(this,t)},getItem:function(t){return A._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return l.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var a=e[s];a&&a!=n&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new l({offset:new y(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),s=0,a=i.length;s<a;s++)i[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var o=this._selectionItems,c=this._scope.settings.handleSize,u=this._updateVersion;for(var h in o)o[h]._drawSelection(t,e,c,o,u);t.restore()}}}),A=l.extend(p,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=l.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return l.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&l.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new S,s=n&&t.project||a.project,o=a.settings;return this._id=i?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Z(s._currentStyle,this,s),i||n&&0==t.insert||!o.insertItems&&(!n||!0!==t.insert)?this._setProject(s):(n&&t.parent||s)._insertItem(c,this,!0),n&&t!==A.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function n(n){for(var s in n){var a=r[s];l.equals(a,"leading"===s?1.2*n.fontSize:n[s])||(i[s]=l.serialize(a,t,"data"!==s,e))}}var i={},r=this;return n(this._serializeFields),this instanceof C||n(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=c),n&&40&t&&A._clearBoundsCache(n),2&t&&A._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||c,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},l.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=l.capitalize(t),n="_"+t,i={locked:128,visible:137};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?y:_;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new _(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=c}},l.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof S,i=l.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new E(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,i=new S,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new S).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(A._updateBoundsCache(this,e.cacheItem),A._getBounds(n,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),a=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,i),o=this._bounds;if(A._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o){var c=o[a];return{rect:c.rect.clone(),nonscaling:c.nonscaling}}var u=this._getBounds(t||s,e),h=u.rect||u,l=this._style,p=u.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(a){o||(this._bounds=o={});var c=o[a]={rect:h.clone(),nonscaling:p,internal:i}}return{rect:h,nonscaling:p}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=c;for(var n=0,i=e.list,r=i.length;n<r;n++){var s=i[n];s!==t&&(s._bounds=s._position=c,s._boundsCache&&A._clearBoundsCache(s))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,a=r,o=!1;n=n||{};for(var c=0,u=t.length;c<u;c++){var h=t[c];if(h._visible&&!h.isEmpty()){var l=h._getCachedBounds(e&&e.appended(h._matrix),n,!0),p=l.rect;i=Math.min(p.x,i),s=Math.min(p.y,s),r=Math.max(p.x+p.width,r),a=Math.max(p.y+p.height,a),l.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new w(i,s,r-i,a-s):new w,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new _(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new S,s=this.getPosition(!0);r.translate(s),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(s.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof L)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return l.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(A.NO_INSERT),n=this._children,i=l.pick(t?t.insert:c,t===c||!0===t),r=l.pick(t?t.deep:c,!0);n&&e.copyAttributes(this),n&&!r||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var s=this._name,a=this._parent;if(s&&a){for(var n=a._children,o=s,u=1;n[s];)s=o+" "+u++;s!==o&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,o=t._name;this._data=a?l.clone(a):null,o&&this.setName(o)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),s=n.getBottomRight().ceil(),a=new x(s.subtract(r)),o=new R(A.NO_INSERT);if(!a.isZero()){var u=ot.getCanvas(a.multiply(i)),h=u.getContext("2d"),p=(new S).scale(i).translate(r.negate());h.save(),p.applyToContext(h),this.draw(h,new l({matrices:[p]})),h.restore(),o.setCanvas(u)}return o.transform((new S).translate(r.add(a.divide(2))).scale(1/i)),(e===c||e)&&o.insertAbove(this),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(y.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new z.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof A&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(y.read(arguments),O.getOptions(arguments))}function e(){var t=y.read(arguments),e=O.getOptions(arguments),n=[];return this._hitTest(t,l.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a!==i&&a._hitTest(t,e,n);if(o&&!e.all)return o}return null}return M.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){function i(t){return t&&f&&!f(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,n){var i=n?u["get"+n]():d.getPosition();if(t.subtract(i).divide(c).length<=1)return new O(e,d,{name:n?l.hyphenate(n):e,point:i})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var s=this._matrix,a=n?n.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(e.tolerance,1e-12),c=e._tolerancePadding=new x(z._getStrokePadding(o,s._shiftless().invert()));if(!(t=s._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(c.multiply(2))._containsPoint(t))return null;var u,h,p=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==l.hyphenate(this._class)||e.class&&!(this instanceof e.class)),f=e.match,d=this,g=e.position,m=e.center,v=e.bounds;if(p&&this._parent&&(g||m||v)){if((m||v)&&(u=this.getInternalBounds()),!(h=g&&r("position")||m&&r("center","Center"))&&v)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],_=0;_<8&&!h;_++)h=r("bounds",y[_]);h=i(h)}return h||(h=this._hitTestChildren(t,e,a)||p&&i(this._hitTestSelf(t,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),h&&h.point&&(h.point=s.transform(h.point)),h},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new O("fill",this)},matches:function(t,e){function n(t,e){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],s=e[i];if(l.isPlainObject(r)&&l.isPlainObject(s)){if(!n(r,s))return!1}else if(!l.equals(r,s))return!1}return!0}var i=typeof t;if("object"===i){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===i)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+l.capitalize(t)]():"type"===t?l.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(l.isPlainObject(e))return n(e,s)}return l.equals(s,e)},getItems:function(t){return A._getItems(this,t,this._matrix)},getItem:function(t){return A._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,s){if(!r){var a="object"==typeof n&&n,o=a&&a.overlapping,c=a&&a.inside,u=o||c,h=u&&w.read([u]);r={items:[],recursive:a&&!1!==a.recursive,inside:!!c,overlapping:!!o,rect:h,path:o&&new z.Rectangle({rectangle:h,insert:!1})},a&&(n=l.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var p=e._children,f=r.items,h=r.rect;i=h&&(i||new S);for(var d=0,g=p&&p.length;d<g;d++){var m=p[d],v=i&&i.appended(m._matrix),y=!0;if(h){var u=m.getBounds(v);if(!h.intersects(u))continue;h.contains(u)||r.overlapping&&(u.contains(h)||r.path.intersects(m,v))||(y=!1)}if(y&&m.matches(n)&&(f.push(m),s))break;if(!1!==r.recursive&&t(m,n,v,r,s),s&&f.length>0)break}return f}}},{importJSON:function(t){var e=l.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(c,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){e=l.slice(e);for(var i={},r=e.length-1;r>=0;r--){var s=e[r],a=s&&s._id;!s||i[a]?e.splice(r,1):(s._remove(!1,!0),i[a]=!0)}l.splice(n,e,t,0);for(var o=this._project,c=o._changes,r=0,u=e.length;r<u;r++){var s=e[r],h=s._name;s._parent=this,s._setProject(o,!0),h&&s.setName(h),c&&s._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(c,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(c,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),l.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=l.pick(e,this._children.length);for(var n=l.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},l.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?l:y).read(arguments),i=y.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getPosition(!0)))}},{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){var r=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&n&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,c=o.getFillColor(!0),u=o.getStrokeColor(!0);c&&c.transform(t),u&&u.transform(t)}if(a&&(a=this._transformContent(r,n,i))){var h=this._pivot;h&&r._transformPoint(h,h,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var l=this._bounds,p=this._position;(s||a)&&this._changed(9);var f=s&&l&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var d in l){var g=l[d];if(g.nonscaling)delete l[d];else if(a||!g.internal){var m=g.rect;t._transformBounds(m,m)}}this._bounds=l;var v=l[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=v.rect.getCenter(!0))}else s&&p&&this._pivot&&(this._position=t._transformPoint(p,p));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,a=new w(new y,new x(n.width*s,n.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),o=i.getStrokeCap(),c=i.getMiterLimit();if(s&&(t.lineJoin=s),o&&(t.lineCap=o),c&&(t.miterLimit=c),a.support.nativeDash){var u=i.getDashArray(),h=i.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=h):(t.mozDash=u,t.mozDashOffset=h))}}if(i.hasShadow()){var l=e.pixelRatio||1,p=n._shiftless().prepend((new S).scale(l,l)),f=p.transform(new y(i.getShadowBlur(),0)),d=p.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,r.push(o),e.updateMatrix&&(o._updateVersion=i,this._globalMatrix=o);var c,u,h,l=this._blendMode,p=this._opacity,f="normal"===l,d=ct.nativeModes[l],g=f&&1===p||e.dontStart||e.clip||(d||f&&p<1)&&this._canComposite(),m=e.pixelRatio||1;if(!g){var v=this.getStrokeBounds(s);if(!v.width||!v.height)return;h=e.offset,u=e.offset=v.getTopLeft().floor(),c=t,t=ot.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,_=!g&&e.clipItem,x=!y||_;if(g?(t.globalAlpha=p,d&&(t.globalCompositeOperation=l)):x&&t.translate(-u.x,-u.y),x&&(g?a:s).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(m,0,0,m,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,y),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(ct.process(l,t,c,p,u.subtract(h).multiply(m)),ot.release(t),e.offset=h)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof j)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,c=4&s;if(this._drawSelected||(a=!1),(a||o||c)&&this._isUpdated(r)){var u,h=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),l=e.appended(this.getGlobalMatrix(!0)),p=n/2;if(t.strokeStyle=t.fillStyle=h?h.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,l,i),c){var f=this.getPosition(!0),d=f.x,g=f.y;t.beginPath(),t.arc(d,g,p,0,2*Math.PI,!0),t.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],v=p,y=n+1,_=0;_<4;_++){var x=m[_],b=x[0],w=x[1];t.moveTo(d+b*v,g+w*v),t.lineTo(d+b*y,g+w*y),t.stroke()}}if(o){var E=l._transformCorners(this.getInternalBounds());t.beginPath();for(var _=0;_<8;_++)t[_?"lineTo":"moveTo"](E[_],E[++_]);t.closePath(),t.stroke();for(var _=0;_<8;_++)t.fillRect(E[_]-p,E[++_]-p,n,n)}}},_canComposite:function(){return!1}},l.each(["down","drag","up","move"],function(t){this["removeOn"+l.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),C=A.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=c)},_getClipItem:function(){var t=this._clipItem;if(t===c){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(e&&e.appended(i._matrix),l.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s];o!==i&&o.draw(t,e)}}}),L=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=A.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&l.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new b(t.width,t.height,this,"setSize")},setSize:function(){var t=x.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(x.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new b(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=x.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var n=x.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(z[l.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),a.settings.applyMatrix&&e.setApplyMatrix(!0),(t===c||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=e.dontFinish||e.clip,c=!i;if(s||a||o){var u=this._type,h=this._radius,l="circle"===u;if(e.dontStart||t.beginPath(),c&&l)t.arc(0,0,h,0,2*Math.PI,!0);else{var p=l?h:h.width,f=l?h:h.height,d=this._size,g=d.width,m=d.height;if(c&&"rectangle"===u&&0===p&&0===f)t.rect(-g/2,-m/2,g,m);else{var v=g/2,y=m/2,_=.44771525016920644,x=p*_,b=f*_,w=[-v,-y+f,-v,-y+b,-v+x,-y,-v+p,-y,v-p,-y,v-x,-y,v,-y+b,v,-y+f,v,y-f,v,y-b,v-x,y,v-p,y,-v+p,y,-v+x,y,-v,y-b,-v,y-f];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==p&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==f&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==p&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(z._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var a=new y(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(r),c=o.subtract(a.multiply(i)),u=new w(n?o.add(a.multiply(n)):o,c);if(u.contains(e))return{point:c,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,a){var o=!1,c=this._style,u=r.stroke&&c.hasStroke(),h=r.fill&&c.hasFill();if(u||h){var l=this._type,p=this._radius,f=u?c.getStrokeWidth()/2:0,d=r._tolerancePadding.add(z._getStrokePadding(f,!c.getStrokeScaling()&&a));if("rectangle"===l){var g=d.multiply(2),m=t(this,i,g);if(m)o=e(i.subtract(m.point),p,d,m.quadrant);else{var v=new w(this._size).setCenter(0,0),y=v.expand(g),_=v.expand(g.negate());o=y._containsPoint(i)&&!_._containsPoint(i)}}else o=e(i,p,d)}return o?new O(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=new P(l.getNamed(r),e);return s._type=t,s._size=n,s._radius=i,s}return{Circle:function(){var e=y.readNamed(arguments,"center"),n=l.readNamed(arguments,"radius");return t("circle",e,new x(2*n),n,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),n=x.min(x.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=P._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(l.hasNamed(t,"radius"))e=y.readNamed(t,"center"),n=x.readNamed(t,"radius");else{var i=w.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),R=A.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){if(!this._initialize(t,e!==c&&y.read(arguments,1))){var n="string"==typeof t?h.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new x,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=ot.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new b(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=x.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(ot.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&ot.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new y(0,0).transform(t),n=new y(1,0).transform(t).subtract(e),i=new y(0,1).transform(t).subtract(e);return new x(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=n.getView(),i=t&&t.type||"load";e&&n.responds(i)&&(a=e._scope,n.emit(i,new tt(t)))}var n=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&J.add(t,{load:function(i){n._setImage(t),e(i)},error:e})},_setImage:function(t){this._canvas&&ot.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new x(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=ot.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ot.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=ot.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new R(A.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=y.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof B?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),r=Math.min(e.height,32),s=R._sampleContext;s?s.clearRect(0,0,33,33):s=R._sampleContext=ot.getContext(new x(32)),s.save();var a=(new S).scale(i/e.width,r/e.height).translate(-e.x,-e.y);a.applyToContext(s),n&&n.draw(s,new l({clip:!0,matrices:[a]})),this._matrix.applyToContext(s);var o=this.getElement(),c=this._size;o&&s.drawImage(o,-c.width/2,-c.height/2),s.restore();for(var u=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],p=0,f=0,d=u.length;f<d;f+=4){var g=u[f+3];p+=g,g/=255,h[0]+=u[f]*g,h[1]+=u[f+1]*g,h[2]+=u[f+2]*g}for(var f=0;f<3;f++)h[f]/=p;return p?q.read(h):null},getPixel:function(){var t=y.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new q("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=y.read(arguments),e=q.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),a=s.data;a[0]=255*n[0],a[1]=255*n[1],a[2]=255*n[2],a[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=x.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=y.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new O("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),I=A.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==c&&y.read(arguments,1))||this.setDefinition(t instanceof k?t:new k(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),k=l.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=v.get(),this.project=a.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return l.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&A._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new y),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new I(this,t)},clone:function(){return new k(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),O=l.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&l.read(t);return l.set({type:null,tolerance:a.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),N=l.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,r,s){var a,o,u,h,l=arguments.length;l>0&&(null==t||"object"==typeof t?1===l&&t&&"point"in t?(a=t.point,o=t.handleIn,u=t.handleOut,h=t.selection):(a=t,o=e,u=n,h=i):(a=[t,e],o=n!==c?[n,i]:null,u=r!==c?[r,s]:null)),new D(a,this,"_point"),new D(o,this,"_handleIn"),new D(u,this,"_handleOut"),h&&this.setSelection(h)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),l.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(129))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==c?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new U(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},r=i.type,s=i.factor,a=this.getPrevious(),o=this.getNext(),u=(a||this)._point,h=this._point,l=(o||this)._point,p=u.getDistance(h),f=h.getDistance(l);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(a&&o){var d=u.subtract(l),g=s===c?.4:s,m=g*p/(p+f);e||this.setHandleIn(d.multiply(m)),n||this.setHandleOut(d.multiply(m-g))}}else{var v=s===c?.5:s,_=Math.pow(p,v),x=_*_,b=Math.pow(f,v),w=b*b;if(!e&&a){var E=2*w+3*b*_+x,S=3*b*(b+_);this.setHandleIn(0!==S?new y((w*u._x+E*h._x-x*l._x)/S-h._x,(w*u._y+E*h._y-x*l._y)/S-h._y):new y)}if(!n&&o){var E=2*x+3*_*b+w,S=3*_*(_+b);this.setHandleOut(0!==S?new y((x*l._x+E*h._x-w*u._x)/S-h._x,(x*l._y+E*h._y-w*u._y)/S-h._y):new y)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new N(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new N(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,a=e._point,o=t._handleIn,c=e._handleIn,u=e._handleOut,h=t._handleOut;this._point._set(i*s._x+r*a._x,i*s._y+r*a._y,!0),this._handleIn._set(i*o._x+r*c._x,i*o._y+r*c._y,!0),this._handleOut._set(i*h._x+r*u._x,i*h._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=i._x,o=i._y,c=2;return e[0]=a,e[1]=o,r&&(e[c++]=r._x+a,e[c++]=r._y+o),s&&(e[c++]=s._x+a,e[c++]=s._y+o),t&&(t._transformCoordinates(e,e,c/2),a=e[0],o=e[1],n?(i._x=a,i._y=o,c=2,r&&(r._x=e[c++]-a,r._y=e[c++]-o),s&&(s._x=e[c++]-a,s._y=e[c++]-o)):(r||(e[c++]=a,e[c++]=o),s||(e[c++]=a,e[c++]=o))),e}}),D=y.extend({initialize:function(t,e,n){var i,r,s;if(t)if((i=t[0])!==c)r=t[1];else{var a=t;(i=a.x)===c&&(a=y.read(arguments),i=a.x),r=a.y,s=a.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=m.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),F=l.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,a,o){var c,u,h,l,p,f,d=arguments.length;3===d?(this._path=t,c=e,u=n):d?1===d?"segment1"in t?(c=new N(t.segment1),u=new N(t.segment2)):"point1"in t?(h=t.point1,p=t.handle1,f=t.handle2,l=t.point2):Array.isArray(t)&&(h=[t[0],t[1]],l=[t[6],t[7]],p=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===d?(c=new N(t),u=new N(e)):4===d?(h=t,p=e,f=n,l=i):8===d&&(h=[t,e],l=[a,o],p=[n-t,i-e],f=[r-a,s-o]):(c=new N,u=new N),this._segment1=c||new N(h,null,p),this._segment2=u||new N(l,f,null)},_serialize:function(t,e){return l.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=c},clone:function(){return new F(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return F.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return F.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new y(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=F.getLength(this.getValues(),0,1)),this._length},getArea:function(){return F.getArea(this.getValues())},getLine:function(){return new T(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new F(F.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return F.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=F.subdivide(this.getValues(),t),r=i[0],s=i[1],a=e||this.hasHandles(),o=this._segment1,c=this._segment2,u=this._path;a&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),c._handleIn._set(s[4]-s[6],s[5]-s[7]));var h=r[6],l=r[7],p=new N(new y(h,l),a&&new y(r[4]-h,r[5]-l),a&&new y(s[2]-h,s[3]-l));u?(u.insert(o._index+1,p),n=this.getNext()):(this._segment2=p,this._changed(),n=new F(p,c))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===c?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===c?.5:e?t:this.getTimeAt(t))},reversed:function(){return new F(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,a=e._handleIn,o=e._point,c=r.x,u=r.y,h=o.x,l=o.y,p=i?[c,u,c,u,h,l,h,l]:[c,u,c+s._x,u+s._y,h+a._x,l+a._y,h,l];return n&&n._transformCoordinates(p,p,4),p},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7];e===c&&(e=.5);var l=1-e,p=l*n+e*r,f=l*i+e*s,d=l*r+e*a,g=l*s+e*o,m=l*a+e*u,v=l*o+e*h,y=l*p+e*d,_=l*f+e*g,x=l*d+e*m,b=l*g+e*v,w=l*y+e*x,E=l*_+e*b;return[[n,i,p,f,y,_,w,E],[w,E,x,b,m,v,u,h]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],a=t[i+4],o=t[i+6];if(r>=s==s>=a&&s>=a==a>=o||F.isStraight(t))n.push(t);else{var c=3*(s-a)-r+o,u=2*(r+a)-4*s,h=s-r,l=[],p=m.solveQuadratic(c,u,h,l,1e-8,1-1e-8);if(p){l.sort();var f=l[0],d=F.subdivide(t,f);n.push(d[0]),p>1&&(f=(l[1]-f)/(1-f),d=F.subdivide(d[1],f),n.push(d[0])),n.push(d[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var a=t[e],o=t[e+2],c=t[e+4],u=t[e+6],h=0;if(!(a<n&&u<n&&o<n&&c<n||a>n&&u>n&&o>n&&c>n)){var l=3*(o-a),p=3*(c-o)-l,f=u-a-l-p;h=m.solveCubic(f,p,l,a-n,i,r,s)}return h},getTimeOf:function(t,e){var n=new y(t[0],t[1]),i=new y(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=F.solveCubic(t,a,r[a],s,0,1),c=0;c<o;c++){var u=s[c];if(e.isClose(F.getPoint(t,u),1e-7))return u}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){function n(n){if(n>=0&&n<=1){var i=e.getDistance(F.getPoint(t,n),!0);if(i<l)return l=i,p=n,!0}}if(F.isStraight(t)){var i=t[0],r=t[1],s=t[6],a=t[7],o=s-i,c=a-r,u=o*o+c*c;if(0===u)return 0;var h=((e.x-i)*o+(e.y-r)*c)/u;return h<1e-12?0:h>.999999999999?1:F.getTimeOf(t,new y(i+h*o,r+h*c))}for(var l=1/0,p=0,f=0;f<=100;f++)n(f/100);for(var d=.005;d>1e-8;)n(p-d)||n(p+d)||(d/=2);return p},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=F.subdivide(t,e)[1]),n<1&&(t=F.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],c=t[6],u=t[7],h=3*r-2*n-c,l=3*s-2*i-u,p=3*a-2*c-n,f=3*o-2*u-i;return Math.max(h*h,p*p)+Math.max(l*l,f*f)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],c=t[7];return 3*((c-n)*(i+s)-(o-e)*(r+a)+r*(e-s)-i*(n-a)+c*(s+e/3)-o*(a+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)F._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,a,o,c){function u(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>o[r]&&(o[r]=i)}s/=2;var h=a[r]-s,l=o[r]+s;if(t<h||e<h||n<h||i<h||t>l||e>l||n>l||i>l)if(e<t!=e<i&&n<t!=n<i)u(t,s),u(i,s);else{var p=3*(e-n)-t+i,f=2*(t+n)-4*e,d=e-t,g=m.solveQuadratic(p,f,d,c);u(i,0);for(var v=0;v<g;v++){var y=c[v],_=1-y;1e-8<=y&&y<=1-1e-8&&u(_*_*_*t+3*_*_*y*e+3*_*y*y*n+y*y*y*i,s)}}}}},l.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=z[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),l.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var s=new T(t,i);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(i.add(n))<1e-7){var a=r.dot(r),o=r.dot(e)/a,c=r.dot(n)/a;return o>=0&&o<=1&&c<=0&&c>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],a=e[7];return t(new y(i,r),new y(e[2]-i,e[3]-r),new y(e[4]-s,e[5]-a),new y(s,a),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new U(this,t):null},getTimeAt:function(t,e){return F.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return F.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=y.read(arguments),e=this.getValues(),n=F.getNearestTime(e,t),i=F.getPoint(e,n);return new U(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return l.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return F[t](i,n?e:F.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return F[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],c=t[7],u=9*(i-s)+3*(o-e),h=6*(e+s)-12*i,l=3*(i-e),p=9*(r-a)+3*(c-n),f=6*(n+a)-12*r,d=3*(r-n);return function(t){var e=(u*t+h)*t+l,n=(p*t+f)*t+d;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],a=t[2],o=t[3],c=t[4],u=t[5],h=t[6],l=t[7],p=m.isZero;p(a-r)&&p(o-s)&&(a=r,o=s),p(c-h)&&p(u-l)&&(c=h,u=l);var f,d,g=3*(a-r),v=3*(c-a)-g,_=h-r-g-v,x=3*(o-s),b=3*(u-o)-x,w=l-s-x-b;if(0===n)f=0===e?r:1===e?h:((_*e+v)*e+g)*e+r,d=0===e?s:1===e?l:((w*e+b)*e+x)*e+s;else{if(e<1e-8?(f=g,d=x):e>1-1e-8?(f=3*(h-c),d=3*(l-u)):(f=(3*_*e+2*v)*e+g,d=(3*w*e+2*b)*e+x),i){0===f&&0===d&&(e<1e-8||e>1-1e-8)&&(f=c-a,d=u-o);var E=Math.sqrt(f*f+d*d);E&&(f/=E,d/=E)}if(3===n){var c=6*_*e+2*v,u=6*w*e+2*b,S=Math.pow(f*f+d*d,1.5);f=0!==S?(f*u-d*c)/S:0,d=0}}return 2===n?new y(d,-f):new y(f,d)}return{statics:{classify:function(t){function e(t,e,n){var i=e!==c,r=i&&e>0&&e<1,s=i&&n>0&&n<1;return!i||(r||s)&&("loop"!==t||r&&s)||(t="arch",r=s=!1),{type:t,roots:r||s?r&&s?e<n?[e,n]:[n,e]:[r?e:n]:null}}var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],l=n*(h-o)+i*(a-u)+u*o-h*a,p=r*(i-h)+s*(u-n)+n*h-i*u,f=a*(s-i)+o*(n-r)+r*i-s*n,d=3*f,g=d-p,v=g-p+l,y=Math.sqrt(v*v+g*g+d*d),_=0!==y?1/y:0,x=m.isZero;if(v*=_,g*=_,d*=_,x(v))return x(g)?e(x(d)?"line":"quadratic"):e("serpentine",d/(3*g));var b=3*g*g-4*v*d;if(x(b))return e("cusp",g/(2*v));var w=b>0?Math.sqrt(b/3):Math.sqrt(-b),E=2*v;return e(b>0?"serpentine":"loop",(g+w)/E,(g-w)/E)},getLength:function(n,i,r,s){if(i===c&&(i=0),r===c&&(r=1),F.isStraight(n)){var a=n;r<1&&(a=F.subdivide(a,r)[0],i/=r),i>0&&(a=F.subdivide(a,i)[1]);var o=a[6]-a[0],u=a[7]-a[1];return Math.sqrt(o*o+u*u)}return m.integrate(s||t(n),i,r,e(i,r))},getTimeAt:function(n,i,r){function s(t){return g+=m.integrate(l,r,t,e(r,t)),r=t,g-i}if(r===c&&(r=i<0?1:0),0===i)return r;var a=Math.abs,o=i>0,u=o?r:0,h=o?1:r,l=t(n),p=F.getLength(n,u,h,l),f=a(i)-p;if(a(f)<1e-12)return o?h:u;if(f>1e-12)return null;var d=i/p,g=0;return m.findRoot(s,l,r+d,u,h,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],c=t[7],u=3*i-e-3*s+o,h=3*e-6*i+3*s,l=-3*e+3*i,p=3*r-n-3*a+c,f=3*n-6*r+3*a,d=-3*n+3*r,g=[];return m.solveCubic(9*(u*u+p*p),9*(u*h+f*p),2*(h*h+f*f)+3*(l*u+d*p),l*h+f*d,g,1e-8,1-1e-8),g.sort()}}}},new function(){function t(t,e,n,i,r,s,a){var o=!a&&n.getPrevious()===r,c=!a&&n!==r&&n.getNext()===r;if(null!==i&&i>=(o?1e-8:0)&&i<=(c?1-1e-8:1)&&null!==s&&s>=(c?1e-8:0)&&s<=(o?1-1e-8:1)){var u=new U(n,i,null,a),h=new U(r,s,null,a);u._intersection=h,h._intersection=u,e&&!e(u)||U.insert(t,u,!0)}}function e(r,s,a,o,c,u,h,l,p,f,d,g,m){if(++p>=4096||++l>=40)return p;var v,y,_=s[0],x=s[1],b=s[6],w=s[7],E=T.getSignedDistance,S=E(_,x,b,w,s[2],s[3]),M=E(_,x,b,w,s[4],s[5]),A=S*M>0?.75:4/9,C=A*Math.min(0,S,M),L=A*Math.max(0,S,M),P=E(_,x,b,w,r[0],r[1]),R=E(_,x,b,w,r[2],r[3]),I=E(_,x,b,w,r[4],r[5]),k=E(_,x,b,w,r[6],r[7]),O=n(P,R,I,k),N=O[0],D=O[1];if(0===S&&0===M&&0===P&&0===R&&0===I&&0===k||null==(v=i(N,D,C,L))||null==(y=i(N.reverse(),D.reverse(),C,L)))return p;var U=f+(d-f)*v,B=f+(d-f)*y;if(Math.max(m-g,B-U)<1e-9){var z=(U+B)/2,j=(g+m)/2;t(c,u,h?o:a,h?j:z,h?a:o,h?z:j)}else if(r=F.getPart(r,v,y),y-v>.8)if(B-U>m-g){var H=F.subdivide(r,.5),z=(U+B)/2;p=e(s,H[0],o,a,c,u,!h,l,p,g,m,U,z),p=e(s,H[1],o,a,c,u,!h,l,p,g,m,z,B)}else{var H=F.subdivide(s,.5),j=(g+m)/2;p=e(H[0],r,o,a,c,u,!h,l,p,g,j,U,B),p=e(H[1],r,o,a,c,u,!h,l,p,j,m,U,B)}else p=m-g>=1e-9?e(s,r,o,a,c,u,!h,l,p,g,m,U,B):e(r,s,a,o,c,u,h,l,p,U,B,g,m);return p}function n(t,e,n,i){var r,s=[0,t],a=[1/3,e],o=[2/3,n],c=[1,i],u=e-(2*t+i)/3,h=n-(t+2*i)/3;if(u*h<0)r=[[s,a,c],[s,o,c]];else{var l=u/h;r=[l>=2?[s,a,c]:l<=.5?[s,o,c]:[s,a,o,c],[s,c]]}return(u||h)<0?r.reverse():r}function i(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],c=t[s][1];if(e?c>=n:c<=n)return c===n?o:i+(n-r)*(o-i)/(c-r);i=o,r=c}return null}function s(t,e,n,i,r){var s=m.isZero;if(s(i)&&s(r)){var a=F.getTimeOf(t,new y(e,n));return null===a?[]:[a]}for(var o=Math.atan2(-r,i),c=Math.sin(o),u=Math.cos(o),h=[],l=[],p=0;p<8;p+=2){var f=t[p]-e,d=t[p+1]-n;h.push(f*u-d*c,f*c+d*u)}return F.solveCubic(h,1,0,l,0,1),l}function a(e,n,i,r,a,o,c){for(var u=n[0],h=n[1],l=n[6],p=n[7],f=s(e,u,h,l-u,p-h),d=0,g=f.length;d<g;d++){var m=f[d],v=F.getPoint(e,m),y=F.getTimeOf(n,v);null!==y&&t(a,o,c?r:i,c?y:m,c?i:r,c?m:y)}}function o(e,n,i,r,s,a){var o=T.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(s,a,i,F.getTimeOf(e,o),r,F.getTimeOf(n,o))}function c(n,i,r,s,c,u){var h=Math.min,p=Math.max;if(p(n[0],n[2],n[4],n[6])+1e-12>h(i[0],i[2],i[4],i[6])&&h(n[0],n[2],n[4],n[6])-1e-12<p(i[0],i[2],i[4],i[6])&&p(n[1],n[3],n[5],n[7])+1e-12>h(i[1],i[3],i[5],i[7])&&h(n[1],n[3],n[5],n[7])-1e-12<p(i[1],i[3],i[5],i[7])){var f=l(n,i);if(f)for(var d=0;d<2;d++){var g=f[d];t(c,u,r,g[0],s,g[1],!0)}else{var m=F.isStraight(n),v=F.isStraight(i),_=m&&v,x=m&&!v,b=c.length;if((_?o:m||v?a:e)(x?i:n,x?n:i,x?s:r,x?r:s,c,u,x,0,0,0,1,0,1),!_||c.length===b)for(var d=0;d<4;d++){var w=d>>1,E=1&d,S=6*w,T=6*E,M=new y(n[S],n[S+1]),A=new y(i[T],i[T+1]);M.isClose(A,1e-12)&&t(c,u,r,w,s,E)}}}return c}function u(e,n,i,r){var s=F.classify(e);if("loop"===s.type){var a=s.roots;t(i,r,n,a[0],n,a[1])}return i}function h(t,e,n,i,r,s){var a=!e;a&&(e=t);for(var o,h,l=t.length,p=e.length,f=[],d=[],g=0;g<p;g++)f[g]=e[g].getValues(r);for(var g=0;g<l;g++){var m=t[g],v=a?f[g]:m.getValues(i),y=m.getPath();y!==h&&(h=y,o=[],d.push(o)),a&&u(v,m,o,n);for(var _=a?g+1:0;_<p;_++){if(s&&o.length)return o;c(v,f[_],m,e[_],o,n)}}o=[];for(var g=0,x=d.length;g<x;g++)o.push.apply(o,d[g]);return o}function l(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=T.getDistance,s=F.isStraight(t),a=F.isStraight(e),o=s&&a,c=n(t)<n(e),u=c?e:t,h=c?t:e,l=u[0],p=u[1],f=u[6]-l,d=u[7]-p;if(r(l,p,f,d,h[0],h[1],!0)<1e-7&&r(l,p,f,d,h[6],h[7],!0)<1e-7)!o&&r(l,p,f,d,u[2],u[3],!0)<1e-7&&r(l,p,f,d,u[4],u[5],!0)<1e-7&&r(l,p,f,d,h[2],h[3],!0)<1e-7&&r(l,p,f,d,h[4],h[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var g=[t,e],m=[],v=0;v<4&&m.length<2;v++){var _=1&v,x=1^_,b=v>>1,w=F.getTimeOf(g[_],new y(g[x][b?6:0],g[x][b?7:1]));if(null!=w){var E=_?[b,w]:[w,b];(!m.length||i(E[0]-m[0][0])>1e-8&&i(E[1]-m[0][1])>1e-8)&&m.push(E)}if(v>2&&!m.length)break}if(2!==m.length)m=null;else if(!o){var S=F.getPart(t,m[0][0],m[1][0]),M=F.getPart(e,m[0][1],m[1][1]);(i(M[2]-S[2])>1e-7||i(M[3]-S[3])>1e-7||i(M[4]-S[4])>1e-7||i(M[5]-S[5])>1e-7)&&(m=null)}return m}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?c(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:h,getCurveLineIntersections:s}}}),U=l.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(n._time=e.getTimeOf(n._point)))return n._setCurve(e),e}var e=this._path,n=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof U){var i=this.getCurve(),r=t.getCurve(),s=i._path;if(s===r._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),c=!e&&this._intersection,u=!e&&t._intersection;n=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!c&&!u||c&&u&&c.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=g.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e){var n=t.getValues(),i=F.classify(n).roots||F.getPeaks(n),r=i.length,s=e&&r>1?i[r-1]:r>0?i[0]:.5;l.push(F.getLength(n,e?s:0,e?1:s)/2)}function e(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),r=n.getTime(),s=i>=1e-8&&i<=1-1e-8,a=r>=1e-8&&r<=1-1e-8;if(s&&a)return!this.isTouching();var o=this.getCurve(),c=i<1e-8?o.getPrevious():o,u=n.getCurve(),h=r<1e-8?u.getPrevious():u;if(i>1-1e-8&&(o=o.getNext()),r>1-1e-8&&(u=u.getNext()),!(c&&o&&h&&u))return!1;var l=[];s||(t(c,!0),t(o,!1)),a||(t(h,!0),t(u,!1));var p=this.getPoint(),f=Math.min.apply(Math,l),d=s?o.getTangentAtTime(i):o.getPointAt(f).subtract(p),g=s?d.negate():c.getPointAt(-f).subtract(p),m=a?u.getTangentAtTime(r):u.getPointAt(f).subtract(p),v=a?m.negate():h.getPointAt(-f).subtract(p),y=g.getAngle(),_=d.getAngle(),x=v.getAngle(),b=m.getAngle();return!!(s?e(y,x,b)^e(_,x,b)&&e(y,b,x)^e(_,b,x):e(x,y,_)^e(b,y,_)&&e(x,_,y)^e(b,_,y))},hasOverlap:function(){return!!this._overlap}},l.each(F._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){function i(n,i){for(var s=n+i;s>=-1&&s<=r;s+=i){var a=t[(s%r+r)%r];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(var r=t.length,s=0,a=r-1;s<=a;){var o,c=s+a>>>1,u=t[c];if(n&&(o=e.equals(u)?u:i(c,-1)||i(c,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var h=e.getPath(),l=u.getPath();(h!==l?h._id-l._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=c-1:s=c+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),B=A.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(l.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?j:z)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var n=+i[t];return o&&(n+=c[e]),n}function n(t){return new y(e(t,"x"),e(t+1,"y"))}var i,r,s,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,c=new y,u=new y;this.clear();for(var h=0,l=a&&a.length;h<l;h++){var p=a[h],f=p[0],d=f.toLowerCase();i=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var g=i&&i.length;switch(o=f===d,"z"!==r||/[mz]/.test(d)||this.moveTo(c),d){case"m":case"l":for(var m="m"===d,v=0;v<g;v+=2)this[m?"moveTo":"lineTo"](c=n(v)),m&&(u=c,m=!1);s=c;break;case"h":case"v":var _="h"===d?"x":"y";c=c.clone();for(var v=0;v<g;v++)c[_]=e(v,_),this.lineTo(c);s=c;break;case"c":for(var v=0;v<g;v+=6)this.cubicCurveTo(n(v),s=n(v+2),c=n(v+4));break;case"s":for(var v=0;v<g;v+=4)this.cubicCurveTo(/[cs]/.test(r)?c.multiply(2).subtract(s):c,s=n(v),c=n(v+2)),r=d;break;case"q":for(var v=0;v<g;v+=4)this.quadraticCurveTo(s=n(v),c=n(v+2));break;case"t":for(var v=0;v<g;v+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?c.multiply(2).subtract(s):c,c=n(v)),r=d;break;case"a":for(var v=0;v<g;v+=7)this.arcTo(c=n(v+5),new x(+i[v],+i[v+1]),+i[v+2],+i[v+4],+i[v+3]);break;case"z":this.closePath(1e-12),c=u}r=d}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),a=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(a),1e-12)?F.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,a,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=y.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<n&&(n=a._distance,i=a)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],a=e[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var c=o.length,u=a.length;if(c<u)for(var h=i?N:z,l=c;l<u;l++)this.add(new h);else c>u&&this[i?"removeSegments":"removeChildren"](u,c);for(var l=0;l<u;l++)o[l].interpolate(s[l],a[l],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,s=i.length,a=[],o=0;e=!0;for(var c=r-1;c>=0&&e;c--){var u=n[c];e=!1;for(var h=s-1;h>=0&&!e;h--)u.compare(i[h])&&(a[h]||(a[h]=!0,o++),e=!0)}e=e&&o===s}return e}}),z=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==c||t.x===c&&t.point===c?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=c,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&l.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=c,16&e)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 32&e&&(this._bounds=c)},getStyle:function(){var t=this._parent;return(t instanceof j?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=c,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(N.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new F(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new F(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){if(e._transformCoordinates(t,d),i=d[0],r=d[1],m)v.push("M"+f.pair(i,r)),m=!1;else if(o=d[2],c=d[3],o===i&&c===r&&u===s&&h===a){if(!n){var l=i-s,p=r-a;v.push(0===l?"v"+f.number(p):0===p?"h"+f.number(l):"l"+f.pair(l,p))}}else v.push("c"+f.pair(u-s,h-a)+" "+f.pair(o-s,c-a)+" "+f.pair(i-s,r-a));s=i,a=r,u=d[4],h=d[5]}var i,r,s,a,o,c,u,h,l=this._segments,p=l.length,f=new g(e),d=new Array(6),m=!0,v=[];if(!p)return"";for(var y=0;y<p;y++)n(l[y]);return this._closed&&p>0&&(n(l[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,e=s?n.length:e,a=0;a<r;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var a=e+r,c=n.length;a<c;a++)n[a]._index=a}if(i){var u=this._countCurves(),h=e>0&&e+r-1===u?e-1:e,l=h,p=Math.min(h+r,u);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),l+=t._curves.length);for(var a=l;a<p;a++)i.splice(a,0,new F(this,null,null));this._adjustCurves(h,p)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)n=r[s],n._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(N.readList(arguments)):this._add([N.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(N.readList(arguments,1),t):this._add([N.read(arguments,1)],t)[0]},addSegment:function(){return this._add([N.read(arguments)])[0]},insertSegment:function(t){return this._add([N.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(N.readList(t))},insertSegments:function(t,e){return this._add(N.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=l.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,a=i.splice(t,e-t),o=a.length;if(!o)return a;for(var c=0;c<o;c++){var u=a[c];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}for(var c=t,h=i.length;c<h;c++)i[c]._index=c;if(r){for(var p=t>0&&e===s+(this._closed?1:0)?t-1:t,r=r.splice(p,o),c=r.length-1;c>=0;c--)r[c]._path=null;n&&(a._curves=r.slice(1)),this._adjustCurves(p,p)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=F.getArea(F.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var s,a=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):(s=new z(A.NO_INSERT),s.insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,e){var n,i=e===c?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var a=t.getFirstSegment();if(r&&r._point.isClose(a._point,n))r.setHandleOut(a._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,n)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var c=this.getFirstSegment(),u=this.getLastSegment();return c!==u&&c._point.isClose(u._point,n)&&(c.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new H(this,t||.25,256,!0),n=e.parts,i=n.length,r=[],s=0;s<i;s++)r.push(new N(n[s].curve.slice(0,2)));!this._closed&&i>0&&r.push(new N(n[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new V(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof F&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&o?i%a:i<0?i+a:i,a-1)}var n=this,i=t||{},r=i.type||"asymmetric",s=this._segments,a=s.length,o=this._closed,u=o&&i.from===c&&i.to===c,h=e(i.from,0),l=e(i.to,a-1);if(h>l)if(o)h-=a;else{var p=h;h=l,l=p}if(/^(?:asymmetric|continuous)$/.test(r)){var f="asymmetric"===r,d=Math.min,g=l-h+1,m=g-1,v=u?d(g,4):1,y=v,_=v,x=[];if(o||(y=d(1,h),_=d(1,a-l-1)),(m+=y+_)<=1)return;for(var b=0,w=h-y;b<=m;b++,w++)x[b]=s[(w<0?w+a:w)%a]._point;for(var E=x[0]._x+2*x[1]._x,S=x[0]._y+2*x[1]._y,T=2,M=m-1,A=[E],C=[S],L=[T],P=[],R=[],b=1;b<m;b++){var I=b<M,k=I?1:f?1:2,O=I?4:f?2:7,N=I?4:f?3:8,D=I?2:f?0:1,U=k/T;T=L[b]=O-U,E=A[b]=N*x[b]._x+D*x[b+1]._x-U*E,S=C[b]=N*x[b]._y+D*x[b+1]._y-U*S}P[M]=A[M]/L[M],R[M]=C[M]/L[M];for(var b=m-2;b>=0;b--)P[b]=(A[b]-P[b+1])/L[b],R[b]=(C[b]-R[b+1])/L[b];P[m]=(3*x[m]._x-P[M])/2,R[m]=(3*x[m]._y-R[M])/2;for(var b=y,B=m-_,w=h;b<=B;b++,w++){var z=s[w<0?w+a:w],j=z._point,H=P[b]-j._x,V=R[b]-j._y;(u||b<B)&&z.setHandleOut(H,V),(u||b>y)&&z.setHandleIn(-H,-V)}}else for(var b=h;b<=l;b++)s[b<0?b+a:b].smooth(i,!u&&b===h,!u&&b===l)},toShape:function(t){function e(t,e){var n=u[t],i=n.getNext(),r=u[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function n(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var s=e._point,a=n._point,o=new T(s,i,!0).intersect(new T(a,r,!0),!0);return o&&m.isZero(i.getLength()/o.subtract(s).getLength()-.5522847498307936)&&m.isZero(r.getLength()/o.subtract(a).getLength()-.5522847498307936)}return!1}function i(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this._closed)return null;var r,s,a,o,u=this._segments;if(!this.hasHandles()&&4===u.length&&e(0,2)&&e(1,3)&&function(t){var e=u[t],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point))}(1)?(r=P.Rectangle,s=new x(i(0,3),i(0,1)),o=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&n(0)&&n(2)&&n(4)&&n(6)&&e(1,5)&&e(3,7)?(r=P.Rectangle,s=new x(i(1,6),i(0,3)),a=s.subtract(new x(i(0,7),i(1,2))).divide(2),o=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&n(0)&&n(1)&&n(2)&&n(3)&&(m.isZero(i(0,2)-i(1,3))?(r=P.Circle,a=i(0,2)/2):(r=P.Ellipse,a=new x(i(2,0)/2,i(3,1)/2)),o=u[1]._point),r){var h=this.getPosition(!0),l=new r({center:h,size:s,radius:a,insert:!1});return l.copyAttributes(this,!0),l._matrix.prepend(this._matrix),l.rotate(o.subtract(h).getAngle()+90),(t===c||t)&&l.insertAbove(this),l}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof j)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,s=i.length;if(!r||!s)return r==s;for(var a,o,c=n[0].getValues(),u=[],h=0,l=0,p=0;p<s;p++){var f=i[p].getValues();u.push(f);var d=F.getOverlaps(c,f);if(d){a=!p&&d[0][0]>0?s-1:p,o=d[0][1];break}}for(var g,m=Math.abs,f=u[a];c&&f;){var d=F.getOverlaps(c,f);if(d){if(m(d[0][0]-l)<1e-8){l=d[1][0],1===l&&(c=++h<r?n[h].getValues():null,l=0);var v=d[0][1];if(m(v-o)<1e-8){if(g||(g=[a,v]),o=d[1][1],1===o&&(++a>=s&&(a=0),f=u[a]||i[a].getValues(),o=0),!c)return g[0]===a&&g[1]===o;continue}}}break}return!1},_hitTestSelf:function(t,e,n,i){function r(e,n){return t.subtract(e).divide(n).length<=1}function s(t,n,i){if(!e.selected||n.isSelected()){var s=t._point;if(n!==s&&(n=n.add(s)),r(n,b))return new O(i,g,{segment:t,point:n})}}function a(t,n){return(n||e.segments)&&s(t,t._point,"segment")||!n&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function o(t){p.add(t)}function c(e){var n=_||e._index>0&&e._index<y-1;if("round"===(n?u:h))return r(e._point,b);if(p=new z({internal:!0,closed:!0}),n?e.isSmooth()||z._addBevelJoin(e,u,T,l,null,i,o,!0):"square"===h&&z._addSquareCap(e,h,T,null,i,o,!0),!p.isEmpty()){var s;return p.contains(t)||(s=p.getNearestLocation(t))&&r(s.getPoint(),x)}}var u,h,l,p,f,d,g=this,m=this.getStyle(),v=this._segments,y=v.length,_=this._closed,x=e._tolerancePadding,b=x,w=e.stroke&&m.hasStroke(),E=e.fill&&m.hasFill(),S=e.curves,T=w?m.getStrokeWidth()/2:E&&e.tolerance>0||S?0:null;if(null!==T&&(T>0?(u=m.getStrokeJoin(),h=m.getStrokeCap(),l=m.getMiterLimit(),b=b.add(z._getStrokePadding(T,i))):u=h="round"),!e.ends||e.segments||_){if(e.segments||e.handles)for(var M=0;M<y;M++)if(d=a(v[M]))return d}else if(d=a(v[0],!0)||a(v[y-1],!0))return d;if(null!==T){if(f=this.getNearestLocation(t)){var A=f.getTime();0===A||1===A&&y>1?c(f.getSegment())||(f=null):r(f.getPoint(),b)||(f=null)}if(!f&&"miter"===u&&y>1)for(var M=0;M<y;M++){var C=v[M];if(t.getDistance(C._point)<=l*T&&c(C)){f=C.getLocation();break}}}return!f&&E&&this._contains(t)||f&&!w&&!S?new O("fill",this):f?new O(w?"stroke":"curve",this,{location:f,point:f.getPoint()}):null}},l.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=y.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,a=e[i];if((n+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new U(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,n,i){function r(e){var n=c[e],i=c[e+1];s==n&&a==i||(t.beginPath(),t.moveTo(s,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}for(var s,a,o=i/2,c=new Array(6),u=0,h=e.length;u<h;u++){var l=e[u],p=l._selection;if(l._transformCoordinates(n,c),s=c[0],a=c[1],2&p&&r(2),4&p&&r(4),t.fillRect(s-o,a-o,i,i),!(1&p)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-o+1,a-o+1,i-2,i-2),t.fillStyle=f}}}function e(t,e,n){function i(e){if(n)e._transformCoordinates(n,d),r=d[0],s=d[1];else{var i=e._point;r=i._x,s=i._y}if(g)t.moveTo(r,s),g=!1;else{if(n)c=d[2],u=d[3];else{var p=e._handleIn;c=r+p._x,u=s+p._y}c===r&&u===s&&h===a&&l===o?t.lineTo(r,s):t.bezierCurveTo(h,l,c,u,r,s)}if(a=r,o=s,n)h=d[4],l=d[5];else{var p=e._handleOut;h=a+p._x,l=o+p._y}}for(var r,s,a,o,c,u,h,l,p=e._segments,f=p.length,d=new Array(6),g=!0,m=0;m<f;m++)i(p[m]);e._closed&&f>0&&i(p[0])}return{_draw:function(t,n,i,r){function s(t){return p[(t%f+f)%f]}var o=n.dontStart,c=n.dontFinish||n.clip,u=this.getStyle(),h=u.hasFill(),l=u.hasStroke(),p=u.getDashArray(),f=!a.support.nativeDash&&l&&p&&p.length;if(o||t.beginPath(),(h||l&&!f||c)&&(e(t,this,r),this._closed&&t.closePath()),!c&&(h||l)&&(this._setStyles(t,n,i),h&&(t.fill(u.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),l)){if(f){o||t.beginPath();var d,g=new H(this,.25,32,!1,r),m=g.length,v=-u.getDashOffset(),y=0;for(v%=m;v>0;)v-=s(y--)+s(y--);for(;v<m;)d=v+s(y++),(v>0||d>0)&&g.drawPart(t,Math.max(v,0),Math.max(d,0)),v=d+s(y++)}t.stroke()}},_drawSelected:function(n,i){n.beginPath(),e(n,this,i),n.stroke(),t(n,this._segments,i,a.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new N(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new N(y.read(arguments))])},cubicCurveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=y.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new N(i,n.subtract(i))])},quadraticCurveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=y.read(arguments),n=y.read(arguments),i=l.pick(l.read(arguments),.5),r=1-i,s=t(this)._point,a=e.subtract(s.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(a,n)},arcTo:function(){var e,n,i,r,s,a=Math.abs,o=Math.sqrt,c=t(this),u=c._point,h=y.read(arguments),p=l.peek(arguments),f=l.pick(p,!0);if("boolean"==typeof f)var d=u.add(h).divide(2),e=d.add(d.subtract(u).rotate(f?-90:90));else if(l.remain(arguments)<=2)e=h,h=y.read(arguments);else{var g=x.read(arguments),v=m.isZero;if(v(g.width)||v(g.height))return this.lineTo(h);var _=l.read(arguments),f=!!l.read(arguments),b=!!l.read(arguments),d=u.add(h).divide(2),w=u.subtract(d).rotate(-_),E=w.x,M=w.y,A=a(g.width),C=a(g.height),L=A*A,P=C*C,R=E*E,I=M*M,k=o(R/L+I/P);if(k>1&&(A*=k,C*=k,L=A*A,P=C*C),k=(L*P-L*I-P*R)/(L*I+P*R),a(k)<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");n=new y(A*M/C,-C*E/A).multiply((b===f?-1:1)*o(k)).rotate(_).add(d),s=(new S).translate(n).rotate(_).scale(A,C),r=s._inverseTransform(u),i=r.getDirectedAngle(s._inverseTransform(h)),!f&&i>0?i-=360:f&&i<0&&(i+=360)}if(e){var O=new T(u.add(e).divide(2),e.subtract(u).rotate(90),!0),D=new T(e.add(h).divide(2),h.subtract(e).rotate(90),!0),F=new T(u,h),U=F.getSide(e);if(!(n=O.intersect(D,!0))){if(!U)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}r=u.subtract(n),i=r.getDirectedAngle(h.subtract(n));var B=F.getSide(n);0===B?i=U*a(i):U===B&&(i+=i<0?360:-360)}for(var z=a(i),j=z>=360?4:Math.ceil((z-1e-7)/90),H=i/j,V=H*Math.PI/360,G=4/3*Math.sin(V)/(1+Math.cos(V)),W=[],q=0;q<=j;q++){var w=h,X=null;if(q<j&&(X=r.rotate(90).multiply(G),s?(w=s._transformPoint(r),X=s._transformPoint(r.add(X)).subtract(w)):w=n.add(r)),q){var Y=r.rotate(-90).multiply(G);s&&(Y=s._transformPoint(r.add(Y)).subtract(w)),W.push(new N(w,Y,X))}else c.setHandleOut(X);r=r.rotate(H)}this._add(W)},lineBy:function(){var e=y.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=l.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=y.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=y.read(arguments),n=y.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(y.read(arguments)),i=l.pick(l.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(y.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return z[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){function a(t){t._transformCoordinates(i,c);for(var e=0;e<2;e++)F._addBounds(u[e],u[e+4],c[e+2],c[e],e,s?s[e]:0,h,l,p);var n=u;u=c,c=n}var o=t[0];if(!o)return new w;for(var c=new Array(6),u=o._transformCoordinates(i,new Array(6)),h=u.slice(0,2),l=h.slice(),p=new Array(2),f=1,d=t.length;f<d;f++)a(t[f]);return e&&a(o),new w(h[0],h[1],l[0]-h[0],l[1]-h[1])},getStrokeBounds:function(t,e,n,i,r){function s(t){d=d.include(t)}function a(t){d=d.unite(_.setCenter(t._point.transform(i)))}function o(t,e){"round"===e||t.isSmooth()?a(t):z._addBevelJoin(t,e,g,y,i,p,s)}function c(t,e){"round"===e?a(t):z._addSquareCap(t,e,g,i,p,s)}var u=n.getStyle(),h=u.hasStroke(),l=u.getStrokeWidth(),p=h&&n._getStrokeMatrix(i,r),f=h&&z._getStrokePadding(l,p),d=z.getBounds(t,e,n,i,r,f);if(!h)return d;for(var g=l/2,m=u.getStrokeJoin(),v=u.getStrokeCap(),y=u.getMiterLimit(),_=new w(new x(f)),b=t.length-(e?0:1),E=1;E<b;E++)o(t[E],m);return e?o(t[0],m):b>0&&(c(t[0],v),c(t[t.length-1],v)),d},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new y(t,0).transform(e),i=new y(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),a=i.getLength(),o=Math.sin(r),c=Math.cos(r),u=Math.tan(r),h=Math.atan2(a*u,s),l=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(h)*c+a*Math.sin(h)*o),Math.abs(a*Math.sin(l)*c+s*Math.cos(l)*o)]},_addBevelJoin:function(t,e,n,i,r,s,a,o){var c=t.getCurve(),u=c.getPrevious(),h=c.getPoint1().transform(r),l=u.getNormalAtTime(1).multiply(n).transform(s),p=c.getNormalAtTime(0).multiply(n).transform(s);if(l.getDirectedAngle(p)<0&&(l=l.negate(),p=p.negate()),o&&a(h),a(h.add(l)),"miter"===e){var f=new T(h.add(l),new y(-l.y,l.x),!0).intersect(new T(h.add(p),new y(-p.y,p.x),!0),!0);f&&h.getDistance(f)<=i*n&&a(f)}a(h.add(p))},_addSquareCap:function(t,e,n,i,r,s,a){var o=t._point.transform(i),c=t.getLocation(),u=c.getNormal().multiply(0===c.getTime()?n:-n).transform(r);"square"===e&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(t,e,n,i,r){var s,a,o=n.getStyle(),c=r.stroke&&o.hasStroke();if(c){var u=n._getStrokeMatrix(i,r),h=o.getStrokeWidth()/2,l=h;"miter"===o.getStrokeJoin()&&(l=h*o.getMiterLimit()),"square"===o.getStrokeCap()&&(l=Math.max(l,h*Math.SQRT2)),s=z._getStrokePadding(h,u),a=z._getStrokePadding(l,u)}for(var p=new Array(6),f=1/0,d=-f,g=f,m=d,v=0,y=t.length;v<y;v++){t[v]._transformCoordinates(i,p);for(var _=0;_<6;_+=2){var x=_?s:a,b=x?x[0]:0,E=x?x[1]:0,S=p[_],T=p[_+1],M=S-b,A=S+b,C=T-E,L=T+E;M<f&&(f=M),A>d&&(d=A),C<g&&(g=C),L>m&&(m=L)}}return new w(f,g,d-f,m-g)}}});z.inject({statics:new function(){function t(t,e,n){var i=l.getNamed(n),r=new z(i&&0==i.insert&&A.NO_INSERT);return r._add(t),r._closed=e,r.set(i,{insert:!0})}function e(e,n,r){for(var s=new Array(4),a=0;a<4;a++){var o=i[a];s[a]=new N(o._point.multiply(n).add(e),o._handleIn.multiply(n),o._handleOut.multiply(n))}return t(s,!0,r)}var n=.5522847498307936,i=[new N([-1,0],[0,n],[0,-n]),new N([0,-1],[-n,0],[n,0]),new N([1,0],[0,-n],[0,n]),new N([0,1],[n,0],[-n,0])];return{Line:function(){return t([new N(y.readNamed(arguments,"from")),new N(y.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=y.readNamed(arguments,"center"),n=l.readNamed(arguments,"radius");return e(t,new x(n),arguments)},Rectangle:function(){var e,i=w.readNamed(arguments,"rectangle"),r=x.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),a=i.getTopLeft(!0),o=i.getTopRight(!0),c=i.getBottomRight(!0);if(!r||r.isZero())e=[new N(s),new N(a),new N(o),new N(c)];else{r=x.min(r,i.getSize(!0).divide(2));var u=r.width,h=r.height,l=u*n,p=h*n;e=[new N(s.add(u,0),null,[-l,0]),new N(s.subtract(0,h),[0,p]),new N(a.add(0,h),null,[0,-p]),new N(a.add(u,0),[-l,0],null),new N(o.subtract(u,0),null,[l,0]),new N(o.add(0,h),[0,-p],null),new N(c.subtract(0,h),null,[0,p]),new N(c.subtract(u,0),[l,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=P._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=y.readNamed(arguments,"from"),e=y.readNamed(arguments,"through"),n=y.readNamed(arguments,"to"),i=l.getNamed(arguments),r=new z(i&&0==i.insert&&A.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var e=y.readNamed(arguments,"center"),n=l.readNamed(arguments,"sides"),i=l.readNamed(arguments,"radius"),r=360/n,s=n%3==0,a=new y(0,s?-i:i),o=s?-1:.5,c=new Array(n),u=0;u<n;u++)c[u]=new N(e.add(a.rotate((u+o)*r)));return t(c,!0,arguments)},Star:function(){for(var e=y.readNamed(arguments,"center"),n=2*l.readNamed(arguments,"points"),i=l.readNamed(arguments,"radius1"),r=l.readNamed(arguments,"radius2"),s=360/n,a=new y(0,-1),o=new Array(n),c=0;c<n;c++)o[c]=new N(e.add(a.rotate(s*c).multiply(c%2?r:i)));return t(o,!0,arguments)}}}});var j=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var s=n.length-1;s>=0;s--){var a=i[s];i!==n||a instanceof z||(i=l.slice(i)),Array.isArray(a)?i[s]=new z({segments:a,insert:!1}):a instanceof j&&(i.splice.apply(i,[s,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r=n[i].reduce(e);r.isEmpty()&&r.remove()}if(!n.length){var r=new z(A.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===z||"path"===n.type?n:l.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=r.length;s<a;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return l.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new z(A.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=y.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},l.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));B.inject(new function(){function t(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function e(t,e,n,i,r){var s=new j(A.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function n(n,r,s,c){function u(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];x.push.apply(x,i._segments),b.push.apply(b,i.getCurves()),i._overlapsOnly=!0}}if(c&&(0==c.trace||c.stroke)&&/^(subtract|intersect)$/.test(s))return i(n,r,s);var l=t(n,!0),f=r&&n!==r&&t(r,!0),d=v[s];d[s]=!0,f&&(d.subtract||d.exclude)^f.isClockwise()^l.isClockwise()&&f.reverse();var g,m=o(U.expand(l.getCrossings(f))),y=l._children||[l],_=f&&(f._children||[f]),x=[],b=[];if(m.length){u(y),_&&u(_);for(var w=0,E=m.length;w<E;w++)h(m[w]._segment,l,f,b,d);for(var w=0,E=x.length;w<E;w++){var S=x[w],T=S._intersection;S._winding||h(S,l,f,b,d),T&&T._overlap||(S._path._overlapsOnly=!1)}g=p(x,d)}else g=a(_?y.concat(_):y.slice(),function(t){return!!d[t]});return e(g,!0,n,r,c)}function i(n,i,r){function s(t){if(!l[t._id]&&(h||o.contains(t.getPointAt(t.getLength()/2))^u))return p.unshift(t),l[t._id]=!0}for(var a=t(n),o=t(i),c=a.getCrossings(o),u="subtract"===r,h="divide"===r,l={},p=[],f=c.length-1;f>=0;f--){var d=c[f].split();d&&(s(d)&&d.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return s(a),e(p,!1,n,i)}function r(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function s(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function a(t,e,n){var i=t&&t.length;if(i){var r=l.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),s=t.slice().sort(function(t,e){return g(e.getArea())-g(t.getArea())}),a=s[0];null==n&&(n=a.isClockwise());for(var o=0;o<i;o++){for(var c=s[o],u=r[c._id],h=c.getInteriorPoint(),p=0,f=o-1;f>=0;f--){var d=s[f];if(d.contains(h)){var m=r[d._id];p=m.winding,u.winding+=p,u.container=m.exclude?m.container:d;break}}if(e(u.winding)===e(p))u.exclude=!0,t[u.index]=null;else{var v=u.container;c.setClockwise(v?!v.isClockwise():n)}}}return t}function o(t,e,n){function i(t){return t._path._id+"."+t._segment1._index}for(var a,o,c,u=e&&[],h=!1,l=n||[],p=n&&{},f=(n&&n.length)-1;f>=0;f--){var d=n[f];d._path&&(p[i(d)]=!0)}for(var f=t.length-1;f>=0;f--){var g,m=t[f],v=m._time,y=v,_=e&&!e(m),d=m._curve;if(d&&(d!==o?(h=!d.hasHandles()||p&&p[i(d)],a=[],c=null,o=d):c>=1e-8&&(v/=c)),_)a&&a.push(m);else{if(e&&u.unshift(m),c=y,v<1e-8)g=d._segment1;else if(v>1-1e-8)g=d._segment2;else{var x=d.divideAtTime(v,!0);h&&l.push(d,x),g=x._segment1;for(var b=a.length-1;b>=0;b--){var w=a[b];w._time=(w._time-v)/(1-v)}}m._setSegment(g);var E=g._intersection,S=m._intersection;if(E){r(E,S);for(var T=E;T;)r(T._intersection,E),T=T._next}else g._intersection=S}}return n||s(l),u||t}function u(t,e,n,i,r){function s(s){var a=s[l+0],c=s[l+6];if(!(v<f(a,c)||v>d(a,c))){var p=s[h+0],g=s[h+2],b=s[h+4],w=s[h+6];if(a===c)return void((p<x&&w>_||w<x&&p>_)&&(T=!0));var M=v===a?0:v===c?1:_>d(p,g,b,w)||x<f(p,g,b,w)?1:F.solveCubic(s,l,v,C,0,1)>0?C[0]:1,L=0===M?p:1===M?w:F.getPoint(s,M)[n?"y":"x"],P=a>c?1:-1,R=o[l]>o[l+6]?1:-1,I=o[h+6];return v!==a?(L<_?E+=P:L>x?S+=P:T=!0,L>m-y&&L<m+y&&(A/=2)):(P!==R?p<_?E+=P:p>x&&(S+=P):p!=I&&(I<x&&L>x?(S+=P,T=!0):I>_&&L<_&&(E+=P,T=!0)),A=0),o=s,!r&&L>_&&L<x&&0===F.getTangent(s,M)[n?"x":"y"]&&u(t,e,!n,i,!0)}}function a(t){var e=t[l+0],i=t[l+2],r=t[l+4],a=t[l+6];if(v<=d(e,i,r,a)&&v>=f(e,i,r,a))for(var o,c=t[h+0],u=t[h+2],p=t[h+4],g=t[h+6],m=_>d(c,u,p,g)||x<f(c,u,p,g)?[t]:F.getMonoCurves(t,n),y=0,b=m.length;y<b;y++)if(o=s(m[y]))return o}for(var o,c,h=n?1:0,l=1^h,p=[t.x,t.y],m=p[h],v=p[l],y=1e-6,_=m-1e-9,x=m+1e-9,b=0,w=0,E=0,S=0,T=!1,M=!1,A=1,C=[],L=0,P=e.length;L<P;L++){var R,I=e[L],k=I._path,O=I.getValues();if(!(L&&e[L-1]._path===k||(o=null,k._closed||(c=F.getValues(k.getLastCurve().getSegment2(),I.getSegment1(),null,!i),c[l]!==c[l+6]&&(o=c)),o))){o=O;for(var N=k.getLastCurve();N&&N!==I;){var D=N.getValues();if(D[l]!==D[l+6]){o=D;break}N=N.getPrevious()}}if(R=a(O))return R;if(L+1===P||e[L+1]._path!==k){if(c&&(R=a(c)))return R;!T||E||S||(E=S=k.isClockwise(i)^n?1:-1),b+=E,w+=S,E=S=0,T&&(M=!0,T=!1),c=null}}return b=g(b),w=g(w),{winding:d(b,w),windingL:b,windingR:w,quality:A,onPath:M}}function h(t,e,n,i,r){var s,a=[],o=t,c=0;do{var h=t.getCurve(),l=h.getLength();a.push({segment:t,curve:h,length:l}),c+=l,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var p=[.5,.25,.75],s={winding:0,quality:-1},f=0;f<p.length&&s.quality<.5;f++)for(var l=c*p[f],d=0,v=a.length;d<v;d++){var y=a[d],_=y.length;if(l<=_){var h=y.curve,x=h._path,b=x._parent,w=b instanceof j?b:x,E=m.clamp(h.getTimeAt(l),1e-8,1-1e-8),S=h.getPointAtTime(E),T=g(h.getTangentAtTime(E).y)<Math.SQRT1_2,M=r.subtract&&n&&(w===e&&n._getWinding(S,T,!0).winding||w===n&&!e._getWinding(S,T,!0).winding)?{winding:0,quality:1}:u(S,i,T,!0);M.quality>s.quality&&(s=M);break}l-=_}for(var d=a.length-1;d>=0;d--)a[d].segment._winding=s}function p(t,e){function n(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function i(t){if(t)for(var e=0,n=s.length;e<n;e++)if(t===s[e])return!0;return!1}function r(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}var s,a=[];t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),s=!(!i||!i._overlap),a=t._path,o=e._path;return r^s?r?1:-1:!n^!i?n?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var o=0,c=t.length;o<c;o++){var u,h,l,p=t[o],f=n(p),d=null,g=!1,m=!0,v=[];if(f&&p._path._overlapsOnly){var y=p._path,_=p._intersection._segment._path;y.compare(_)&&(y.getArea()&&a.push(y.clone(!1)),r(y),r(_),f=!1)}for(;f;){var x=!d,b=function(t,e){function r(r,a){for(;r&&r!==a;){var o=r._segment,u=o&&o._path;if(u){var h=o.getNext()||u.getFirstSegment(),l=h._intersection;o!==t&&(i(o)||i(h)||h&&n(o)&&(n(h)||l&&n(l._segment)))&&c.push(o),e&&s.push(o)}r=r._next}}var a=t._intersection,o=a,c=[];if(e&&(s=[t]),a){for(r(a);a&&a._prev;)a=a._prev;r(a,o)}return c}(p,x),w=b.shift(),g=!x&&(i(p)||i(w)),E=!g&&w;if(x&&(d=new z(A.NO_INSERT),u=null),g){(p.isFirst()||p.isLast())&&(m=p._path._closed),p._visited=!0;break}if(E&&u&&(v.push(u),u=null),u||(E&&b.push(p),u={start:d._segments.length,crossings:b,visited:h=[],handleIn:l}),E&&(p=w),!n(p)){d.removeSegments(u.start);for(var S=0,T=h.length;S<T;S++)h[S]._visited=!1;h.length=0;do{(p=u&&u.crossings.shift())&&p._path||(p=null,(u=v.pop())&&(h=u.visited,l=u.handleIn))}while(u&&!n(p));if(!p)break}var M=p.getNext();d.add(new N(p._point,l,M&&p._handleOut)),p._visited=!0,h.push(p),p=M||p._path.getFirstSegment(),l=M&&M._handleIn}g&&(m&&(d.getFirstSegment().setHandleIn(l),d.setClosed(m)),0!==d.getArea()&&a.push(d))}return a}var f=Math.min,d=Math.max,g=Math.abs,v={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,n){return u(t,this.getCurves(),e,n)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t,e){return n(this,t,"subtract",e)},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,n){return n&&(0==n.trace||n.stroke)?i(this,t,"divide"):e([this.subtract(t,n),this.intersect(t,n)],!0,this,t,n)},resolveCrossings:function(){function t(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var e=this._children,n=e||[this],i=!1,r=!1,a=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),c=i&&r&&[];if(a=U.expand(a),i)for(var u=o(a,function(t){return t.hasOverlap()},c),h=u.length-1;h>=0;h--){var f=u[h],d=f._path,g=f._segment,m=g.getPrevious(),v=g.getNext();t(m,d)&&t(v,d)&&(g.remove(),m._handleOut._set(0,0),v._handleIn._set(0,0),m===g||m.getCurve().hasLength()||(v._handleIn.set(m._handleIn),m.remove()))}r&&(o(a,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},c),c&&s(c),n=p(l.each(n,function(t){this.push.apply(this,t._segments)},[])));var y,_=n.length;return _>1&&e?(n!==e&&this.setChildren(n),y=this):1!==_||e||(n[0]!==this&&this.setSegments(n[0].removeSegments()),y=this),y||(y=new j(A.NO_INSERT),y.addChildren(n),y=y.reduce(),y.copyAttributes(this),this.replaceWith(y)),y},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(a(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==c&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var n=this.getCurves(),i=e.y,r=[],s=[],a=0,o=n.length;a<o;a++){var c=n[a].getValues(),u=c[1],h=c[3],l=c[5],p=c[7];if(i>=f(u,h,l,p)&&i<=d(u,h,l,p))for(var g=F.getMonoCurves(c),m=0,v=g.length;m<v;m++){var y=g[m],_=y[1],x=y[7];if(_!==x&&(i>=_&&i<=x||i>=x&&i<=_)){var b=i===_?y[0]:i===x?y[6]:1===F.solveCubic(y,1,i,s,0,1)?F.getPoint(y,s[0]).x:(y[0]+y[6])/2;r.push(b)}}}r.length>1&&(r.sort(function(t,e){return t-e}),e.x=(r[0]+r[1])/2)}return e}}});var H=l.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){function s(t,e){var n=F.getValues(t,e,r);c.push(n),a(n,t._index,0,1)}function a(t,n,r,s){if(!(s-r>l)||i&&F.isStraight(t)||F.isFlatEnough(t,e||.25)){var o=t[6]-t[0],c=t[7]-t[1],p=Math.sqrt(o*o+c*c);p>0&&(h+=p,u.push({offset:h,curve:t,index:n,time:s}))}else{var f=F.subdivide(t,.5),d=(r+s)/2;a(f[0],n,r,d),a(f[1],n,d,s)}}for(var o,c=[],u=[],h=0,l=1/(n||32),p=t._segments,f=p[0],d=1,g=p.length;d<g;d++)o=p[d],s(f,o),f=o;t._closed&&s(o,p[0]),this.curves=c,this.parts=u,this.length=h,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var a=n[e-1],o=a&&a.index===s.index?a.time:0,c=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-c)/(s.offset-c)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,a=r.index;s<=a;s++){var o=F.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},l.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return F[t](this.curves[n.index],n.time)}},{})),V=l.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,a=i.length;s<a;s++){var o=i[s].point;e&&e.equals(o)||n.push(e=o.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new N(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var a=this.points;if(i-n==1){var o=a[n],c=a[i],u=o.getDistance(c)/3;return void this.addCurve(t,[o,o.add(r.normalize(u)),c.add(s.normalize(u)),c])}for(var h,l=this.chordLengthParameterize(n,i),p=Math.max(e,e*e),f=!0,d=0;d<=4;d++){var g=this.generateBezier(n,i,l,r,s),m=this.findMaxError(n,i,g,l);if(m.error<e&&f)return void this.addCurve(t,g);if(h=m.index,m.error>=p)break;f=this.reparameterize(n,i,l,g),p=m.error}var v=a[h-1].subtract(a[h+1]);this.fitCubic(t,e,n,h,r,v),this.fitCubic(t,e,h,i,v.negate(),s)},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new N(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=Math.abs,a=this.points,o=a[t],c=a[e],u=[[0,0],[0,0]],h=[0,0],l=0,p=e-t+1;l<p;l++){var f=n[l],d=1-f,g=3*f*d,m=d*d*d,v=g*d,y=g*f,_=f*f*f,x=i.normalize(v),b=r.normalize(y),w=a[t+l].subtract(o.multiply(m+v)).subtract(c.multiply(y+_));u[0][0]+=x.dot(x),u[0][1]+=x.dot(b),u[1][0]=u[0][1],u[1][1]+=b.dot(b),h[0]+=x.dot(w),h[1]+=b.dot(w)}var E,S,T=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(s(T)>1e-12){var M=u[0][0]*h[1]-u[1][0]*h[0];E=(h[0]*u[1][1]-h[1]*u[0][1])/T,S=M/T}else{var A=u[0][0]+u[0][1],C=u[1][0]+u[1][1];E=S=s(A)>1e-12?h[0]/A:s(C)>1e-12?h[1]/C:0}var L,P,R=c.getDistance(o),I=1e-12*R;if(E<I||S<I)E=S=R/3;else{var k=c.subtract(o);L=i.normalize(E),P=r.normalize(S),L.dot(k)-P.dot(k)>R*R&&(E=S=R/3,L=P=null)}return[o,o.add(L||i.normalize(E)),c.add(P||r.normalize(S)),c]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);for(var r=1,s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var a=this.evaluate(3,t,n),o=this.evaluate(2,i,n),c=this.evaluate(1,r,n),u=a.subtract(e),h=o.dot(o)+u.dot(c);return m.isZero(h)?n:n-u.dot(o)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,n,i[a-t]),c=o.subtract(this.points[a]),u=c.x*c.x+c.y*c.y;u>=s&&(s=u,r=a)}return{error:s,index:r}}}),G=A.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&l.isPlainObject(t)&&t.x===c&&t.y===c;this._initialize(e&&t,!e&&y.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),W=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,"setPoint")},setPoint:function(){var t=y.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),c=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,h=i.length;u<h;u++){t.shadowColor=c;var l=i[u];s&&(t.fillText(l,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(l,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),c=0;"left"!==s&&(c-=o/("center"===s?2:1));var u=new w(c,r?-.75*a:0,o,r*a);return t?t._transformBounds(u,u):u}}),q=l.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i){n=[0,0,0];for(var s=0;s<3;s++){var a=i[s+1];n[s]=parseInt(1==a.length?a+a:a,16)/255}}else if(i=t.match(/^rgba?\((.*)\)$/)){n=i[1].split(",");for(var s=0,o=n.length;s<o;s++){var a=+n[s];n[s]=s<3?a/255:a}}else if(u){var c=r[t];if(!c){e||(e=ot.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var h=e.getImageData(0,0,1,1).data;c=r[t]=[h[0]/255,h[1]/255,h[2]/255]}n=c.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},r={},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r;return[0===s?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),0===i?0:s/i,i]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t),r=t-i,i=s[i],a=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[a[i[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,a=0===s,o=a?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),c=(i+r)/2;return[o,a?0:c<.5?s/(i+r):s/(2-i-r),c]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,a=[],o=0;o<3;o++){var c=i[o];c<0&&(c+=1),c>1&&(c-=1),a[o]=6*c<1?s+6*(r-s)*c:2*c<1?r:3*c<2?s+(r-s)*(2/3-c)*6:s}return a},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return l.each(n,function(t,e){i[e]=[],l.each(t,function(t,r){var s=l.capitalize(t),a=/^(hue|saturation)$/.test(t),o=i[e][r]="gradient"===t?function(t){var e=this._components[0];return t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return y.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===e||a&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+s]=function(t){this._type===e||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[r]=o.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(r){var s,a,o,c,u=arguments,h=this.__read,p=0;Array.isArray(r)&&(u=r,r=u[0]);var f=null!=r&&typeof r;if("string"===f&&r in n&&(s=r,r=u[1],Array.isArray(r)?(a=r,o=u[2]):(h&&(p=1),u=l.slice(u,1),f=typeof r)),!a){if(c="number"===f?u:"object"===f&&null!=r.length?r:null){s||(s=c.length>=3?"rgb":"gray");var d=n[s].length;o=c[d],h&&(p+=c===arguments?d+(null!=o?1:0):1),c.length>d&&(c=l.slice(c,0,d))}else if("string"===f)s="rgb",a=t(r),4===a.length&&(o=a[3],a.length--);else if("object"===f)if(r.constructor===e){if(s=r._type,a=r._components.slice(),o=r._alpha,"gradient"===s)for(var g=1,m=a.length;g<m;g++){var v=a[g];v&&(a[g]=v.clone())}}else if(r.constructor===X)s="gradient",c=u;else{s="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb";var y=n[s],_=i[s];this._components=a=[];for(var g=0,m=y.length;g<m;g++){var x=r[y[g]];null==x&&!g&&"gradient"===s&&"stops"in r&&(x={stops:r.stops,radial:r.radial}),x=_[g].call(this,x),null!=x&&(a[g]=x)}o=r.alpha}h&&s&&(p=1)}if(this._type=s||"rgb",!a){this._components=a=[];for(var _=i[this._type],g=0,m=_.length;g<m;g++){var x=_[g].call(this,c&&c[g]);null!=x&&(a[g]=x)}}return this._components=a,this._properties=n[this._type],this._alpha=o,h&&(this.__read=p),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return l.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new q(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=l.isPlainValue(t,!0)?q.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&l.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=g.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],i<1&&n.push(i<0?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],s=r._stops,a=i[1],o=i[2],c=i[3],u=e&&e.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),c&&(c=u._transformPoint(c))),r._radial){var h=o.getDistance(a);if(c){var l=c.subtract(a);l.getLength()>h&&(c=a.add(l.normalize(h-.1)))}var p=c||a;n=t.createRadialGradient(p.x,p.y,0,a.x,a.y,h)}else n=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var f=0,d=s.length;f<d;f++){var g=s[f],m=g._offset;n.addColorStop(null==m?f/(d-1):m,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new q(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return l.each(t,function(t,e){this[e]=function(e){e=q.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,a=i.length;s<a;s++)r[s]=t(i[s],r[s]);return new q(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),X=l.extend({_class:"Gradient",initialize:function(t,e){this._id=v.get(),t&&l.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return l.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=c))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=c;e=this._stops=Y.readList(t,0,{clone:!0});for(var n=0,i=e.length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),Y=l.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===c&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return l.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=q.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=l.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},e=l.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=l.set({},e,{fillColor:new q}),i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},s={_class:"Style",beans:!0,initialize:function(i,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||a.project,this._defaults=!r||r instanceof C?e:r instanceof G?n:t,i&&this.set(i)}};return l.each(e,function(t,e){var n=/Color$/.test(e),a="shadowOffset"===e,o=l.capitalize(e),u=i[e],h="set"+o,p="get"+o;s[h]=function(t){var i=this._owner,r=i&&i._children;if(r&&r.length>0&&!(i instanceof j))for(var s=0,a=r.length;s<a;s++)r[s]._style[h](t);else if(e in this._defaults){var o=this._values[e];o!==t&&(n&&(o&&o._owner!==c&&(o._owner=c),t&&t.constructor===q&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[e]=t,i&&i._changed(u||65))}},s[p]=function(t){var i,r=this._owner,s=r&&r._children;if(e in this._defaults&&(!s||!s.length||t||r instanceof j)){var i=this._values[e];if(i===c)(i=this._defaults[e])&&i.clone&&(i=i.clone());else{var o=n?q:a?y:null;!o||i&&i.constructor===o||(this._values[e]=i=o.read([i],0,{readNull:!0,clone:!0}),i&&n&&(i._owner=r))}}else if(s)for(var u=0,h=s.length;u<h;u++){var f=s[u]._style[p]();if(u){if(!l.equals(i,f))return c}else i=f}return i},r[p]=function(t){return this._style[p](t)},r[h]=function(t){this._style[h](t)}}),l.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;s[n]=r[n]="#get"+t,s[i]=r[i]="#set"+t}),A.inject(r),s},{set:function(t){var e=t instanceof Z,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,r=e._values,s=e._defaults;for(var a in i){var o=i[a],u=r[a];if(!(n&&a in r||l.equals(o,u===c?s[a]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),$=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],c=o?o+s:e;if(c in t){if(!n)return t[c];t[c]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),o=n.top-(s.clientTop||r.clientTop||0);if(!e){var c=i.defaultView;a+=c.pageXOffset||s.scrollLeft||r.scrollLeft,o+=c.pageYOffset||s.scrollTop||r.scrollTop}return new w(a,o,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new w(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return $.getBounds(t,e).getPoint()},getSize:function(t){return $.getBounds(t,!0).getSize()},isInvisible:function(t){return $.getSize(t).equals(new x(0,0))},isInView:function(t){return!$.isInvisible(t)&&$.getViewportBounds(t).intersects($.getBounds(t,!0))},isInserted:function(t){return h.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},J={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.addEventListener(r[s],i,!1)},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new y(e.pageX||e.clientX+h.documentElement.scrollLeft,e.pageY||e.clientY+h.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return J.getPoint(t).subtract($.getOffset(e||J.getTarget(t)))}};J.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var s=0,a=e.length;s<a;s++)e[s]();(i=n&&r.length)&&n(t)}var e,n=$.getPrefixed(u,"requestAnimationFrame"),i=!1,r=[];return function(s){r.push(s),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var K=l.extend(p,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function r(){var t=$.getSize(n);return t.isNaN()||t.isZero()?new x(i("width"),i("height")):t}var s;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),J.add(n,this._viewEvents);if($.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var o=this;J.add(u,this._windowEvents={resize:function(){o.setViewSize(r())}})}if(s=r(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var c=this._stats.domElement,l=c.style,p=$.getOffset(n);l.position="absolute",l.left=p.x+"px",l.top=p.y+"px",h.body.appendChild(c)}}else s=new x(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!a.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;K._focused===this&&(K._focused=null),K._views.splice(K._views.indexOf(this),1),delete K._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),J.remove(this._element,this._viewEvents),J.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:l.each(A._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;J.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;$.getPrefixed(h,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!$.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){a=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new l({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new l(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=c},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new b(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=x.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return $.isInView(this._element)},isInserted:function(){return $.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=h.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat($.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},l.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?l:y).read(arguments),i=y.read(arguments,0,{readNull:!0});return this.transform((new S)[t](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=y.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return e?new _(e.x,e.y,this,"setScaling"):c},setScaling:function(){var t=this.getScaling(),e=y.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(t){return this.viewToProject(J.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return h&&"string"==typeof e&&(e=h.getElementById(e)),new(u?Q:K)(t,e)}}},new function(){function t(t){var e=J.getTarget(t);return e.getAttribute&&K._viewsById[e.getAttribute("id")]}function e(){var t=K._focused;if(!t||!t.isVisible())for(var e=0,n=K._views.length;e<n;e++)if((t=K._views[e]).isVisible()){K._focused=o=t;break}}function n(t,e,n){t._handleMouseEvent("mousemove",e,n)}function i(t,e,n,i,r,s,a){function o(t,n){if(t.responds(n)){if(c||(c=new it(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,c)&&(A=!0,c.prevented&&(C=!0),c.stopped))return u=!0}else{var a=L[n];if(a)return o(t,a)}}for(var c,u=!1;t&&t!==a&&!o(t,n);)t=t._parent;return u}function r(t,e,n,r,s,a){return t._project.removeOn(n),C=A=!1,E&&i(E,null,n,r,s,a)||e&&e!==E&&!e.isDescendant(E)&&i(e,null,n,r,s,a,E)||i(t,E||e||t,n,r,s,a)}if(u){var s,o,c,l,p,f=!1,d=!1,g=u.navigator;g.pointerEnabled||g.msPointerEnabled?(c="pointerdown MSPointerDown",l="pointermove MSPointerMove",p="pointerup pointercancel MSPointerUp MSPointerCancel"):(c="touchstart",l="touchmove",p="touchend touchcancel","ontouchstart"in u&&g.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(c+=" mousedown",l+=" mousemove",p+=" mouseup"));var m={},v={mouseout:function(t){var e=K._focused,i=J.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var r=J.getOffset(t,e._element),s=r.x,a=Math.abs,o=a(s),c=o-(1<<25);r.x=a(c)<o?c*(s<0?-1:1):s,n(e,t,e.viewToProject(r))}},scroll:e};m[c]=function(e){var n=K._focused=t(e);f||(f=!0,n._handleMouseEvent("mousedown",e))},v[l]=function(i){var r=K._focused;if(!d){var a=t(i);a?r!==a&&(r&&n(r,i),s||(s=r),r=K._focused=o=a):o&&o===r&&(s&&!s.isInserted()&&(s=null),r=K._focused=s,s=null,e())}r&&n(r,i)},v[c]=function(){d=!0},v[p]=function(t){var e=K._focused;e&&f&&e._handleMouseEvent("mouseup",t),d=f=!1},J.add(h,v),J.add(u,{load:e});var y,_,x,b,w,E,S,T,M,A=!1,C=!1,L={doubleclick:"click",mousedrag:"mousemove"},P=!1,R={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:m,_handleMouseEvent:function(t,e,n){function s(t){return a.virtual[t]||h.responds(t)||u&&u.responds(t)}var a=this._itemEvents,o=a.native[t],c="mousemove"===t,u=this._scope.tool,h=this;c&&f&&s("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var l=this.getBounds().contains(n),p=o&&l&&h._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),d=p&&p.item||null,g=!1,m={};if(m[t.substr(5)]=!0,o&&d!==w&&(w&&i(w,null,"mouseleave",e,n),d&&i(d,null,"mouseenter",e,n),w=d),P^l&&(i(this,null,l?"mouseenter":"mouseleave",e,n),y=l?this:null,g=!0),!l&&!m.drag||n.equals(x)||(r(this,d,c?t:"mousemove",e,n,x),g=!0),P=l,m.down&&l||m.up&&_){if(r(this,d,t,e,n,_),m.down){if(M=d===S&&Date.now()-T<300,b=S=d,!C&&d){for(var v=d;v&&!v.responds("mousedrag");)v=v._parent;v&&(E=d)}_=n}else m.up&&(C||d!==b||(T=Date.now(),r(this,d,M?"doubleclick":"click",e,n,_),M=!1),b=E=null);P=!1,g=!0}x=n,g&&u&&(A=u._handleMouseEvent(t,e,n,m)||A),(A&&!m.move||m.down&&s("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){function r(r){r.responds(t)&&(a=o,r.emit(t,s=s||new et(t,e,n,i)))}var s,o=this._scope,c=o.tool;this.isVisible()&&(r(this),c&&c.responds(t)&&r(c))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in R)i[s]=(i[s]||0)+(R[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),Q=K.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=x.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+l.slice(arguments,1));e=ot.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var r=u.devicePixelRatio||1,s=$.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/s}K.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!f.hasAttribute(r,"resize")){var a=r.style;a.width=e+"px",a.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getPixelSize:function t(e){var n,i=a.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=s}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=l.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return nt.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),nt=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===c?String.fromCharCode(t.keyCode):e,r[e]||(e.length>1?l.hyphenate(e):e.toLowerCase())}function e(t,i,r,s){var c,u=K._focused;if(o[i]=t,t?p[i]=r:delete p[i],i.length>1&&(c=l.camelize(i))in f){f[c]=t;var h=a&&a.agent;if("meta"===c&&h&&h.mac)if(t)n={};else{for(var d in n)d in p&&e(!1,d,n[d],s);n=null}}else t&&n&&(n[i]=r);u&&u._handleKeyEvent(t?"keydown":"keyup",s,i,r)}var n,i,r={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},s={tab:"\t",space:" ",enter:"\r"},o={},p={},f=new l({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=a&&a.agent;return t&&t.mac?this.meta:this.control}}});return J.add(h,{keydown:function(n){var r=t(n),o=a&&a.agent;r.length>1||o&&o.chrome&&(n.altKey||o.mac&&n.metaKey||!o.mac&&n.ctrlKey)?e(!0,r,s[r]||(r.length>1?"":r),n):i=r},keypress:function(n){if(i){var r=t(n),s=n.charCode,a=s>=32?String.fromCharCode(s):r.length>1?"":r;r!==i&&(r=a.toLowerCase()),e(!0,r,a,n),i=null}},keyup:function(n){var i=t(n);i in p&&e(!1,i,p[i],n)}}),J.add(u,{blur:function(t){for(var n in p)e(!1,n,p[n],t)}}),{modifiers:f,isDown:function(t){return!!o[t]}}},it=tt.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),st=d.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){d.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){function r(t,e){var r=n,s=o?p._point:p._downPoint||r;if(o){if(p._moveCount&&r.equals(s))return!1;if(s&&(null!=t||null!=e)){var a=r.subtract(s),c=a.getLength();if(c<(t||0))return!1;e&&(r=s.add(a.normalize(Math.min(c,e))))}p._moveCount++}return p._point=r,p._lastPoint=s||r,i.down&&(p._moveCount=-1,p._downPoint=r,p._downCount++),!0}function s(){c&&(l=p.emit(t,new rt(p,t,e))||l)}a=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var o=i.move||i.drag,c=this.responds(t),u=this.minDistance,h=this.maxDistance,l=!1,p=this;if(i.down)r(),s();else if(i.up)r(null,h),s();else if(c)for(;r(u,h);)s();return l}}),at={request:function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,l.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)}},ot={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=h.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ct=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,i,r){var s=r-t(e,n,i);f=e+s,d=n+s,g=i+s;var r=t(f,d,g),a=m(f,d,g),o=v(f,d,g);if(a<0){var c=r-a;f=r+(f-r)*r/c,d=r+(d-r)*r/c,g=r+(g-r)*r/c}if(o>255){var u=255-r,h=o-r;f=r+(f-r)*u/h,d=r+(d-r)*u/h,g=r+(g-r)*u/h}}function n(t,e,n){return v(t,e,n)-m(t,e,n)}function i(t,e,n,i){var r,s=[t,e,n],a=v(t,e,n),o=m(t,e,n);o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2,r=0===m(o,a)?1===v(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*i/(s[a]-s[o]),s[a]=i):s[r]=s[a]=0,s[o]=0,f=s[0],d=s[1],g=s[2]}var r,s,a,o,c,u,h,p,f,d,g,m=Math.min,v=Math.max,y=Math.abs,_={multiply:function(){f=c*r/255,d=u*s/255,g=h*a/255},screen:function(){f=c+r-c*r/255,d=u+s-u*s/255,g=h+a-h*a/255},overlay:function(){f=c<128?2*c*r/255:255-2*(255-c)*(255-r)/255,d=u<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=h<128?2*h*a/255:255-2*(255-h)*(255-a)/255},"soft-light":function(){var t=r*c/255;f=t+c*(255-(255-c)*(255-r)/255-t)/255,t=s*u/255,d=t+u*(255-(255-u)*(255-s)/255-t)/255,t=a*h/255,g=t+h*(255-(255-h)*(255-a)/255-t)/255},"hard-light":function(){f=r<128?2*r*c/255:255-2*(255-r)*(255-c)/255,d=s<128?2*s*u/255:255-2*(255-s)*(255-u)/255,g=a<128?2*a*h/255:255-2*(255-a)*(255-h)/255},"color-dodge":function(){f=0===c?0:255===r?255:m(255,255*c/(255-r)),d=0===u?0:255===s?255:m(255,255*u/(255-s)),g=0===h?0:255===a?255:m(255,255*h/(255-a))},"color-burn":function(){f=255===c?255:0===r?0:v(0,255-255*(255-c)/r),d=255===u?255:0===s?0:v(0,255-255*(255-u)/s),g=255===h?255:0===a?0:v(0,255-255*(255-h)/a)},darken:function(){f=c<r?c:r,d=u<s?u:s,g=h<a?h:a},lighten:function(){f=c>r?c:r,d=u>s?u:s,g=h>a?h:a},difference:function(){f=c-r,f<0&&(f=-f),d=u-s,d<0&&(d=-d),(g=h-a)<0&&(g=-g)},exclusion:function(){f=c+r*(255-c-c)/255,d=u+s*(255-u-u)/255,g=h+a*(255-h-h)/255},hue:function(){i(r,s,a,n(c,u,h)),e(f,d,g,t(c,u,h))},saturation:function(){i(c,u,h,n(r,s,a)),e(f,d,g,t(c,u,h))},luminosity:function(){e(c,u,h,t(r,s,a))},color:function(){e(r,s,a,t(c,u,h))},add:function(){f=m(c+r,255),d=m(u+s,255),g=m(h+a,255)},subtract:function(){f=v(c-r,0),d=v(u-s,0),g=v(h-a,0)},average:function(){f=(c+r)/2,d=(u+s)/2,g=(h+a)/2},negation:function(){f=255-y(255-r-c),d=255-y(255-s-u),g=255-y(255-a-h)}},x=this.nativeModes=l.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=ot.getContext(1,1);b&&(l.each(_,function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}b.restore(),x[e]=i}),ot.release(b)),this.process=function(t,e,n,i,l){var m=e.canvas,v="normal"===t;if(v||x[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=t),n.drawImage(m,l.x,l.y),n.restore();else{var y=_[t];if(!y)return;for(var b=n.getImageData(l.x,l.y,m.width,m.height),w=b.data,E=e.getImageData(0,0,m.width,m.height).data,S=0,T=w.length;S<T;S+=4){r=E[S],c=w[S],s=E[S+1],u=w[S+1],a=E[S+2],h=w[S+2],o=E[S+3],p=w[S+3],y();var M=o*i/255,A=1-M;w[S]=M*f+A*c,w[S+1]=M*d+A*u,w[S+2]=M*g+A*h,w[S+3]=o*i+A*p}n.putImageData(b,l.x,l.y)}}},ut=new function(){function t(t,e,r){return n(h.createElementNS(i,t),e,r)}function e(t,e){var n=a[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i}function n(t,e,n){for(var i in e){var r=e[i],s=a[i];"number"==typeof r&&n&&(r=n.number(r)),s?t.setAttributeNS(s,i,r):t.setAttribute(i,r)}return t}var i="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",s="http://www.w3.org/1999/xlink",a={href:s,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:i,xmlns:r,xlink:s,create:t,get:e,set:n}},ht=l.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof P||t instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=l.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&l.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});return new function(){function t(t,e,n){var i=new l,r=t.getTranslation();if(e){t=t._shiftless();var s=t._inverseTransform(r);i[n?"cx":"x"]=s.x,i[n?"cy":"y"]=s.y,r=null}if(!t.isIdentity()){var a=t.decompose();if(a){var o=[],c=a.rotation,u=a.scaling,h=a.skewing;r&&!r.isZero()&&o.push("translate("+x.point(r)+")"),c&&o.push("rotate("+x.number(c)+")"),m.isZero(u.x-1)&&m.isZero(u.y-1)||o.push("scale("+x.point(u)+")"),h.x&&o.push("skewX("+x.number(h.x)+")"),h.y&&o.push("skewY("+x.number(h.y)+")"),i.transform=o.join(" ")}else i.transform="matrix("+t.getValues().join(",")+")"}return i}function e(e,n){for(var i=t(e._matrix),r=e._children,s=ut.create("g",i,x),a=0,o=r.length;a<o;a++){var c=r[a],u=y(c,n);if(u)if(c.isClipMask()){var h=ut.create("clipPath");h.appendChild(u),f(c,h,"clip"),ut.set(s,{"clip-path":"url(#"+h.id+")"})}else s.appendChild(u)}return s}function n(e,n){var i=t(e._matrix,!0),r=e.getSize(),s=e.getImage();return i.x-=r.width/2,i.y-=r.height/2,i.width=r.width,i.height=r.height,i.href=0==n.embedImages&&s&&s.src||e.toDataURL(),ut.create("image",i,x)}function i(e,n){var i=n.matchShapes;if(i){var s=e.toShape(!1);if(s)return r(s)}var a,o=e._segments,c=o.length,u=t(e._matrix);if(i&&c>=2&&!e.hasHandles())if(c>2){a=e._closed?"polygon":"polyline";for(var h=[],l=0;l<c;l++)h.push(x.point(o[l]._point));u.points=h.join(" ")}else{a="line";var p=o[0]._point,f=o[1]._point;u.set({x1:p.x,y1:p.y,x2:f.x,y2:f.y})}else a="path",u.d=e.getPathData(null,n.precision);return ut.create(a,u,x)}function r(e){var n=e._type,i=e._radius,r=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var s=e._size,a=s.width,o=s.height;r.x-=a/2,r.y-=o/2,r.width=a,r.height=o,i.isZero()&&(i=null)}return i&&("circle"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),ut.create(n,r,x)}function s(e,n){var i=t(e._matrix),r=e.getPathData(null,n.precision);return r&&(i.d=r),ut.create("path",i,x)}function a(e,n){var i=t(e._matrix,!0),r=e._definition,s=p(r,"symbol"),a=r._item,o=a.getBounds();return s||(s=ut.create("symbol",{viewBox:x.rectangle(o)}),s.appendChild(y(a,n)),f(r,s,"symbol")),i.href="#"+s.id,i.x+=o.x,i.y+=o.y,i.width=o.width,i.height=o.height,i.overflow="visible",ut.create("use",i,x)}function c(t){var e=p(t,"color");if(!e){var n,i=t.getGradient(),r=i._radial,s=t.getOrigin(),a=t.getDestination();if(r){n={cx:s.x,cy:s.y,r:s.getDistance(a)};var o=t.getHighlight();o&&(n.fx=o.x,n.fy=o.y)}else n={x1:s.x,y1:s.y,x2:a.x,y2:a.y};n.gradientUnits="userSpaceOnUse",e=ut.create((r?"radial":"linear")+"Gradient",n,x);for(var c=i._stops,u=0,h=c.length;u<h;u++){var l=c[u],d=l._color,g=d.getAlpha(),m=l._offset;n={offset:null==m?u/(h-1):m},d&&(n["stop-color"]=d.toCSS(!0)),g<1&&(n["stop-opacity"]=g),e.appendChild(ut.create("stop",n,x))}f(t,e,"color")}return"url(#"+e.id+")"}function u(e){var n=ut.create("text",t(e._matrix,!0),x);return n.textContent=e._content,n}function h(t,e,n){var i={},r=!n&&t.getParent(),s=[];return null!=t._name&&(i.id=t._name),l.each(ht,function(e){var n=e.get,a=e.type,o=t[n]();if(e.exportFilter?e.exportFilter(t,o):!r||!l.equals(r[n](),o)){if("color"===a&&null!=o){var u=o.getAlpha();u<1&&(i[e.attribute+"-opacity"]=u)}"style"===a?s.push(e.attribute+": "+o):i[e.attribute]=null==o?"none":"color"===a?o.gradient?c(o,t):o.toCSS(!0):"array"===a?o.join(","):"lookup"===a?e.toSVG[o]:o}}),s.length&&(i.style=s.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),ut.set(e,i,x)}function p(t,e){return b||(b={ids:{},svgs:{}}),t&&b.svgs[e+"-"+(t._id||t.__id||(t.__id=v.get("svg")))]}function f(t,e,n){b||p();var i=b.ids[n]=(b.ids[n]||0)+1;e.id=n+"-"+i,b.svgs[n+"-"+(t._id||t.__id)]=e}function d(t,e){var n=t,i=null;if(b){n="svg"===t.nodeName.toLowerCase()&&t;for(var r in b.svgs)i||(n||(n=ut.create("svg"),n.appendChild(t)),i=n.insertBefore(ut.create("defs"),n.firstChild)),i.appendChild(b.svgs[r]);b=null}return e.asString?(new o.XMLSerializer).serializeToString(n):n}function y(t,e,n){var i=E[t._class],r=i&&i(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&r.setAttribute("data-paper-data",a)}return r&&h(t,r,n)}function _(t){return t||(t={}),x=new g(t.precision),t}var x,b,E={Group:e,Layer:e,Raster:n,Path:i,Shape:r,CompoundPath:s,SymbolItem:a,PointText:u};A.inject({exportSVG:function(t){return t=_(t),d(y(this,t,!0),t)}}),M.inject({exportSVG:function(e){e=_(e);var n=this._children,i=this.getView(),r=l.pick(e.bounds,"view"),s=e.matrix||"view"===r&&i._matrix,a=s&&S.read([s]),o="view"===r?new w([0,0],i.getViewSize()):"content"===r?A._getBounds(n,a,{stroke:!0}).rect:w.read([r],0,{readNull:!0}),c={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};o&&(c.width=o.width,c.height=o.height,(o.x||o.y)&&(c.viewBox=x.rectangle(o)));var u=ut.create("svg",c,x),h=u;a&&!a.isIdentity()&&(h=u.appendChild(ut.create("g",t(a),x)));for(var p=0,f=n.length;p<f;p++)h.appendChild(y(n[p],e,!0));return d(u,e)}})},new function(){function t(t,e,n,i,r){var s=ut.get(t,e),a=null==s?i?null:n?"":0:n?s:parseFloat(s);return/%\s*$/.test(s)?a/100*(r?1:T[/x|^width/.test(e)?"width":"height"]):a}function e(e,n,i,r,s){return n=t(e,n||"x",!1,r,s),i=t(e,i||"y",!1,r,s),!r||null!=n&&null!=i?new y(n,i):null}function n(e,n,i,r,s){return n=t(e,n||"width",!1,r,s),i=t(e,i||"height",!1,r,s),!r||null!=n&&null!=i?new x(n,i):null}function i(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?_(t)||t:"lookup"===e?n[t]:t}function r(t,e,n,i){var r=t.childNodes,s="clippath"===e,a="defs"===e,o=new C,c=o._project,u=c._currentStyle,h=[];if(s||a||(o=v(o,t,i),c._currentStyle=o._style.clone()),i)for(var l=t.querySelectorAll("defs"),p=0,f=l.length;p<f;p++)b(l[p],n,!1);for(var p=0,f=r.length;p<f;p++){var d,g=r[p];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(d=b(g,n,!1))||d instanceof k||h.push(d)}return o.addChildren(h),s&&(o=v(o.reduce(),t,i)),c._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function s(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new y(parseFloat(n[r]),parseFloat(n[r+1])));var a=new z(i);return"polygon"===e&&a.closePath(),a}function p(t){return B.create(t.getAttribute("d"))}function f(n,i){var r,s=(t(n,"href",!0)||"").substring(1),a="radialgradient"===i;if(s)r=L[s].getGradient(),r._radial^a&&(r=r.clone(),r._radial=a);else{for(var o=n.childNodes,c=[],u=0,h=o.length;u<h;u++){var l=o[u];1===l.nodeType&&c.push(v(new Y,l))}r=new X(c,a)}var p,f,d,g="userSpaceOnUse"!==t(n,"gradientUnits",!0);return a?(p=e(n,"cx","cy",!1,g),f=p.add(t(n,"r",!1,!1,g),0),d=e(n,"fx","fy",!0,g)):(p=e(n,"x1","y1",!1,g),f=e(n,"x2","y2",!1,g)),v(new q(r,p,f,d),n)._scaleToBounds=g,null}function d(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new S,a=0,o=r.length;a<o;a++){var c=r[a];if(!c)break;for(var u=c.split(/\(\s*/),h=u[0],l=u[1].split(/[\s,]+/g),p=0,f=l.length;p<f;p++)l[p]=parseFloat(l[p]);switch(h){case"matrix":s.append(new S(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":s.rotate(l[0],l[1],l[2]);break;case"translate":s.translate(l[0],l[1]);break;case"scale":s.scale(l);break;case"skewX":s.skew(l[0],0);break;case"skewY":s.skew(0,l[0])}}t.transform(s)}}function g(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}function m(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r){var s=l.camelize(e);r=t.style[s],r||n.node[s]===n.parent[s]||(r=n.node[s])}return r?"none"===r?null:r:c}function v(t,e,n){if(e.style){var i=e.parentNode,r={node:$.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&$.getStyles(i)||{}};l.each(O,function(n,i){var s=m(e,i,r);t=s!==c&&n(t,s,i,e,r)||t})}return t}function _(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&L[u?n.replace(u.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&(i=i.clone(),i._scaleToBounds=!0),i}function b(t,e,i){var r,s,o,c=t.nodeName.toLowerCase(),u="#document"!==c,p=h.body;i&&u&&(T=a.getView().getSize(),T=n(t,null,null,!0)||T,r=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,o=t.nextSibling,r.appendChild(t),p.appendChild(r));var f=a.settings,d=f.applyMatrix,g=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var m=I[c],y=m&&m(t,c,e,i)||null;if(f.insertItems=g,f.applyMatrix=d,y){!u||y instanceof C||(y=v(y,t,i));var _=e.onImport,x=u&&t.getAttribute("data-paper-data");_&&(y=_(t,y,e)||y),e.expandShapes&&y instanceof P&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return r&&(p.removeChild(r),s&&(o?s.insertBefore(t,o):s.appendChild(t))),i&&(L={},y&&l.pick(e.applyMatrix,d)&&y.matrix.apply(!0,!0)),y}function E(t,e,n){function i(i){try{var h="object"==typeof i?i:(new o.DOMParser).parseFromString(i,"image/svg+xml");if(!h.nodeName)throw h=null,new Error("Unsupported SVG source: "+t);a=s,u=b(h,e,!0),e&&!1===e.insert||n._insertItem(c,u);var l=e.onLoad;l&&l(u,i)}catch(t){r(t)}}function r(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var s=a,u=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var l=new FileReader;return l.onload=function(){i(l.result)},l.onerror=function(){r(l.error)},l.readAsText(t)}i(t)}else{var p=h.getElementById(t);p?i(p):at.request({url:t,async:!0,onLoad:i,onError:r})}return u}var T,L={},I={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType)return b(o,n,i)}},g:r,svg:r,clippath:r,polygon:s,polyline:s,path:p,lineargradient:f,radialgradient:f,image:function(i){var r=new R(t(i,"href",!0));return r.on("load",function(){var t=n(i);this.setSize(t);var r=this._matrix._transformPoint(e(i).add(t.divide(2)));this.translate(r)}),r},symbol:function(t,e,n,i){return new k(r(t,e,n,i),!0)},defs:r,use:function(n){var i=(t(n,"href",!0)||"").substring(1),r=L[i],s=e(n);return r?r instanceof k?r.place(s):r.clone().translate(s):null},circle:function(n){return new P.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){return new P.Ellipse({center:e(t,"cx","cy"),radius:n(t,"rx","ry")})},rect:function(t){return new P.Rectangle(new w(e(t),n(t)),n(t,"rx","ry"))},line:function(t){return new z.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new W(e(t).add(e(t,"dx","dy")));return n.setContent(t.textContent.trim()||""),n}},O=l.set(l.each(ht,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](i(n,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var s=e.getBounds();r.transform((new S).translate(s.getPoint()).scale(s.getSize()))}}}},{}),{id:function(t,e){L[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=_(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:d,transform:d,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,r,s,a){var o,c,u=new w(i(e,"array")),h=n(s,null,null,!0);if(t instanceof C){var l=h?h.divide(u.getSize()):1,c=(new S).scale(l).translate(u.getPoint().negate());o=t}else t instanceof k&&(h&&u.setSize(h),o=t._item);if(o){if("visible"!==m(s,"overflow",a)){var p=new P.Rectangle(u);p.setClipMask(!0),o.addChild(p)}c&&o.transform(c)}}});A.inject({importSVG:function(t,e){return E(t,e,this)}}),M.inject({importSVG:function(t,e){return this.activate(),E(t,e,this)}})},l.exports.PaperScript=function(){function t(t,e){return(b.acorn||w).parse(t,e)}function e(t,e,n){var i=T[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function p(t,e){var n=M[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function d(e,n){function i(t){for(var e=0,n=f.length;e<n;e++){var i=f[e];if(i[0]>=t)break;t+=i[1]}return t}function r(t){return e.substring(i(t.range[0]),i(t.range[1]))}function s(t,n){return e.substring(i(t.range[1]),i(n.range[0]))}function c(t,n){for(var r=i(t.range[0]),s=i(t.range[1]),a=0,o=f.length-1;o>=0;o--)if(r>f[o][0]){a=o+1;break}f.splice(a,0,[r,n.length-s+r]),e=e.substring(0,r)+n+e.substring(s)}function l(t,e){if(t){for(var n in t)if("range"!==n&&"loc"!==n){var i=t[n];if(Array.isArray(i))for(var a=0,o=i.length;a<o;a++)l(i[a],t);else i&&"object"==typeof i&&l(i,t)}switch(t.type){case"UnaryExpression":if(t.operator in M&&"Literal"!==t.argument.type){var u=r(t.argument);c(t,'$__("'+t.operator+'", '+u+")")}break;case"BinaryExpression":if(t.operator in T&&"Literal"!==t.left.type){var h=r(t.left),p=r(t.right),f=s(t.left,t.right),d=t.operator;c(t,"__$__("+h+","+f.replace(new RegExp("\\"+d),'"'+d+'"')+", "+p+")")}break;case"UpdateExpression":case"AssignmentExpression":var g=e&&e.type;if(!("ForStatement"===g||"BinaryExpression"===g&&/^[=!<>]/.test(e.operator)||"MemberExpression"===g&&e.computed))if("UpdateExpression"===t.type){var u=r(t.argument),m="__$__("+u+', "'+t.operator[0]+'", 1)',v=u+" = "+m;t.prefix||"AssignmentExpression"!==g&&"VariableDeclarator"!==g||(r(e.left||e.id)===u&&(v=m),v=u+"; "+v),c(t,v)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var h=r(t.left),p=r(t.right),m=h+" = __$__("+h+', "'+t.operator[0]+'", '+p+")";c(t,/^\(.*\)$/.test(r(t))?"("+m+")":m)}}}}if(!e)return"";n=n||{};var p,f=[],d=n.url||"",g=a.agent,m=g.versionNumber,v=!1,y=n.sourceMaps,_=n.source||e,x=/\r\n|\n|\r/gm,b=n.offset||0;if(y&&(g.chrome&&m>=30||g.webkit&&m>=537.76||g.firefox&&m>=23||g.node)){if(g.node)b-=2;else if(u&&d&&!u.location.href.indexOf(d)){var w=h.getElementsByTagName("html")[0].innerHTML;b=w.substr(0,w.indexOf(e)+1).match(x).length+1}v=b>0&&!(g.chrome&&m>=36||g.safari&&m>=600||g.firefox&&m>=40||g.node);var E=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;t>>=5,t&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}(v?0:b)+"A"];E.length=(e.match(x)||[]).length+1+(v?b:0),p={version:3,file:d,names:[],mappings:E.join(";AACA"),sourceRoot:"",sources:[d],sourcesContent:[_]}}return l(t(e,{ranges:!0,preserveParens:!0})),p&&(v&&(e=new Array(b+1).join("\n")+e),/^(inline|both)$/.test(y)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(p))))),e+="\n//# sourceURL="+(d||"paperscript")),{url:d,source:_,code:e,map:p}}function g(t,n,i){function r(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(g.push(i),m.push(e[i]))}a=n;var s,o=n.getView(),c=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new st:null,u=c?c._events:[],f=["onFrame","onResize"].concat(u),g=[],m=[],v="object"==typeof t?t:d(t,i);t=v.code,r({__$__:e,$__:p,paper:n,view:o,tool:c},!0),r(n),(f=l.each(f,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(g.push(e),this.push(e+": "+e))},[]).join(", "))&&(t+="\nreturn { "+f+" };");var _=a.agent;if(h&&(_.chrome||_.firefox&&_.versionNumber<40)){var x=h.createElement("script"),b=h.head||h.getElementsByTagName("head")[0];_.firefox&&(t="\n"+t),x.appendChild(h.createTextNode("paper._execute = function("+g+") {"+t+"\n}")),b.appendChild(x),s=a._execute,delete a._execute,b.removeChild(x)}else s=Function(g,t);var w=s.apply(n,m)||{};return l.each(u,function(t){var e=w[t];e&&(c[t]=e)}),o&&(w.onResize&&o.setOnResize(w.onResize),o.emit("resize",{size:o.size,delta:new y}),w.onFrame&&o.setOnFrame(w.onFrame),o.requestUpdate()),v}function m(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),n=h.getElementById(e),i=t.src||t.getAttribute("data-src"),r=f.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var s=f.get(n.getAttribute("data-paper-scope"))||(new f).setup(n);return n.setAttribute("data-paper-scope",s._id),i?at.request({url:i,async:r,mimeType:"text/plain",onLoad:function(t){g(t,s,i)}}):g(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function v(){l.each(h&&h.getElementsByTagName("script"),m)}function _(t){return t?m(t):v()}var b=this,w=b.acorn;if(!w)try{w=n(147)}catch(t){}if(!w){var E,S;w=E=S={},function(t,e){"object"==typeof E&&"object"==typeof S?e(E):(r=[E],i=e,(s="function"==typeof i?i.apply(E,r):i)!==c&&(S.exports=s))}(0,function(t){"use strict";function e(t){lt=t||{};for(var e in gt)Object.prototype.hasOwnProperty.call(lt,e)||(lt[e]=gt[e]);dt=lt.sourceFile||null}function n(t,e){var n=mt(pt,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=vt,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var a=i[r];n+="case "+a[0].length+":",e(a)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=Tt,this.column=vt-Mt}function s(){Tt=1,vt=Mt=0,St=!0,u()}function a(t,e){_t=vt,lt.locations&&(bt=new r),wt=t,u(),Et=e,St=t.beforeExpr}function o(){var t=lt.onComment&&lt.locations&&new r,e=vt,i=pt.indexOf("*/",vt+=2);if(-1===i&&n(vt-2,"Unterminated comment"),vt=i+2,lt.locations){Ze.lastIndex=e;for(var s;(s=Ze.exec(pt))&&s.index<vt;)++Tt,Mt=s.index+s[0].length}lt.onComment&&lt.onComment(!0,pt.slice(e+2,i),e,vt,t,lt.locations&&new r)}function c(){for(var t=vt,e=lt.onComment&&lt.locations&&new r,n=pt.charCodeAt(vt+=2);vt<ft&&10!==n&&13!==n&&8232!==n&&8233!==n;)++vt,n=pt.charCodeAt(vt);lt.onComment&&lt.onComment(!1,pt.slice(t+2,vt),t,vt,e,lt.locations&&new r)}function u(){for(;vt<ft;){var t=pt.charCodeAt(vt);if(32===t)++vt;else if(13===t){++vt;var e=pt.charCodeAt(vt);10===e&&++vt,lt.locations&&(++Tt,Mt=vt)}else if(10===t||8232===t||8233===t)++vt,lt.locations&&(++Tt,Mt=vt);else if(t>8&&t<14)++vt;else if(47===t){var e=pt.charCodeAt(vt+1);if(42===e)o();else{if(47!==e)break;c()}}else if(160===t)++vt;else{if(!(t>=5760&&Ge.test(String.fromCharCode(t))))break;++vt}}}function h(){var t=pt.charCodeAt(vt+1);return t>=48&&t<=57?S(!0):(++vt,a(xe))}function l(){var t=pt.charCodeAt(vt+1);return St?(++vt,b()):61===t?x(Se,2):x(we,1)}function p(){return 61===pt.charCodeAt(vt+1)?x(Se,2):x(De,1)}function f(t){var e=pt.charCodeAt(vt+1);return e===t?x(124===t?Ae:Ce,2):61===e?x(Se,2):x(124===t?Le:Re,1)}function d(){return 61===pt.charCodeAt(vt+1)?x(Se,2):x(Pe,1)}function g(t){var e=pt.charCodeAt(vt+1);return e===t?45==e&&62==pt.charCodeAt(vt+2)&&Ye.test(pt.slice(Ct,vt))?(vt+=3,c(),u(),_()):x(Te,2):61===e?x(Se,2):x(Ne,1)}function m(t){var e=pt.charCodeAt(vt+1),n=1;return e===t?(n=62===t&&62===pt.charCodeAt(vt+2)?3:2,61===pt.charCodeAt(vt+n)?x(Se,n+1):x(Oe,n)):33==e&&60==t&&45==pt.charCodeAt(vt+2)&&45==pt.charCodeAt(vt+3)?(vt+=4,c(),u(),_()):(61===e&&(n=61===pt.charCodeAt(vt+2)?3:2),x(ke,n))}function v(t){return 61===pt.charCodeAt(vt+1)?x(Ie,61===pt.charCodeAt(vt+2)?3:2):x(61===t?Ee:Me,1)}function y(t){switch(t){case 46:return h();case 40:return++vt,a(ge);case 41:return++vt,a(me);case 59:return++vt,a(ye);case 44:return++vt,a(ve);case 91:return++vt,a(le);case 93:return++vt,a(pe);case 123:return++vt,a(fe);case 125:return++vt,a(de);case 58:return++vt,a(_e);case 63:return++vt,a(be);case 48:var e=pt.charCodeAt(vt+1);if(120===e||88===e)return E();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return S(!1);case 34:case 39:return T(t);case 47:return l(t);case 37:case 42:return p();case 124:case 38:return f(t);case 94:return d();case 43:case 45:return g(t);case 60:case 62:return m(t);case 61:case 33:return v(t);case 126:return x(Me,1)}return!1}function _(t){if(t?vt=yt+1:yt=vt,lt.locations&&(xt=new r),t)return b();if(vt>=ft)return a(Ut);var e=pt.charCodeAt(vt);if($e(e)||92===e)return C();var i=y(e);if(!1===i){var s=String.fromCharCode(e);if("\\"===s||qe.test(s))return C();n(vt,"Unexpected character '"+s+"'")}return i}function x(t,e){var n=pt.slice(vt,vt+e);vt+=e,a(t,n)}function b(){for(var t,e,i="",r=vt;;){vt>=ft&&n(r,"Unterminated regular expression");var s=pt.charAt(vt);if(Ye.test(s)&&n(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++vt}var i=pt.slice(r,vt);++vt;var o=A();o&&!/^[gmsiy]*$/.test(o)&&n(r,"Invalid regexp flag");try{var c=new RegExp(i,o)}catch(t){t instanceof SyntaxError&&n(r,t.message),n(t)}return a(Nt,c)}function w(t,e){for(var n=vt,i=0,r=0,s=null==e?1/0:e;r<s;++r){var a,o=pt.charCodeAt(vt);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++vt,i=i*t+a}return vt===n||null!=e&&vt-n!==e?null:i}function E(){vt+=2;var t=w(16);return null==t&&n(yt+2,"Expected hexadecimal number"),$e(pt.charCodeAt(vt))&&n(vt,"Identifier directly after number"),a(Ot,t)}function S(t){var e=vt,i=!1,r=48===pt.charCodeAt(vt);t||null!==w(10)||n(e,"Invalid number"),46===pt.charCodeAt(vt)&&(++vt,w(10),i=!0);var s=pt.charCodeAt(vt);69!==s&&101!==s||(s=pt.charCodeAt(++vt),43!==s&&45!==s||++vt,null===w(10)&&n(e,"Invalid number"),i=!0),$e(pt.charCodeAt(vt))&&n(vt,"Identifier directly after number");var o,c=pt.slice(e,vt);return i?o=parseFloat(c):r&&1!==c.length?/[89]/.test(c)||It?n(e,"Invalid number"):o=parseInt(c,8):o=parseInt(c,10),a(Ot,o)}function T(t){vt++;for(var e="";;){vt>=ft&&n(yt,"Unterminated string constant");var i=pt.charCodeAt(vt);if(i===t)return++vt,a(Dt,e);if(92===i){i=pt.charCodeAt(++vt);var r=/^[0-7]+/.exec(pt.slice(vt,vt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++vt,r)It&&n(vt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),vt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(M(2));break;case 117:e+=String.fromCharCode(M(4));break;case 85:e+=String.fromCharCode(M(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===pt.charCodeAt(vt)&&++vt;case 10:lt.locations&&(Mt=vt,++Tt);break;default:e+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||n(yt,"Unterminated string constant"),e+=String.fromCharCode(i),++vt}}function M(t){var e=w(16,t);return null===e&&n(yt,"Bad character escape sequence"),e}function A(){Ue=!1;for(var t,e=!0,i=vt;;){var r=pt.charCodeAt(vt);if(Je(r))Ue&&(t+=pt.charAt(vt)),++vt;else{if(92!==r)break;Ue||(t=pt.slice(i,vt)),Ue=!0,117!=pt.charCodeAt(++vt)&&n(vt,"Expecting Unicode escape sequence \\uXXXX"),++vt;var s=M(4),a=String.fromCharCode(s);a||n(vt-1,"Invalid Unicode escape"),(e?$e(s):Je(s))||n(vt-4,"Invalid Unicode escape"),t+=a}e=!1}return Ue?t:pt.slice(i,vt)}function C(){var t=A(),e=Ft;return!Ue&&Ve(t)&&(e=he[t]),a(e,t)}function L(){At=yt,Ct=_t,Lt=bt,_()}function P(t){if(It=t,vt=yt,lt.locations)for(;vt<Mt;)Mt=pt.lastIndexOf("\n",Mt-2)+1,--Tt;u(),_()}function R(){this.type=null,this.start=yt,this.end=null}function I(){this.start=xt,this.end=null,null!==dt&&(this.source=dt)}function k(){var t=new R;return lt.locations&&(t.loc=new I),lt.directSourceFile&&(t.sourceFile=lt.directSourceFile),lt.ranges&&(t.range=[yt,0]),t}function O(t){var e=new R;return e.start=t.start,lt.locations&&(e.loc=new I,e.loc.start=t.loc.start),lt.ranges&&(e.range=[t.range[0],0]),e}function N(t,e){return t.type=e,t.end=Ct,lt.locations&&(t.loc.end=Lt),lt.ranges&&(t.range[1]=Ct),t}function D(t){return lt.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function F(t){if(wt===t)return L(),!0}function U(){return!lt.strictSemicolons&&(wt===Ut||wt===de||Ye.test(pt.slice(Ct,yt)))}function B(){F(ye)||U()||j()}function z(t){wt===t?L():j()}function j(){n(yt,"Unexpected token")}function H(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),It&&"Identifier"===t.type&&He(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function V(t){At=Ct=vt,lt.locations&&(Lt=new r),Pt=It=null,Rt=[],_();var e=t||k(),n=!0;for(t||(e.body=[]);wt!==Ut;){var i=G();e.body.push(i),n&&D(i)&&P(!0),n=!1}return N(e,"Program")}function G(){(wt===we||wt===Se&&"/="==Et)&&_(!0);var t=wt,e=k();switch(t){case Bt:case Ht:L();var i=t===Bt;F(ye)||U()?e.label=null:wt!==Ft?j():(e.label=ht(),B());for(var r=0;r<Rt.length;++r){var s=Rt[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===Rt.length&&n(e.start,"Unsyntactic "+t.keyword),N(e,i?"BreakStatement":"ContinueStatement");case Vt:return L(),B(),N(e,"DebuggerStatement");case Wt:return L(),Rt.push(Ke),e.body=G(),Rt.pop(),z(ne),e.test=W(),B(),N(e,"DoWhileStatement");case Yt:if(L(),Rt.push(Ke),z(ge),wt===ye)return X(e,null);if(wt===ee){var a=k();return L(),Z(a,!0),N(a,"VariableDeclaration"),1===a.declarations.length&&F(ue)?Y(e,a):X(e,a)}var a=$(!1,!0);return F(ue)?(H(a),Y(e,a)):X(e,a);case Zt:return L(),ct(e,!0);case $t:return L(),e.test=W(),e.consequent=G(),e.alternate=F(qt)?G():null,N(e,"IfStatement");case Jt:return Pt||lt.allowReturnOutsideFunction||n(yt,"'return' outside of function"),L(),F(ye)||U()?e.argument=null:(e.argument=$(),B()),N(e,"ReturnStatement");case Kt:L(),e.discriminant=W(),e.cases=[],z(fe),Rt.push(Qe);for(var o,c;wt!=de;)if(wt===zt||wt===Gt){var u=wt===zt;o&&N(o,"SwitchCase"),e.cases.push(o=k()),o.consequent=[],L(),u?o.test=$():(c&&n(At,"Multiple default clauses"),c=!0,o.test=null),z(_e)}else o||j(),o.consequent.push(G());return o&&N(o,"SwitchCase"),L(),Rt.pop(),N(e,"SwitchStatement");case Qt:return L(),Ye.test(pt.slice(Ct,yt))&&n(Ct,"Illegal newline after throw"),e.argument=$(),B(),N(e,"ThrowStatement");case te:if(L(),e.block=q(),e.handler=null,wt===jt){var h=k();L(),z(ge),h.param=ht(),It&&He(h.param.name)&&n(h.param.start,"Binding "+h.param.name+" in strict mode"),z(me),h.guard=null,h.body=q(),e.handler=N(h,"CatchClause")}return e.guardedHandlers=kt,e.finalizer=F(Xt)?q():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),N(e,"TryStatement");case ee:return L(),Z(e),B(),N(e,"VariableDeclaration");case ne:return L(),e.test=W(),Rt.push(Ke),e.body=G(),Rt.pop(),N(e,"WhileStatement");case ie:return It&&n(yt,"'with' in strict mode"),L(),e.object=W(),e.body=G(),N(e,"WithStatement");case fe:return q();case ye:return L(),N(e,"EmptyStatement");default:var l=Et,p=$();if(t===Ft&&"Identifier"===p.type&&F(_e)){for(var r=0;r<Rt.length;++r)Rt[r].name===l&&n(p.start,"Label '"+l+"' is already declared");var f=wt.isLoop?"loop":wt===Kt?"switch":null;return Rt.push({name:l,kind:f}),e.body=G(),Rt.pop(),e.label=p,N(e,"LabeledStatement")}return e.expression=p,B(),N(e,"ExpressionStatement")}}function W(){z(ge);var t=$();return z(me),t}function q(t){var e,n=k(),i=!0,r=!1;for(n.body=[],z(fe);!F(de);){var s=G();n.body.push(s),i&&t&&D(s)&&(e=r,P(r=!0)),i=!1}return r&&!e&&P(!1),N(n,"BlockStatement")}function X(t,e){return t.init=e,z(ye),t.test=wt===ye?null:$(),z(ye),t.update=wt===me?null:$(),z(me),t.body=G(),Rt.pop(),N(t,"ForStatement")}function Y(t,e){return t.left=e,t.right=$(),z(me),t.body=G(),Rt.pop(),N(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var i=k();if(i.id=ht(),It&&He(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=F(Ee)?$(!0,e):null,t.declarations.push(N(i,"VariableDeclarator")),!F(ve))break}return t}function $(t,e){var n=J(e);if(!t&&wt===ve){var i=O(n);for(i.expressions=[n];F(ve);)i.expressions.push(J(e));return N(i,"SequenceExpression")}return n}function J(t){var e=K(t);if(wt.isAssign){var n=O(e);return n.operator=Et,n.left=e,L(),n.right=J(t),H(e),N(n,"AssignmentExpression")}return e}function K(t){var e=Q(t);if(F(be)){var n=O(e);return n.test=e,n.consequent=$(!0),z(_e),n.alternate=$(!0,t),N(n,"ConditionalExpression")}return e}function Q(t){return tt(et(),-1,t)}function tt(t,e,n){var i=wt.binop;if(null!=i&&(!n||wt!==ue)&&i>e){var r=O(t);r.left=t,r.operator=Et;var s=wt;L(),r.right=tt(et(),i,n);return tt(N(r,s===Ae||s===Ce?"LogicalExpression":"BinaryExpression"),e,n)}return t}function et(){if(wt.prefix){var t=k(),e=wt.isUpdate;return t.operator=Et,t.prefix=!0,St=!0,L(),t.argument=et(),e?H(t.argument):It&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),N(t,e?"UpdateExpression":"UnaryExpression")}for(var i=nt();wt.postfix&&!U();){var t=O(i);t.operator=Et,t.prefix=!1,t.argument=i,H(i),L(),i=N(t,"UpdateExpression")}return i}function nt(){return it(rt())}function it(t,e){if(F(xe)){var n=O(t);return n.object=t,n.property=ht(!0),n.computed=!1,it(N(n,"MemberExpression"),e)}if(F(le)){var n=O(t);return n.object=t,n.property=$(),n.computed=!0,z(pe),it(N(n,"MemberExpression"),e)}if(!e&&F(ge)){var n=O(t);return n.callee=t,n.arguments=ut(me,!1),it(N(n,"CallExpression"),e)}return t}function rt(){switch(wt){case se:var t=k();return L(),N(t,"ThisExpression");case Ft:return ht();case Ot:case Dt:case Nt:var t=k();return t.value=Et,t.raw=pt.slice(yt,_t),L(),N(t,"Literal");case ae:case oe:case ce:var t=k();return t.value=wt.atomValue,t.raw=wt.keyword,L(),N(t,"Literal");case ge:var e=xt,n=yt;L();var i=$();return i.start=n,i.end=_t,lt.locations&&(i.loc.start=e,i.loc.end=bt),lt.ranges&&(i.range=[n,_t]),z(me),i;case le:var t=k();return L(),t.elements=ut(pe,!0,!0),N(t,"ArrayExpression");case fe:return at();case Zt:var t=k();return L(),ct(t,!1);case re:return st();default:j()}}function st(){var t=k();return L(),t.callee=it(rt(),!0),F(ge)?t.arguments=ut(me,!1):t.arguments=kt,N(t,"NewExpression")}function at(){var t=k(),e=!0,i=!1;for(t.properties=[],L();!F(de);){if(e)e=!1;else if(z(ve),lt.allowTrailingCommas&&F(de))break;var r,s={key:ot()},a=!1;if(F(_e)?(s.value=$(!0),r=s.kind="init"):lt.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=i=!0,r=s.kind=s.key.name,s.key=ot(),wt!==ge&&j(),s.value=ct(k(),!1)):j(),"Identifier"===s.key.type&&(It||i))for(var o=0;o<t.properties.length;++o){var c=t.properties[o];if(c.key.name===s.key.name){var u=r==c.kind||a&&"init"===c.kind||"init"===r&&("get"===c.kind||"set"===c.kind);u&&!It&&"init"===r&&"init"===c.kind&&(u=!1),u&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return N(t,"ObjectExpression")}function ot(){return wt===Ot||wt===Dt?rt():ht(!0)}function ct(t,e){wt===Ft?t.id=ht():e?j():t.id=null,t.params=[];var i=!0;for(z(ge);!F(me);)i?i=!1:z(ve),t.params.push(ht());var r=Pt,s=Rt;if(Pt=!0,Rt=[],t.body=q(!0),Pt=r,Rt=s,It||t.body.body.length&&D(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((je(o.name)||He(o.name))&&n(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var c=0;c<a;++c)o.name===t.params[c].name&&n(o.start,"Argument name clash in strict mode")}return N(t,e?"FunctionDeclaration":"FunctionExpression")}function ut(t,e,n){for(var i=[],r=!0;!F(t);){if(r)r=!1;else if(z(ve),e&&lt.allowTrailingCommas&&F(t))break;n&&wt===ve?i.push(null):i.push($(!0))}return i}function ht(t){var e=k();return t&&"everywhere"==lt.forbidReserved&&(t=!1),wt===Ft?(!t&&(lt.forbidReserved&&(3===lt.ecmaVersion?Be:ze)(Et)||It&&je(Et))&&-1==pt.slice(yt,_t).indexOf("\\")&&n(yt,"The keyword '"+Et+"' is reserved"),e.name=Et):t&&wt.keyword?e.name=wt.keyword:j(),St=!1,L(),N(e,"Identifier")}t.version="0.5.0";var lt,pt,ft,dt;t.parse=function(t,n){return pt=String(t),ft=pt.length,e(n),s(),V(lt.program)};var gt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},mt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Ze.lastIndex=i;var r=Ze.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return Ct=_t,_(t),r.start=yt,r.end=_t,r.startLoc=xt,r.endLoc=bt,r.type=wt,r.value=Et,r}pt=String(t),ft=pt.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(vt=t,lt.locations){Tt=1,Mt=Ze.lastIndex=0;for(var n;(n=Ze.exec(pt))&&n.index<t;)++Tt,Mt=n.index+n[0].length}St=e,u()},i};var vt,yt,_t,xt,bt,wt,Et,St,Tt,Mt,At,Ct,Lt,Pt,Rt,It,kt=[],Ot={type:"num"},Nt={type:"regexp"},Dt={type:"string"},Ft={type:"name"},Ut={type:"eof"},Bt={keyword:"break"},zt={keyword:"case",beforeExpr:!0},jt={keyword:"catch"},Ht={keyword:"continue"},Vt={keyword:"debugger"},Gt={keyword:"default"},Wt={keyword:"do",isLoop:!0},qt={keyword:"else",beforeExpr:!0},Xt={keyword:"finally"},Yt={keyword:"for",isLoop:!0},Zt={keyword:"function"},$t={keyword:"if"},Jt={keyword:"return",beforeExpr:!0},Kt={keyword:"switch"},Qt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ne={keyword:"while",isLoop:!0},ie={keyword:"with"},re={keyword:"new",beforeExpr:!0},se={keyword:"this"},ae={keyword:"null",atomValue:null},oe={keyword:"true",atomValue:!0},ce={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},he={break:Bt,case:zt,catch:jt,continue:Ht,debugger:Vt,default:Gt,do:Wt,else:qt,finally:Xt,for:Yt,function:Zt,if:$t,return:Jt,switch:Kt,throw:Qt,try:te,var:ee,while:ne,with:ie,null:ae,true:oe,false:ce,new:re,in:ue,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:se,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},le={type:"[",beforeExpr:!0},pe={type:"]"},fe={type:"{",beforeExpr:!0},de={type:"}"},ge={type:"(",beforeExpr:!0},me={type:")"},ve={type:",",beforeExpr:!0},ye={type:";",beforeExpr:!0},_e={type:":",beforeExpr:!0},xe={type:"."},be={type:"?",beforeExpr:!0},we={binop:10,beforeExpr:!0},Ee={isAssign:!0,beforeExpr:!0},Se={isAssign:!0,beforeExpr:!0},Te={postfix:!0,prefix:!0,isUpdate:!0},Me={prefix:!0,beforeExpr:!0},Ae={binop:1,beforeExpr:!0},Ce={binop:2,beforeExpr:!0},Le={binop:3,beforeExpr:!0},Pe={binop:4,beforeExpr:!0},Re={binop:5,beforeExpr:!0},Ie={binop:6,beforeExpr:!0},ke={binop:7,beforeExpr:!0},Oe={binop:8,beforeExpr:!0},Ne={binop:9,prefix:!0,beforeExpr:!0},De={binop:10,beforeExpr:!0};t.tokTypes={bracketL:le,bracketR:pe,braceL:fe,braceR:de,parenL:ge,parenR:me,comma:ve,semi:ye,colon:_e,dot:xe,question:be,slash:we,eq:Ee,name:Ft,eof:Ut,num:Ot,regexp:Nt,string:Dt};for(var Fe in he)t.tokTypes["_"+Fe]=he[Fe];var Ue,Be=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),ze=i("class enum extends super const export import"),je=i("implements interface let package private protected public static yield"),He=i("eval arguments"),Ve=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ge=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,We="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",qe=new RegExp("["+We+"]"),Xe=new RegExp("["+We+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ye=/[\n\r\u2028\u2029]/,Ze=/\r\n|[\n\r\u2028\u2029]/g,$e=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&qe.test(String.fromCharCode(t)))},Je=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Xe.test(String.fromCharCode(t))))},Ke={kind:"loop"},Qe={kind:"switch"}}),w.version||(w=null)}var T={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},M={"-":"__negate","+":"__self"},A=l.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});return y.inject(A),x.inject(A),q.inject(A),u&&("complete"===h.readyState?setTimeout(v):J.add(u,{load:v})),{compile:d,execute:g,load:_,parse:t}}.call(this),a=new(f.inject(l.exports,{Base:l,Numerical:m,Key:nt,DomEvent:J,DomElement:$,document:h,window:u,Symbol:k,PlacedSymbol:I})),a.agent.node&&n(148)(a),i=a,(s="function"==typeof i?i.call(e,n,e,t):i)!==c&&(t.exports=s),a}.call(this,"object"==typeof self?self:null)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";function i(t){return t&&DataView.prototype.isPrototypeOf(t)}function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){var e=new FileReader,n=u(e);return e.readAsArrayBuffer(t),n}function l(t){var e=new FileReader,n=u(e);return e.readAsText(t),n}function p(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:b.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:b.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():b.arrayBuffer&&b.blob&&i(t)?(this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||E(t))?this._bodyArrayBuffer=f(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t){var e=t.toUpperCase();return S.indexOf(e)>-1?e:t}function m(t,e){e=e||{};var n=e.body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=g(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function y(t){var e=new o;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}function x(t,e){return new Promise(function(n,i){function r(){a.abort()}var s=new m(t,e);if(s.signal&&s.signal.aborted)return i(new M("Aborted","AbortError"));var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:y(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new _(e,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new M("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&b.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",r),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",r)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})}Object.defineProperty(e,"__esModule",{value:!0}),e.Headers=o,e.Request=m,e.Response=_,n.d(e,"DOMException",function(){return M}),e.fetch=x;var b={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(b.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(t){return t&&w.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,e){t=r(t),e=s(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},o.prototype.delete=function(t){delete this.map[r(t)]},o.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},o.prototype.set=function(t,e){this.map[r(t)]=s(e)},o.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),a(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),a(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),a(t)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},d.call(m.prototype),d.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];_.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})};var M=self.DOMException;try{new M}catch(t){M=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},M.prototype=Object.create(Error.prototype),M.prototype.constructor=M}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=o,self.Request=m,self.Response=_)},function(t,e,n){"use strict";function i(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function r(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&z.test(String.fromCharCode(t)):!1!==e&&i(t,H)))}function s(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&j.test(String.fromCharCode(t)):!1!==e&&(i(t,H)||i(t,V)))))}function a(t,e){return new G(t,{beforeExpr:!0,binop:e})}function o(t,e){return void 0===e&&(e={}),e.keyword=t,X[t]=new G(t,e)}function c(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}function u(t,e){return tt.call(t,e)}function h(t,e){for(var n=1,i=0;;){$.lastIndex=i;var r=$.exec(t);if(!(r&&r.index<e))return new it(n,e-i);++n,i=r.index+r[0].length}}function l(t){var e={};for(var n in st)e[n]=t&&u(t,n)?t[n]:st[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),nt(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return nt(e.onComment)&&(e.onComment=p(e,e.onComment)),e}function p(t,e){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(c.loc=new rt(this,a,o)),t.ranges&&(c.range=[r,s]),e.push(c)}}function f(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function d(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function g(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}function m(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function v(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function y(t){return r(t,!0)||36===t||95===t}function _(t){return s(t,!0)||36===t||95===t||8204===t||8205===t}function x(t){return t>=65&&t<=90||t>=97&&t<=122}function b(t){return t>=0&&t<=1114111}function w(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function E(t){return x(t)||95===t}function S(t){return E(t)||T(t)}function T(t){return t>=48&&t<=57}function M(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function A(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function C(t){return t>=48&&t<=55}function L(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function P(t,e){return new ot(e,t).parse()}function R(t,e,n){var i=new ot(n,t,e);return i.nextToken(),i.parseExpression()}function I(t,e){return new ot(e,t)}function k(t,e,n){Rt=t,It=e,kt=n}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"version",function(){return Ot}),n.d(e,"parse",function(){return P}),n.d(e,"parseExpressionAt",function(){return R}),n.d(e,"tokenizer",function(){return I}),n.d(e,"parse_dammit",function(){return Rt}),n.d(e,"LooseParser",function(){return It}),n.d(e,"pluginsLoose",function(){return kt}),n.d(e,"addLooseExports",function(){return k}),n.d(e,"Parser",function(){return ot}),n.d(e,"plugins",function(){return at}),n.d(e,"defaultOptions",function(){return st}),n.d(e,"Position",function(){return it}),n.d(e,"SourceLocation",function(){return rt}),n.d(e,"getLineInfo",function(){return h}),n.d(e,"Node",function(){return xt}),n.d(e,"TokenType",function(){return G}),n.d(e,"tokTypes",function(){return Y}),n.d(e,"keywordTypes",function(){return X}),n.d(e,"TokContext",function(){return wt}),n.d(e,"tokContexts",function(){return Et}),n.d(e,"isIdentifierChar",function(){return s}),n.d(e,"isIdentifierStart",function(){return r}),n.d(e,"Token",function(){return Ct}),n.d(e,"isNewLine",function(){return c}),n.d(e,"lineBreak",function(){return Z}),n.d(e,"lineBreakG",function(){return $}),n.d(e,"nonASCIIwhitespace",function(){return J});var O={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},N="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",D={5:N,6:N+" const class extends export import super"},F=/^in(stanceof)?$/,U="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",B="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",z=new RegExp("["+U+"]"),j=new RegExp("["+U+B+"]");U=B=null;var H=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],V=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],G=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null},W={beforeExpr:!0},q={startsExpr:!0},X={},Y={num:new G("num",q),regexp:new G("regexp",q),string:new G("string",q),name:new G("name",q),eof:new G("eof"),bracketL:new G("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new G("]"),braceL:new G("{",{beforeExpr:!0,startsExpr:!0}),braceR:new G("}"),parenL:new G("(",{beforeExpr:!0,startsExpr:!0}),parenR:new G(")"),comma:new G(",",W),semi:new G(";",W),colon:new G(":",W),dot:new G("."),question:new G("?",W),arrow:new G("=>",W),template:new G("template"),invalidTemplate:new G("invalidTemplate"),ellipsis:new G("...",W),backQuote:new G("`",q),dollarBraceL:new G("${",{beforeExpr:!0,startsExpr:!0}),eq:new G("=",{beforeExpr:!0,isAssign:!0}),assign:new G("_=",{beforeExpr:!0,isAssign:!0}),incDec:new G("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new G("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:a("||",1),logicalAND:a("&&",2),bitwiseOR:a("|",3),bitwiseXOR:a("^",4),bitwiseAND:a("&",5),equality:a("==/!=/===/!==",6),relational:a("</>/<=/>=",7),bitShift:a("<</>>/>>>",8),plusMin:new G("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:a("%",10),star:a("*",10),slash:a("/",10),starstar:new G("**",{beforeExpr:!0}),_break:o("break"),_case:o("case",W),_catch:o("catch"),_continue:o("continue"),_debugger:o("debugger"),_default:o("default",W),_do:o("do",{isLoop:!0,beforeExpr:!0}),_else:o("else",W),_finally:o("finally"),_for:o("for",{isLoop:!0}),_function:o("function",q),_if:o("if"),_return:o("return",W),_switch:o("switch"),_throw:o("throw",W),_try:o("try"),_var:o("var"),_const:o("const"),_while:o("while",{isLoop:!0}),_with:o("with"),_new:o("new",{beforeExpr:!0,startsExpr:!0}),_this:o("this",q),_super:o("super",q),_class:o("class",q),_extends:o("extends",W),_export:o("export"),_import:o("import"),_null:o("null",q),_true:o("true",q),_false:o("false",q),_in:o("in",{beforeExpr:!0,binop:7}),_instanceof:o("instanceof",{beforeExpr:!0,binop:7}),_typeof:o("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:o("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:o("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Z=/\r\n?|\n|\u2028|\u2029/,$=new RegExp(Z.source,"g"),J=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,K=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Q=Object.prototype,tt=Q.hasOwnProperty,et=Q.toString,nt=Array.isArray||function(t){return"[object Array]"===et.call(t)},it=function(t,e){this.line=t,this.column=e};it.prototype.offset=function(t){return new it(this.line,this.column+t)};var rt=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)},st={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},at={},ot=function(t,e,n){this.options=t=l(t),this.sourceFile=t.sourceFile,this.keywords=f(D[t.ecmaVersion>=6?6:5]);var i="";if(!t.allowReserved){for(var r=t.ecmaVersion;!(i=O[r]);r--);"module"===t.sourceType&&(i+=" await")}this.reservedWords=f(i);var s=(i?i+" ":"")+O.strict;this.reservedWordsStrict=f(s),this.reservedWordsStrictBind=f(s+" "+O.strictBind),this.input=String(e),this.containsEsc=!1,this.loadPlugins(t.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Z).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};ot.prototype.isKeyword=function(t){return this.keywords.test(t)},ot.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},ot.prototype.extend=function(t,e){this[t]=e(this[t])},ot.prototype.loadPlugins=function(t){var e=this;for(var n in t){var i=at[n];if(!i)throw new Error("Plugin '"+n+"' not found");i(e,t[n])}},ot.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};var ct=ot.prototype,ut=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;ct.strictDirective=function(t){for(var e=this;;){K.lastIndex=t,t+=K.exec(e.input)[0].length;var n=ut.exec(e.input.slice(t));if(!n)return!1;if("use strict"===(n[1]||n[2]))return!0;t+=n[0].length}},ct.eat=function(t){return this.type===t&&(this.next(),!0)},ct.isContextual=function(t){return this.type===Y.name&&this.value===t&&!this.containsEsc},ct.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},ct.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},ct.canInsertSemicolon=function(){return this.type===Y.eof||this.type===Y.braceR||Z.test(this.input.slice(this.lastTokEnd,this.start))},ct.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ct.semicolon=function(){this.eat(Y.semi)||this.insertSemicolon()||this.unexpected()},ct.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},ct.expect=function(t){this.eat(t)||this.unexpected()},ct.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},ct.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},ct.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},ct.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ct.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ht=ot.prototype;ht.parseTopLevel=function(t){var e=this,n={};for(t.body||(t.body=[]);this.type!==Y.eof;){var i=e.parseStatement(!0,!0,n);t.body.push(i)}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var lt={kind:"loop"},pt={kind:"switch"};ht.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;K.lastIndex=this.pos;var t=K.exec(this.input),e=this.pos+t[0].length,n=this.input.charCodeAt(e);if(91===n||123===n)return!0;if(r(n,!0)){for(var i=e+1;s(this.input.charCodeAt(i),!0);)++i;var a=this.input.slice(e,i);if(!F.test(a))return!0}return!1},ht.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;K.lastIndex=this.pos;var t=K.exec(this.input),e=this.pos+t[0].length;return!(Z.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&s(this.input.charAt(e+8)))},ht.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet()&&(r=Y._var,i="let"),r){case Y._break:case Y._continue:return this.parseBreakContinueStatement(s,r.keyword);case Y._debugger:return this.parseDebuggerStatement(s);case Y._do:return this.parseDoStatement(s);case Y._for:return this.parseForStatement(s);case Y._function:return!t&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1);case Y._class:return t||this.unexpected(),this.parseClass(s,!0);case Y._if:return this.parseIfStatement(s);case Y._return:return this.parseReturnStatement(s);case Y._switch:return this.parseSwitchStatement(s);case Y._throw:return this.parseThrowStatement(s);case Y._try:return this.parseTryStatement(s);case Y._const:case Y._var:return i=i||this.value,t||"var"===i||this.unexpected(),this.parseVarStatement(s,i);case Y._while:return this.parseWhileStatement(s);case Y._with:return this.parseWithStatement(s);case Y.braceL:return this.parseBlock();case Y.semi:return this.parseEmptyStatement(s);case Y._export:case Y._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===Y._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t||this.unexpected(),this.next(),this.parseFunctionStatement(s,!0);var a=this.value,o=this.parseExpression();return r===Y.name&&"Identifier"===o.type&&this.eat(Y.colon)?this.parseLabeledStatement(s,a,o):this.parseExpressionStatement(s,o)}},ht.parseBreakContinueStatement=function(t,e){var n=this,i="break"===e;this.next(),this.eat(Y.semi)||this.insertSemicolon()?t.label=null:this.type!==Y.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=n.labels[r];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(t.label&&i)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},ht.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ht.parseDoStatement=function(t){return this.next(),this.labels.push(lt),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(Y._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Y.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ht.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(lt),this.enterLexicalScope(),this.expect(Y.parenL),this.type===Y.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===Y._var||this.type===Y._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),(this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),!(this.type===Y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==i.declarations.length||"var"!==r&&i.declarations[0].init)?(e>-1&&this.unexpected(e),this.parseFor(t,i)):(this.options.ecmaVersion>=9&&(this.type===Y._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i))}var s=new d,a=this.parseExpression(!0,s);return this.type===Y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===Y._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(t,a)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},ht.parseFunctionStatement=function(t,e){return this.next(),this.parseFunction(t,!0,!1,e)},ht.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!this.strict&&this.type===Y._function),t.alternate=this.eat(Y._else)?this.parseStatement(!this.strict&&this.type===Y._function):null,this.finishNode(t,"IfStatement")},ht.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Y.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ht.parseSwitchStatement=function(t){var e=this;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Y.braceL),this.labels.push(pt),this.enterLexicalScope();for(var n,i=!1;this.type!==Y.braceR;)if(e.type===Y._case||e.type===Y._default){var r=e.type===Y._case;n&&e.finishNode(n,"SwitchCase"),t.cases.push(n=e.startNode()),n.consequent=[],e.next(),r?n.test=e.parseExpression():(i&&e.raiseRecoverable(e.lastTokStart,"Multiple default clauses"),i=!0,n.test=null),e.expect(Y.colon)}else n||e.unexpected(),n.consequent.push(e.parseStatement(!0));return this.exitLexicalScope(),n&&this.finishNode(n,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ht.parseThrowStatement=function(t){return this.next(),Z.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ft=[];ht.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Y._catch){var e=this.startNode();this.next(),this.eat(Y.parenL)?(e.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(e.param,"let"),this.expect(Y.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterLexicalScope()),e.body=this.parseBlock(!1),this.exitLexicalScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Y._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ht.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ht.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(lt),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},ht.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},ht.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ht.parseLabeledStatement=function(t,e,n){for(var i=this,r=0,s=i.labels;r<s.length;r+=1){s[r].name===e&&i.raise(n.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===Y._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=i.labels[o];if(c.statementStart!==t.start)break;c.statementStart=i.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(!0),("ClassDeclaration"===t.body.type||"VariableDeclaration"===t.body.type&&"var"!==t.body.kind||"FunctionDeclaration"===t.body.type&&(this.strict||t.body.generator||t.body.async))&&this.raiseRecoverable(t.body.start,"Invalid labeled declaration"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},ht.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ht.parseBlock=function(t){var e=this;void 0===t&&(t=!0);var n=this.startNode();for(n.body=[],this.expect(Y.braceL),t&&this.enterLexicalScope();!this.eat(Y.braceR);){var i=e.parseStatement(!0);n.body.push(i)}return t&&this.exitLexicalScope(),this.finishNode(n,"BlockStatement")},ht.parseFor=function(t,e){return t.init=e,this.expect(Y.semi),t.test=this.type===Y.semi?null:this.parseExpression(),this.expect(Y.semi),t.update=this.type===Y.parenR?null:this.parseExpression(),this.expect(Y.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},ht.parseForIn=function(t,e){var n=this.type===Y._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===n&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===n?this.parseExpression():this.parseMaybeAssign(),this.expect(Y.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,n)},ht.parseVar=function(t,e,n){var i=this;for(t.declarations=[],t.kind=n;;){var r=i.startNode();if(i.parseVarId(r,n),i.eat(Y.eq)?r.init=i.parseMaybeAssign(e):"const"!==n||i.type===Y._in||i.options.ecmaVersion>=6&&i.isContextual("of")?"Identifier"===r.id.type||e&&(i.type===Y._in||i.isContextual("of"))?r.init=null:i.raise(i.lastTokEnd,"Complex binding patterns require an initialization value"):i.unexpected(),t.declarations.push(i.finishNode(r,"VariableDeclarator")),!i.eat(Y.comma))break}return t},ht.parseVarId=function(t,e){t.id=this.parseBindingAtom(e),this.checkLVal(t.id,e,!1)},ht.parseFunction=function(t,e,n,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(t.generator=this.eat(Y.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&&(t.id="nullableID"===e&&this.type!==Y.name?null:this.parseIdent(),t.id&&this.checkLVal(t.id,this.inModule&&!this.inFunction?"let":"var"));var r=this.inGenerator,s=this.inAsync,a=this.yieldPos,o=this.awaitPos,c=this.inFunction;return this.inGenerator=t.generator,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),e||(t.id=this.type===Y.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n),this.inGenerator=r,this.inAsync=s,this.yieldPos=a,this.awaitPos=o,this.inFunction=c,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},ht.parseFunctionParams=function(t){this.expect(Y.parenL),t.params=this.parseBindingList(Y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ht.parseClass=function(t,e){var n=this;this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),r=!1;for(i.body=[],this.expect(Y.braceL);!this.eat(Y.braceR);){var s=n.parseClassMember(i);s&&"MethodDefinition"===s.type&&"constructor"===s.kind&&(r&&n.raise(s.start,"Duplicate constructor in the same class"),r=!0)}return t.body=this.finishNode(i,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},ht.parseClassMember=function(t){var e=this;if(this.eat(Y.semi))return null;var n=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var r=e.start,s=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===Y.parenL||i&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(r,s),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=i("static");var r=this.eat(Y.star),s=!1;r||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,r=this.options.ecmaVersion>=9&&this.eat(Y.star)):i("get")?n.kind="get":i("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),r&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor"),this.parseClassMethod(t,n,r,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ht.parseClassMethod=function(t,e,n,i){e.value=this.parseMethod(n,i),t.body.push(this.finishNode(e,"MethodDefinition"))},ht.parseClassId=function(t,e){t.id=this.type===Y.name?this.parseIdent():!0===e?this.unexpected():null},ht.parseClassSuper=function(t){t.superClass=this.eat(Y._extends)?this.parseExprSubscripts():null},ht.parseExport=function(t,e){var n=this;if(this.next(),this.eat(Y.star))return this.expectContextual("from"),this.type!==Y.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(Y._default)){this.checkExport(e,"default",this.lastTokStart);var i;if(this.type===Y._function||(i=this.isAsyncFunction())){var r=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(r,"nullableID",!1,i)}else if(this.type===Y._class){var s=this.startNode();t.declaration=this.parseClass(s,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Y.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,o=t.specifiers;a<o.length;a+=1){var c=o[a];n.checkUnreserved(c.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ht.checkExport=function(t,e,n){t&&(u(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},ht.checkPatternExport=function(t,e){var n=this,i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var r=0,s=e.properties;r<s.length;r+=1){var a=s[r];n.checkPatternExport(t,a)}else if("ArrayPattern"===i)for(var o=0,c=e.elements;o<c.length;o+=1){var u=c[o];u&&n.checkPatternExport(t,u)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},ht.checkVariableExport=function(t,e){var n=this;if(t)for(var i=0,r=e;i<r.length;i+=1){var s=r[i];n.checkPatternExport(t,s.id)}},ht.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ht.parseExportSpecifiers=function(t){var e=this,n=[],i=!0;for(this.expect(Y.braceL);!this.eat(Y.braceR);){if(i)i=!1;else if(e.expect(Y.comma),e.afterTrailingComma(Y.braceR))break;var r=e.startNode();r.local=e.parseIdent(!0),r.exported=e.eatContextual("as")?e.parseIdent(!0):r.local,e.checkExport(t,r.exported.name,r.exported.start),n.push(e.finishNode(r,"ExportSpecifier"))}return n},ht.parseImport=function(t){return this.next(),this.type===Y.string?(t.specifiers=ft,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===Y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ht.parseImportSpecifiers=function(){var t=this,e=[],n=!0;if(this.type===Y.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(Y.comma))return e}if(this.type===Y.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(Y.braceL);!this.eat(Y.braceR);){if(n)n=!1;else if(t.expect(Y.comma),t.afterTrailingComma(Y.braceR))break;var s=t.startNode();s.imported=t.parseIdent(!0),t.eatContextual("as")?s.local=t.parseIdent():(t.checkUnreserved(s.imported),s.local=s.imported),t.checkLVal(s.local,"let"),e.push(t.finishNode(s,"ImportSpecifier"))}return e},ht.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},ht.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var dt=ot.prototype;dt.toAssignable=function(t,e,n){var i=this;if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,s=t.properties;r<s.length;r+=1){var a=s[r];i.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||i.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},dt.toAssignableList=function(t,e){for(var n=this,i=t.length,r=0;r<i;r++){var s=t[r];s&&n.toAssignable(s,e)}if(i){var a=t[i-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},dt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},dt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Y.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},dt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Y.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Y.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Y.braceL:return this.parseObj(!0)}return this.parseIdent()},dt.parseBindingList=function(t,e,n){for(var i=this,r=[],s=!0;!this.eat(t);)if(s?s=!1:i.expect(Y.comma),e&&i.type===Y.comma)r.push(null);else{if(n&&i.afterTrailingComma(t))break;if(i.type===Y.ellipsis){var a=i.parseRestBinding();i.parseBindingListItem(a),r.push(a),i.type===Y.comma&&i.raise(i.start,"Comma is not permitted after the rest element"),i.expect(t);break}var o=i.parseMaybeDefault(i.start,i.startLoc);i.parseBindingListItem(o),r.push(o)}return r},dt.parseBindingListItem=function(t){return t},dt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Y.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},dt.checkLVal=function(t,e,n){var i=this;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(u(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e&&"none"!==e&&(("var"===e&&!this.canDeclareVarName(t.name)||"var"!==e&&!this.canDeclareLexicalName(t.name))&&this.raiseRecoverable(t.start,"Identifier '"+t.name+"' has already been declared"),"var"===e?this.declareVarName(t.name):this.declareLexicalName(t.name));break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,s=t.properties;r<s.length;r+=1){var a=s[r];i.checkLVal(a,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var o=0,c=t.elements;o<c.length;o+=1){var h=c[o];h&&i.checkLVal(h,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var gt=ot.prototype;gt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===s&&(e.proto&&(n&&n.doubleProto<0?n.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0));i="$"+i;var a=e[i];if(a){var o;o="init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s],o&&this.raiseRecoverable(r.start,"Redefinition of property")}else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}},gt.parseExpression=function(t,e){var n=this,i=this.start,r=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===Y.comma){var a=this.startNodeAt(i,r);for(a.expressions=[s];this.eat(Y.comma);)a.expressions.push(n.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return s},gt.parseMaybeAssign=function(t,e,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var i=!1,r=-1,s=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new d,i=!0);var a=this.start,o=this.startLoc;this.type!==Y.parenL&&this.type!==Y.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(n&&(c=n.call(this,c,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,u.left=this.type===Y.eq?this.toAssignable(c,!1,e):c,i||d.call(e),e.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),c},gt.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(Y.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(Y.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},gt.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},gt.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==Y._in)&&s>i){var a=this.type===Y.logicalOR||this.type===Y.logicalAND,o=this.value;this.next();var c=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1),c,u,s,r),l=this.buildBinary(e,n,t,h,o,a);return this.parseExprOp(l,e,n,i,r)}return t},gt.buildBinary=function(t,e,n,i,r,s){var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},gt.parseMaybeUnary=function(t,e){var n,i=this,r=this.start,s=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),o=this.type===Y.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(a,o?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=i.startNodeAt(r,s);c.operator=i.value,c.prefix=!1,c.argument=n,i.checkLVal(n),i.next(),n=i.finishNode(c,"UpdateExpression")}}return!e&&this.eat(Y.starstar)?this.buildBinary(r,s,n,this.parseMaybeUnary(null,!1),"**",!1):n},gt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,i=this.parseExprAtom(t),r="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return i;var s=this.parseSubscripts(i,e,n);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},gt.parseSubscripts=function(t,e,n,i){for(var r=this,s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end),a=void 0;;)if((a=r.eat(Y.bracketL))||r.eat(Y.dot)){var o=r.startNodeAt(e,n);o.object=t,o.property=a?r.parseExpression():r.parseIdent(!0),o.computed=!!a,a&&r.expect(Y.bracketR),t=r.finishNode(o,"MemberExpression")}else if(!i&&r.eat(Y.parenL)){var c=new d,u=r.yieldPos,h=r.awaitPos;r.yieldPos=0,r.awaitPos=0;var l=r.parseExprList(Y.parenR,r.options.ecmaVersion>=8,!1,c);if(s&&!r.canInsertSemicolon()&&r.eat(Y.arrow))return r.checkPatternErrors(c,!1),r.checkYieldAwaitInDefaultParams(),r.yieldPos=u,r.awaitPos=h,r.parseArrowExpression(r.startNodeAt(e,n),l,!0);r.checkExpressionErrors(c,!0),r.yieldPos=u||r.yieldPos,r.awaitPos=h||r.awaitPos;var p=r.startNodeAt(e,n);p.callee=t,p.arguments=l,t=r.finishNode(p,"CallExpression")}else{if(r.type!==Y.backQuote)return t;var f=r.startNodeAt(e,n);f.tag=t,f.quasi=r.parseTemplate({isTagged:!0}),t=r.finishNode(f,"TaggedTemplateExpression")}},gt.parseExprAtom=function(t){var e,n=this.potentialArrowAt===this.start;switch(this.type){case Y._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),e=this.startNode(),this.next(),this.type!==Y.dot&&this.type!==Y.bracketL&&this.type!==Y.parenL&&this.unexpected(),this.finishNode(e,"Super");case Y._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case Y.name:var i=this.start,r=this.startLoc,s=this.containsEsc,a=this.parseIdent(this.type!==Y.name);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(Y._function))return this.parseFunction(this.startNodeAt(i,r),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(Y.arrow))return this.parseArrowExpression(this.startNodeAt(i,r),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===Y.name&&!s)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(Y.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,r),[a],!0)}return a;case Y.regexp:var o=this.value;return e=this.parseLiteral(o.value),e.regex={pattern:o.pattern,flags:o.flags},e;case Y.num:case Y.string:return this.parseLiteral(this.value);case Y._null:case Y._true:case Y._false:return e=this.startNode(),e.value=this.type===Y._null?null:this.type===Y._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case Y.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case Y.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(Y.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case Y.braceL:return this.parseObj(!1,t);case Y._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case Y._class:return this.parseClass(this.startNode(),!1);case Y._new:return this.parseNew();case Y.backQuote:return this.parseTemplate();default:this.unexpected()}},gt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},gt.parseParenExpression=function(){this.expect(Y.parenL);var t=this.parseExpression();return this.expect(Y.parenR),t},gt.parseParenAndDistinguishExpression=function(t){var e,n=this,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,c=this.startLoc,u=[],h=!0,l=!1,p=new d,f=this.yieldPos,g=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Y.parenR;){if(h?h=!1:n.expect(Y.comma),s&&n.afterTrailingComma(Y.parenR,!0)){l=!0;break}if(n.type===Y.ellipsis){a=n.start,u.push(n.parseParenItem(n.parseRestBinding())),n.type===Y.comma&&n.raise(n.start,"Comma is not permitted after the rest element");break}u.push(n.parseMaybeAssign(!1,p,n.parseParenItem))}var m=this.start,v=this.startLoc;if(this.expect(Y.parenR),t&&!this.canInsertSemicolon()&&this.eat(Y.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=g,this.parseParenArrowList(i,r,u);u.length&&!l||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=g||this.awaitPos,u.length>1?(e=this.startNodeAt(o,c),e.expressions=u,this.finishNodeAt(e,"SequenceExpression",m,v)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(i,r);return y.expression=e,this.finishNode(y,"ParenthesizedExpression")}return e},gt.parseParenItem=function(t){return t},gt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var mt=[];gt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Y.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||n)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0),this.eat(Y.parenL)?t.arguments=this.parseExprList(Y.parenR,this.options.ecmaVersion>=8,!1):t.arguments=mt,this.finishNode(t,"NewExpression")},gt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===Y.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===Y.backQuote,this.finishNode(n,"TemplateElement")},gt.parseTemplate=function(t){var e=this;void 0===t&&(t={});var n=t.isTagged;void 0===n&&(n=!1);var i=this.startNode();this.next(),i.expressions=[];var r=this.parseTemplateElement({isTagged:n});for(i.quasis=[r];!r.tail;)e.type===Y.eof&&e.raise(e.pos,"Unterminated template literal"),e.expect(Y.dollarBraceL),i.expressions.push(e.parseExpression()),e.expect(Y.braceR),i.quasis.push(r=e.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(i,"TemplateLiteral")},gt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Y.name||this.type===Y.num||this.type===Y.string||this.type===Y.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Y.star)&&!Z.test(this.input.slice(this.lastTokEnd,this.start))},gt.parseObj=function(t,e){var n=this,i=this.startNode(),r=!0,s={};for(i.properties=[],this.next();!this.eat(Y.braceR);){if(r)r=!1;else if(n.expect(Y.comma),n.afterTrailingComma(Y.braceR))break;var a=n.parseProperty(t,e);t||n.checkPropClash(a,s,e),i.properties.push(a)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},gt.parseProperty=function(t,e){var n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Y.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===Y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===Y.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===Y.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(Y.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(Y.star),this.parsePropertyName(a,e)):i=!1,this.parsePropertyValue(a,t,n,i,r,s,e,o),this.finishNode(a,"Property")},gt.parsePropertyValue=function(t,e,n,i,r,s,a,o){if((n||i)&&this.type===Y.colon&&this.unexpected(),this.eat(Y.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===Y.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Y.comma||this.type===Y.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?(this.checkUnreserved(t.key),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,t.key):this.type===Y.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},gt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Y.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Y.bracketR),t.key;t.computed=!1}return t.key=this.type===Y.num||this.type===Y.string?this.parseExprAtom():this.parseIdent(!0)},gt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},gt.parseMethod=function(t,e){var n=this.startNode(),i=this.inGenerator,r=this.inAsync,s=this.yieldPos,a=this.awaitPos,o=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(Y.parenL),n.params=this.parseBindingList(Y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=i,this.inAsync=r,this.yieldPos=s,this.awaitPos=a,this.inFunction=o,this.finishNode(n,"FunctionExpression")},gt.parseArrowExpression=function(t,e,n){var i=this.inGenerator,r=this.inAsync,s=this.yieldPos,a=this.awaitPos,o=this.inFunction;return this.enterFunctionScope(),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.inGenerator=!1,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=i,this.inAsync=r,this.yieldPos=s,this.awaitPos=a,this.inFunction=o,this.finishNode(t,"ArrowFunctionExpression")},gt.parseFunctionBody=function(t,e){var n=e&&this.type!==Y.braceL,i=this.strict,r=!1;if(n)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!s||(r=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],r&&(this.strict=!0),this.checkParams(t,!i&&!r&&!e&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=a}this.exitFunctionScope(),this.strict&&t.id&&this.checkLVal(t.id,"none"),this.strict=i},gt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},gt.checkParams=function(t,e){for(var n=this,i={},r=0,s=t.params;r<s.length;r+=1){var a=s[r];n.checkLVal(a,"var",e?null:i)}},gt.parseExprList=function(t,e,n,i){for(var r=this,s=[],a=!0;!this.eat(t);){if(a)a=!1;else if(r.expect(Y.comma),e&&r.afterTrailingComma(t))break;var o=void 0;n&&r.type===Y.comma?o=null:r.type===Y.ellipsis?(o=r.parseSpread(i),i&&r.type===Y.comma&&i.trailingComma<0&&(i.trailingComma=r.start)):o=r.parseMaybeAssign(!1,i),s.push(o)}return s},gt.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;if(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Can not use 'await' as identifier inside an async function"),this.isKeyword(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))){(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))}},gt.parseIdent=function(t,e){var n=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===Y.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),t||this.checkUnreserved(n),n},gt.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===Y.semi||this.canInsertSemicolon()||this.type!==Y.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(Y.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")},gt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var vt=ot.prototype;vt.raise=function(t,e){var n=h(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},vt.raiseRecoverable=vt.raise,vt.curPosition=function(){if(this.options.locations)return new it(this.curLine,this.pos-this.lineStart)};var yt=ot.prototype,_t=Object.assign||function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var s=r[i];for(var a in s)u(s,a)&&(t[a]=s[a])}return t};yt.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},yt.exitFunctionScope=function(){this.scopeStack.pop()},yt.enterLexicalScope=function(){var t=this.scopeStack[this.scopeStack.length-1],e={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(e),_t(e.parentLexical,t.lexical,t.parentLexical)},yt.exitLexicalScope=function(){var t=this.scopeStack.pop(),e=this.scopeStack[this.scopeStack.length-1];_t(e.childVar,t.var,t.childVar)},yt.canDeclareVarName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!u(e.lexical,t)&&!u(e.parentLexical,t)},yt.canDeclareLexicalName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!u(e.lexical,t)&&!u(e.var,t)&&!u(e.childVar,t)},yt.declareVarName=function(t){this.scopeStack[this.scopeStack.length-1].var[t]=!0},yt.declareLexicalName=function(t){this.scopeStack[this.scopeStack.length-1].lexical[t]=!0};var xt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new rt(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},bt=ot.prototype;bt.startNode=function(){return new xt(this,this.start,this.startLoc)},bt.startNodeAt=function(t,e){return new xt(this,t,e)},bt.finishNode=function(t,e){return g.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},bt.finishNodeAt=function(t,e,n,i){return g.call(this,t,e,n,i)};var wt=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},Et={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},St=ot.prototype;St.initialContext=function(){return[Et.b_stat]},St.braceIsBlock=function(t){var e=this.curContext();return e===Et.f_expr||e===Et.f_stat||(t!==Y.colon||e!==Et.b_stat&&e!==Et.b_expr?t===Y._return||t===Y.name&&this.exprAllowed?Z.test(this.input.slice(this.lastTokEnd,this.start)):t===Y._else||t===Y.semi||t===Y.eof||t===Y.parenR||t===Y.arrow||(t===Y.braceL?e===Et.b_stat:t!==Y._var&&t!==Y.name&&!this.exprAllowed):!e.isExpr)},St.inGeneratorContext=function(){for(var t=this,e=this.context.length-1;e>=1;e--){var n=t.context[e];if("function"===n.token)return n.generator}return!1},St.updateContext=function(t){var e,n=this.type;n.keyword&&t===Y.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},Y.parenR.updateContext=Y.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);var t=this.context.pop();t===Et.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr},Y.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Et.b_stat:Et.b_expr),this.exprAllowed=!0},Y.dollarBraceL.updateContext=function(){this.context.push(Et.b_tmpl),this.exprAllowed=!0},Y.parenL.updateContext=function(t){var e=t===Y._if||t===Y._for||t===Y._with||t===Y._while;this.context.push(e?Et.p_stat:Et.p_expr),this.exprAllowed=!0},Y.incDec.updateContext=function(){},Y._function.updateContext=Y._class.updateContext=function(t){t.beforeExpr&&t!==Y.semi&&t!==Y._else&&(t!==Y.colon&&t!==Y.braceL||this.curContext()!==Et.b_stat)?this.context.push(Et.f_expr):this.context.push(Et.f_stat),this.exprAllowed=!1},Y.backQuote.updateContext=function(){this.curContext()===Et.q_tmpl?this.context.pop():this.context.push(Et.q_tmpl),this.exprAllowed=!1},Y.star.updateContext=function(t){if(t===Y._function){var e=this.context.length-1;this.context[e]===Et.f_expr?this.context[e]=Et.f_expr_gen:this.context[e]=Et.f_gen}this.exprAllowed=!0},Y.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Y.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(Tt.$LONE,Tt.General_Category),Tt.gc=Tt.General_Category,Tt.sc=Tt.Script_Extensions=Tt.scx=Tt.Script;var Mt=ot.prototype,At=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};At.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},At.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},At.prototype.at=function(t){var e=this.source,n=e.length;if(t>=n)return-1;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?i:(i<<10)+e.charCodeAt(t+1)-56613888},At.prototype.nextIndex=function(t){var e=this.source,n=e.length;if(t>=n)return n;var i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=n?t+1:t+2},At.prototype.current=function(){return this.at(this.pos)},At.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},At.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},At.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Mt.validateRegExpFlags=function(t){for(var e=this,n=t.validFlags,i=t.flags,r=0;r<i.length;r++){var s=i.charAt(r);-1===n.indexOf(s)&&e.raise(t.start,"Invalid regular expression flag"),i.indexOf(s,r+1)>-1&&e.raise(t.start,"Duplicate regular expression flag")}},Mt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Mt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},Mt.regexp_disjunction=function(t){var e=this;for(this.regexp_alternative(t);t.eat(124);)e.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Mt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Mt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Mt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Mt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Mt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Mt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Mt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Mt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Mt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Mt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Mt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Mt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Mt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!v(e)&&(t.lastIntValue=e,t.advance(),!0)},Mt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!v(n);)t.advance();return t.pos!==e},Mt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Mt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Mt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Mt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=m(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=m(t.lastIntValue);return!0}return!1},Mt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),y(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Mt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=t.current();return t.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(n=t.lastIntValue),_(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Mt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Mt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Mt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Mt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Mt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Mt.regexp_eatZero=function(t){return 48===t.current()&&!T(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Mt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Mt.regexp_eatControlLetter=function(t){var e=t.current();return!!x(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Mt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(r>=56320&&r<=57343)return t.lastIntValue=1024*(n-55296)+(r-56320)+65536,!0}t.pos=i,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&b(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Mt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Mt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Mt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(w(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Mt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},Mt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Tt.hasOwnProperty(e)&&-1!==Tt[e].indexOf(n)||t.raise("Invalid property name")},Mt.regexp_validateUnicodePropertyNameOrValue=function(t,e){-1===Tt.$LONE.indexOf(e)&&t.raise("Invalid property name")},Mt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";E(e=t.current());)t.lastStringValue+=m(e),t.advance();return""!==t.lastStringValue},Mt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";S(e=t.current());)t.lastStringValue+=m(e),t.advance();return""!==t.lastStringValue},Mt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Mt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Mt.regexp_classRanges=function(t){for(var e=this;this.regexp_eatClassAtom(t);){var n=t.lastIntValue;if(t.eat(45)&&e.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==n&&-1!==i||t.raise("Invalid character class"),-1!==n&&-1!==i&&n>i&&t.raise("Range out of order in character class")}}},Mt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||C(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},Mt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Mt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!T(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Mt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Mt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;T(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Mt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;M(n=t.current());)t.lastIntValue=16*t.lastIntValue+A(n),t.advance();return t.pos!==e},Mt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Mt.regexp_eatOctalDigit=function(t){var e=t.current();return C(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Mt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!M(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+A(r),t.advance()}return!0};var Ct=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new rt(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lt=ot.prototype;Lt.next=function(){this.options.onToken&&this.options.onToken(new Ct(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Lt.getToken=function(){return this.next(),new Ct(this)},"undefined"!=typeof Symbol&&(Lt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Y.eof,value:e}}}}),Lt.curContext=function(){return this.context[this.context.length-1]},Lt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Y.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Lt.readToken=function(t){return r(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Lt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Lt.skipBlockComment=function(){var t=this,e=this.options.onComment&&this.curPosition(),n=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations){$.lastIndex=n;for(var r;(r=$.exec(this.input))&&r.index<this.pos;)++t.curLine,t.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,i),n,this.pos,e,this.curPosition())},Lt.skipLineComment=function(t){for(var e=this,n=this.pos,i=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!c(r);)r=e.input.charCodeAt(++e.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(n+t,this.pos),n,this.pos,i,this.curPosition())},Lt.skipSpace=function(){var t=this;t:for(;this.pos<this.input.length;){var e=t.input.charCodeAt(t.pos);switch(e){case 32:case 160:++t.pos;break;case 13:10===t.input.charCodeAt(t.pos+1)&&++t.pos;case 10:case 8232:case 8233:++t.pos,t.options.locations&&(++t.curLine,t.lineStart=t.pos);break;case 47:switch(t.input.charCodeAt(t.pos+1)){case 42:t.skipBlockComment();break;case 47:t.skipLineComment(2);break;default:break t}break;default:if(!(e>8&&e<14||e>=5760&&J.test(String.fromCharCode(e))))break t;++t.pos}}},Lt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Lt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Y.ellipsis)):(++this.pos,this.finishToken(Y.dot))},Lt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Y.assign,2):this.finishOp(Y.slash,1)},Lt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?Y.star:Y.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=Y.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Y.assign,n+1):this.finishOp(i,n)},Lt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?Y.logicalOR:Y.logicalAND,2):61===e?this.finishOp(Y.assign,2):this.finishOp(124===t?Y.bitwiseOR:Y.bitwiseAND,1)},Lt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Y.assign,2):this.finishOp(Y.bitwiseXOR,1)},Lt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Z.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Y.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Y.assign,2):this.finishOp(Y.plusMin,1)},Lt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(Y.assign,n+1):this.finishOp(Y.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(Y.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Lt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Y.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Y.arrow)):this.finishOp(61===t?Y.eq:Y.prefix,1)},Lt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Y.parenL);case 41:return++this.pos,this.finishToken(Y.parenR);case 59:return++this.pos,this.finishToken(Y.semi);case 44:return++this.pos,this.finishToken(Y.comma);case 91:return++this.pos,this.finishToken(Y.bracketL);case 93:return++this.pos,this.finishToken(Y.bracketR);case 123:return++this.pos,this.finishToken(Y.braceL);case 125:return++this.pos,this.finishToken(Y.braceR);case 58:return++this.pos,this.finishToken(Y.colon);case 63:return++this.pos,this.finishToken(Y.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Y.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(Y.prefix,1)}this.raise(this.pos,"Unexpected character '"+L(t)+"'")},Lt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Lt.readRegexp=function(){for(var t,e,n=this,i=this.pos;;){n.pos>=n.input.length&&n.raise(i,"Unterminated regular expression");var r=n.input.charAt(n.pos);if(Z.test(r)&&n.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++n.pos}var s=this.input.slice(i,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var c=this.regexpState||(this.regexpState=new At(this));c.reset(i,s,o),this.validateRegExpFlags(c),this.validateRegExpPattern(c);var u=null;try{u=new RegExp(s,o)}catch(t){}return this.finishToken(Y.regexp,{pattern:s,flags:o,value:u})},Lt.readInt=function(t,e){for(var n=this,i=this.pos,r=0,s=0,a=null==e?1/0:e;s<a;++s){var o=n.input.charCodeAt(n.pos),c=void 0;if((c=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++n.pos,r=r*t+c}return this.pos===i||null!=e&&this.pos-i!==e?null:r},Lt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),r(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Y.num,e)},Lt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number"),n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1);var i=this.input.charCodeAt(this.pos);46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(i=this.input.charCodeAt(++this.pos),43!==i&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),r(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(e,this.pos),a=n?parseInt(s,8):parseFloat(s);return this.finishToken(Y.num,a)},Lt.readCodePoint=function(){var t,e=this.input.charCodeAt(this.pos);if(123===e){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t},Lt.readString=function(t){for(var e=this,n="",i=++this.pos;;){e.pos>=e.input.length&&e.raise(e.start,"Unterminated string constant");var r=e.input.charCodeAt(e.pos);if(r===t)break;92===r?(n+=e.input.slice(i,e.pos),n+=e.readEscapedChar(!1),i=e.pos):(c(r,e.options.ecmaVersion>=10)&&e.raise(e.start,"Unterminated string constant"),++e.pos)}return n+=this.input.slice(i,this.pos++),this.finishToken(Y.string,n)};var Pt={};Lt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Pt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Lt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Pt;this.raise(t,e)},Lt.readTmplToken=function(){for(var t=this,e="",n=this.pos;;){t.pos>=t.input.length&&t.raise(t.start,"Unterminated template");var i=t.input.charCodeAt(t.pos);if(96===i||36===i&&123===t.input.charCodeAt(t.pos+1))return t.pos!==t.start||t.type!==Y.template&&t.type!==Y.invalidTemplate?(e+=t.input.slice(n,t.pos),t.finishToken(Y.template,e)):36===i?(t.pos+=2,t.finishToken(Y.dollarBraceL)):(++t.pos,t.finishToken(Y.backQuote));if(92===i)e+=t.input.slice(n,t.pos),e+=t.readEscapedChar(!0),n=t.pos;else if(c(i)){switch(e+=t.input.slice(n,t.pos),++t.pos,i){case 13:10===t.input.charCodeAt(t.pos)&&++t.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(i)}t.options.locations&&(++t.curLine,t.lineStart=t.pos),n=t.pos}else++t.pos}},Lt.readInvalidTemplateToken=function(){for(var t=this;this.pos<this.input.length;this.pos++)switch(t.input[t.pos]){case"\\":++t.pos;break;case"$":if("{"!==t.input[t.pos+1])break;case"`":return t.finishToken(Y.invalidTemplate,t.input.slice(t.start,t.pos))}this.raise(this.start,"Unterminated template")},Lt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return L(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return String.fromCharCode(e)}},Lt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Lt.readWord1=function(){var t=this;this.containsEsc=!1;for(var e="",n=!0,i=this.pos,a=this.options.ecmaVersion>=6;this.pos<this.input.length;){var o=t.fullCharCodeAtPos();if(s(o,a))t.pos+=o<=65535?1:2;else{if(92!==o)break;t.containsEsc=!0,e+=t.input.slice(i,t.pos);var c=t.pos;117!==t.input.charCodeAt(++t.pos)&&t.invalidStringToken(t.pos,"Expecting Unicode escape sequence \\uXXXX"),++t.pos;var u=t.readCodePoint();(n?r:s)(u,a)||t.invalidStringToken(c,"Invalid Unicode escape"),e+=L(u),i=t.pos}n=!1}return e+this.input.slice(i,this.pos)},Lt.readWord=function(){var t=this.readWord1(),e=Y.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=X[t]),this.finishToken(e,t)};var Rt,It,kt,Ot="5.7.3"},function(t,e){},function(t,e){},function(t,e,n){t.exports=n(47)}]);